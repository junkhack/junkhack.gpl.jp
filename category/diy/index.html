<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="profile" href="http://gmpg.org/xfn/11">
<link rel="pingback" href="/xmlrpc.php"> <noscript id="aonoscrcss"></noscript>
<title>DIY &#8211; JunkHack</title>
<meta name="robots" content="max-image-preview:large">
<link rel="dns-prefetch" href="//www.google.com">
<link rel="dns-prefetch" href="//www.googletagmanager.com">
<link rel="dns-prefetch" href="//fonts.googleapis.com">
<link rel="dns-prefetch" href="//pagead2.googlesyndication.com">
<link rel="alternate" type="application/rss+xml" title="JunkHack &raquo; フィード" href="/feed/">
<link rel="alternate" type="application/rss+xml" title="JunkHack &raquo; コメントフィード" href="/comments/feed/">
<link rel="alternate" type="application/rss+xml" title="JunkHack &raquo; DIY カテゴリーのフィード" href="/category/diy/feed/">
<link rel="stylesheet" id="wp-block-library-css" href="/wp-includes/css/dist/block-library/style.min.css?ver=5.8.3" type="text/css" media="all">
<link rel="stylesheet" id="contact-form-7-css" href="/wp-content/cache/autoptimize/css/autoptimize_single_76e12144b6be9bc0a17dd880c5566156.css?ver=5.4.1" type="text/css" media="all">
<link rel="stylesheet" id="contact-form-7-confirm-css" href="/wp-content/cache/autoptimize/css/autoptimize_single_c605b424176e2b3541570e9ebd66830b.css?ver=5.1" type="text/css" media="all">
<link rel="stylesheet" id="wpel-style-css" href="/wp-content/cache/autoptimize/css/autoptimize_single_04d23f0dc44b526ca48d1d564eb7537c.css?ver=2.50" type="text/css" media="all">
<link rel="stylesheet" id="wpfront-scroll-top-css" href="/wp-content/plugins/wpfront-scroll-top/css/wpfront-scroll-top.min.css?ver=2.0.7.08086" type="text/css" media="all">
<link rel="stylesheet" id="related-frontend-css-css" href="/wp-content/cache/autoptimize/css/autoptimize_single_ce8bbdb7cabcf5f0fa8d28d9868b7638.css?ver=0.1.0" type="text/css" media="all">
<link rel="stylesheet" id="hew-fonts-css" href="https://fonts.googleapis.com/css?family=Open+Sans%3A400%2C600%2C700%2C400italic%2C600italic%2C700italic%7CNoto+Serif%3A400%2C700%2C400italic%2C700italic&#038;subset=latin" type="text/css" media="all">
<link rel="stylesheet" id="genericons-css" href="/wp-content/cache/autoptimize/css/autoptimize_single_c14dd6e84e694a66c7e27f11220ed49a.css?ver=3.4.1" type="text/css" media="all">
<link rel="stylesheet" id="hew-style-css" href="/wp-content/cache/autoptimize/css/autoptimize_single_923a46d76606f1b43e3f3639ca289d5f.css?ver=5.8.3" type="text/css" media="all"> <script type="text/javascript" src="/wp-content/plugins/jquery-manager/assets/js/jquery-3.5.1.min.js" id="jquery-core-js"></script> <script type="text/javascript" src="/wp-content/plugins/jquery-manager/assets/js/jquery-migrate-3.3.0.min.js" id="jquery-migrate-js"></script>  <script type="text/javascript" src="https://www.googletagmanager.com/gtag/js?id=UA-199105184-1" id="google_gtagjs-js" async></script> <script type="text/javascript" id="google_gtagjs-js-after">window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}
gtag('set', 'linker', {"domains":["hack.gpl.jp"]} );
gtag("js", new Date());
gtag("set", "developer_id.dZTNiMT", true);
gtag("config", "UA-199105184-1", {"anonymize_ip":true});</script> <link rel="https://api.w.org/" href="/wp-json/">
<link rel="alternate" type="application/json" href="/wp-json/wp/v2/categories/25">
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="/wp-includes/wlwmanifest.xml">
<meta name="generator" content="WordPress 5.8.3">
<meta name="generator" content="Site Kit by Google 1.48.1">
<meta name="google-adsense-platform-account" content="ca-host-pub-2644536267352236">
<meta name="google-adsense-platform-domain" content="sitekit.withgoogle.com">  <script async="async" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2711753458083215" crossorigin="anonymous" type="text/javascript"></script> <style id="uagb-style-conditional-extension">@media (min-width: 1025px){body .uag-hide-desktop.uagb-google-map__wrap,body .uag-hide-desktop{display:none}}@media (min-width: 768px) and (max-width: 1024px){body .uag-hide-tab.uagb-google-map__wrap,body .uag-hide-tab{display:none}}@media (max-width: 767px){body .uag-hide-mob.uagb-google-map__wrap,body .uag-hide-mob{display:none}}</style>
</head>  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-161935417-3"></script> <script>window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-161935417-3');</script> <body class="archive category category-diy category-25 has-sidebar has-header-image">
<div id="page" class="hfeed site">
<div id="widgets-wrapper" class="hide"><div id="secondary" class="wrap top-widget-area" role="complementary"><div id="sidebar-4" class="widget-area" role="complementary"><aside id="block-2" class="widget widget_block"><script async src="https://cse.google.com/cse.js?cx=df8210082ba786774"></script> <div class="gcse-search"></div></aside></div></div></div> <a class="skip-link screen-reader-text" href="#content">コンテンツへ移動</a><header id="masthead" class="site-header" role="banner"> <a class="site-logo" href="/" title="JunkHack" rel="home noopener noreferrer" data-wpel-link="internal"> <noscript><img src="https://secure.gravatar.com/avatar/997681319c3cbb0bdcca95770d5edaa6/?s=80&#038;d=mm" width="80" height="80" alt="" class="no-grav header-image"></noscript>
<img src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%2080%2080%22%3E%3C/svg%3E" data-src="https://secure.gravatar.com/avatar/997681319c3cbb0bdcca95770d5edaa6/?s=80&#038;d=mm" width="80" height="80" alt="" class="lazyload no-grav header-image"> </a><div class="site-branding">
<h1 class="site-title"><a href="/" rel="home noopener noreferrer" data-wpel-link="internal">JunkHack</a></h1>
<h2 class="site-description">アリエクでポチった JUNKHACK</h2>
</div>
<nav id="site-navigation" class="main-navigation" role="navigation"> <button class="menu-toggle toggle-button"><span class="screen-reader-text">メインメニュー</span></button><div class="menu-new-menu-container"><ul id="menu-new-menu" class="menu">
<li id="menu-item-10686" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-10686"><a href="/list/" data-wpel-link="internal" rel="noopener noreferrer">List</a></li>
<li id="menu-item-11016" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-11016"><a href="/mail/" data-wpel-link="internal" rel="noopener noreferrer">CONTACT</a></li>
<li id="menu-item-10671" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-10671"><a href="https://jh.gpl.jp/" data-wpel-link="external" target="_blank" rel="external noopener noreferrer" class="wpel-icon-right">Mirror Netlify<span class="wpel-icon wpel-image wpel-icon-1"></span></a></li>
</ul></div></nav><div class="toggle-wrapper"> <a href="#" class="widgets-toggle toggle-button" title="ウィジェット"> <span class="screen-reader-text">ウィジェット</span> </a>
</div></header><div id="content" class="site-content"><section id="primary" class="content-area"><main id="main" class="site-main" role="main"><header class="page-header"><h1 class="page-title">カテゴリー: <span>DIY</span>
</h1></header><article id="post-10256" class="post-10256 post type-post status-publish format-standard has-post-thumbnail hentry category-diy"><div class="entry-wrapper">
<header class="entry-header"> <span class="entry-format theme-genericon"></span><div class="entry-meta"> <span class="posted-on">投稿日: <a href="/2021/03/09/ln4056-ic-type-c/" rel="bookmark noopener noreferrer" data-wpel-link="internal"><time class="entry-date published" datetime="2021-03-09T02:34:09+09:00">2021年3月9日</time><time class="updated" datetime="2021-05-02T06:56:38+09:00">2021年5月2日</time></a> </span><span class="posted-on">更新日:2021年5月2日</span> <span class="categories"> <a href="/category/diy/" rel="category tag noopener noreferrer" data-wpel-link="internal">DIY</a></span>
</div>
<h1 class="entry-title"><a href="/2021/03/09/ln4056-ic-type-c/" rel="bookmark noopener noreferrer" data-wpel-link="internal">謎のICが載ったType-Cリポ充電基板でポケットオシロを電池仕様に！</a></h1></header><div class="entry-content">
<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex"><div class="w_b_wrap w_b_wrap_talk w_b_L w_b_flex w_b_div">
<div class="w_b_ava_box w_b_relative w_b_ava_L w_b_col w_b_f_n w_b_div">
<div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_L w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div"> <noscript><img src="/wp-content/uploads/2020/09/abata.png" width="96" height="96" alt="じゃんくはっく" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img"></noscript>
<img src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%2096%2096%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2020/09/abata.png" width="96" height="96" alt="じゃんくはっく" class="lazyload w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img">
</div></div></div>
<div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">じゃんくはっく</div>
</div>
<div class="w_b_bal_box w_b_bal_L w_b_relative w_b_direction_L w_b_w100 w_b_div">
<div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewbox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "></polygon></svg></div>
<div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div"><div class="w_b_bal_wrap w_b_bal_wrap_L w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_L w_b_shadow_L w_b_ta_L w_b_div"><div class="w_b_quote w_b_div"><p>ポケットオシロをType-C充電仕様にしたよ！</p></div></div></div></div>
</div>
</div></div></div>
<div class="wp-block-image"><figure class="aligncenter size-large"><noscript><img width="1024" height="758" src="/wp-content/uploads/2021/03/image-11-1024x758.png" alt="" class="wp-image-10257" srcset="/wp-content/uploads/2021/03/image-11-1024x758.png 1024w, /wp-content/uploads/2021/03/image-11-768x568.png 768w, /wp-content/uploads/2021/03/image-11-984x728.png 984w, /wp-content/uploads/2021/03/image-11.png 1073w" sizes="(max-width: 1024px) 100vw, 1024px"></noscript>
<img width="1024" height="758" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%201024%20758%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/03/image-11-1024x758.png" alt="" class="lazyload wp-image-10257" data-srcset="/wp-content/uploads/2021/03/image-11-1024x758.png 1024w, /wp-content/uploads/2021/03/image-11-768x568.png 768w, /wp-content/uploads/2021/03/image-11-984x728.png 984w, /wp-content/uploads/2021/03/image-11.png 1073w" data-sizes="(max-width: 1024px) 100vw, 1024px"></figure></div>
<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex w_b_mla w_b_jc_fe"><div class="w_b_wrap w_b_wrap_talk w_b_R w_b_flex w_b_jc_fe w_b_div">
<div class="w_b_bal_box w_b_bal_R w_b_relative w_b_direction_R w_b_w100 w_b_div">
<div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewbox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "></polygon></svg></div>
<div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div"><div class="w_b_bal_wrap w_b_bal_wrap_R w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_R w_b_shadow_R w_b_ta_L w_b_div"><div class="w_b_quote w_b_div"><p>おもちゃみたいなオシロスコープね！</p></div></div></div></div>
</div>
<div class="w_b_ava_box w_b_relative w_b_ava_R w_b_col w_b_f_n w_b_div">
<div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_R w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div"> <noscript><img src="/wp-content/uploads/2020/09/pi-.png" width="96" height="96" alt="ぴー" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img"></noscript>
<img src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%2096%2096%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2020/09/pi-.png" width="96" height="96" alt="ぴー" class="lazyload w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img">
</div></div></div>
<div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">ぴー</div>
</div>
</div></div></div>
<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex"><div class="w_b_wrap w_b_wrap_talk w_b_L w_b_flex w_b_div">
<div class="w_b_ava_box w_b_relative w_b_ava_L w_b_col w_b_f_n w_b_div">
<div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_L w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div"> <noscript><img src="/wp-content/uploads/2020/09/abata.png" width="96" height="96" alt="じゃんくはっく" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img"></noscript>
<img src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%2096%2096%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2020/09/abata.png" width="96" height="96" alt="じゃんくはっく" class="lazyload w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img">
</div></div></div>
<div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">じゃんくはっく</div>
</div>
<div class="w_b_bal_box w_b_bal_L w_b_relative w_b_direction_L w_b_w100 w_b_div">
<div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewbox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "></polygon></svg></div>
<div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div"><div class="w_b_bal_wrap w_b_bal_wrap_L w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_L w_b_shadow_L w_b_ta_L w_b_div"><div class="w_b_quote w_b_div"><p>おもちゃ感がいいでしょ！　でも、結構使えるヤツなのよ。</p></div></div></div></div>
</div>
</div></div></div>
<p>さて、今回はこの前、アリエクでポチった１枚あたり45円のリポ充電基板が届いたので早速使ってみました。基板はこんな感じです。</p>
<div class="wp-block-image"><figure class="aligncenter size-large"><noscript><img width="1024" height="768" src="/wp-content/uploads/2021/03/image-12-1024x768.png" alt="" class="wp-image-10258" srcset="/wp-content/uploads/2021/03/image-12-1024x768.png 1024w, /wp-content/uploads/2021/03/image-12-768x576.png 768w, /wp-content/uploads/2021/03/image-12-984x738.png 984w, /wp-content/uploads/2021/03/image-12.png 1213w" sizes="(max-width: 1024px) 100vw, 1024px"></noscript>
<img width="1024" height="768" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%201024%20768%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/03/image-12-1024x768.png" alt="" class="lazyload wp-image-10258" data-srcset="/wp-content/uploads/2021/03/image-12-1024x768.png 1024w, /wp-content/uploads/2021/03/image-12-768x576.png 768w, /wp-content/uploads/2021/03/image-12-984x738.png 984w, /wp-content/uploads/2021/03/image-12.png 1213w" data-sizes="(max-width: 1024px) 100vw, 1024px"></figure></div>
<h3>リチウムポリマー充放電保護基板</h3>
<blockquote class="wp-block-quote">
<p>リポ充電基盤のType-C版が出てたんでポチった！</p>
<cite><a href="/2021/02/20/type-c/" target="_blank" rel="noreferrer noopener" data-wpel-link="internal">/2021/02/20/type-c/</a></cite>
</blockquote>
<div class="wp-block-image"><figure class="aligncenter size-large"><noscript><img width="653" height="489" src="/wp-content/uploads/2021/03/image-18.png" alt="" class="wp-image-10278"></noscript>
<img width="653" height="489" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20653%20489%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/03/image-18.png" alt="" class="lazyload wp-image-10278"></figure></div>
<p>この前、買ったんですが結構届くのが速かったですね。写真のように繋がった状態で送られてきますので、手で折って分離します。基板が薄いので簡単に分離できます。</p>
<p>これのマイクロUSB版はだいぶ昔に以下で紹介しています。</p>
<blockquote class="wp-block-quote">
<p>5V 18650　リチウムバッテリー充電モジュール</p>
<cite><em>投稿日:&nbsp;</em><a rel="noreferrer noopener" href="/2015/05/10/5v-18650%e3%80%80%e3%83%aa%e3%83%81%e3%82%a6%e3%83%a0%e3%83%90%e3%83%83%e3%83%86%e3%83%aa%e3%83%bc%e5%85%85%e9%9b%bb%e3%83%a2%e3%82%b8%e3%83%a5%e3%83%bc%e3%83%ab/" target="_blank" data-wpel-link="internal">2015年5月10日</a></cite>
</blockquote>
<p>このメインICはTP4056だったはずですが、今回の基板には型番・LN4056っていう刻印があります。</p>
<div class="wp-block-image"><figure class="aligncenter size-large"><noscript><img width="560" height="414" src="/wp-content/uploads/2021/03/image-13.png" alt="" class="wp-image-10259"></noscript>
<img width="560" height="414" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20560%20414%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/03/image-13.png" alt="" class="lazyload wp-image-10259"></figure></div>
<p>これ、スペックシートが出てきませんね。これは、まぁTP4056の互換チップなんだと思います。多分作っているのはここ。</p>
<blockquote class="wp-block-quote">
<p>上海南麟电子股份有限公司<br>Shanghai Nanlin Electronics Co.、Ltd</p>
<cite>http://www.natlinear.com/</cite>
</blockquote>
<p>南麟っていうのが愛称ですかね。中国のサイトを深く潜ればPDFもあるとは思いますが、これ以上追わず。工作したいので。近い型番だと、以下にPDFがあります。</p>
<blockquote class="wp-block-quote">
<p>南麟PDF</p>
<cite>http://www.natlinear.com/uploadfiles/2014/LN/</cite>
</blockquote>
<p>工作終わってから、気になって探しました。結果、以下にありました。</p>
<blockquote class="wp-block-quote">
<p>LN4056H</p>
<cite>http://www.icdemi.com/viewManual.aspx?p=LN4056H.pdf</cite>
</blockquote>
<p>製品概要を和訳すると以下です。</p>
<blockquote class="wp-block-quote">
<p>USBインターフェースと互換性のある1.0Aリニアバッテリー管理チップ<br><br>■製品概要<br>LN4056Hは、定電流/定電圧で単セル充電式リチウム電池を充電できる充電器回路部品です。このデバイスは内部にパワートランジスタを備えており、アプリケーションで外部電流検出抵抗やブロッキングダイオードを必要としません。 LN4056Hは、周辺機器をほとんど必要とせず、USBバスの技術仕様に準拠しているため、ポータブルアプリケーションに非常に適しています。<br>熱変調​​回路は、デバイスの消費電力が比較的高い場合、または周囲温度が比較的高い場合に、チップ温度を安全な範囲内に制御できます。内部固定定電圧充電電圧は4.2Vで、外部抵抗で調整することもできます。充電電流は外部抵抗によって設定されます。入力電圧（ACアダプターまたはUSB電源）の電源を切ると、LN4056Hは自動的に低電力スリープモードになり、バッテリーの消費電流は0.1μA未満になります。バッテリ電圧が入力電圧よりも高い場合、内蔵パワーMOSFETは自動的にオフになります。その他の機能には、低入力電圧ラッチ、自動再充電、バッテリー温度監視、および充電ステータス/充電終了ステータス表示が含まれます。 LN4056Hは、イネーブルピンを介して充電をオフにすることができ、オフ状態のチップの静的消費電力は20uA未満です。チップには、バッテリ逆接続保護があります。<br>LN4056Hは、熱的に強化された8ピンスモールアウトラインパッケージESOP8を採用しています。</p>
<p>Local：<a href="/wp-content/uploads/2021/03/LN4056H.pdf" target="_blank" rel="noreferrer noopener" data-wpel-link="internal">pdf</a></p>
</blockquote>
<h3>バッテリーに繋がずUSBを接続すると？</h3>
<p>基板に電池を繋がないと、青色LEDが常時点灯して赤色LEDが不規則に点滅して光ります。この挙動はTP4056と同じですね。</p>
<div class="wp-block-image"><figure class="aligncenter size-large"><noscript><img width="889" height="335" src="/wp-content/uploads/2021/03/image-14.png" alt="" class="wp-image-10260" srcset="/wp-content/uploads/2021/03/image-14.png 889w, /wp-content/uploads/2021/03/image-14-768x289.png 768w" sizes="(max-width: 889px) 100vw, 889px"></noscript>
<img width="889" height="335" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20889%20335%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/03/image-14.png" alt="" class="lazyload wp-image-10260" data-srcset="/wp-content/uploads/2021/03/image-14.png 889w, /wp-content/uploads/2021/03/image-14-768x289.png 768w" data-sizes="(max-width: 889px) 100vw, 889px"></figure></div>
<p>詳しく検査はしていませんが、仕様は同じと思うので組み込んでみることにします。</p>
<h3>ポケットオシロをType-C版に変更</h3>
<p>DSO Shellというポケットオシロですが、リポ電池仕様に変更してつかっていました。これは、USBからリチウムポリマー電池に充電するユニット（青い小さな基板）と、５Vから９Vに昇圧するDCDCコンバーター（写真の黒いやつ）が入っています。</p>
<p>以前、使っていた、マイクロUSB仕様の充電するユニットを今回のType-C仕様に交換します。まずは古いの取り払う作業をしたのですが、グルーガンで固定していただけですが、かなり強力に付いていました。写真は、古いのを取って新しいのに交換済みの状態です。</p>
<div class="wp-block-image"><figure class="aligncenter size-large"><noscript><img width="944" height="662" src="/wp-content/uploads/2021/03/image-15.png" alt="" class="wp-image-10261" srcset="/wp-content/uploads/2021/03/image-15.png 944w, /wp-content/uploads/2021/03/image-15-768x539.png 768w" sizes="(max-width: 944px) 100vw, 944px"></noscript>
<img width="944" height="662" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20944%20662%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/03/image-15.png" alt="" class="lazyload wp-image-10261" data-srcset="/wp-content/uploads/2021/03/image-15.png 944w, /wp-content/uploads/2021/03/image-15-768x539.png 768w" data-sizes="(max-width: 944px) 100vw, 944px"></figure></div>
<p>ちょうど、電池も寿命で充電できなくなっていたので両方とも交換しました。バッテリーに繋いだ状態だと、赤色LEDだけ光って充電されます。そして、充電が完了すると青色LEDだけが光ります。</p>
<div class="wp-block-image"><figure class="aligncenter size-large"><noscript><img width="939" height="697" src="/wp-content/uploads/2021/03/image-16.png" alt="" class="wp-image-10262" srcset="/wp-content/uploads/2021/03/image-16.png 939w, /wp-content/uploads/2021/03/image-16-768x570.png 768w" sizes="(max-width: 939px) 100vw, 939px"></noscript>
<img width="939" height="697" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20939%20697%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/03/image-16.png" alt="" class="lazyload wp-image-10262" data-srcset="/wp-content/uploads/2021/03/image-16.png 939w, /wp-content/uploads/2021/03/image-16-768x570.png 768w" data-sizes="(max-width: 939px) 100vw, 939px"></figure></div>
<p>黒い基板は、DSO Shellの電源電圧は９Vなので5Vを昇圧する基板ですが、これは交換せず使い回しします。</p>
<div class="wp-block-image"><figure class="aligncenter size-large"><noscript><img width="750" height="603" src="/wp-content/uploads/2021/03/image-17.png" alt="" class="wp-image-10263"></noscript>
<img width="750" height="603" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20750%20603%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/03/image-17.png" alt="" class="lazyload wp-image-10263"></figure></div>
<p>上が古い基板で、下が今回のです。大きさは同じですね。基板の厚みは今回のType-Cのが薄かったです。コストカットでしょうか。まぁ、でも薄いほうが組込しやすいので、問題ないですけどね。</p>
<h3>この電池でポケットオシロはどのくらい動く？</h3>
<p>このリポ電池は250mahです。満充電でどのくらい動くのでしょうか。あまり気にしたことがないので、確認してみます。満充電した状態から、動かしっぱなしにしてどのくらい電池が持つのか？　電源ON・・・・</p>
<p>今の所10分くらい経過していますが、まだ動いていますね。この電池もアリエクでポチったやつです。5年くらい前に買って、まだ数個残っています。</p>
<blockquote class="wp-block-quote">
<p>250mahのかわいいLipo到着</p>
<cite>リンク</cite>
</blockquote>
<p>さらに10分経過しましたが、まだ動いていますね。・・・・さらに5分経過。結構もちますね！　さらに5分したところで画面が点滅しました。およそ30分っていう感じですね。これだけ持てば十分です。この状態から満充電までは25分くらいでした。</p>
<h3>まとめ</h3>
<p>今回、なんとなくわかったのは以下となります。</p>
<p>・<s>謎のICが載っていたが、おそらく互換チップ</s><br>・追加調査で、これは上海南麟电子股份有限公司のLN4056H<br>・USBから充電したら赤く点灯し、満充電で青く点灯。問題なく動作した<br>・詳細にチェックしていないので気が向いたら確認してみよう</p>
<h3>あとがき</h3>
<p>やっぱりType-Cの充電はいいですね。最近ケーブルがType-Cばっかりになっているんで、マイクロUSBだとケーブル探さないといけないときがあります。それに、上下どっちに刺してもいいので楽ですよね。Type-C万歳です。</p>
<p>あと、チップの出どころがわかりスペックシートがあってよかったです。リチウムポリマー電池に充電するので、仕様が不明なICだとなんだか気持ち悪いですよね。南麟という会社は、今まで知らなかったのですが上海に2004年にできた比較的新しいチップ製造メーカーのようです。ISO9001：2008も取得していて、電源管理チップが専門のようです。</p>
<h3>著者にメッセージ</h3>
<p>間違いのご指摘など、コメントじゃなくて、個人的にやりとりしたい場合は<a class="c-link-text" href="/mail/" target="_blank" rel="noopener noreferrer" data-wpel-link="internal">こちらから</a>どうぞ。お返事が遅くなるときもありますが、ご了承を。</p>
</div>
<footer class="entry-footer"></footer>
</div></article><article id="post-10186" class="post-10186 post type-post status-publish format-standard has-post-thumbnail hentry category-arduino category-diy category-osx category-wordpress"><div class="entry-wrapper">
<header class="entry-header"> <span class="entry-format theme-genericon"></span><div class="entry-meta"> <span class="posted-on">投稿日: <a href="/2021/03/01/make-mac-sskey-xiao/" rel="bookmark noopener noreferrer" data-wpel-link="internal"><time class="entry-date published" datetime="2021-03-01T02:20:05+09:00">2021年3月1日</time><time class="updated" datetime="2021-05-02T06:56:55+09:00">2021年5月2日</time></a> </span><span class="posted-on">更新日:2021年5月2日</span> <span class="categories"> <a href="/category/arduino/" rel="category tag noopener noreferrer" data-wpel-link="internal">arduino</a>, <a href="/category/diy/" rel="category tag noopener noreferrer" data-wpel-link="internal">DIY</a>, <a href="/category/osx/" rel="category tag noopener noreferrer" data-wpel-link="internal">osx</a>, <a href="/category/wordpress/" rel="category tag noopener noreferrer" data-wpel-link="internal">WordPress</a></span>
</div>
<h1 class="entry-title"><a href="/2021/03/01/make-mac-sskey-xiao/" rel="bookmark noopener noreferrer" data-wpel-link="internal">XIAOでMacのスクリーンショット専用USBキーを作るDIY</a></h1></header><div class="entry-content">
<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex"><div class="w_b_wrap w_b_wrap_talk w_b_L w_b_flex w_b_div">
<div class="w_b_ava_box w_b_relative w_b_ava_L w_b_col w_b_f_n w_b_div">
<div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_L w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div"> <noscript><img src="/wp-content/uploads/2020/09/abata.png" width="96" height="96" alt="じゃんくはっく" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img"></noscript>
<img src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%2096%2096%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2020/09/abata.png" width="96" height="96" alt="じゃんくはっく" class="lazyload w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img">
</div></div></div>
<div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">じゃんくはっく</div>
</div>
<div class="w_b_bal_box w_b_bal_L w_b_relative w_b_direction_L w_b_w100 w_b_div">
<div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewbox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "></polygon></svg></div>
<div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div"><div class="w_b_bal_wrap w_b_bal_wrap_L w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_L w_b_shadow_L w_b_ta_L w_b_div"><div class="w_b_quote w_b_div"><p>スクショの専用キーがほしい！</p></div></div></div></div>
</div>
</div></div></div>
<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex w_b_mla w_b_jc_fe"><div class="w_b_wrap w_b_wrap_talk w_b_R w_b_flex w_b_jc_fe w_b_div">
<div class="w_b_bal_box w_b_bal_R w_b_relative w_b_direction_R w_b_w100 w_b_div">
<div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewbox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "></polygon></svg></div>
<div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div"><div class="w_b_bal_wrap w_b_bal_wrap_R w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_R w_b_shadow_R w_b_ta_L w_b_div"><div class="w_b_quote w_b_div"><p>Macだと、シフト＋コマンド＋３とかの？</p></div></div></div></div>
</div>
<div class="w_b_ava_box w_b_relative w_b_ava_R w_b_col w_b_f_n w_b_div">
<div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_R w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div"> <noscript><img src="/wp-content/uploads/2020/09/pi-.png" width="96" height="96" alt="ぴー" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img"></noscript>
<img src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%2096%2096%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2020/09/pi-.png" width="96" height="96" alt="ぴー" class="lazyload w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img">
</div></div></div>
<div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">ぴー</div>
</div>
</div></div></div>
<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex"><div class="w_b_wrap w_b_wrap_talk w_b_L w_b_flex w_b_div">
<div class="w_b_ava_box w_b_relative w_b_ava_L w_b_col w_b_f_n w_b_div">
<div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_L w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div"> <noscript><img src="/wp-content/uploads/2020/09/abata.png" width="96" height="96" alt="じゃんくはっく" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img"></noscript>
<img src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%2096%2096%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2020/09/abata.png" width="96" height="96" alt="じゃんくはっく" class="lazyload w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img">
</div></div></div>
<div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">じゃんくはっく</div>
</div>
<div class="w_b_bal_box w_b_bal_L w_b_relative w_b_direction_L w_b_w100 w_b_div">
<div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewbox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "></polygon></svg></div>
<div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div"><div class="w_b_bal_wrap w_b_bal_wrap_L w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_L w_b_shadow_L w_b_ta_L w_b_div"><div class="w_b_quote w_b_div"><p>Mac標準だとそうだけど、Skitchっていうスクショツール使ってるからシフト＋コマンド＋５だね。</p></div></div></div></div>
</div>
</div></div></div>
<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex w_b_mla w_b_jc_fe"><div class="w_b_wrap w_b_wrap_talk w_b_R w_b_flex w_b_jc_fe w_b_div">
<div class="w_b_bal_box w_b_bal_R w_b_relative w_b_direction_R w_b_w100 w_b_div">
<div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewbox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "></polygon></svg></div>
<div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div"><div class="w_b_bal_wrap w_b_bal_wrap_R w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_R w_b_shadow_R w_b_ta_L w_b_div"><div class="w_b_quote w_b_div"><p>いろんな需要があると思うからカスタマイズできるといいね</p></div></div></div></div>
</div>
<div class="w_b_ava_box w_b_relative w_b_ava_R w_b_col w_b_f_n w_b_div">
<div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_R w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div"> <noscript><img src="/wp-content/uploads/2020/09/pi-.png" width="96" height="96" alt="ぴー" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img"></noscript>
<img src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%2096%2096%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2020/09/pi-.png" width="96" height="96" alt="ぴー" class="lazyload w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img">
</div></div></div>
<div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">ぴー</div>
</div>
</div></div></div>
<p>今回のDIYは、ちょっと実用的なものを作ろうかと思います</p>
<p>最近、はまっている小さくて安いArduino互換機、XIAOを使ってカスタマイズできるキーボードを作ろうと思います！　冒頭でも少し触れましたが、MacのスクショアプリでSkitchっていうツール使っているんですが、このスクショのショート専用のキーボードを作ろうかと。ショートカットは、シフト＋コマンド＋５ですが、３つもボタンを押さないといけないので、１ボタンだと助かります。</p>
<div class="wp-block-image"><figure class="aligncenter size-large"><noscript><img width="267" height="194" src="/wp-content/uploads/2021/02/image-6.png" alt="" class="wp-image-10197"></noscript>
<img width="267" height="194" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20267%20194%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/02/image-6.png" alt="" class="lazyload wp-image-10197"></figure></div>
<p>その後、Skitchの編集メニューから「画像をコピー」でクリップボードに入れてWordPressのローカルアプリに貼り付けるのが、一連の動きです。このショートカットがシフト＋コマンド＋C　です。</p>
<div class="wp-block-image"><figure class="aligncenter size-large"><noscript><img width="221" height="384" src="/wp-content/uploads/2021/02/image-7.png" alt="" class="wp-image-10198"></noscript>
<img width="221" height="384" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20221%20384%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/02/image-7.png" alt="" class="lazyload wp-image-10198"></figure></div>
<p>構想では、この２つのボタンが専用であるといいなと。キャンセルしたいときにESCキーがあると便利かもしれませんね。</p>
<h3>使えるUSBライブラリは？</h3>
<blockquote class="wp-block-quote">
<p>TinyUSB Mouse and Keyboard library</p>
<cite><a href="https://github.com/cyborg5/TinyUSB_Mouse_and_Keyboard/" target="_blank" rel="noreferrer noopener external" data-wpel-link="external" class="wpel-icon-right">https://github.com/cyborg5/TinyUSB_Mouse_and_Keyboard/<span class="wpel-icon wpel-image wpel-icon-1"></span></a></cite>
</blockquote>
<p>このライブラリは、Chris Youngさんが統合したTinyUSBです。以下で紹介されています。</p>
<blockquote class="wp-block-quote"><p><a href="https://learn.adafruit.com/mouse-and-keyboard-control-using-tinyusb-and-ble/overview" target="_blank" rel="noreferrer noopener external" data-wpel-link="external" class="wpel-icon-right">Mouse and Keyboard Control Using TinyUSB and BLE<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p></blockquote>
<p>examplesを試したのですが、記述がわかりやすいし使いやすそうだったのでこれでやってみることにします。他にも、Seeedの紹介ページにAdafruitのライブラリを使った例がありますが、examplesを見た限りでは使いにくそうでしたのでこちらはパスです。</p>
<blockquote class="wp-block-quote"><p><a href="https://wiki.seeedstudio.com/jp/Seeeduino-XIAO-TinyUSB/" target="_blank" rel="noreferrer noopener external" data-wpel-link="external" class="wpel-icon-right">Seeeduino XIAOをUSBデバイス(TinyUSB)として使う<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p></blockquote>
<h3>ライブラリを入れる</h3>
<p>マスターのZIPをArduinoIDEから入れて、例題をやってみます。</p>
<blockquote class="wp-block-quote">
<p>ZIP : TinyUSB_Mouse_and_Keyboard</p>
<cite><a href="https://github.com/cyborg5/TinyUSB_Mouse_and_Keyboard/archive/master.zip" target="_blank" rel="noreferrer noopener external" data-wpel-link="external" class="wpel-icon-right">URL<span class="wpel-icon wpel-image wpel-icon-1"></span></a></cite>
</blockquote>
<p>Arduino IDEからライブラリをいれるのは、以下からです。</p>
<div class="wp-block-image"><figure class="aligncenter size-large"><noscript><img width="555" height="189" src="/wp-content/uploads/2021/03/image.png" alt="" class="wp-image-10202"></noscript>
<img width="555" height="189" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20555%20189%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/03/image.png" alt="" class="lazyload wp-image-10202"></figure></div>
<p>ZIPのライブラリを入れると、以下のように同じところから見えていると思います。</p>
<div class="wp-block-image"><figure class="aligncenter size-large"><noscript><img width="284" height="477" src="/wp-content/uploads/2021/03/image-1.png" alt="" class="wp-image-10203"></noscript>
<img width="284" height="477" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20284%20477%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/03/image-1.png" alt="" class="lazyload wp-image-10203"></figure></div>
<p>提供されたライブラリは、Macだと以下に入るようです。直接ここに入れてもOKです。</p>
<blockquote class="wp-block-quote"><p>/Users/<strong>USERNAME</strong>/Documents/Arduino/libraries/</p></blockquote>
<p>ちなみに、ArduinoIDE組込（デフォルトの）は以下です。</p>
<blockquote class="wp-block-quote"><p>/Applications/Arduino.app/Contents/Java/libraries/</p></blockquote>
<p>XIAOのボード関連は以下にあります。</p>
<blockquote class="wp-block-quote"><p>/Users/<strong>USERNAME</strong>/Library/Arduino15/packages/Seeeduino/</p></blockquote>
<p>ライブラリとか、PGのディレクトリ以下に格納しておいたほうが後からわかりやすいかもしれません。数年後、また動かそうとすると環境変わっていたりしますからね。その場合は、includeをダブルクオートで囲って記載すればカレントディレクリ（現在のディレクトリのこと）を参照します。</p>
<pre class="wp-block-code"><code>#include "TinyUSB_Mouse_and_Keyboard.h"</code></pre>
<h3>サンプルを動かしてみる</h3>
<p>Macユーザーで、Launchpad のショートカットをF5にしていれば動作します。</p>
<div class="wp-block-image"><figure class="aligncenter size-large"><noscript><img width="668" height="615" src="/wp-content/uploads/2021/03/image-2.png" alt="" class="wp-image-10204"></noscript>
<img width="668" height="615" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20668%20615%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/03/image-2.png" alt="" class="lazyload wp-image-10204"></figure></div>
<pre class="wp-block-code"><code>$ git clone https://github.com/take-i/XIAO-USB-example.git
$ cd XIAO-USB-example/xiao_usb1/
$ open xiao_usb1.ino </code></pre>
<p>XIAOに書き込んで、見てください。ブラウザが起動して JunkHackのページが見えていれば成功です。</p>
<p>サンプル例では、Launchpadが開き、コマンドFで検索、英字モードに切り替えてterminalをタイプしてターミナルを開きます。ターミナルからはURLをオープンしています。macの場合、コマンドの修飾キーは以下のようにKEY_LEFT_GUIが相当します。WindowsだとWINキーです。</p>
<pre class="wp-block-code"><code>  // New terminal windows
  Keyboard.press(KEY_LEFT_GUI);
  Keyboard.write('n');
  Keyboard.releaseAll();</code></pre>
<p>Keyboard.pressは、押しっぱなし状態になるのでKeyboard.releaseAll()でリリースします。delayを入れないと、速すぎて期待する動作にならないので適当に調整します。</p>
<h3>４ボタンの専用キーボードを作る！</h3>
<p>さて、サンプルはうまく動いたので実際にボタンをつけて日常的に使える状態にします。こんなコードにしました。</p>
<pre class="wp-block-code"><code>https:&#47;&#47;github.com/take-i/XIAO-USB-example/tree/master/ss-key</code></pre>
<p>Pin接続は、A7 , A8 , A9 , A10 とGNDの５つです。なお、このPGは同時にボタンを押した時の考慮はしていませんのでご注意を。クリティカルなボタンの場合は、何かキーが押されている場合は違うキーの処理に入らないようにする必要があります。</p>
<h3>筐体に組み込む！</h3>
<p>３Dプリンターとメカニカルスイッチで作るのが面倒だったので、適当なジャンク品のキーボードを漁ってきました。</p>
<div class="wp-block-image"><figure class="aligncenter size-large"><noscript><img width="1024" height="565" src="/wp-content/uploads/2021/03/image-3-1024x565.png" alt="" class="wp-image-10207" srcset="/wp-content/uploads/2021/03/image-3-1024x565.png 1024w, /wp-content/uploads/2021/03/image-3-768x423.png 768w, /wp-content/uploads/2021/03/image-3-984x543.png 984w, /wp-content/uploads/2021/03/image-3.png 1177w" sizes="(max-width: 1024px) 100vw, 1024px"></noscript>
<img width="1024" height="565" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%201024%20565%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/03/image-3-1024x565.png" alt="" class="lazyload wp-image-10207" data-srcset="/wp-content/uploads/2021/03/image-3-1024x565.png 1024w, /wp-content/uploads/2021/03/image-3-768x423.png 768w, /wp-content/uploads/2021/03/image-3-984x543.png 984w, /wp-content/uploads/2021/03/image-3.png 1177w" data-sizes="(max-width: 1024px) 100vw, 1024px"></figure></div>
<p>15年くらい前の無線キーボードです。エンターキーが無くなっているのは、子供に剥がされたからです。それ以来、使っていませんでしたがここに来て約に立ちそうです。</p>
<p>このタイプのキーボードはノートPCと同じで、キーボードの下はフィルムのメンブレンスイッチになっています。これにジャンパー配線するのは厳しいので、端っこのパーツを使うことにしました。</p>
<div class="wp-block-image"><figure class="aligncenter size-large"><noscript><img width="1024" height="722" src="/wp-content/uploads/2021/03/image-4-1024x722.png" alt="" class="wp-image-10208" srcset="/wp-content/uploads/2021/03/image-4-1024x722.png 1024w, /wp-content/uploads/2021/03/image-4-768x542.png 768w, /wp-content/uploads/2021/03/image-4-984x694.png 984w, /wp-content/uploads/2021/03/image-4.png 1116w" sizes="(max-width: 1024px) 100vw, 1024px"></noscript>
<img width="1024" height="722" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%201024%20722%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/03/image-4-1024x722.png" alt="" class="lazyload wp-image-10208" data-srcset="/wp-content/uploads/2021/03/image-4-1024x722.png 1024w, /wp-content/uploads/2021/03/image-4-768x542.png 768w, /wp-content/uploads/2021/03/image-4-984x694.png 984w, /wp-content/uploads/2021/03/image-4.png 1116w" data-sizes="(max-width: 1024px) 100vw, 1024px"></figure></div>
<p>こっちは基盤があって、なんとかなりそうです。キーボード筐体をグラインダーで切断し、左側部分を使うことにしました。こんな感じ。</p>
<div class="wp-block-image"><figure class="aligncenter size-large"><noscript><img width="1024" height="765" src="/wp-content/uploads/2021/03/image-6-1024x765.png" alt="" class="wp-image-10210" srcset="/wp-content/uploads/2021/03/image-6-1024x765.png 1024w, /wp-content/uploads/2021/03/image-6-768x573.png 768w, /wp-content/uploads/2021/03/image-6-984x735.png 984w, /wp-content/uploads/2021/03/image-6.png 1212w" sizes="(max-width: 1024px) 100vw, 1024px"></noscript>
<img width="1024" height="765" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%201024%20765%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/03/image-6-1024x765.png" alt="" class="lazyload wp-image-10210" data-srcset="/wp-content/uploads/2021/03/image-6-1024x765.png 1024w, /wp-content/uploads/2021/03/image-6-768x573.png 768w, /wp-content/uploads/2021/03/image-6-984x735.png 984w, /wp-content/uploads/2021/03/image-6.png 1212w" data-sizes="(max-width: 1024px) 100vw, 1024px"></figure></div>
<p>配線はこんな感じ。XIAOは小さいので、ほんと助かります。</p>
<figure class="wp-block-image size-large"><noscript><img width="839" height="628" src="/wp-content/uploads/2021/03/image-7.png" alt="" class="wp-image-10211" srcset="/wp-content/uploads/2021/03/image-7.png 839w, /wp-content/uploads/2021/03/image-7-768x575.png 768w" sizes="(max-width: 839px) 100vw, 839px"></noscript>
<img width="839" height="628" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20839%20628%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/03/image-7.png" alt="" class="lazyload wp-image-10211" data-srcset="/wp-content/uploads/2021/03/image-7.png 839w, /wp-content/uploads/2021/03/image-7-768x575.png 768w" data-sizes="(max-width: 839px) 100vw, 839px"></figure><figure class="wp-block-image size-large"><noscript><img width="1024" height="688" src="/wp-content/uploads/2021/03/XIAO_Pin.png" alt="" class="wp-image-10213" srcset="/wp-content/uploads/2021/03/XIAO_Pin.png 1024w, /wp-content/uploads/2021/03/XIAO_Pin-768x516.png 768w, /wp-content/uploads/2021/03/XIAO_Pin-984x661.png 984w" sizes="(max-width: 1024px) 100vw, 1024px"></noscript>
<img width="1024" height="688" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%201024%20688%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/03/XIAO_Pin.png" alt="" class="lazyload wp-image-10213" data-srcset="/wp-content/uploads/2021/03/XIAO_Pin.png 1024w, /wp-content/uploads/2021/03/XIAO_Pin-768x516.png 768w, /wp-content/uploads/2021/03/XIAO_Pin-984x661.png 984w" data-sizes="(max-width: 1024px) 100vw, 1024px"></figure><p>黒い線がGNDで、それ以外はボタンからのプリント基板の配線からジャンパー線を出して使っています。</p>
<p>こんな感じで、無線キーボードの上に置いてあります。</p>
<div class="wp-block-image"><figure class="aligncenter size-large"><noscript><img width="1024" height="742" src="/wp-content/uploads/2021/03/image-5-1024x742.png" alt="" class="wp-image-10209" srcset="/wp-content/uploads/2021/03/image-5-1024x742.png 1024w, /wp-content/uploads/2021/03/image-5-768x557.png 768w, /wp-content/uploads/2021/03/image-5-984x713.png 984w, /wp-content/uploads/2021/03/image-5.png 1251w" sizes="(max-width: 1024px) 100vw, 1024px"></noscript>
<img width="1024" height="742" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%201024%20742%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/03/image-5-1024x742.png" alt="" class="lazyload wp-image-10209" data-srcset="/wp-content/uploads/2021/03/image-5-1024x742.png 1024w, /wp-content/uploads/2021/03/image-5-768x557.png 768w, /wp-content/uploads/2021/03/image-5-984x713.png 984w, /wp-content/uploads/2021/03/image-5.png 1251w" data-sizes="(max-width: 1024px) 100vw, 1024px"></figure></div>
<p>右側からESC、スクショ、スクショのコピー、https://www.canva.com/ を開く　の４機能を持たせてあります。今もこの記事を書いているときにこのボタンを使っていますが、かなり便利ですね！　canvaを割り当てているのは、ブログ記事のサムネイルをいつもここで作るからです。今回はこんな感じかな？</p>
<div class="wp-block-image"><figure class="aligncenter size-large"><noscript><img width="800" height="800" src="/wp-content/uploads/2021/03/DIY-USB-KEY.png" alt="" class="wp-image-10212" srcset="/wp-content/uploads/2021/03/DIY-USB-KEY.png 800w, /wp-content/uploads/2021/03/DIY-USB-KEY-768x768.png 768w" sizes="(max-width: 800px) 100vw, 800px"></noscript>
<img width="800" height="800" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20800%20800%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/03/DIY-USB-KEY.png" alt="" class="lazyload wp-image-10212" data-srcset="/wp-content/uploads/2021/03/DIY-USB-KEY.png 800w, /wp-content/uploads/2021/03/DIY-USB-KEY-768x768.png 768w" data-sizes="(max-width: 800px) 100vw, 800px"></figure></div>
<p>Macからはこんな感じで認識されています。</p>
<div class="wp-block-image"><figure class="aligncenter size-large"><noscript><img width="540" height="383" src="/wp-content/uploads/2021/03/image-8.png" alt="" class="wp-image-10214"></noscript>
<img width="540" height="383" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20540%20383%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/03/image-8.png" alt="" class="lazyload wp-image-10214"></figure></div>
<p>キーボードの修飾キーにも、出ていますね</p>
<div class="wp-block-image"><figure class="aligncenter size-large"><noscript><img width="665" height="605" src="/wp-content/uploads/2021/03/image-9.png" alt="" class="wp-image-10215"></noscript>
<img width="665" height="605" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20665%20605%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/03/image-9.png" alt="" class="lazyload wp-image-10215"></figure></div>
<h3>MacのKeycodeを確認</h3>
<p>※追記<br>MacだとどんなKeycodeがタイプされるのか確認しておきたかったので、macosで動作するキーロガーのソースを少し修正してDecで数字を出すように改修したものが以下にあります。</p>
<blockquote class="wp-block-quote">
<p>Mac OS X Keylogger</p>
<cite><a href="https://github.com/take-i/keylogger-macos" target="_blank" rel="noreferrer noopener external" data-wpel-link="external" class="wpel-icon-right">https://github.com/take-i/keylogger-macos<span class="wpel-icon wpel-image wpel-icon-1"></span></a></cite>
</blockquote>
<p>オリジナルは、アトランタのアプリ開発者、ケーシー・スカボローさんが作ったものです。簡単に使い方を記載しておきます。</p>
<pre class="wp-block-code"><code>$ sudo touch /var/log/keystroke.log
$ sudo chmod 644 /var/log/keystroke.log
$ git clone https://github.com/take-i/keylogger-macos.git &amp;&amp; cd keylogger-macos/
$ make
$ sudo ./keylogger</code></pre>
<p>ログは以下のパスに数字で出力されます。</p>
<pre class="wp-block-code"><code>$ tail -f /var/log/keystroke.log</code></pre>
<p>たとえば、Macのキーボード配列の場合、F3キーはMission Controlのキーとなり、Keycodeは、160となります。F3の場合は99です。純正キーボードの場合は、以下のようにキーボード設定に「F1、F2などのキー標準のファンクションキーとして使用」のチェックボックスがでます。社外キーボードの場合、これはでないようです。</p>
<div class="wp-block-image"><figure class="aligncenter size-large"><noscript><img width="668" height="581" src="/wp-content/uploads/2021/03/mac-keyboard.png" alt="" class="wp-image-10252"></noscript>
<img width="668" height="581" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20668%20581%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/03/mac-keyboard.png" alt="" class="lazyload wp-image-10252"></figure></div>
<p>DIYキーボードをUSB接続したとき、macのキーボードだと認識させてMission Controlのコードとして認識させるようにする方法を模索したのですが、ちょっとよくわかりませんでした。また、いつか再チャレンジしたときに覚書として書いておきます。</p>
<h3>まとめ</h3>
<p>今回、なんとなくわかった・わからなかったのは以下となります。</p>
<p>・Seeed XIAOは簡単にキーボード・マウスのデバイスが作れる<br>・スイッチOn,OffタイプであればPinの数分、キーは作れる（最大、１１Key）<br>・ライブラリは、TinyUSB Mouse and Keyboard libraryが使いやすかった<br>・KeycodeというのがUSBの仕様で決まっているようです（<a rel="noreferrer noopener external" href="https://www.usb.org/sites/default/files/documents/hut1_12v2.pdf" target="_blank" data-wpel-link="external" class="wpel-icon-right">hut1_12v2.pdf<span class="wpel-icon wpel-image wpel-icon-1"></span></a>）<br>・こっちのUSB仕様書のほうが新しいかな？（<a rel="noreferrer noopener external" href="https://usb.org/sites/default/files/hut1_21_0.pdf" target="_blank" data-wpel-link="external" class="wpel-icon-right">hut1_21_0.pdf<span class="wpel-icon wpel-image wpel-icon-1"></span></a>）<br>・macの場合は、<a rel="noreferrer noopener external" href="https://github.com/caseyscarborough/keylogger" target="_blank" data-wpel-link="external" class="wpel-icon-right">Mac OS X Keylogger<span class="wpel-icon wpel-image wpel-icon-1"></span></a>　を少し手直しすれば番号がわかる<br>・しかし、USBの仕様書とは違う値が帰る（例：F3は、macだと10進で160または99、USB仕様書では、60）<br>・PGの定義は、0xC4で10進だと196<br>・<a rel="noreferrer noopener external" href="http://blog.livedoor.jp/hardyboy/archives/5532602.html" target="_blank" data-wpel-link="external" class="wpel-icon-right">ここ<span class="wpel-icon wpel-image wpel-icon-1"></span></a>によれば、0x88以上は、その値から0x88を引いた数（10進だと136）となるようです。つまり、196-136=60　なるほど！PGの定義からは謎がとけました<br>・しかし、macのkeycodeは違う値を出す。ここがよくわからない<br>・おそらく、macはkeycodeのマッピングテーブルを持っているのだろう<br>・または、キーボード種類によってF3はMission ControlになるようOSがマッピングしているのだろう<br>・keycodeとUSBデバイスのレイアウトの関係はまだ奥が深そうだ<br>・フィルムのメンブレンスイッチって自作できないかな？<br>・アルミテープとラミネートフィルムで作れないかな？</p>
<h3>あとがき</h3>
<p>作ってみて、実際に使ってみたらすごく具合がいいです。USBデバイスをこんなに簡単に作れるとは、驚きですね。いつか、本格的なキーボード作りもしてみたいです。40%キーボードとか小さくて可愛いので使ってみたいんですが、何から手をつけていいのかよくわかりません。あと、薄いMacのキーボードに手が馴染んでしまったのでという理由もあります。</p>
<p>まぁ次キーボード作る機会もあると思うので、その時は自作したいですね。</p>
<h3>著者にメッセージ</h3>
<p>間違いのご指摘など、コメントじゃなくて、個人的にやりとりしたい場合は<a class="c-link-text" href="/mail/" target="_blank" rel="noopener noreferrer" data-wpel-link="internal">こちらから</a>どうぞ。お返事が遅くなるときもありますが、ご了承を。</p>
</div>
<footer class="entry-footer"></footer>
</div></article><article id="post-10169" class="post-10169 post type-post status-publish format-standard has-post-thumbnail hentry category-android category-diy category-linux"><div class="entry-wrapper">
<header class="entry-header"> <span class="entry-format theme-genericon"></span><div class="entry-meta"> <span class="posted-on">投稿日: <a href="/2021/02/26/xiao-node-j5/" rel="bookmark noopener noreferrer" data-wpel-link="internal"><time class="entry-date published" datetime="2021-02-26T10:07:38+09:00">2021年2月26日</time><time class="updated" datetime="2021-05-02T06:57:08+09:00">2021年5月2日</time></a> </span><span class="posted-on">更新日:2021年5月2日</span> <span class="categories"> <a href="/category/android/" rel="category tag noopener noreferrer" data-wpel-link="internal">Android</a>, <a href="/category/diy/" rel="category tag noopener noreferrer" data-wpel-link="internal">DIY</a>, <a href="/category/linux/" rel="category tag noopener noreferrer" data-wpel-link="internal">Linux</a></span>
</div>
<h1 class="entry-title"><a href="/2021/02/26/xiao-node-j5/" rel="bookmark noopener noreferrer" data-wpel-link="internal">XIAOとスマホだけでnode.jsのJohnny-Fiveを動かす最短コースをご案内！</a></h1></header><div class="entry-content">
<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex"><div class="w_b_wrap w_b_wrap_talk w_b_L w_b_flex w_b_div">
<div class="w_b_ava_box w_b_relative w_b_ava_L w_b_col w_b_f_n w_b_div">
<div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_L w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div"> <noscript><img src="/wp-content/uploads/2020/09/abata.png" width="96" height="96" alt="じゃんくはっく" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img"></noscript>
<img src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%2096%2096%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2020/09/abata.png" width="96" height="96" alt="じゃんくはっく" class="lazyload w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img">
</div></div></div>
<div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">じゃんくはっく</div>
</div>
<div class="w_b_bal_box w_b_bal_L w_b_relative w_b_direction_L w_b_w100 w_b_div">
<div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewbox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "></polygon></svg></div>
<div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div"><div class="w_b_bal_wrap w_b_bal_wrap_L w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_L w_b_shadow_L w_b_ta_L w_b_div"><div class="w_b_quote w_b_div"><p>きたきたきたー！</p></div></div></div></div>
</div>
</div></div></div>
<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex w_b_mla w_b_jc_fe"><div class="w_b_wrap w_b_wrap_talk w_b_R w_b_flex w_b_jc_fe w_b_div">
<div class="w_b_bal_box w_b_bal_R w_b_relative w_b_direction_R w_b_w100 w_b_div">
<div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewbox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "></polygon></svg></div>
<div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div"><div class="w_b_bal_wrap w_b_bal_wrap_R w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_R w_b_shadow_R w_b_ta_L w_b_div"><div class="w_b_quote w_b_div"><p>なんか興奮してますね！w</p></div></div></div></div>
</div>
<div class="w_b_ava_box w_b_relative w_b_ava_R w_b_col w_b_f_n w_b_div">
<div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_R w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div"> <noscript><img src="/wp-content/uploads/2020/09/pi-.png" width="96" height="96" alt="ぴー" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img"></noscript>
<img src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%2096%2096%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2020/09/pi-.png" width="96" height="96" alt="ぴー" class="lazyload w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img">
</div></div></div>
<div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">ぴー</div>
</div>
</div></div></div>
<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex"><div class="w_b_wrap w_b_wrap_talk w_b_L w_b_flex w_b_div">
<div class="w_b_ava_box w_b_relative w_b_ava_L w_b_col w_b_f_n w_b_div">
<div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_L w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div"> <noscript><img src="/wp-content/uploads/2020/09/abata.png" width="96" height="96" alt="じゃんくはっく" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img"></noscript>
<img src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%2096%2096%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2020/09/abata.png" width="96" height="96" alt="じゃんくはっく" class="lazyload w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img">
</div></div></div>
<div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">じゃんくはっく</div>
</div>
<div class="w_b_bal_box w_b_bal_L w_b_relative w_b_direction_L w_b_w100 w_b_div">
<div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewbox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "></polygon></svg></div>
<div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div"><div class="w_b_bal_wrap w_b_bal_wrap_L w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_L w_b_shadow_L w_b_ta_L w_b_div"><div class="w_b_quote w_b_div"><p>スマホとXIAOだけでNodeのJohnny-Fiveを動かせるようになったよ！</p></div></div></div></div>
</div>
</div></div></div>
<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex w_b_mla w_b_jc_fe"><div class="w_b_wrap w_b_wrap_talk w_b_R w_b_flex w_b_jc_fe w_b_div">
<div class="w_b_bal_box w_b_bal_R w_b_relative w_b_direction_R w_b_w100 w_b_div">
<div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewbox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "></polygon></svg></div>
<div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div"><div class="w_b_bal_wrap w_b_bal_wrap_R w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_R w_b_shadow_R w_b_ta_L w_b_div"><div class="w_b_quote w_b_div"><p>NodeとかJohnny-Fiveとか何それ？</p></div></div></div></div>
</div>
<div class="w_b_ava_box w_b_relative w_b_ava_R w_b_col w_b_f_n w_b_div">
<div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_R w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div"> <noscript><img src="/wp-content/uploads/2020/09/pi-.png" width="96" height="96" alt="ぴー" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img"></noscript>
<img src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%2096%2096%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2020/09/pi-.png" width="96" height="96" alt="ぴー" class="lazyload w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img">
</div></div></div>
<div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">ぴー</div>
</div>
</div></div></div>
<p>はい、ちょっと興奮気味なんですが今日のネタは、</p>
<p>「XIAOとスマホを接続して、<strong>それだけで</strong>XIAOを制御する！」</p>
<div class="wp-block-image"><figure class="aligncenter size-large"><noscript><img width="318" height="448" src="/wp-content/uploads/2021/02/fa41d394f26268f5ebe759f6764d1f4b.png" alt="" class="wp-image-10170"></noscript>
<img width="318" height="448" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20318%20448%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/02/fa41d394f26268f5ebe759f6764d1f4b.png" alt="" class="lazyload wp-image-10170"></figure></div>
<p>ってことがメインテーマです。物理的な接続イメージは図に書くとこんな感じです。node.js実行環境をtermuxに作り、johnny-fiveというnode環境で動作するものをFirmataプロトコルでXIAOとやりとりします。もっと簡単にいえば、</p>
<p>JavaScriptでXIAOを操る　ですね。</p>
<p>通常、node.js実行環境はPCに作ったりしますので、物理的な接続イメージは以下のようになるかと思います。</p>
<div class="wp-block-image"><figure class="aligncenter size-large"><noscript><img width="506" height="242" src="/wp-content/uploads/2021/02/pc-to-j5.png" alt="" class="wp-image-10179"></noscript>
<img width="506" height="242" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20506%20242%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/02/pc-to-j5.png" alt="" class="lazyload wp-image-10179"></figure></div>
<p>JavaScriptでXIAOのGPIOを操作するのですが、まだこの構成のメリットがよくわかっていませんので、触ってみようと思いました。</p>
<h3>物理的に用意するもの</h3>
<p>(1) Androidスマホ<br>(2) Seeed XIAO<br>(3) ケーブル（Type-C x Type-C）</p>
<p>Androidスマホは手持ちのものでも、余ったものでもOKです。XIAOは3個入りで1800円くらいでアマゾンから購入できます。ケーブルは100円ショップですね。</p>
<h3>Androidスマホ の必要アプリ</h3>
<blockquote class="wp-block-quote">
<p>GoogleStore : Termux</p>
<cite><a href="https://play.google.com/store/apps/details?id=com.termux" target="_blank" rel="noreferrer noopener external" data-wpel-link="external" class="wpel-icon-right">https://play.google.com/store/apps/details?id=com.termux<span class="wpel-icon wpel-image wpel-icon-1"></span></a></cite>
</blockquote>
<p>まず、Androidスマホのアプリを入れておきます。あと、もう一つ有償アプリですが以下を入れておきます。日本円で190円です。</p>
<blockquote class="wp-block-quote">
<p>GoogleStore : BT/USB/TCP Bridge Pro</p>
<cite><a href="https://play.google.com/store/apps/details?id=masar.bluetoothbridge.pro" target="_blank" rel="noreferrer noopener external" data-wpel-link="external" class="wpel-icon-right">https://play.google.com/store/apps/details?id=masar.bluetoothbridge.pro<span class="wpel-icon wpel-image wpel-icon-1"></span></a></cite>
</blockquote>
<p>これはブリッジアプリで、今回の用途ではXIAOのUSB接続のシリアル通信をTCP上にブリッジする用途で使います。シリアルTCPのブジッジアプリは他にもいろいろありますが、XIAOと接続できた勇逸の神アプリです。</p>
<h3>Termuxのセットアップ</h3>
<p>アプリを入れたら、パッケージをアップデートしておきます。Termuxのコンソールからタイプするのが面倒なら、PCからSSHして作業するといいかもです。</p>
<pre class="wp-block-code"><code>pkg update
pkg upgrade</code></pre>
<p>以下が今回必要なものです。</p>
<pre class="wp-block-code"><code>pkg install nodejs python clang make openssh -y</code></pre>
<p>手持ちの環境、HUAWEI P20 liteでは以下が入りました。</p>
<pre class="wp-block-code"><code>$ dpkg --list | egrep 'node|python|clang|make|openssh' | cut -b 5-50
clang              11.1.0         aarch64     
make               4.3-1          aarch64     
nodejs             14.15.4-1      aarch64     
openssh            8.4p1-1        aarch64     
python             3.9.2          aarch64     
termux-exec        1:0.8          aarch64 </code></pre>
<p>nodejsはもう14なんですね。速すぎる！ぜんぜんついていけないです。</p>
<h3>サンプルソースとインストール</h3>
<p>まず、termuxでの操作です。コピペしやすいよう$ は省いておきます。</p>
<pre class="wp-block-code"><code>cd
mkdir j5
cd j5
wget https://github.com/take-i/j5-termux/archive/main.zip</code></pre>
<p>まだ説明も何も書いていませんがそのうち、簡単に書いておきます。</p>
<blockquote class="wp-block-quote">
<p>サンプルソース</p>
<cite>https://github.com/take-i/j5-termux</cite>
</blockquote>
<h3>サンプルソース解凍しインストール</h3>
<p>example にLEDが光るサンプルソースが入っています。</p>
<pre class="wp-block-code"><code>unzip main.zip 
cd j5-termux-main/example/
npm install</code></pre>
<h3>IPアドレスを修正</h3>
<p>WiFiに接続していると思いますので、termux上でIPを確認しておきます。</p>
<pre class="wp-block-code"><code>ifconfig | grep inet</code></pre>
<p>以下のようなIPv4が出ますので、それをメモしておきます。この場合は、192.168.1.36が自分のスマホのIPですね。</p>
<pre class="wp-block-code"><code>inet 192.168.1.36  netmask 255.255.255.0  broadcast 192.168.1.255</code></pre>
<p>サンプルソースのIPを修正します。portは、あとでブリッジアプリで設定しますので、1024番〜の適当なポートにしておきます。1234でもOKです。</p>
<pre class="wp-block-code"><code>------- example/index.js
::
var options = {
  host: '192.168.1.36',  //host name or IP
  port: 1234  // port
}</code></pre>
<h3>XIAOにFirmataをセットアップ</h3>
<p>この記事を書いている時はまだ、XIAOはFirmataのコードをビルドするとエラーになりますが、以下を適用すればOKです。そのうち、masterにマージされると思うので、ビルドエラーが出なければOKです。</p>
<blockquote class="wp-block-quote">
<p>add seeedunio xiao to boards.h please #475</p>
<cite><a href="https://github.com/firmata/arduino/issues/475" target="_blank" rel="noreferrer noopener external" data-wpel-link="external" class="wpel-icon-right">https://github.com/firmata/arduino/issues/475<span class="wpel-icon wpel-image wpel-icon-1"></span></a></cite>
</blockquote>
<p>具体的には、以下からFirmataをダウンロードします。</p>
<blockquote class="wp-block-quote">
<p>firmata/arduino Releases<br><a href="https://github.com/firmata/arduino/releases/download/2.5.8/Arduino-1.0.x-Firmata-2.5.8.zip" data-wpel-link="external" target="_blank" rel="external noopener noreferrer" class="wpel-icon-right">Arduino-1.0.x-Firmata-2.5.8.zip<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p>
<cite>https://github.com/firmata/arduino/releases/</cite>
</blockquote>
<p>先ほどのFixをBoards.hに反映し、ArduinoIDEからインポートします。</p>
<div class="wp-block-image"><figure class="aligncenter size-large"><noscript><img width="564" height="209" src="/wp-content/uploads/2021/02/arduino-ide.png" alt="" class="wp-image-10177"></noscript>
<img width="564" height="209" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20564%20209%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/02/arduino-ide.png" alt="" class="lazyload wp-image-10177"></figure></div>
<p>スケッチ例＞Firmata＞StandardFirmata のスケッチをXIAOに書込みます。</p>
<div class="wp-block-image"><figure class="aligncenter size-large"><noscript><img width="732" height="606" src="/wp-content/uploads/2021/02/firmata-ex.png" alt="" class="wp-image-10178"></noscript>
<img width="732" height="606" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20732%20606%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/02/firmata-ex.png" alt="" class="lazyload wp-image-10178"></figure></div>
<p>エラーなく書き込めたらOKです。</p>
<h3>スマホでブリッジアプリを設定</h3>
<p>次はスマホで　<a rel="noreferrer noopener external" href="https://play.google.com/store/apps/details?id=masar.bluetoothbridge.pro" target="_blank" data-wpel-link="external" class="wpel-icon-right">BT/USB/TCP Bridge Pro<span class="wpel-icon wpel-image wpel-icon-1"></span></a>　のアプリを設定します。このアプリはDevceAとBをブリッジしますので画面のように設定します。</p>
<div class="wp-block-image"><figure class="aligncenter size-large"><noscript><img width="802" height="783" src="/wp-content/uploads/2021/02/ss-b1.png" alt="" class="wp-image-10172" srcset="/wp-content/uploads/2021/02/ss-b1.png 802w, /wp-content/uploads/2021/02/ss-b1-768x750.png 768w" sizes="(max-width: 802px) 100vw, 802px"></noscript>
<img width="802" height="783" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20802%20783%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/02/ss-b1.png" alt="" class="lazyload wp-image-10172" data-srcset="/wp-content/uploads/2021/02/ss-b1.png 802w, /wp-content/uploads/2021/02/ss-b1-768x750.png 768w" data-sizes="(max-width: 802px) 100vw, 802px"></figure></div>
<p>XIAOをUSB接続するとアクセス許可がでますのでOKします。「このUSBデバイスをデフォルトにする」はチェックしておいたほうがいいですね。</p>
<div class="wp-block-image"><figure class="aligncenter size-large"><noscript><img width="795" height="785" src="/wp-content/uploads/2021/02/ss-b2.png" alt="" class="wp-image-10173" srcset="/wp-content/uploads/2021/02/ss-b2.png 795w, /wp-content/uploads/2021/02/ss-b2-768x758.png 768w" sizes="(max-width: 795px) 100vw, 795px"></noscript>
<img width="795" height="785" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20795%20785%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/02/ss-b2.png" alt="" class="lazyload wp-image-10173" data-srcset="/wp-content/uploads/2021/02/ss-b2.png 795w, /wp-content/uploads/2021/02/ss-b2-768x758.png 768w" data-sizes="(max-width: 795px) 100vw, 795px"></figure></div>
<p>USBデバイスに接続（USB connect）し、TCP Serverをスタートさせます。２つ上の画像、右側のようになっていればOKです。</p>
<h3>起動！</h3>
<p>Termuxのindex.jsがある場所で以下のコマンドを実行すると動作します。</p>
<pre class="wp-block-code"><code>node index.js</code></pre>
<p>成功すれば、以下のようにターミナルに表示されているはずです。</p>
<pre class="wp-block-code"><code>Connected to USB2TCP Bridge
IO ready!
1614296838868 Available Firmata  
1614296838874 Connected Firmata  
1614296838882 Repl Initialized  
>> Board connected!</code></pre>
<p>XIAOの青色LEDが光っていれば成功です。写真では青色LEDが光っているタイミングを写せなかったので光っていませんが、チカチカしているはずです。</p>
<figure class="wp-block-image size-large"><noscript><img width="591" height="373" src="/wp-content/uploads/2021/02/01c575643bf8b553884997634c862516.png" alt="" class="wp-image-10174"></noscript>
<img width="591" height="373" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20591%20373%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/02/01c575643bf8b553884997634c862516.png" alt="" class="lazyload wp-image-10174"></figure><p>お疲れ様です。</p>
<h3>まとめ</h3>
<p>今回、なんとなくわかったのは以下となります。</p>
<p>・Termux上でJ5を使う時は、USBに接続したボードを認識しないので、別アプリでUSBをTCPにブリッジさせて使う<br>・ブリッジさせるアプリはたくさんあるが、J5からXIAOと通信できたのはこれだけ<br>・実際に開発するときは、スマホ充電しながらUSB接続しないと電池持ちが。<br>・J5の使い所がまだよくわかっていないので、例をこなしながらどんなメリットがあるのか体験してみる</p>
<h3>あとがき</h3>
<p>node.js実行環境をTermuxに作ってそこから有線USB接続したXIAOを操れることがわかりました。まだ、どんなことができるのか、そしてどんなメリットがあるのかまーったく分かっていませんが今後、面白い活用方法などがあれば紹介、DIYしたいなと思います。</p>
<h3>著者にメッセージ</h3>
<p>間違いのご指摘など、コメントじゃなくて、個人的にやりとりしたい場合は<a class="c-link-text" href="/mail/" target="_blank" rel="noopener noreferrer" data-wpel-link="internal">こちらから</a>どうぞ。お返事が遅くなるときもありますが、ご了承を。</p>
</div>
<footer class="entry-footer"></footer>
</div></article><article id="post-10154" class="post-10154 post type-post status-publish format-standard has-post-thumbnail hentry category-arduino category-diy"><div class="entry-wrapper">
<header class="entry-header"> <span class="entry-format theme-genericon"></span><div class="entry-meta"> <span class="posted-on">投稿日: <a href="/2021/02/23/arduino-nano/" rel="bookmark noopener noreferrer" data-wpel-link="internal"><time class="entry-date published" datetime="2021-02-23T15:17:03+09:00">2021年2月23日</time><time class="updated" datetime="2021-02-23T19:18:09+09:00">2021年2月23日</time></a> </span><span class="posted-on">更新日:2021年2月23日</span> <span class="categories"> <a href="/category/arduino/" rel="category tag noopener noreferrer" data-wpel-link="internal">arduino</a>, <a href="/category/diy/" rel="category tag noopener noreferrer" data-wpel-link="internal">DIY</a></span>
</div>
<h1 class="entry-title"><a href="/2021/02/23/arduino-nano/" rel="bookmark noopener noreferrer" data-wpel-link="internal">Arduino Nano互換機に書き込めないだと！</a></h1></header><div class="entry-content">
<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex"><div class="w_b_wrap w_b_wrap_talk w_b_L w_b_flex w_b_div">
<div class="w_b_ava_box w_b_relative w_b_ava_L w_b_col w_b_f_n w_b_div">
<div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_L w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div"> <noscript><img src="/wp-content/uploads/2020/09/abata.png" width="96" height="96" alt="じゃんくはっく" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img"></noscript>
<img src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%2096%2096%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2020/09/abata.png" width="96" height="96" alt="じゃんくはっく" class="lazyload w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img">
</div></div></div>
<div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">じゃんくはっく</div>
</div>
<div class="w_b_bal_box w_b_bal_L w_b_relative w_b_direction_L w_b_w100 w_b_div">
<div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewbox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "></polygon></svg></div>
<div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div"><div class="w_b_bal_wrap w_b_bal_wrap_L w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_L w_b_shadow_L w_b_ta_L w_b_div"><div class="w_b_quote w_b_div"><p>5年振りにArduino Nano（互換機）を触ったら書き込みできなーい！</p></div></div></div></div>
</div>
</div></div></div>
<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex w_b_mla w_b_jc_fe"><div class="w_b_wrap w_b_wrap_talk w_b_R w_b_flex w_b_jc_fe w_b_div">
<div class="w_b_bal_box w_b_bal_R w_b_relative w_b_direction_R w_b_w100 w_b_div">
<div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewbox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "></polygon></svg></div>
<div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div"><div class="w_b_bal_wrap w_b_bal_wrap_R w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_R w_b_shadow_R w_b_ta_L w_b_div"><div class="w_b_quote w_b_div"><p>あら、壊れたのかしら？</p></div></div></div></div>
</div>
<div class="w_b_ava_box w_b_relative w_b_ava_R w_b_col w_b_f_n w_b_div">
<div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_R w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div"> <noscript><img src="/wp-content/uploads/2020/09/pi-.png" width="96" height="96" alt="ぴー" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img"></noscript>
<img src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%2096%2096%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2020/09/pi-.png" width="96" height="96" alt="ぴー" class="lazyload w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img">
</div></div></div>
<div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">ぴー</div>
</div>
</div></div></div>
<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex"><div class="w_b_wrap w_b_wrap_talk w_b_L w_b_flex w_b_div">
<div class="w_b_ava_box w_b_relative w_b_ava_L w_b_col w_b_f_n w_b_div">
<div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_L w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div"> <noscript><img src="/wp-content/uploads/2020/09/abata.png" width="96" height="96" alt="じゃんくはっく" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img"></noscript>
<img src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%2096%2096%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2020/09/abata.png" width="96" height="96" alt="じゃんくはっく" class="lazyload w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img">
</div></div></div>
<div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">じゃんくはっく</div>
</div>
<div class="w_b_bal_box w_b_bal_L w_b_relative w_b_direction_L w_b_w100 w_b_div">
<div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewbox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "></polygon></svg></div>
<div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div"><div class="w_b_bal_wrap w_b_bal_wrap_L w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_L w_b_shadow_L w_b_ta_L w_b_div"><div class="w_b_quote w_b_div"><p>「マイコンボードに書き込もうとしましたが、エラーが発生しました。」と出るのよ</p></div></div></div></div>
</div>
</div></div></div>
<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex w_b_mla w_b_jc_fe"><div class="w_b_wrap w_b_wrap_talk w_b_R w_b_flex w_b_jc_fe w_b_div">
<div class="w_b_bal_box w_b_bal_R w_b_relative w_b_direction_R w_b_w100 w_b_div">
<div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewbox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "></polygon></svg></div>
<div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div"><div class="w_b_bal_wrap w_b_bal_wrap_R w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_R w_b_shadow_R w_b_ta_L w_b_div"><div class="w_b_quote w_b_div">
<p>アリエクでまた買えば</p>
<p>200円くらいでしょ？</p>
</div></div></div></div>
</div>
<div class="w_b_ava_box w_b_relative w_b_ava_R w_b_col w_b_f_n w_b_div">
<div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_R w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div"> <noscript><img src="/wp-content/uploads/2020/09/pi-.png" width="96" height="96" alt="ぴー" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img"></noscript>
<img src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%2096%2096%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2020/09/pi-.png" width="96" height="96" alt="ぴー" class="lazyload w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img">
</div></div></div>
<div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">ぴー</div>
</div>
</div></div></div>
<p>いやはや、5年も触っていないといろいろ完璧に忘れています。ArduinoNanoという小さなArduino があるんですが、それにLチカでも書き込んで動作確認しようとしたら、書き込めずエラーが出てしまいました。持っているNano互換機はこれです。</p>
<div class="wp-block-image"><figure class="aligncenter size-large"><noscript><img width="690" height="478" src="/wp-content/uploads/2021/02/nano.png" alt="" class="wp-image-10165"></noscript>
<img width="690" height="478" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20690%20478%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/02/nano.png" alt="" class="lazyload wp-image-10165"></figure></div>
<blockquote class="wp-block-quote">
<p>JunkHack : arduino hello world!　投稿日: 2015年3月15日<br>6年くらい前の記事で、$3でアリエクでポチったもの</p>
<cite><a href="/2015/03/15/arduino-hello-world/" target="_blank" rel="noreferrer noopener" data-wpel-link="internal">/2015/03/15/arduino-hello-world/</a></cite>
</blockquote>
<p>今回のエラーログは以下のようになります。</p>
<pre class="wp-block-code"><code>avrdude: Version 6.3-20190619
         Copyright (c) 2000-2005 Brian Dean, http://www.bdmicro.com/
         Copyright (c) 2007-2014 Joerg Wunsch

         System wide configuration file is "/Applications/Arduino1.8.12.app/Contents/Java/hardware/tools/avr/etc/avrdude.conf"
         User configuration file is "/Users/junkhack/.avrduderc"
         User configuration file does not exist or is not a regular file, skipping

         Using Port                    : /dev/cu.wchusbserial14120
         Using Programmer              : arduino
         Overriding Baud Rate          : 115200
avrdude: stk500_recv(): programmer is not responding
avrdude: stk500_getsync() attempt 1 of 10: not in sync: resp=0x00
：：（省略）
avrdude: stk500_recv(): programmer is not responding
avrdude: stk500_getsync() attempt 10 of 10: not in sync: resp=0x00

avrdude done.  Thank you.

マイコンボードに書き込もうとしましたが、エラーが発生しました。
このページを参考にしてください。
http:&#47;&#47;www.arduino.cc/en/Guide/Troubleshooting#upload</code></pre>
<p>通信が出来ていないような感じですね。キーワード「avrdude: stk500_recv(): programmer is not responding」でググってみるとブートローダーが壊れたとか、いろいろ出て来て壊れたのかなと。でも、実は違うようです。</p>
<h3>プロセッサ：ATmega328P(Old Bootloader)を選べば大丈夫！</h3>
<blockquote class="wp-block-quote">
<p>Arduino / micro:bit / M5Stick勉強会の電録簿<br>ボード・アップデートで書き込みエラー</p>
<cite><a href="http://www.umek.topaz.ne.jp/mameduino/boardupdate_error/" target="_blank" rel="noreferrer noopener external" data-wpel-link="external" class="wpel-icon-right">http://www.umek.topaz.ne.jp/mameduino/boardupdate_error/<span class="wpel-icon wpel-image wpel-icon-1"></span></a></cite>
</blockquote>
<p>このサイトによれば、どうやら、ボード設定メニューのプロセッサー種別選択のサブメニューにて「ATmega328P(Old Bootloader)」を選択するだけでいいようです。</p>
<div class="wp-block-image"><figure class="aligncenter size-large"><noscript><img width="648" height="407" src="/wp-content/uploads/2021/02/ArudinoNano.png" alt="" class="wp-image-10155"></noscript>
<img width="648" height="407" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20648%20407%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/02/ArudinoNano.png" alt="" class="lazyload wp-image-10155"></figure></div>
<p>はい、ちゃんと書き込めました。どうやら、Nanoの新しいやつは、通信速度が112.5kbps<strong> </strong>ということで、古いNanoは57.6kbpsということのようです。</p>
<p>ブートローダーを新しくすることもできるようで、もう一台arduinoがあれば以下のように書き込めるようです。</p>
<blockquote class="wp-block-quote">
<p>Arduino as ISP and Arduino Bootloaders</p>
<cite><a href="https://www.arduino.cc/en/Tutorial/BuiltInExamples/ArduinoISP" target="_blank" rel="noreferrer noopener external" data-wpel-link="external" class="wpel-icon-right">https://www.arduino.cc/en/Tutorial/BuiltInExamples/ArduinoISP<span class="wpel-icon wpel-image wpel-icon-1"></span></a></cite>
</blockquote>
<p><s>また今度やってみようかな。今日はいろいろ違う目的がありますので。</s></p>
<p>いや、こういうのはわかった時に即実行が良いですね。ブログのネタにもなるし少し休憩後、書き込んでみました。</p>
<h3>UnoをISPにしてNanoに書き込みする！</h3>
<p>こういうのは全体の流れを把握するのが大事です。大きくは以下と理解。</p>
<p>(1) UnoをISPにして、Nanoに書き込む<br>　　→　手持ちにUnoがあったのですが、それ以外でもOK<br>(2) まず、UnoにArduinoISPのスケッチを書き込む<br>　　→　スケッチ例＞11.ArduinoISP＞ArduinoISP<br>　　　　※書き込んだら、次に配線をしますのでUSBを外します<br>(3) UnoとNanoを配線する<br>　　→　配線は６本<br>(4) IDEのツールからブートローダーを書き込む<br>　　→　UnoをUSBでPCに接続。その後書き込みます</p>
<h3>(1) UnoをISPにして、Nanoに書き込む</h3>
<p>ISPとは、インサーキットシリアルプログラマーということで、ICSPとも略されるようですね。基板に繋いだまま内蔵メモリにプログラムを書き込むことを言うようです。今回の例だと、Nanoのブートローダーを書き込むにあたり、UnoをISPにして書き込むわけです！　</p>
<h3>(2) まず、UnoにArduinoISPのスケッチを書き込む</h3>
<p>アリエクで昔、本物のUnoをポチっていました。裏が白い基板のです。</p>
<figure class="wp-block-image size-large"><noscript><img width="1024" height="381" src="/wp-content/uploads/2021/02/ss-uno-1024x381.png" alt="" class="wp-image-10160" srcset="/wp-content/uploads/2021/02/ss-uno-1024x381.png 1024w, /wp-content/uploads/2021/02/ss-uno-768x286.png 768w, /wp-content/uploads/2021/02/ss-uno-984x366.png 984w, /wp-content/uploads/2021/02/ss-uno.png 1196w" sizes="(max-width: 1024px) 100vw, 1024px"></noscript>
<img width="1024" height="381" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%201024%20381%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/02/ss-uno-1024x381.png" alt="" class="lazyload wp-image-10160" data-srcset="/wp-content/uploads/2021/02/ss-uno-1024x381.png 1024w, /wp-content/uploads/2021/02/ss-uno-768x286.png 768w, /wp-content/uploads/2021/02/ss-uno-984x366.png 984w, /wp-content/uploads/2021/02/ss-uno.png 1196w" data-sizes="(max-width: 1024px) 100vw, 1024px"></figure><p>まずは、ISPのスケッチをIDEから引っ張りだしてきて、Unoに書き込みます。</p>
<pre class="wp-block-code"><code>スケッチ例 > 11.ArduinoISP > ArduinoISP</code></pre>
<p>次に配線しますので、USBを外しておきます。</p>
<h3>(3) UnoとNanoを配線する</h3>
<p>配線は６本で、こんな感じです。写真ではUSBが接続さていますが書き込みが終わったときに撮ったからです。配線するときは、外してやってくださいね。</p>
<div class="wp-block-image"><figure class="aligncenter size-large"><noscript><img width="683" height="512" src="/wp-content/uploads/2021/02/IMG_20210223_114749_jpg.png" alt="" class="wp-image-10159"></noscript>
<img width="683" height="512" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20683%20512%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/02/IMG_20210223_114749_jpg.png" alt="" class="lazyload wp-image-10159"></figure></div>
<div class="wp-block-jetpack-markdown"><table>
<thead><tr>
<th>ISP UNO</th>
<th>書込ターゲットNANO</th>
</tr></thead>
<tbody>
<tr>
<td>D13</td>
<td>D13</td>
</tr>
<tr>
<td>D12</td>
<td>D12</td>
</tr>
<tr>
<td>D11</td>
<td>D11</td>
</tr>
<tr>
<td>D10</td>
<td>RST</td>
</tr>
<tr>
<td>+5V</td>
<td>+5V</td>
</tr>
<tr>
<td>GND</td>
<td>GND</td>
</tr>
</tbody>
</table></div>
<p>実体配線図だとこういうことですね。</p>
<figure class="wp-block-image size-large"><noscript><img width="800" height="877" src="/wp-content/uploads/2021/02/ArduinoUNOtoUNO_ISP2.jpg" alt="" class="wp-image-10161" srcset="/wp-content/uploads/2021/02/ArduinoUNOtoUNO_ISP2.jpg 800w, /wp-content/uploads/2021/02/ArduinoUNOtoUNO_ISP2-768x842.jpg 768w" sizes="(max-width: 800px) 100vw, 800px"></noscript>
<img width="800" height="877" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20800%20877%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/02/ArduinoUNOtoUNO_ISP2.jpg" alt="" class="lazyload wp-image-10161" data-srcset="/wp-content/uploads/2021/02/ArduinoUNOtoUNO_ISP2.jpg 800w, /wp-content/uploads/2021/02/ArduinoUNOtoUNO_ISP2-768x842.jpg 768w" data-sizes="(max-width: 800px) 100vw, 800px"></figure><p>さて、書き込みましょうか！　USBをUno（ISP）に接続します。</p>
<h3>(4) IDEのツールからブートローダーを書き込む</h3>
<figure class="wp-block-image size-large"><noscript><img width="776" height="703" src="/wp-content/uploads/2021/02/Uno-isp-to-nano.png" alt="" class="wp-image-10162" srcset="/wp-content/uploads/2021/02/Uno-isp-to-nano.png 776w, /wp-content/uploads/2021/02/Uno-isp-to-nano-768x696.png 768w" sizes="(max-width: 776px) 100vw, 776px"></noscript>
<img width="776" height="703" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20776%20703%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/02/Uno-isp-to-nano.png" alt="" class="lazyload wp-image-10162" data-srcset="/wp-content/uploads/2021/02/Uno-isp-to-nano.png 776w, /wp-content/uploads/2021/02/Uno-isp-to-nano-768x696.png 768w" data-sizes="(max-width: 776px) 100vw, 776px"></figure><p>ツールからボート、プロセッサ、シリアルポート、書込装置を程よく選択して「ブートローダを書き込む」でOKです。ログには以下のように流れました。</p>
<pre class="wp-block-code"><code>/Applications/Arduino1.8.12.app/Contents/Java/hardware/tools/avr/bin/avrdude -C/Applications/Arduino1.8.12.app/Contents/Java/hardware/tools/avr/etc/avrdude.conf -v -patmega328p -cstk500v1 -P/dev/cu.usbmodem14111 -b19200 -Uflash:w:/Applications/Arduino1.8.12.app/Contents/Java/hardware/arduino/avr/bootloaders/optiboot/optiboot_atmega328.hex:i -Ulock:w:0x0F:m 

avrdude: Version 6.3-20190619
         Copyright (c) 2000-2005 Brian Dean, http://www.bdmicro.com/
         Copyright (c) 2007-2014 Joerg Wunsch

         System wide configuration file is "/Applications/Arduino1.8.12.app/Contents/Java/hardware/tools/avr/etc/avrdude.conf"
         User configuration file is "/Users/junkhack/.avrduderc"
         User configuration file does not exist or is not a regular file, skipping

         Using Port                    : /dev/cu.usbmodem14111
         Using Programmer              : stk500v1
         Overriding Baud Rate          : 19200
Reading | ################################################## | 100% 0.01s

avrdude: verifying ...
avrdude: 1 bytes of lock verified
avrdude: reading input file "0xFD"
avrdude: writing efuse (1 bytes):

Writing | ################################################## | 100% 0.01s

avrdude: 1 bytes of efuse written
avrdude: verifying efuse memory against 0xFD:
avrdude: load data efuse data from input file 0xFD:
avrdude: input file 0xFD contains 1 bytes
avrdude: reading on-chip efuse data:

Reading | ################################################## | 100% 0.01s

avrdude: verifying ...
avrdude: 1 bytes of efuse verified
avrdude: reading input file "0xDA"
avrdude: writing hfuse (1 bytes):

Writing | ################################################## | 100% 0.01s

avrdude: 1 bytes of hfuse written
avrdude: verifying hfuse memory against 0xDA:
avrdude: load data hfuse data from input file 0xDA:
avrdude: input file 0xDA contains 1 bytes
avrdude: reading on-chip hfuse data:

Reading | ################################################## | 100% 0.01s

avrdude: verifying ...
avrdude: 1 bytes of hfuse verified
avrdude: reading input file "0xFF"
avrdude: writing lfuse (1 bytes):

Writing | ################################################## | 100% 0.01s

avrdude: 1 bytes of lfuse written
avrdude: verifying lfuse memory against 0xFF:
avrdude: load data lfuse data from input file 0xFF:
avrdude: input file 0xFF contains 1 bytes
avrdude: reading on-chip lfuse data:

Reading | ################################################## | 100% 0.01s

avrdude: verifying ...
avrdude: 1 bytes of lfuse verified

avrdude done.  Thank you.

         AVR Part                      : ATmega328P
         Chip Erase delay              : 9000 us
         PAGEL                         : PD7
         BS2                           : PC2
         RESET disposition             : dedicated
         RETRY pulse                   : SCK
         serial program mode           : yes
         parallel program mode         : yes
         Timeout                       : 200
         StabDelay                     : 100
         CmdexeDelay                   : 25
         SyncLoops                     : 32
         ByteDelay                     : 0
         PollIndex                     : 3
         PollValue                     : 0x53
         Memory Detail                 :

                                  Block Poll               Page                       Polled
           Memory Type Mode Delay Size  Indx Paged  Size   Size #Pages MinW  MaxW   ReadBack
           ----------- ---- ----- ----- ---- ------ ------ ---- ------ ----- ----- ---------
           eeprom        65    20     4    0 no       1024    4      0  3600  3600 0xff 0xff
           flash         65     6   128    0 yes     32768  128    256  4500  4500 0xff 0xff
           lfuse          0     0     0    0 no          1    0      0  4500  4500 0x00 0x00
           hfuse          0     0     0    0 no          1    0      0  4500  4500 0x00 0x00
           efuse          0     0     0    0 no          1    0      0  4500  4500 0x00 0x00
           lock           0     0     0    0 no          1    0      0  4500  4500 0x00 0x00
           calibration    0     0     0    0 no          1    0      0     0     0 0x00 0x00
           signature      0     0     0    0 no          3    0      0     0     0 0x00 0x00

         Programmer Type : STK500
         Description     : Atmel STK500 Version 1.x firmware
         Hardware Version: 2
         Firmware Version: 1.18
         Topcard         : Unknown
         Vtarget         : 0.0 V
         Varef           : 0.0 V
         Oscillator      : Off
         SCK period      : 0.1 us

avrdude: AVR device initialized and ready to accept instructions

Reading | ################################################## | 100% 0.02s

avrdude: Device signature = 0x1e950f (probably m328p)
avrdude: NOTE: "flash" memory has been specified, an erase cycle will be performed
         To disable this feature, specify the -D option.
avrdude: erasing chip
avrdude: reading input file "/Applications/Arduino1.8.12.app/Contents/Java/hardware/arduino/avr/bootloaders/optiboot/optiboot_atmega328.hex"
avrdude: writing flash (32768 bytes):

Writing | ################################################## | 100% 0.00s

avrdude: 32768 bytes of flash written
avrdude: verifying flash memory against /Applications/Arduino1.8.12.app/Contents/Java/hardware/arduino/avr/bootloaders/optiboot/optiboot_atmega328.hex:
avrdude: load data flash data from input file /Applications/Arduino1.8.12.app/Contents/Java/hardware/arduino/avr/bootloaders/optiboot/optiboot_atmega328.hex:
avrdude: input file /Applications/Arduino1.8.12.app/Contents/Java/hardware/arduino/avr/bootloaders/optiboot/optiboot_atmega328.hex contains 32768 bytes
avrdude: reading on-chip flash data:

Reading | ################################################## | 100% 0.00s

avrdude: verifying ...
avrdude: 32768 bytes of flash verified
avrdude: reading input file "0x0F"
avrdude: writing lock (1 bytes):

Writing | ################################################## | 100% 0.02s

avrdude: 1 bytes of lock written
avrdude: verifying lock memory against 0x0F:
avrdude: load data lock data from input file 0x0F:
avrdude: input file 0x0F contains 1 bytes
avrdude: reading on-chip lock data:

Reading | ################################################## | 100% 0.01s

avrdude: verifying ...
avrdude: 1 bytes of lock verified

avrdude done.  Thank you.</code></pre>
<h3>新しいブートローダをNanoで確認</h3>
<p>今書き込んだNanoの動作確認です。ボード設定メニューのプロセッサー種別選択のサブメニューにて「ATmega328P」を選択します。Old Bootloaderじゃないやつです。</p>
<p>LEDブリンクをNanoに書き込み！　以下がログですが、115200kbpsで通信していますね。</p>
<pre class="wp-block-code"><code>avrdude: Version 6.3-20190619
         Copyright (c) 2000-2005 Brian Dean, http://www.bdmicro.com/
         Copyright (c) 2007-2014 Joerg Wunsch

         System wide configuration file is "/Applications/Arduino1.8.12.app/Contents/Java/hardware/tools/avr/etc/avrdude.conf"
         User configuration file is "/Users/junkhack/.avrduderc"
         User configuration file does not exist or is not a regular file, skipping

         Using Port                    : /dev/cu.wchusbserial14120
         Using Programmer              : arduino
         Overriding Baud Rate          : 115200
         AVR Part                      : ATmega328P
         Chip Erase delay              : 9000 us
         PAGEL                         : PD7
         BS2                           : PC2
         RESET disposition             : dedicated
         RETRY pulse                   : SCK
         serial program mode           : yes
         parallel program mode         : yes
         Timeout                       : 200
         StabDelay                     : 100
         CmdexeDelay                   : 25
         SyncLoops                     : 32
         ByteDelay                     : 0
         PollIndex                     : 3
         PollValue                     : 0x53
         Memory Detail                 :

                                  Block Poll               Page                       Polled
           Memory Type Mode Delay Size  Indx Paged  Size   Size #Pages MinW  MaxW   ReadBack
           ----------- ---- ----- ----- ---- ------ ------ ---- ------ ----- ----- ---------
           eeprom        65    20     4    0 no       1024    4      0  3600  3600 0xff 0xff
           flash         65     6   128    0 yes     32768  128    256  4500  4500 0xff 0xff
           lfuse          0     0     0    0 no          1    0      0  4500  4500 0x00 0x00
           hfuse          0     0     0    0 no          1    0      0  4500  4500 0x00 0x00
           efuse          0     0     0    0 no          1    0      0  4500  4500 0x00 0x00
           lock           0     0     0    0 no          1    0      0  4500  4500 0x00 0x00
           calibration    0     0     0    0 no          1    0      0     0     0 0x00 0x00
           signature      0     0     0    0 no          3    0      0     0     0 0x00 0x00

         Programmer Type : Arduino
         Description     : Arduino
         Hardware Version: 3
         Firmware Version: 4.4
         Vtarget         : 0.3 V
         Varef           : 0.3 V
         Oscillator      : 28.800 kHz
         SCK period      : 3.3 us

avrdude: AVR device initialized and ready to accept instructions

Reading | ################################################## | 100% 0.02s

avrdude: Device signature = 0x1e950f (probably m328p)
avrdude: reading input file "/var/folders/f1/5d6ycdnj6v58mcq9kn4b3ksm0000gn/T/arduino_build_539320/Blink.ino.hex"
avrdude: writing flash (924 bytes):

Writing | ################################################## | 100% 0.48s

avrdude: 924 bytes of flash written
avrdude: verifying flash memory against /var/folders/f1/5d6ycdnj6v58mcq9kn4b3ksm0000gn/T/arduino_build_539320/Blink.ino.hex:
avrdude: load data flash data from input file /var/folders/f1/5d6ycdnj6v58mcq9kn4b3ksm0000gn/T/arduino_build_539320/Blink.ino.hex:
avrdude: input file /var/folders/f1/5d6ycdnj6v58mcq9kn4b3ksm0000gn/T/arduino_build_539320/Blink.ino.hex contains 924 bytes
avrdude: reading on-chip flash data:

Reading | ################################################## | 100% 0.45s

avrdude: verifying ...
avrdude: 924 bytes of flash verified

avrdude done.  Thank you.</code></pre>
<p>flash verified　が出ていますね。うまくいったようです！　ログをよく見てみるとファームウェアバージョンは4.4ということのようです。</p>
<blockquote class="wp-block-quote"><p>Hardware Version: 3<br>Firmware Version: 4.4</p></blockquote>
<h3>まとめ</h3>
<p>今回、なんとなくわかったのは以下となります。</p>
<p>・ブートローダが古ければ、Arduino を書込機器（ISP）にして新しくできる<br>・古いArduinoなら、プロセッサー種別選択で「ATmega328P(Old Bootloader)」を選択<br>・違いは、通信速度のようです。それ以外の違いはまだ不明</p>
<h3>あとがき</h3>
<p>5年も使っていなかったので、扱いが悪くて壊れたのかな？　と思っていましたが、対応方法があってよかったです！　まさかブートローダが新しくなっていてIDEから古いのを選択しないとダメだとは思っていませんでした。壊れていなくてよかったです。</p>
<p>5年経過しているので、いろいろな環境が変わっていますね。5年前よりいろいろ進化しているので、ハマることもあるかもですが以前より楽しいことができそうな気がします。</p>
<h3>著者にメッセージ</h3>
<p>間違いのご指摘など、コメントじゃなくて、個人的にやりとりしたい場合は<a class="c-link-text" href="/mail/" target="_blank" rel="noopener noreferrer" data-wpel-link="internal">こちらから</a>どうぞ。お返事が遅くなるときもありますが、ご了承を。</p>
</div>
<footer class="entry-footer"></footer>
</div></article><article id="post-10121" class="post-10121 post type-post status-publish format-standard has-post-thumbnail hentry category-arduino category-diy category-parts"><div class="entry-wrapper">
<header class="entry-header"> <span class="entry-format theme-genericon"></span><div class="entry-meta"> <span class="posted-on">投稿日: <a href="/2021/02/20/arudio-seeeduino-xiao/" rel="bookmark noopener noreferrer" data-wpel-link="internal"><time class="entry-date published" datetime="2021-02-20T15:38:39+09:00">2021年2月20日</time><time class="updated" datetime="2021-02-20T15:38:45+09:00">2021年2月20日</time></a> </span><span class="posted-on">更新日:2021年2月20日</span> <span class="categories"> <a href="/category/arduino/" rel="category tag noopener noreferrer" data-wpel-link="internal">arduino</a>, <a href="/category/diy/" rel="category tag noopener noreferrer" data-wpel-link="internal">DIY</a>, <a href="/category/parts/" rel="category tag noopener noreferrer" data-wpel-link="internal">Parts</a></span>
</div>
<h1 class="entry-title"><a href="/2021/02/20/arudio-seeeduino-xiao/" rel="bookmark noopener noreferrer" data-wpel-link="internal">久しぶりに一目惚れしたArudio互換機のSeeeduino XIAO</a></h1></header><div class="entry-content">
<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex"><div class="w_b_wrap w_b_wrap_talk w_b_L w_b_flex w_b_div">
<div class="w_b_ava_box w_b_relative w_b_ava_L w_b_col w_b_f_n w_b_div">
<div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_L w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div"> <noscript><img src="/wp-content/uploads/2020/09/abata.png" width="96" height="96" alt="じゃんくはっく" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img"></noscript>
<img src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%2096%2096%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2020/09/abata.png" width="96" height="96" alt="じゃんくはっく" class="lazyload w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img">
</div></div></div>
<div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">じゃんくはっく</div>
</div>
<div class="w_b_bal_box w_b_bal_L w_b_relative w_b_direction_L w_b_w100 w_b_div">
<div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewbox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "></polygon></svg></div>
<div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div"><div class="w_b_bal_wrap w_b_bal_wrap_L w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_L w_b_shadow_L w_b_ta_L w_b_div"><div class="w_b_quote w_b_div"><p>可愛すぎて一目惚れしました！</p></div></div></div></div>
</div>
</div></div></div>
<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex w_b_mla w_b_jc_fe"><div class="w_b_wrap w_b_wrap_talk w_b_R w_b_flex w_b_jc_fe w_b_div">
<div class="w_b_bal_box w_b_bal_R w_b_relative w_b_direction_R w_b_w100 w_b_div">
<div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewbox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "></polygon></svg></div>
<div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div"><div class="w_b_bal_wrap w_b_bal_wrap_R w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_R w_b_shadow_R w_b_ta_L w_b_div"><div class="w_b_quote w_b_div"><p>ぽっ！　きゃー</p></div></div></div></div>
</div>
<div class="w_b_ava_box w_b_relative w_b_ava_R w_b_col w_b_f_n w_b_div">
<div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_R w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div"> <noscript><img src="/wp-content/uploads/2020/09/pi-.png" width="96" height="96" alt="ぴー" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img"></noscript>
<img src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%2096%2096%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2020/09/pi-.png" width="96" height="96" alt="ぴー" class="lazyload w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img">
</div></div></div>
<div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">ぴー</div>
</div>
</div></div></div>
<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex"><div class="w_b_wrap w_b_wrap_talk w_b_L w_b_flex w_b_div">
<div class="w_b_ava_box w_b_relative w_b_ava_L w_b_col w_b_f_n w_b_div">
<div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_L w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div"> <noscript><img src="/wp-content/uploads/2020/09/abata.png" width="96" height="96" alt="じゃんくはっく" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img"></noscript>
<img src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%2096%2096%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2020/09/abata.png" width="96" height="96" alt="じゃんくはっく" class="lazyload w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img">
</div></div></div>
<div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">じゃんくはっく</div>
</div>
<div class="w_b_bal_box w_b_bal_L w_b_relative w_b_direction_L w_b_w100 w_b_div">
<div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewbox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "></polygon></svg></div>
<div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div"><div class="w_b_bal_wrap w_b_bal_wrap_L w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_L w_b_shadow_L w_b_ta_L w_b_div"><div class="w_b_quote w_b_div"><p>・・・いや、ぴーちゃんの事じゃなくて、SeedのXIAOっていうArduio 互換機のことよ。</p></div></div></div></div>
</div>
</div></div></div>
<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex w_b_mla w_b_jc_fe"><div class="w_b_wrap w_b_wrap_talk w_b_R w_b_flex w_b_jc_fe w_b_div">
<div class="w_b_bal_box w_b_bal_R w_b_relative w_b_direction_R w_b_w100 w_b_div">
<div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewbox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "></polygon></svg></div>
<div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div"><div class="w_b_bal_wrap w_b_bal_wrap_R w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_R w_b_shadow_R w_b_ta_L w_b_div"><div class="w_b_quote w_b_div"><p>こんなチビっこいマシンに負けたのか・・・w</p></div></div></div></div>
</div>
<div class="w_b_ava_box w_b_relative w_b_ava_R w_b_col w_b_f_n w_b_div">
<div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_R w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div"> <noscript><img src="/wp-content/uploads/2020/09/pi-.png" width="96" height="96" alt="ぴー" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img"></noscript>
<img src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%2096%2096%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2020/09/pi-.png" width="96" height="96" alt="ぴー" class="lazyload w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img">
</div></div></div>
<div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">ぴー</div>
</div>
</div></div></div>
<p>サムネでもわかるとは思いますが、これ全体のフォルムがかわいいんですよね。あと想像よりもちっさいんです。親指くらいの大きさなんですよ。発売は去年の３〜6月ごろだったみたいですが、今頃発見です。</p>
<h3>3個入りパッケージで1,750円！</h3>
<blockquote class="wp-block-quote">
<p>Wiki  Seeeduino Xiaoをはじめよう</p>
<cite><a href="https://wiki.seeedstudio.com/jp/Seeeduino-XIAO/" target="_blank" rel="noreferrer noopener external" data-wpel-link="external" class="wpel-icon-right">https://wiki.seeedstudio.com/jp/Seeeduino-XIAO/<span class="wpel-icon wpel-image wpel-icon-1"></span></a></cite>
</blockquote>
<figure class="wp-block-image size-large"><noscript><img width="955" height="430" src="/wp-content/uploads/2021/02/xiao1.png" alt="" class="wp-image-10122" srcset="/wp-content/uploads/2021/02/xiao1.png 955w, /wp-content/uploads/2021/02/xiao1-768x346.png 768w" sizes="(max-width: 955px) 100vw, 955px"></noscript>
<img width="955" height="430" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20955%20430%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/02/xiao1.png" alt="" class="lazyload wp-image-10122" data-srcset="/wp-content/uploads/2021/02/xiao1.png 955w, /wp-content/uploads/2021/02/xiao1-768x346.png 768w" data-sizes="(max-width: 955px) 100vw, 955px"></figure><p>Seeedの日本語版のWikiもありますので、大きさなどはそちらでどうぞ。上の写真は3個入りのをアマゾンからゲットしました。3個入りで1800円弱です。１つ600円ってとこですかね。</p>
<figure class="wp-block-image size-large"><noscript><img width="782" height="320" src="/wp-content/uploads/2021/02/xiao2.png" alt="" class="wp-image-10123" srcset="/wp-content/uploads/2021/02/xiao2.png 782w, /wp-content/uploads/2021/02/xiao2-768x314.png 768w" sizes="(max-width: 782px) 100vw, 782px"></noscript>
<img width="782" height="320" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20782%20320%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/02/xiao2.png" alt="" class="lazyload wp-image-10123" data-srcset="/wp-content/uploads/2021/02/xiao2.png 782w, /wp-content/uploads/2021/02/xiao2-768x314.png 768w" data-sizes="(max-width: 782px) 100vw, 782px"></figure><p>中身！　想像より、ちっちゃい！親指に乗りますよ。</p>
<figure class="wp-block-image size-large"><noscript><img width="783" height="342" src="/wp-content/uploads/2021/02/xiao.png" alt="" class="wp-image-10124" srcset="/wp-content/uploads/2021/02/xiao.png 783w, /wp-content/uploads/2021/02/xiao-768x335.png 768w" sizes="(max-width: 783px) 100vw, 783px"></noscript>
<img width="783" height="342" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20783%20342%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/02/xiao.png" alt="" class="lazyload wp-image-10124" data-srcset="/wp-content/uploads/2021/02/xiao.png 783w, /wp-content/uploads/2021/02/xiao-768x335.png 768w" data-sizes="(max-width: 783px) 100vw, 783px"></figure><p>ESP32と遊んでからだいぶ月日が経ちましたが、大きさはそのくらいです。ブレッドボードに刺さるのでPinつけてすぐ楽しめますね！</p>
<h3>まずはボードをじろじろと見る！</h3>
<p>Type-Cコネクタが付いていて、端面がスルーホールになっていて面実装も考慮されていますね。このType-Cコネクタは６ピンタイプじゃなくて12ピンです。あと、LEDらしきものが４つ付いています。</p>
<p>金属のカバーで覆われていますので、その中が気になるところですがまずは、PIN番号が表からわかるようにシールを貼っておきました。なかなか気が利いていますね！　Seeedさん、このプロダクトをリリースするにあたりいろいろ気合いが入っているようです。</p>
<figure class="wp-block-image size-large"><noscript><img width="884" height="659" src="/wp-content/uploads/2021/02/xiao-1.png" alt="" class="wp-image-10125" srcset="/wp-content/uploads/2021/02/xiao-1.png 884w, /wp-content/uploads/2021/02/xiao-1-768x573.png 768w" sizes="(max-width: 884px) 100vw, 884px"></noscript>
<img width="884" height="659" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20884%20659%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/02/xiao-1.png" alt="" class="lazyload wp-image-10125" data-srcset="/wp-content/uploads/2021/02/xiao-1.png 884w, /wp-content/uploads/2021/02/xiao-1-768x573.png 768w" data-sizes="(max-width: 884px) 100vw, 884px"></figure><p>裏面を見ると、SMD実装したときのVIN,GNDがありますね。４つの丸いのは、なんでしょうか？</p>
<figure class="wp-block-image size-large"><noscript><img width="881" height="659" src="/wp-content/uploads/2021/02/xiao-2.png" alt="" class="wp-image-10126" srcset="/wp-content/uploads/2021/02/xiao-2.png 881w, /wp-content/uploads/2021/02/xiao-2-768x574.png 768w" sizes="(max-width: 881px) 100vw, 881px"></noscript>
<img width="881" height="659" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20881%20659%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/02/xiao-2.png" alt="" class="lazyload wp-image-10126" data-srcset="/wp-content/uploads/2021/02/xiao-2.png 881w, /wp-content/uploads/2021/02/xiao-2-768x574.png 768w" data-sizes="(max-width: 881px) 100vw, 881px"></figure><p>調べてみると、英語版Wikiによれば、Newバージョンだとこの丸いのが４つあるようです。</p>
<figure class="wp-block-image size-large"><noscript><img width="672" height="497" src="/wp-content/uploads/2021/02/Seeeduino_XIAO_-_Seeed_Wiki.png" alt="" class="wp-image-10127"></noscript>
<img width="672" height="497" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20672%20497%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/02/Seeeduino_XIAO_-_Seeed_Wiki.png" alt="" class="lazyload wp-image-10127"></figure><blockquote class="wp-block-quote">
<p>Seeed　英語版Wiki：hardware-overview</p>
<cite><a href="https://wiki.seeedstudio.com/Seeeduino-XIAO/#hardware-overview" target="_blank" rel="noreferrer noopener external" data-wpel-link="external" class="wpel-icon-right">Wiki<span class="wpel-icon wpel-image wpel-icon-1"></span></a></cite>
</blockquote>
<p>どうやら、<strong>SWCLK (PA30)</strong> と <strong>SWDIO (PA31)</strong> のGPIOのようです。</p>
<blockquote class="wp-block-quote">
<p>qita : Seeeduino XIAO 背面パッドをGPIOとして使う</p>
<cite><a href="https://qiita.com/nanase/items/37ecca24aee8fbd4492e" target="_blank" rel="noreferrer noopener external" data-wpel-link="external" class="wpel-icon-right">https://qiita.com/nanase/items/37ecca24aee8fbd4492e<span class="wpel-icon wpel-image wpel-icon-1"></span></a></cite>
</blockquote>
<p>だいぶ時間が経過しているので、先輩たちがあれこれ情報をあげていてくれて助かりますね。</p>
<figure class="wp-block-image size-large"><noscript><img width="644" height="464" src="/wp-content/uploads/2021/02/xiao-type-c.png" alt="" class="wp-image-10128"></noscript>
<img width="644" height="464" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20644%20464%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/02/xiao-type-c.png" alt="" class="lazyload wp-image-10128"></figure><p>やっぱり、Type-C が付いているところがうれしいです。接続しやすいですからね！</p>
<h3>動作確認</h3>
<p>Type-Cケーブル（スマホでいつも使っているやつね）をPCに繋げて、おもむろにXAIOに繋げてみます。ケーブルのほうが重いので、本体が浮きます！　</p>
<p>オレンジ色のLEDがピカピカしてますね！</p>
<div class="wp-block-image"><figure class="aligncenter size-large is-resized"><noscript><img src="/wp-content/uploads/2021/02/Blink.gif" alt="" class="wp-image-10129" width="456" height="327"></noscript>
<img src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20456%20327%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/02/Blink.gif" alt="" class="lazyload wp-image-10129" width="456" height="327"></figure></div>
<h3>とりあえずLチカ</h3>
<p>Arudio IDEを使って、Lチカでもやってみます。SeeedのWikiにしたがってIDEは仕込みんでおきます。久しぶりすぎて書き方、だいぶ忘れちゃいました。</p>
<p>この２つのブルーLEDは、RX/TXのLEDなんですがIDEからも定義されているので、光らせることができるようです。デジタル出力だけかなと思っていましたが、アナログでもいけるようですね。</p>
<div class="wp-block-image"><figure class="aligncenter size-large is-resized"><noscript><img src="/wp-content/uploads/2021/02/Blink3.gif" alt="" class="wp-image-10130" width="458" height="348"></noscript>
<img src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20458%20348%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/02/Blink3.gif" alt="" class="lazyload wp-image-10130" width="458" height="348"></figure></div>
<pre class="wp-block-code"><code>//setup()内の処理は最初の一回だけ行われる
void setup() {
  pinMode(PIN_LED2, OUTPUT );//Pinを出力用に設定
  pinMode(PIN_LED3, OUTPUT);
  int led_pw = 255; // 明るさ(通常とは逆) 明るい0 - 255暗い
}

void loop() {
  rx_led2( 2 ); //明るさ調整ステップ
  rest();
  tx_led3( 2 ); //明るさ調整ステップ
  rest();
}

// RXとLED 基盤側の青LED
void rx_led2(int n){
  int led_pw = 255;
  //点滅周期
  for (int i=0;i &lt; 255;i++ ) {
    analogWrite(PIN_LED2, led_pw );
    led_pw = led_pw + n;
    if( led_pw ==   0 ) n =  n;
    if( led_pw == 255 ) n = -n;
    delay( 5 );//だんだん暗くなる速度
  }
//  digitalWrite(PIN_LED2, HIGH ); //通常とは逆　LOW で点灯、HIGH で消灯
analogWrite(PIN_LED2, 255 );// LED Off 上より暗くなる
}

// TXのLED USBコネクタ側の青LED
void tx_led3(int n){
  int led_pw = 255;
  for (int i=0;i &lt; 255;i++ ) {
    analogWrite(PIN_LED3, led_pw );
    led_pw = led_pw + n;
    if( led_pw ==   0 ) n =  n;
    if( led_pw == 255 ) n = -n;
    delay( 5 );
  }
analogWrite(PIN_LED3, 255 );// LED Off
}

void rest() {
    delay( 500 );
}</code></pre>
<p>いろんな値を書き換えて遊んでみてください。</p>
<p>注意点としては、HIGHとLOWが逆なのと、255が暗く、0が明るい状態となるようです。これは仕様なのかバグなのか？　Seeedさん、これは修正してほしいです。</p>
<h3>XIAOはどんなスペックなのか？</h3>
<p>このボード、一目惚れして速攻買ったのでどんなスペックかまだよくわかっていません。改めて、記載してみます。</p>
<figure class="wp-block-table"><table><tbody>
<tr>
<td><strong>製品名称</strong></td>
<td><strong><a href="https://www.seeedstudio.com/Seeeduino-XIAO-Arduino-Microcontroller-SAMD21-Cortex-M0+-p-4426.html?utm_source=blog&amp;utm_medium=blog" target="_blank" rel="noreferrer noopener external" data-wpel-link="external" class="wpel-icon-right">Seeeduino XIAO<span class="wpel-icon wpel-image wpel-icon-1"></span></a></strong></td>
</tr>
<tr>
<td><strong>マイコン</strong></td>
<td>ARM Cortex-M0+ CPU(SAMD21G18) </td>
</tr>
<tr>
<td><strong>動作電圧</strong></td>
<td>3.3V</td>
</tr>
<tr>
<td>
<strong>デジタル I/O </strong>ピン</td>
<td>11</td>
</tr>
<tr>
<td><strong>PWM Pins</strong></td>
<td>10</td>
</tr>
<tr>
<td><strong>アナログ I/O ピン</strong></td>
<td>11</td>
</tr>
<tr>
<td><strong>フラッシュメモリ</strong></td>
<td>256 KB</td>
</tr>
<tr>
<td><strong>SRAM</strong></td>
<td>32KB</td>
</tr>
<tr>
<td><strong>EEPROM</strong></td>
<td>–</td>
</tr>
<tr>
<td><strong>クロックスピード</strong></td>
<td>48 MHz</td>
</tr>
<tr>
<td><strong>大きさ</strong></td>
<td>23.5mm x 17.5mm</td>
</tr>
<tr>
<td><strong>価格</strong></td>
<td>$4.90</td>
</tr>
</tbody></table></figure><p>だいぶarduinoから離れていて、このあたり疎いのですがどうやら ATSAMD21は、アーキテクチャーはARM Cortex-M0+ CPU(SAMD21G18) のようです。Arduino Zero・M0 Proっていうボードにも使われているやつみたいですね。SAMD21系のarduinoとか表現されている感じです。または、単にSAMD系Arduinoとか。</p>
<blockquote class="wp-block-quote">
<p>ARM　CORTEX-M0+</p>
<cite><a href="https://www.arm.com/ja/products/silicon-ip-cpu/cortex-m/cortex-m0-plus" target="_blank" rel="noreferrer noopener external" data-wpel-link="external" class="wpel-icon-right">https://www.arm.com/ja/products/silicon-ip-cpu/cortex-m/cortex-m0-plus<span class="wpel-icon wpel-image wpel-icon-1"></span></a></cite>
</blockquote>
<p>メジャーなArduino との比較表です。自分は、<strong>Nano</strong>シリーズ互換機か、Pro Miniが好きです。安いからw</p>
<figure class="wp-block-table"><table><tbody>
<tr>
<td><strong>ボード</strong></td>
<td><strong>マイコン</strong></td>
<td><strong>動作電圧</strong></td>
<td><strong>Digital I/O </strong></td>
<td><strong>PWM </strong></td>
<td><strong>Analog I/O </strong></td>
<td><strong>Flash Memory</strong></td>
<td><strong>SRAM</strong></td>
<td><strong>EEPROM</strong></td>
<td><strong><strong>クロックスピード</strong></strong></td>
<td><strong><strong>大きさ</strong></strong></td>
<td><strong><strong>価格</strong></strong></td>
</tr>
<tr>
<td><strong><a href="https://www.seeedstudio.com/Arduino-Nano-v3-p-1928.html?utm_source=blog&amp;utm_medium=blog" target="_blank" rel="noreferrer noopener external" data-wpel-link="external" class="wpel-icon-right">Arduino Nano v3<span class="wpel-icon wpel-image wpel-icon-1"></span></a></strong></td>
<td>ATmega328</td>
<td>5V</td>
<td>22</td>
<td>6</td>
<td>8</td>
<td>32KB</td>
<td>2KB</td>
<td>1KB</td>
<td>16MHz</td>
<td>45 mm x 18 mm</td>
<td>$45.90</td>
</tr>
<tr>
<td><strong><a href="https://www.seeedstudio.com/Seeeduino-Nano-p-4111.html?utm_source=blog&amp;utm_medium=blog" target="_blank" rel="noreferrer noopener external" data-wpel-link="external" class="wpel-icon-right">Seeeduino Nano<span class="wpel-icon wpel-image wpel-icon-1"></span></a></strong></td>
<td>ATmega328</td>
<td>5V</td>
<td>22</td>
<td>6</td>
<td>8</td>
<td>32KB</td>
<td>2KB</td>
<td>1KB</td>
<td>16MHz</td>
<td>45 mm x 18 mm</td>
<td>$6.90</td>
</tr>
<tr>
<td><strong><a href="https://www.seeedstudio.com/Arduino-Micro-p-1368.html?utm_source=blog&amp;utm_medium=blog" target="_blank" rel="noreferrer noopener external" data-wpel-link="external" class="wpel-icon-right">Arduino Micro<span class="wpel-icon wpel-image wpel-icon-1"></span></a></strong></td>
<td>ATmega32u4</td>
<td>5V</td>
<td>20</td>
<td>7</td>
<td>12</td>
<td>32KB</td>
<td>2.5KB</td>
<td>1KB</td>
<td>16MHz</td>
<td>48 mm x 18 mm</td>
<td>$24.90</td>
</tr>
<tr>
<td><strong><a href="https://www.seeedstudio.com/Arduino-Pro-Mini-328-5V-16MHz-p-1443.html?utm_source=blog&amp;utm_medium=blog" target="_blank" rel="noreferrer noopener external" data-wpel-link="external" class="wpel-icon-right">Arduino Pro Mini<span class="wpel-icon wpel-image wpel-icon-1"></span></a></strong></td>
<td>ATmega328</td>
<td>5V / 3.3V</td>
<td>14</td>
<td>6</td>
<td>6</td>
<td>32KB</td>
<td>2KB</td>
<td>1KB</td>
<td>8 /16MHz</td>
<td>33 mm x 18 mm</td>
<td>$9.95</td>
</tr>
<tr>
<td><strong><a href="https://www.adafruit.com/product/3500" target="_blank" rel="noreferrer noopener external" data-wpel-link="external" class="wpel-icon-right">Trinket M0<span class="wpel-icon wpel-image wpel-icon-1"></span></a></strong></td>
<td>ATSAMD21</td>
<td>3.3V</td>
<td>5</td>
<td>2</td>
<td>3</td>
<td>256KB</td>
<td>32KB</td>
<td>–</td>
<td>48MHz</td>
<td>27mm x 15.3 mm</td>
<td>$8.95</td>
</tr>
<tr>
<td><strong><a href="https://www.seeedstudio.com/Seeeduino-XIAO-Arduino-Microcontroller-SAMD21-Cortex-M0+-p-4426.html?utm_source=blog&amp;utm_medium=blog" target="_blank" rel="noreferrer noopener external" data-wpel-link="external" class="wpel-icon-right">Seeeduino XIAO<span class="wpel-icon wpel-image wpel-icon-1"></span></a></strong></td>
<td>
<br>ATSAMD21</td>
<td>3.3V</td>
<td>11</td>
<td>10</td>
<td>11</td>
<td>256KB</td>
<td>32KB</td>
<td>–</td>
<td>48MHz</td>
<td>23.5mm x 17.5mm</td>
<td>$4.90</td>
</tr>
</tbody></table></figure><p>NanoやProMiniの互換機は、アリエクで200〜300円くらいなんですが、それと比べると600円は高いかもしれませんが、倍以上のスペックはありますね。</p>
<p>こうして比較してみると、コスパがいいんじゃないでしょうか。まぁ、こんな高スペックは必要ないっていう用途もあるんで使い所次第ですかね。</p>
<h3>今後に備え応用例や試したことなどメモ</h3>
<p>発売からもうすぐ1年経過するので、どんな応用例があるかリサーチしてみました。また、開発する上で役立ちそうなメモをしておきます。</p>
<blockquote class="wp-block-quote">
<p>Seeed：Seeeduino XIAO Resources Roundup. What will be your next project idea made by Seeeduino XIAO?</p>
<cite><a href="https://www.seeedstudio.com/blog/2020/05/08/seeeduino-xiao-community-projects-collection-whats-your-next-project-idea-made-by-seeeeduino-xiao/" target="_blank" rel="noreferrer noopener external" data-wpel-link="external" class="wpel-icon-right">リンク<span class="wpel-icon wpel-image wpel-icon-1"></span></a></cite>
</blockquote>
<p>まず、オフィシャルのSeeedのブログでいくつか紹介されています。その中から独断と偏見で面白そうなプロジェクトをピックアップ。</p>
<figure class="wp-block-embed is-type-video is-provider-youtube wp-block-embed-youtube wp-embed-aspect-16-9 wp-has-aspect-ratio"><div class="wp-block-embed__wrapper"> <iframe loading="lazy" title="Arduino XIAO でMidi音源を鳴らしてみよう！　 Let&#039;s play the Midi sound source with Arduino XIAO!" width="984" height="554" src="https://www.youtube.com/embed/Hd8Jb1o405s?feature=oembed" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
</div></figure><p>MIDIをコントロールできるので、オリジナルコントローラとかセンサー駆動の楽器とか？</p>
<p>サイトでは、違うボードを使っていますがXIAOでも同じことが可能。画像や図形を組み合わせて空中にお好みの絵を投影する装置。</p>
<blockquote class="wp-block-quote">
<p><a rel="noreferrer noopener external" href="https://homemadegarbage.com/povranian-make" target="_blank" data-wpel-link="external" class="wpel-icon-right">PovRanian 装置<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p>
<p>PovRanian (ポブラニアン)：画像や図形を組み合わせて空中にお好みの絵を投影する装置</p>
</blockquote>
<p></p>
<p>これ作りたいなー！</p>
<blockquote class="wp-block-quote"><p><a href="https://qiita.com/dattaman9/items/37a6755e125ecfc20d63" target="_blank" rel="noreferrer noopener external" data-wpel-link="external" class="wpel-icon-right">エアロバイクでストリートビュー進みたい！！ （その3）（Seeeduino XIAO化してみた）<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p></blockquote>
<p>ツールのUSB Stack は、 TinyUSBを選択とな。ほほー。</p>
<p></p>
<p>あれこれ調査していると、PlatformIOも対応しているようです。まだ試していませんが、メモしておきます。</p>
<blockquote class="wp-block-quote"><p>開発環境：PlatformIO　<a href="https://docs.platformio.org/en/latest/boards/atmelsam/seeed_xiao.html#id1" data-wpel-link="external" target="_blank" rel="external noopener noreferrer" class="wpel-icon-right">Seeeduino XIAO<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p></blockquote>
<blockquote class="wp-block-quote"><p><a href="https://github.com/gdsports/USB_Host_Library_SAMD" target="_blank" rel="noreferrer noopener external" data-wpel-link="external" class="wpel-icon-right">USBホストライブラリSAMD<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p></blockquote>
<p>SeeedのWikiにあるやつですが、リンク先だけメモしておきます。</p>
<blockquote class="wp-block-quote"><p><a href="https://wiki.seeedstudio.com/jp/Seeeduino-XIAO-TinyUSB/" target="_blank" rel="noreferrer noopener external" data-wpel-link="external" class="wpel-icon-right">Seeeduino XIAOをUSBデバイス(TinyUSB)として使う<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p></blockquote>
<blockquote class="wp-block-quote"><p><a rel="noreferrer noopener external" href="http://zattouka.net/GarageHouse/micon/Arduino/XIAO/use.htm" target="_blank" data-wpel-link="external" class="wpel-icon-right">Ｓｅｅｅｄｕｉｎｏ　ＸＩＡＯ の使い方<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p></blockquote>
<blockquote class="wp-block-quote"><p><a rel="noreferrer noopener external" href="https://botalab.tech/tamiya_camrobo_face_xiao/" target="_blank" data-wpel-link="external" class="wpel-icon-right">カムロボの顔用基板を作ってみた [Xiao版]<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p></blockquote>
<blockquote class="wp-block-quote"><p><a href="https://elchika.com/article/97dc4b94-1934-4ee1-acbf-6fa1503b83f6/" target="_blank" rel="noreferrer noopener external" data-wpel-link="external" class="wpel-icon-right">Seeeduino XIAOを使って二酸化炭素測定する　SparkFunライブラリVer<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p></blockquote>
<blockquote class="wp-block-quote"><p>f<a rel="noreferrer noopener external" href="https://forum.fritzing.org/t/seeeduino-xiao-anyone-got-the-part/10820" target="_blank" data-wpel-link="external" class="wpel-icon-right">ritzingのパーツ<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p></blockquote>
<blockquote class="wp-block-quote"><p><a href="https://matsujirushi.hatenablog.jp/entry/2020/04/23/173722" target="_blank" rel="noreferrer noopener external" data-wpel-link="external" class="wpel-icon-right">Seeeduino XIAOのタッチ入力<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p></blockquote>
<blockquote class="wp-block-quote"><p><a href="https://matsujirushi.hatenablog.jp/entry/2020/04/18/201940" target="_blank" rel="noreferrer noopener external" data-wpel-link="external" class="wpel-icon-right">Seeeduino XIAOのデジタル入力<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p></blockquote>
<blockquote class="wp-block-quote"><p><a href="https://matsujirushi.hatenablog.jp/entry/2020/04/19/070000" target="_blank" rel="noreferrer noopener external" data-wpel-link="external" class="wpel-icon-right">Seeeduino XIAOのデジタル出力<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p></blockquote>
<blockquote class="wp-block-quote"><p><a href="https://101010.fun/iot/arduino-hc-sr04.html" target="_blank" rel="noreferrer noopener external" data-wpel-link="external" class="wpel-icon-right">Arduinoで超音波センサHC-SR04の使い方【距離測定】<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p></blockquote>
<blockquote class="wp-block-quote"><p><a href="https://101010.fun/iot/arduino-oled-display.html" target="_blank" rel="noreferrer noopener external" data-wpel-link="external" class="wpel-icon-right">ArduinoでOLED<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p></blockquote>
<blockquote class="wp-block-quote"><p><a href="https://101010.fun/iot/arduino-serial-led.html" target="_blank" rel="noreferrer noopener external" data-wpel-link="external" class="wpel-icon-right">シリアルLED（WS2812B）をArduinoで制御<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p></blockquote>
<blockquote class="wp-block-quote"><p><a href="https://kesokonpatata.hatenablog.jp/entry/2021/01/01/%E3%80%90Seeeduino_XIAO%E3%80%91RS232c%E3%81%8B%E3%82%89%E5%8F%97%E4%BF%A1%E3%81%97%E3%81%9F%E4%BF%A1%E5%8F%B7%E3%82%92USBHID%E3%81%A7%E9%80%81%E4%BF%A1%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B" target="_blank" rel="noreferrer noopener external" data-wpel-link="external" class="wpel-icon-right">【Seeeduino XIAO】RS232cから受信した信号をUSB HIDで送信してみる<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p></blockquote>
<blockquote class="wp-block-quote"><p><a href="https://zoe6120.com/2020/05/05/1449/" target="_blank" rel="noreferrer noopener external" data-wpel-link="external" class="wpel-icon-right">Seeeduino XIAO でPWM調光のLチカとI2CのLCDを使ってみる<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p></blockquote>
<p>いろいろありますねー。こんなこともできるみたいです。</p>
<blockquote class="wp-block-quote">
<p><a rel="noreferrer noopener external" href="https://qiita.com/hori-takeshi/items/1c9b30433896495afb2c" target="_blank" data-wpel-link="external" class="wpel-icon-right">Seeeduino XIAO マイコンで TOPPERS を始めよう<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p>
<p>TOPPERS/R2CAというマルチタスク処理ができる</p>
</blockquote>
<blockquote class="wp-block-quote"><p><a href="https://qiita.com/reiven/items/c4018da0892953236b21" target="_blank" rel="noreferrer noopener external" data-wpel-link="external" class="wpel-icon-right">Seeeduino_XIAOでArduino Keyboard.h互換ライブラリを利用してMicrosoft Teamsミュートキーを作製する<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p></blockquote>
<p>楽しそうなのがいっぱいありますね。</p>
<p>XIAOを組み込んでいるハードウェア作家さんもいましたよ！</p>
<blockquote class="wp-block-quote">
<p>XIAO DAP<br>Seeeduino XIAO をメインコントローラとした、DigitalAudioPlayer</p>
<cite><a href="https://sites.google.com/view/chikoidac/home/xiao_dap" target="_blank" rel="noreferrer noopener external" data-wpel-link="external" class="wpel-icon-right">https://sites.google.com/view/chikoidac/home/xiao_dap<span class="wpel-icon wpel-image wpel-icon-1"></span></a></cite>
</blockquote>
<p>まだ販売はされていないとのことですが、販売されたら組み立てKITを買ってみたいです！</p>
<h3>まとめ</h3>
<p>今回、なんとなくわかったのは以下となります。</p>
<p>・XIAOはコスパ最高でないか！<br>・Type-Cが良い！<br>・Arduino IDE 互換で、SAMD21系のarduino<br>・本家では、Arduino Zero・M0 Proに使われている<br>・3.3v動作でクロックが速く、フラッシュメモリも多い<br>・しかしEEPROMがないようです　フラッシュメモリに保存する？<br>・USB関連のプロダクトやシリアル通信系の応用とか相性良さそう<br>・SMD実装がやりやすい（ので、基板設計して使うのとか良いですね）</p>
<h3>あとがき</h3>
<p>このボード、本当に小さくて応用次第では面白い組込ができそうだなーと感じています。まずは３つあるので、何か実用的な何かを１、２つ作ってみたいですね。１つは、開発用にしておいて残りは実験的に何か実際に作ってみようと思います。まずは、できそうなことからやってみましょうか！</p>
<h3>著者にメッセージ</h3>
<p>間違いのご指摘など、コメントじゃなくて、個人的にやりとりしたい場合は<a class="c-link-text" href="/mail/" target="_blank" rel="noopener noreferrer" data-wpel-link="internal">こちらから</a>どうぞ。お返事が遅くなるときもありますが、ご了承を。</p>
</div>
<footer class="entry-footer"></footer>
</div></article><article id="post-10103" class="post-10103 post type-post status-publish format-standard has-post-thumbnail hentry category-aliexpress category-diy category-parts"><div class="entry-wrapper">
<header class="entry-header"> <span class="entry-format theme-genericon"></span><div class="entry-meta"> <span class="posted-on">投稿日: <a href="/2021/02/20/type-c/" rel="bookmark noopener noreferrer" data-wpel-link="internal"><time class="entry-date published" datetime="2021-02-20T05:21:48+09:00">2021年2月20日</time><time class="updated" datetime="2021-02-20T05:37:49+09:00">2021年2月20日</time></a> </span><span class="posted-on">更新日:2021年2月20日</span> <span class="categories"> <a href="/category/aliexpress/" rel="category tag noopener noreferrer" data-wpel-link="internal">Aliexpress</a>, <a href="/category/diy/" rel="category tag noopener noreferrer" data-wpel-link="internal">DIY</a>, <a href="/category/parts/" rel="category tag noopener noreferrer" data-wpel-link="internal">Parts</a></span>
</div>
<h1 class="entry-title"><a href="/2021/02/20/type-c/" rel="bookmark noopener noreferrer" data-wpel-link="internal">リポ充電基盤のType-C版が出てたんでポチった！</a></h1></header><div class="entry-content">
<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex"><div class="w_b_wrap w_b_wrap_talk w_b_L w_b_flex w_b_div">
<div class="w_b_ava_box w_b_relative w_b_ava_L w_b_col w_b_f_n w_b_div">
<div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_L w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div"> <noscript><img src="/wp-content/uploads/2020/09/abata.png" width="96" height="96" alt="じゃんくはっく" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img"></noscript>
<img src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%2096%2096%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2020/09/abata.png" width="96" height="96" alt="じゃんくはっく" class="lazyload w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img">
</div></div></div>
<div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">じゃんくはっく</div>
</div>
<div class="w_b_bal_box w_b_bal_L w_b_relative w_b_direction_L w_b_w100 w_b_div">
<div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewbox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "></polygon></svg></div>
<div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div"><div class="w_b_bal_wrap w_b_bal_wrap_L w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_L w_b_shadow_L w_b_ta_L w_b_div"><div class="w_b_quote w_b_div"><p>最近また、電子工作熱が出てきたのでアリエク物色！</p></div></div></div></div>
</div>
</div></div></div>
<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex w_b_mla w_b_jc_fe"><div class="w_b_wrap w_b_wrap_talk w_b_R w_b_flex w_b_jc_fe w_b_div">
<div class="w_b_bal_box w_b_bal_R w_b_relative w_b_direction_R w_b_w100 w_b_div">
<div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewbox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "></polygon></svg></div>
<div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div"><div class="w_b_bal_wrap w_b_bal_wrap_R w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_R w_b_shadow_R w_b_ta_L w_b_div"><div class="w_b_quote w_b_div"><p>はいはい、今日は何をポチったんですか？</p></div></div></div></div>
</div>
<div class="w_b_ava_box w_b_relative w_b_ava_R w_b_col w_b_f_n w_b_div">
<div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_R w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div"> <noscript><img src="/wp-content/uploads/2020/09/pi-.png" width="96" height="96" alt="ぴー" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img"></noscript>
<img src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%2096%2096%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2020/09/pi-.png" width="96" height="96" alt="ぴー" class="lazyload w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img">
</div></div></div>
<div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">ぴー</div>
</div>
</div></div></div>
<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex"><div class="w_b_wrap w_b_wrap_talk w_b_L w_b_flex w_b_div">
<div class="w_b_ava_box w_b_relative w_b_ava_L w_b_col w_b_f_n w_b_div">
<div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_L w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div"> <noscript><img src="/wp-content/uploads/2020/09/abata.png" width="96" height="96" alt="じゃんくはっく" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img"></noscript>
<img src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%2096%2096%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2020/09/abata.png" width="96" height="96" alt="じゃんくはっく" class="lazyload w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img">
</div></div></div>
<div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">じゃんくはっく</div>
</div>
<div class="w_b_bal_box w_b_bal_L w_b_relative w_b_direction_L w_b_w100 w_b_div">
<div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewbox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "></polygon></svg></div>
<div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div"><div class="w_b_bal_wrap w_b_bal_wrap_L w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_L w_b_shadow_L w_b_ta_L w_b_div"><div class="w_b_quote w_b_div"><p>ぐぬぬぅ！　なぜポチったのがわかるのだ！　</p></div></div></div></div>
</div>
</div></div></div>
<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex w_b_mla w_b_jc_fe"><div class="w_b_wrap w_b_wrap_talk w_b_R w_b_flex w_b_jc_fe w_b_div">
<div class="w_b_bal_box w_b_bal_R w_b_relative w_b_direction_R w_b_w100 w_b_div">
<div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewbox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "></polygon></svg></div>
<div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div"><div class="w_b_bal_wrap w_b_bal_wrap_R w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_R w_b_shadow_R w_b_ta_L w_b_div"><div class="w_b_quote w_b_div"><p>衝撃だったんでしょ？w</p></div></div></div></div>
</div>
<div class="w_b_ava_box w_b_relative w_b_ava_R w_b_col w_b_f_n w_b_div">
<div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_R w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div"> <noscript><img src="/wp-content/uploads/2020/09/pi-.png" width="96" height="96" alt="ぴー" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img"></noscript>
<img src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%2096%2096%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2020/09/pi-.png" width="96" height="96" alt="ぴー" class="lazyload w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img">
</div></div></div>
<div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">ぴー</div>
</div>
</div></div></div>
<p>はい！　またアリエクでポチってしまいました。</p>
<p>今回は、備忘録として記載。まだ到着していませんが、到着するころには「これなんだっけ？」という事態になることが多発していましたので、ポチッとしたらブログに書いていくことにします。</p>
<p>　副次効果としては、ぽちったら記事を書かないといけなくなるので衝動買い防止にもなるかなと！今日買ったのはこれです。</p>
<div class="wp-block-image"><figure class="aligncenter size-large"><a href="https://s.click.aliexpress.com/e/_AO6Pzu" target="_blank" rel="noopener external noreferrer" data-wpel-link="external"><noscript><img width="1024" height="528" src="/wp-content/uploads/2021/02/type-c_TP4056BMS-1024x528.png" alt="" class="wp-image-10106" srcset="/wp-content/uploads/2021/02/type-c_TP4056BMS-1024x528.png 1024w, /wp-content/uploads/2021/02/type-c_TP4056BMS-768x396.png 768w, /wp-content/uploads/2021/02/type-c_TP4056BMS-984x507.png 984w, /wp-content/uploads/2021/02/type-c_TP4056BMS.png 1048w" sizes="(max-width: 1024px) 100vw, 1024px"></noscript>
<img width="1024" height="528" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%201024%20528%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/02/type-c_TP4056BMS-1024x528.png" alt="" class="lazyload wp-image-10106" data-srcset="/wp-content/uploads/2021/02/type-c_TP4056BMS-1024x528.png 1024w, /wp-content/uploads/2021/02/type-c_TP4056BMS-768x396.png 768w, /wp-content/uploads/2021/02/type-c_TP4056BMS-984x507.png 984w, /wp-content/uploads/2021/02/type-c_TP4056BMS.png 1048w" data-sizes="(max-width: 1024px) 100vw, 1024px"></a></figure></div>
<p>なんとお値段、送料込みで10個450円です。1個あたり45円と、価格破壊な値段ですね。たぶん、このUSB Type-Cコネクタは6pinだと思いますが、簡単な工作であればこれで十分です。マイクロUSBのタイプもありますが、やっぱり差し込む方向を意識しなくていいType-Cは便利です。今では100円均一でもケーブル売っていますしね。</p>
<h3>リポ充電基盤とは？</h3>
<blockquote class="wp-block-quote">
<p>5V 18650　リチウムバッテリー充電モジュール</p>
<cite><em>投稿日: </em><a href="/2015/05/10/5v-18650%e3%80%80%e3%83%aa%e3%83%81%e3%82%a6%e3%83%a0%e3%83%90%e3%83%83%e3%83%86%e3%83%aa%e3%83%bc%e5%85%85%e9%9b%bb%e3%83%a2%e3%82%b8%e3%83%a5%e3%83%bc%e3%83%ab/" target="_blank" rel="noreferrer noopener" data-wpel-link="internal">2015年5月10日</a></cite>
</blockquote>
<p>5年くらい前にも購入していましたが、だいぶ数が少なくなったので追加購入です。この基盤は、リチウム電池を過充電、過放電しないための基盤です。メインチップは、TP4056で保護回路に、DW01A と ML8205A が乗っています。今回購入したのがどんなチップが乗っているかはまだ未調査ですが、まぁ仕様は同じでしょう。</p>
<p>この基盤、ちょっと電子工作して何か試作版を作る際に、リチウム電池とともに組込セットで詰め込むときに重宝します。</p>
<p>例えば、こんな感じで試作版に使っていました。</p>
<figure class="wp-block-image"><noscript><img src="https://i2.wp.com/hack.gpl.jp/wp-content/uploads/2015/08/25.jpg?resize=640%2C480" alt="2"></noscript>
<img class="lazyload" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20210%20140%22%3E%3C/svg%3E" data-src="https://i2.wp.com/hack.gpl.jp/wp-content/uploads/2015/08/25.jpg?resize=640%2C480" alt="2"></figure><p>これは<a rel="noreferrer noopener" href="/2015/05/11/esp8266-esp-12-spec/" target="_blank" data-wpel-link="internal">ESP8266 ESP-12</a>を使った温度・湿度・照度系のIoTデバイスなんですね。</p>
<figure class="wp-block-image"><noscript><img src="https://i0.wp.com/hack.gpl.jp/wp-content/uploads/2015/08/5.jpg?resize=640%2C480" alt="5"></noscript>
<img class="lazyload" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20210%20140%22%3E%3C/svg%3E" data-src="https://i0.wp.com/hack.gpl.jp/wp-content/uploads/2015/08/5.jpg?resize=640%2C480" alt="5"></figure><p>ちょっと見えにくいですがマイクロUSBが刺さっている部分にその基盤があります。5Vからリチウム電池に充電し、5Vを放電します。他にも、ポケットオシロスコープを充電持ち運び仕様にしてみたりと。</p>
<figure class="wp-block-image size-large"><noscript><img width="1024" height="383" src="/wp-content/uploads/2021/02/ss_dso-shell-1024x383.png" alt="" class="wp-image-10105" srcset="/wp-content/uploads/2021/02/ss_dso-shell-1024x383.png 1024w, /wp-content/uploads/2021/02/ss_dso-shell-768x288.png 768w, /wp-content/uploads/2021/02/ss_dso-shell-984x368.png 984w, /wp-content/uploads/2021/02/ss_dso-shell.png 1191w" sizes="(max-width: 1024px) 100vw, 1024px"></noscript>
<img width="1024" height="383" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%201024%20383%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/02/ss_dso-shell-1024x383.png" alt="" class="lazyload wp-image-10105" data-srcset="/wp-content/uploads/2021/02/ss_dso-shell-1024x383.png 1024w, /wp-content/uploads/2021/02/ss_dso-shell-768x288.png 768w, /wp-content/uploads/2021/02/ss_dso-shell-984x368.png 984w, /wp-content/uploads/2021/02/ss_dso-shell.png 1191w" data-sizes="(max-width: 1024px) 100vw, 1024px"></figure><p>これの工作の記事は忙しくて書いていませんでしたが中にリポ電池とこの基盤などが入っています。簡単にでも書いておけばよかったなー。ちょっと持ち運んで何か計測したりとか便利でした。</p>
<p>あと、自作基盤にこの充電ボードを乗っけた例もありますね。</p>
<figure class="wp-block-image"><noscript><img src="https://i0.wp.com/hack.gpl.jp/wp-content/uploads/2015/12/dsc00219_thumb.jpg?resize=640%2C361" alt="DSC00219"></noscript>
<img class="lazyload" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20210%20140%22%3E%3C/svg%3E" data-src="https://i0.wp.com/hack.gpl.jp/wp-content/uploads/2015/12/dsc00219_thumb.jpg?resize=640%2C361" alt="DSC00219"><figcaption><a href="/2015/12/07/esp8266-backboost-%e7%b5%84%e3%81%bf%e4%bb%98%e3%81%91%e5%ae%8c%e4%ba%86%e3%83%bb%e3%83%bb%e3%83%bb/" target="_blank" rel="noreferrer noopener" data-wpel-link="internal">ESP8266 BackBoost</a></figcaption></figure><p>この白い基盤は自作基盤でESP8266とバックブースト電源回路などが乗っています。充放電管理基盤は自作だと高くつくのでこんな感じで基盤にリフローして、くっつけて使っていました。</p>
<h3>まとめ</h3>
<p>今回、なんとなくわかったのは以下となります。</p>
<p>・Type-C版のTP4056充電管理基盤はケーブル接続が便利そう<br>・以前のマイクロUSB版より安くなっていた<br>・仕様が変更になっているのか、未調査<br>・今後、この基盤で工作していこうと思う<br>・基本的な構造は前のと同じだと思う<br>・到着したらまた検討してみる</p>
<h3>あとがき</h3>
<p>　それにしても以前、マイクロUSB版のを購入したときは1個あたり97円だったのに。Type-C版でさらに安くなっています。余分な機能をなくし需要があるものを大量に作って、良いものを広く販売するという基本的な考え方はすごく好きです。反面、検品コストという考え方も日本とは違いますので不良品率はあがります。しかし、入念に検品して全体のコストをあげるより、ある程度の検品品質で不良品が混入すれば交換すれば良いという考え方もあるのも事実のようです。</p>
<p>　薄利広商　という言葉があるようです。中国の文化なのか日本の文化なのか歴史に疎いので良くはわかりませんが、中国の商人の中にはこういう考え方があるんじゃないのかなと思います。意味合い的には、薄利多売と似ていますが、これは少しネガティブなイメージもあります。しかし、薄利広商　というのはあまり聞かない言葉ですが、薄い適切な利益を乗せて広く客に販売することが本来の商売であり、それは社会も良くしていくのだという考えのようです。売り手もどこよりお得にお客に販売するのは、本来気持ちの良いものだと思いますし、お客も安く良いものが入手できたら嬉しい。それは転じて地域もよくしていくのだという思想のようです。</p>
<p>　少し前のマスク買い占め転売、プレステ5 の転売などそういうのは本来の商売ではない、長く商売をやっていくためにはもっと違う視点を持つべきだというのが「薄利広商」という言葉の真意なのではと思います。</p>
<h3>著者にメッセージ</h3>
<p>間違いのご指摘など、コメントじゃなくて、個人的にやりとりしたい場合は<a class="c-link-text" href="/mail/" target="_blank" rel="noopener noreferrer" data-wpel-link="internal">こちらから</a>どうぞ。お返事が遅くなるときもありますが、ご了承を。</p>
</div>
<footer class="entry-footer"></footer>
</div></article><nav class="navigation posts-navigation" role="navigation" aria-label="投稿"><h2 class="screen-reader-text">投稿ナビゲーション</h2>
<div class="nav-links"><div class="nav-previous"><a href="/category/diy/page/2/" data-wpel-link="internal" rel="noopener noreferrer">過去の投稿</a></div></div></nav></main></section></div>
<footer id="colophon" class="site-footer wrap" role="contentinfo"><div class="site-info"> Copyleft - all rights reversed. <span class="sep"> | </span> JunkHack 2011 - 2022 <span class="sep"> | </span> <a href="/about-junkhack/" data-wpel-link="internal" rel="noopener noreferrer">運営者情報<span class="gf"></span></a><span class="sep"> | </span> <a href="/mail/" data-wpel-link="internal" rel="noopener noreferrer">お問い合わせ<span class="gf"></span></a><span class="sep"> | </span> <a href="/privacy/" data-wpel-link="internal" rel="noopener noreferrer">プライバシーポリシー<span class="gf"></span></a>
</div></footer>
</div>
<div id="wpfront-scroll-top-container"> <noscript><img src="/wp-content/plugins/wpfront-scroll-top/images/icons/1.png" alt=""></noscript>
<img class="lazyload" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20210%20140%22%3E%3C/svg%3E" data-src="/wp-content/plugins/wpfront-scroll-top/images/icons/1.png" alt="">
</div> <script type="text/javascript">function wpfront_scroll_top_init() {
                if (typeof wpfront_scroll_top === "function" && typeof jQuery !== "undefined") {
                    wpfront_scroll_top({"scroll_offset":100,"button_width":0,"button_height":0,"button_opacity":0.8,"button_fade_duration":200,"scroll_duration":400,"location":1,"marginX":20,"marginY":20,"hide_iframe":false,"auto_hide":false,"auto_hide_after":2,"button_action":"top","button_action_element_selector":"","button_action_container_selector":"html, body","button_action_element_offset":0});
                } else {
                    setTimeout(wpfront_scroll_top_init, 100);
                }
            }
            wpfront_scroll_top_init();</script> <noscript><style>.lazyload{display:none;}</style></noscript>
<script data-noptimize="1">window.lazySizesConfig=window.lazySizesConfig||{};window.lazySizesConfig.loadMode=1;</script><script async data-noptimize="1" src="/wp-content/plugins/autoptimize/classes/external/js/lazysizes.min.js?ao_version=2.9.5"></script><link rel="stylesheet" id="word_balloon_user_style-css" href="/wp-content/plugins/word-balloon/css/word_balloon_user.min.css?ver=4.18.4" type="text/css" media="all">
<link rel="stylesheet" id="word_balloon_skin_talk-css" href="/wp-content/plugins/word-balloon/css/skin/word_balloon_talk.min.css?ver=4.18.4" type="text/css" media="all">
<link rel="stylesheet" id="word_balloon_inview_style-css" href="/wp-content/plugins/word-balloon/css/word_balloon_inview.min.css?ver=4.18.4" type="text/css" media="all"> <script type="text/javascript" src="/wp-includes/js/dist/vendor/regenerator-runtime.min.js?ver=0.13.7" id="regenerator-runtime-js"></script> <script type="text/javascript" src="/wp-includes/js/dist/vendor/wp-polyfill.min.js?ver=3.15.0" id="wp-polyfill-js"></script> <script type="text/javascript" id="contact-form-7-js-extra">var wpcf7 = {"api":{"root":"\/wp-json\/","namespace":"contact-form-7\/v1"},"cached":"1"};</script> <script type="text/javascript" id="google-invisible-recaptcha-js-before">var renderInvisibleReCaptcha = function() {

    for (var i = 0; i < document.forms.length; ++i) {
        var form = document.forms[i];
        var holder = form.querySelector('.inv-recaptcha-holder');

        if (null === holder) continue;
		holder.innerHTML = '';

         (function(frm){
			var cf7SubmitElm = frm.querySelector('.wpcf7-submit');
            var holderId = grecaptcha.render(holder,{
                'sitekey': '6Lf2z80ZAAAAAJpiFOn2Cix-QJQkaiC7uBA6NCkS', 'size': 'invisible', 'badge' : 'inline',
                'callback' : function (recaptchaToken) {
					if((null !== cf7SubmitElm) && (typeof jQuery != 'undefined')){jQuery(frm).submit();grecaptcha.reset(holderId);return;}
					 HTMLFormElement.prototype.submit.call(frm);
                },
                'expired-callback' : function(){grecaptcha.reset(holderId);}
            });

			if(null !== cf7SubmitElm && (typeof jQuery != 'undefined') ){
				jQuery(cf7SubmitElm).off('click').on('click', function(clickEvt){
					clickEvt.preventDefault();
					grecaptcha.execute(holderId);
				});
			}
			else
			{
				frm.onsubmit = function (evt){evt.preventDefault();grecaptcha.execute(holderId);};
			}


        })(form);
    }
};</script> <script type="text/javascript" async defer src="https://www.google.com/recaptcha/api.js?onload=renderInvisibleReCaptcha&#038;render=explicit&#038;hl=ja" id="google-invisible-recaptcha-js"></script> <script type="text/javascript" src="/wp-content/themes/hew-wpcom/js/contact.js?ver=20210612" id="sendmail-js"></script> <script type="text/javascript" src="https://www.google.com/recaptcha/api.js?render=6Lf2z80ZAAAAAJpiFOn2Cix-QJQkaiC7uBA6NCkS&#038;ver=3.0" id="google-recaptcha-js"></script> <script type="text/javascript" id="wpcf7-recaptcha-js-extra">var wpcf7_recaptcha = {"sitekey":"6Lf2z80ZAAAAAJpiFOn2Cix-QJQkaiC7uBA6NCkS","actions":{"homepage":"homepage","contactform":"contactform"}};</script> <script type="text/javascript" src="https://polyfill.io/v3/polyfill.min.js?features=IntersectionObserver" id="polyfill_IntersectionObserver-js"></script> <script defer src="/wp-content/cache/autoptimize/js/autoptimize_28a76201e8c516d37ffc311e7dc1a025.js"></script>
</body>
</html>