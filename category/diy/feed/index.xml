<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	xmlns:media="http://search.yahoo.com/mrss/"
	>

<channel>
	<title>DIY &#8211; JunkHack Feed</title>
	<link>/</link>
	<description>アリエクでポチった JUNKHACK</description>
	<lastBuildDate>Sat, 16 Apr 2022 21:25:39 +0000</lastBuildDate>
	<language>ja</language>
	<sy:updatePeriod>
	hourly	</sy:updatePeriod>
	<sy:updateFrequency>
	1	</sy:updateFrequency>
	<generator>https://wordpress.org/?v=5.8.4</generator>
	<item>
		<title>溶接DIYが3Dプリンター買った時と同じくらい衝撃的に面白い!</title>
		<link>/2022/04/17/diy-welding/</link>
		
		<dc:creator><![CDATA[JunkHack]]></dc:creator>
		<pubDate>Sat, 16 Apr 2022 20:19:43 +0000</pubDate>
				<category><![CDATA[DIY]]></category>
		<guid isPermaLink="false">/?p=11125</guid>
				<media:thumbnail url="/wp-content/uploads/2022/04/DIY-welding.png" />
							<description><![CDATA[もうすっかり春になって暖かくなりましたね！　実は、昨年の9月くらいからコツコツと土日や夜などにガレージ を片付けていました。一気にやると嫌になるので、もうスプーンで穴を掘るかの如くコツコツと片付けていました！ 　今回は溶 [&#8230;]]]></description>
										<content:encoded><![CDATA[
<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex"><div class="w_b_wrap w_b_wrap_talk w_b_L w_b_flex w_b_div" style=""><div class="w_b_ava_box w_b_relative w_b_ava_L w_b_col w_b_f_n w_b_div"><div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_L w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div" style="">
<img src="/wp-content/uploads/2020/09/abata.png" width="96" height="96" alt="じゃんくはっく" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img" style="" />
</div></div></div><div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">じゃんくはっく</div></div><div class="w_b_bal_box w_b_bal_L w_b_relative w_b_direction_L w_b_w100 w_b_div"><div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewBox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "/></svg></div><div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div" style=""><div class="w_b_bal_wrap w_b_bal_wrap_L w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_L w_b_shadow_L w_b_ta_L w_b_div"><div class="w_b_quote w_b_div">
<p>最近、溶接のDIYを始めたよ！</p>
</div></div></div></div></div></div></div></div>



<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex w_b_mla w_b_jc_fe"><div class="w_b_wrap w_b_wrap_talk w_b_R w_b_flex w_b_jc_fe w_b_div" style=""><div class="w_b_bal_box w_b_bal_R w_b_relative w_b_direction_R w_b_w100 w_b_div"><div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewBox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "/></svg></div><div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div" style=""><div class="w_b_bal_wrap w_b_bal_wrap_R w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_R w_b_shadow_R w_b_ta_L w_b_div"><div class="w_b_quote w_b_div">
<p>ガレージ のDIYも完成したのね？</p>
</div></div></div></div></div><div class="w_b_ava_box w_b_relative w_b_ava_R w_b_col w_b_f_n w_b_div"><div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_R w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div" style="">
<img src="/wp-content/uploads/2020/09/pi-.png" width="96" height="96" alt="ぴー" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img" style="" />
</div></div></div><div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">ぴー</div></div></div></div></div>



<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex"><div class="w_b_wrap w_b_wrap_talk w_b_L w_b_flex w_b_div" style=""><div class="w_b_ava_box w_b_relative w_b_ava_L w_b_col w_b_f_n w_b_div"><div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_L w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div" style="">
<img src="/wp-content/uploads/2020/09/abata.png" width="96" height="96" alt="じゃんくはっく" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img" style="" />
</div></div></div><div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">じゃんくはっく</div></div><div class="w_b_bal_box w_b_bal_L w_b_relative w_b_direction_L w_b_w100 w_b_div"><div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewBox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "/></svg></div><div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div" style=""><div class="w_b_bal_wrap w_b_bal_wrap_L w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_L w_b_shadow_L w_b_ta_L w_b_div"><div class="w_b_quote w_b_div">
<p>寒い間に、がんばってガレージ DIYしてたよ</p>
</div></div></div></div></div></div></div></div>



<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex w_b_mla w_b_jc_fe"><div class="w_b_wrap w_b_wrap_talk w_b_R w_b_flex w_b_jc_fe w_b_div" style=""><div class="w_b_bal_box w_b_bal_R w_b_relative w_b_direction_R w_b_w100 w_b_div"><div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewBox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "/></svg></div><div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div" style=""><div class="w_b_bal_wrap w_b_bal_wrap_R w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_R w_b_shadow_R w_b_ta_L w_b_div"><div class="w_b_quote w_b_div">
<p>男子はこういうの好きそー</p>
</div></div></div></div></div><div class="w_b_ava_box w_b_relative w_b_ava_R w_b_col w_b_f_n w_b_div"><div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_R w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div" style="">
<img src="/wp-content/uploads/2020/09/pi-.png" width="96" height="96" alt="ぴー" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img" style="" />
</div></div></div><div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">ぴー</div></div></div></div></div>



<p>もうすっかり春になって暖かくなりましたね！　実は、昨年の9月くらいからコツコツと土日や夜などにガレージ を片付けていました。一気にやると嫌になるので、もうスプーンで穴を掘るかの如くコツコツと片付けていました！</p>



<p>　今回は溶接DIYをするため、ガレージ を片付けながら溶接環境を整えていった過程をご紹介です。</p>



<h3>まずはガレージ を片付ける！</h3>



<p>とりあえず、あれこれとどんなガレージ にしようかと構想を練って、最終的には今は以下のような感じになりました。</p>



<figure class="wp-block-image size-large"><img loading="lazy" width="1024" height="461" src="/wp-content/uploads/2022/04/IMG_20220223_214407-1-1024x461.png" alt="" class="wp-image-11127" srcset="/wp-content/uploads/2022/04/IMG_20220223_214407-1-1024x461.png 1024w, /wp-content/uploads/2022/04/IMG_20220223_214407-1-768x346.png 768w, /wp-content/uploads/2022/04/IMG_20220223_214407-1-1536x691.png 1536w, /wp-content/uploads/2022/04/IMG_20220223_214407-1-984x443.png 984w, /wp-content/uploads/2022/04/IMG_20220223_214407-1.png 1866w" sizes="(max-width: 1024px) 100vw, 1024px" /></figure>



<p>片付ける前の状態は、こんな感じ。</p>



<figure class="wp-block-image size-large"><img loading="lazy" width="1024" height="721" src="/wp-content/uploads/2022/04/befor-1024x721.png" alt="" class="wp-image-11130" srcset="/wp-content/uploads/2022/04/befor-1024x721.png 1024w, /wp-content/uploads/2022/04/befor-768x540.png 768w, /wp-content/uploads/2022/04/befor-984x692.png 984w, /wp-content/uploads/2022/04/befor.png 1215w" sizes="(max-width: 1024px) 100vw, 1024px" /></figure>



<p>木枠のフレーム部分は、ずいぶん昔にDIYしてました。この状態でもずいぶんと片付けたのですが、まだまだDIYできる状態ではありませんでした。</p>



<h3>作業台を作る！</h3>



<p>とりあえず、場所を確保するためモノを移動して、ラジオでもかけながら構想を練ります。壁には工具などをすぐ取れるようにしたいので有孔ボード（パンチングボード）を張ることにしましょうか。</p>



<figure class="wp-block-image size-large"><img loading="lazy" width="1024" height="729" src="/wp-content/uploads/2022/04/1-1024x729.png" alt="" class="wp-image-11131" srcset="/wp-content/uploads/2022/04/1-1024x729.png 1024w, /wp-content/uploads/2022/04/1-768x547.png 768w, /wp-content/uploads/2022/04/1-984x701.png 984w, /wp-content/uploads/2022/04/1.png 1220w" sizes="(max-width: 1024px) 100vw, 1024px" /></figure>



<p>作業台が暗かったので、ダイソーでダクトレールを２つ買ってきて、同じくダイソーのLED電球を２色混ぜました。暖色系と寒色系を混ぜています。ダイソーやセリアで素材調達・リサーチは面白いですよね。ホームセンターで調達するより安いものがあるので要チェックです。</p>



<figure class="wp-block-image size-large"><img loading="lazy" width="1024" height="551" src="/wp-content/uploads/2022/04/20cfce153c6dcbd30dc35695758066ae-1024x551.png" alt="" class="wp-image-11132" srcset="/wp-content/uploads/2022/04/20cfce153c6dcbd30dc35695758066ae-1024x551.png 1024w, /wp-content/uploads/2022/04/20cfce153c6dcbd30dc35695758066ae-768x413.png 768w, /wp-content/uploads/2022/04/20cfce153c6dcbd30dc35695758066ae-1536x826.png 1536w, /wp-content/uploads/2022/04/20cfce153c6dcbd30dc35695758066ae-984x529.png 984w, /wp-content/uploads/2022/04/20cfce153c6dcbd30dc35695758066ae.png 1605w" sizes="(max-width: 1024px) 100vw, 1024px" /></figure>



<p><meta charset="utf-8">有孔ボード（パンチングボード）はホームセンターを探せばありますが、価格が微妙だったので、通販でゲット。ホームセンターより送料入れても安かったです。</p>



<blockquote class="wp-block-quote"><p><strong><a href="https://www.outlet-kenzaiya.net/SHOP/149335/149336/list.html" target="_blank" rel="noreferrer noopener external" data-wpel-link="external" class="wpel-icon-right">フローリングのアウトレット建材屋<span class="wpel-icon wpel-image wpel-icon-1"></span></a></strong></p><cite>佐賀県の建材屋さん</cite></blockquote>



<pre class="wp-block-code"><code>                                                   （全て税込価格）
   ================================================================
       品名                  価格         数量              小計
   ================================================================
   カラー有孔ボード　5φ-25P　4mm×910mm×1820mm　5色あり（約3.69kg/枚）(A品)送料込み/白
                           3,950円           2             7,900円
     └ カット:カット無し
     └ 大型品:企業/店舗宛 送料無料※会社・店舗名 要記載
   ================================================================
   まとめ割引                                             -2,520円
   商品合計                                                5,380円
   ================================================================
   建材屋ポイント利用                                       -100円
   送料                                                   送料無料
   ================================================================
   合計金額                                                5,280円</code></pre>



<p>この通り、25mmピッチのコンパネサイズを２枚買っても5280円と激安！　色は明るい感じにしたかったので白にしました。25mmピッチを選んだのは、ダイソーとかセリアに売ってる金具が使えるからです。あと、ダイソーのキッチン用品のカゴを少し加工すれば取り付けられます。</p>



<figure class="wp-block-image size-full"><img loading="lazy" width="1013" height="741" src="/wp-content/uploads/2022/04/041c8e89b678b46731ac2144bc87c2e7.png" alt="" class="wp-image-11133" srcset="/wp-content/uploads/2022/04/041c8e89b678b46731ac2144bc87c2e7.png 1013w, /wp-content/uploads/2022/04/041c8e89b678b46731ac2144bc87c2e7-768x562.png 768w, /wp-content/uploads/2022/04/041c8e89b678b46731ac2144bc87c2e7-984x720.png 984w" sizes="(max-width: 1013px) 100vw, 1013px" /></figure>



<p>すこーしづつ、作業が進行して、こんな感じまで出来ました。</p>



<figure class="wp-block-image size-large"><img loading="lazy" width="1024" height="762" src="/wp-content/uploads/2022/04/4-1024x762.png" alt="" class="wp-image-11134" srcset="/wp-content/uploads/2022/04/4-1024x762.png 1024w, /wp-content/uploads/2022/04/4-768x571.png 768w, /wp-content/uploads/2022/04/4-984x732.png 984w, /wp-content/uploads/2022/04/4.png 1223w" sizes="(max-width: 1024px) 100vw, 1024px" /></figure>



<h3>溶接で火花が飛んでも良いように鉄板を貼る</h3>



<p>半自動溶接や棒溶接は、火花がどうしても飛ぶので、作業台が木材だと少し心配です。なので、鉄板を調達して切って、貼ることにしました。この作業台の奥行きは45cmくらい長さが3mちょいあるので、コンパネサイズくらいの大きさで、厚み2.5mmの鉄板をホームセンターで買ってきました。鉄板扱っているホームセンターは少ないですが、ビバホームには売っていました。運搬は、Kトラ。ほんとDIYやってるとKトラ便利です。</p>



<p>フラットバーを定規がわりに1mm厚のグラインダー の刃を付けて切断です。</p>



<figure class="wp-block-image size-large"><img loading="lazy" width="1024" height="508" src="/wp-content/uploads/2022/04/5-1-1024x508.png" alt="" class="wp-image-11136" srcset="/wp-content/uploads/2022/04/5-1-1024x508.png 1024w, /wp-content/uploads/2022/04/5-1-768x381.png 768w, /wp-content/uploads/2022/04/5-1-1536x762.png 1536w, /wp-content/uploads/2022/04/5-1-984x488.png 984w, /wp-content/uploads/2022/04/5-1.png 1675w" sizes="(max-width: 1024px) 100vw, 1024px" /></figure>



<p>かなりの重さがあるので、置いただけです。あとで横の部分を鉄のフラットバーで溶接してボルトで固定するので置いただけで良さそうです。</p>



<figure class="wp-block-image size-large"><img loading="lazy" width="1024" height="473" src="/wp-content/uploads/2022/04/5-1024x473.png" alt="" class="wp-image-11135" srcset="/wp-content/uploads/2022/04/5-1024x473.png 1024w, /wp-content/uploads/2022/04/5-768x355.png 768w, /wp-content/uploads/2022/04/5-1536x710.png 1536w, /wp-content/uploads/2022/04/5-984x455.png 984w, /wp-content/uploads/2022/04/5.png 1827w" sizes="(max-width: 1024px) 100vw, 1024px" /></figure>



<p>なかなか良い感じになってきました！</p>



<figure class="wp-block-image size-large"><img loading="lazy" width="1024" height="520" src="/wp-content/uploads/2022/04/6-1024x520.png" alt="" class="wp-image-11137" srcset="/wp-content/uploads/2022/04/6-1024x520.png 1024w, /wp-content/uploads/2022/04/6-768x390.png 768w, /wp-content/uploads/2022/04/6-1536x780.png 1536w, /wp-content/uploads/2022/04/6-984x500.png 984w, /wp-content/uploads/2022/04/6.png 1663w" sizes="(max-width: 1024px) 100vw, 1024px" /></figure>



<h3>目隠しにガルバニウム鋼板でトビラをつくる</h3>



<p>棚にモノが目に触れると、ごちゃごちゃした感じがしますね。なので、目隠しにトビラをつけることにしました。右側部分は吊りトビラを作り、作業台の上は跳ね上げ式のトビラにしてみます。</p>



<figure class="wp-block-image size-large"><img loading="lazy" width="1024" height="454" src="/wp-content/uploads/2022/04/7-1024x454.png" alt="" class="wp-image-11138" srcset="/wp-content/uploads/2022/04/7-1024x454.png 1024w, /wp-content/uploads/2022/04/7-768x341.png 768w, /wp-content/uploads/2022/04/7-1536x682.png 1536w, /wp-content/uploads/2022/04/7-984x437.png 984w, /wp-content/uploads/2022/04/7.png 1859w" sizes="(max-width: 1024px) 100vw, 1024px" /></figure>



<p>この吊りトビラの取り付け金具も溶接で作りました。ガルバニウム鋼板は、違うホームセンターに気に入った色があったのでそこで調達。吊りトビラのレールは、モノタロウでゲット。</p>



<figure class="wp-block-image size-large"><img loading="lazy" width="1024" height="482" src="/wp-content/uploads/2022/04/8-1024x482.png" alt="" class="wp-image-11139" srcset="/wp-content/uploads/2022/04/8-1024x482.png 1024w, /wp-content/uploads/2022/04/8-768x362.png 768w, /wp-content/uploads/2022/04/8-1536x724.png 1536w, /wp-content/uploads/2022/04/8-984x464.png 984w, /wp-content/uploads/2022/04/8.png 1768w" sizes="(max-width: 1024px) 100vw, 1024px" /></figure>



<h3>音楽聴きながら作業したいので、スピーカーを設置する！</h3>



<p>やっぱり音楽は必須です。作業のじゃまにならないよう上のほうに取り付けたいです。</p>



<p>そこで、スピーカーの取り付けジグもDIYしました。鉄を溶接すると金具の強度が出せるので、工作が面白いです。Lアングル材も5m超えのがビバホームに売っていますので、それをこんな感じで90度に曲げて溶接していきます。</p>



<figure class="wp-block-image size-large"><img loading="lazy" width="1024" height="611" src="/wp-content/uploads/2022/04/9-1024x611.png" alt="" class="wp-image-11140" srcset="/wp-content/uploads/2022/04/9-1024x611.png 1024w, /wp-content/uploads/2022/04/9-768x458.png 768w, /wp-content/uploads/2022/04/9-984x587.png 984w, /wp-content/uploads/2022/04/9.png 1274w" sizes="(max-width: 1024px) 100vw, 1024px" /></figure>



<p>結構なスキマがありますが、このくらいは問題ありません。溶接してグラインダー で削れば、こんな感じ。</p>



<figure class="wp-block-image size-large"><img loading="lazy" width="1024" height="503" src="/wp-content/uploads/2022/04/10-1024x503.png" alt="" class="wp-image-11141" srcset="/wp-content/uploads/2022/04/10-1024x503.png 1024w, /wp-content/uploads/2022/04/10-768x378.png 768w, /wp-content/uploads/2022/04/10-1536x755.png 1536w, /wp-content/uploads/2022/04/10-984x484.png 984w, /wp-content/uploads/2022/04/10.png 1672w" sizes="(max-width: 1024px) 100vw, 1024px" /></figure>



<p>溶接は、炭酸ガス100%でソリッドワイヤー を使っての溶接です。ノンガス溶接のワイヤー自体が少し高いし、何より、匂いが気になります。絶対、ガス溶接でソリッドワイヤーを使ったほうが良いです。炭酸ガスは、酒屋さんで売って（容器はレンタル）もらえるし、中身もぜんぜん減らないのでおすすめ。アルゴンもあるけど、アルミ溶接あまりやらないので今後どうするかは考え中です。溶接機はアリエクでゲットしたやつです。また改めて紹介しますね。</p>



<p>で、現場合わせの金具でスピーカーを取り付けました。</p>



<figure class="wp-block-image size-large"><img loading="lazy" width="1024" height="528" src="/wp-content/uploads/2022/04/sp-mount-1024x528.png" alt="" class="wp-image-11128" srcset="/wp-content/uploads/2022/04/sp-mount-1024x528.png 1024w, /wp-content/uploads/2022/04/sp-mount-768x396.png 768w, /wp-content/uploads/2022/04/sp-mount-1536x792.png 1536w, /wp-content/uploads/2022/04/sp-mount-984x507.png 984w, /wp-content/uploads/2022/04/sp-mount.png 1622w" sizes="(max-width: 1024px) 100vw, 1024px" /></figure>



<p>蝶番を付けて、左右に振れるようにしてあります。縦向き、横向きも調整可能です。</p>



<figure class="wp-block-image size-large"><img loading="lazy" width="1024" height="508" src="/wp-content/uploads/2022/04/sp-mount2-1024x508.png" alt="" class="wp-image-11129" srcset="/wp-content/uploads/2022/04/sp-mount2-1024x508.png 1024w, /wp-content/uploads/2022/04/sp-mount2-768x381.png 768w, /wp-content/uploads/2022/04/sp-mount2-1536x762.png 1536w, /wp-content/uploads/2022/04/sp-mount2-984x488.png 984w, /wp-content/uploads/2022/04/sp-mount2.png 1690w" sizes="(max-width: 1024px) 100vw, 1024px" /></figure>



<h3>その他溶接DIYで作ったもの</h3>



<h4>Kトラにタイヤを固定する金具</h4>



<figure class="wp-block-image size-large"><img loading="lazy" width="1024" height="721" src="/wp-content/uploads/2022/04/11-1024x721.png" alt="" class="wp-image-11145" srcset="/wp-content/uploads/2022/04/11-1024x721.png 1024w, /wp-content/uploads/2022/04/11-768x541.png 768w, /wp-content/uploads/2022/04/11-984x693.png 984w, /wp-content/uploads/2022/04/11.png 1190w" sizes="(max-width: 1024px) 100vw, 1024px" /></figure>



<p>タイヤを固定する金具。製作途中の写真ですが。</p>



<h4>Kトラのマフラー</h4>



<figure class="wp-block-image size-large"><img loading="lazy" width="1024" height="484" src="/wp-content/uploads/2022/04/12-1024x484.png" alt="" class="wp-image-11146" srcset="/wp-content/uploads/2022/04/12-1024x484.png 1024w, /wp-content/uploads/2022/04/12-768x363.png 768w, /wp-content/uploads/2022/04/12-1536x726.png 1536w, /wp-content/uploads/2022/04/12-984x465.png 984w, /wp-content/uploads/2022/04/12.png 1734w" sizes="(max-width: 1024px) 100vw, 1024px" /></figure>



<p>熱に耐えられる鉄ならではの工作例。溶接できれば排気ガス漏れなくマフラー作れます。サイレンサーはバイクのです。</p>



<h4>Kトラのキャリア</h4>



<figure class="wp-block-image size-large"><img loading="lazy" width="1024" height="721" src="/wp-content/uploads/2022/04/13-1024x721.png" alt="" class="wp-image-11147" srcset="/wp-content/uploads/2022/04/13-1024x721.png 1024w, /wp-content/uploads/2022/04/13-768x541.png 768w, /wp-content/uploads/2022/04/13-984x693.png 984w, /wp-content/uploads/2022/04/13.png 1292w" sizes="(max-width: 1024px) 100vw, 1024px" /></figure>



<p>スペアタイヤ２本。いつパンクしたり、雪ふったりしてもよいようスタッドレスを積んでます。前にはLEDのフラットバーライトがついています。</p>



<h3>まとめ</h3>



<p>今回、なんとなくわかったのは以下となります。</p>



<p>・溶接は半自動、炭酸ガス溶接がおすすめ！<br>・200V 30Aを引き込んで、中華の半自動溶接機でやってます<br>・ワイヤー径は、0.8mmでソリッドワイヤー。ノンガスワイヤーは匂いが気になるので非推奨<br>・３Dプリンター買った時と同じくらい衝撃でした。楽しいです。<br>・自動遮光面はあると便利</p>



<h3>あとがき</h3>



<p>ガレージ を片付けて、しばらく溶接でDIYしてたのでブログ更新は久々です。溶接はいつかはやってみたいなーと思ってて、なかなか手が出なかったのですが、３回ほどレンタル溶接に行ってどっぷりとハマりました。またその事も紹介していきたいなと思っています。</p>



<p>　鉄の工作は、強度や熱に耐えるものが作れるので面白いです。各種金具類や、車やバイクだとマフラー、キャリア類が好きに作れます。KトラのLEDフラットバーを付けられるキャリアやマフラーも作ったので、機会をみて紹介してみますね。</p>



<h3>著者にメッセージ</h3>



<p></p>


<p>間違いのご指摘など、コメントじゃなくて、個人的にやりとりしたい場合は<a class="c-link-text" href="/mail/" target="_blank" rel="noopener noreferrer" data-wpel-link="internal">こちらから</a>どうぞ。お返事が遅くなるときもありますが、ご了承を。</p>
]]></content:encoded>
					
		
		
			</item>
		<item>
		<title>謎のICが載ったType-Cリポ充電基板でポケットオシロを電池仕様に！</title>
		<link>/2021/03/09/ln4056-ic-type-c/</link>
		
		<dc:creator><![CDATA[JunkHack]]></dc:creator>
		<pubDate>Mon, 08 Mar 2021 17:34:09 +0000</pubDate>
				<category><![CDATA[DIY]]></category>
		<guid isPermaLink="false">/?p=10256</guid>
				<media:thumbnail url="/wp-content/uploads/2021/03/LN4056-IC.png" />
							<description><![CDATA[さて、今回はこの前、アリエクでポチった１枚あたり45円のリポ充電基板が届いたので早速使ってみました。基板はこんな感じです。 リチウムポリマー充放電保護基板 リポ充電基盤のType-C版が出てたんでポチった！ https: [&#8230;]]]></description>
										<content:encoded><![CDATA[
<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex"><div class="w_b_wrap w_b_wrap_talk w_b_L w_b_flex w_b_div" style=""><div class="w_b_ava_box w_b_relative w_b_ava_L w_b_col w_b_f_n w_b_div"><div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_L w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div" style="">
<img src="/wp-content/uploads/2020/09/abata.png" width="96" height="96" alt="じゃんくはっく" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img" style="" />
</div></div></div><div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">じゃんくはっく</div></div><div class="w_b_bal_box w_b_bal_L w_b_relative w_b_direction_L w_b_w100 w_b_div"><div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewBox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "/></svg></div><div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div" style=""><div class="w_b_bal_wrap w_b_bal_wrap_L w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_L w_b_shadow_L w_b_ta_L w_b_div"><div class="w_b_quote w_b_div">
<p>ポケットオシロをType-C充電仕様にしたよ！</p>
</div></div></div></div></div></div></div></div>



<div class="wp-block-image"><figure class="aligncenter size-large"><img loading="lazy" width="1024" height="758" src="/wp-content/uploads/2021/03/image-11-1024x758.png" alt="" class="wp-image-10257" srcset="/wp-content/uploads/2021/03/image-11-1024x758.png 1024w, /wp-content/uploads/2021/03/image-11-768x568.png 768w, /wp-content/uploads/2021/03/image-11-984x728.png 984w, /wp-content/uploads/2021/03/image-11.png 1073w" sizes="(max-width: 1024px) 100vw, 1024px" /></figure></div>



<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex w_b_mla w_b_jc_fe"><div class="w_b_wrap w_b_wrap_talk w_b_R w_b_flex w_b_jc_fe w_b_div" style=""><div class="w_b_bal_box w_b_bal_R w_b_relative w_b_direction_R w_b_w100 w_b_div"><div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewBox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "/></svg></div><div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div" style=""><div class="w_b_bal_wrap w_b_bal_wrap_R w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_R w_b_shadow_R w_b_ta_L w_b_div"><div class="w_b_quote w_b_div">
<p>おもちゃみたいなオシロスコープね！</p>
</div></div></div></div></div><div class="w_b_ava_box w_b_relative w_b_ava_R w_b_col w_b_f_n w_b_div"><div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_R w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div" style="">
<img src="/wp-content/uploads/2020/09/pi-.png" width="96" height="96" alt="ぴー" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img" style="" />
</div></div></div><div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">ぴー</div></div></div></div></div>



<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex"><div class="w_b_wrap w_b_wrap_talk w_b_L w_b_flex w_b_div" style=""><div class="w_b_ava_box w_b_relative w_b_ava_L w_b_col w_b_f_n w_b_div"><div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_L w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div" style="">
<img src="/wp-content/uploads/2020/09/abata.png" width="96" height="96" alt="じゃんくはっく" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img" style="" />
</div></div></div><div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">じゃんくはっく</div></div><div class="w_b_bal_box w_b_bal_L w_b_relative w_b_direction_L w_b_w100 w_b_div"><div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewBox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "/></svg></div><div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div" style=""><div class="w_b_bal_wrap w_b_bal_wrap_L w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_L w_b_shadow_L w_b_ta_L w_b_div"><div class="w_b_quote w_b_div">
<p>おもちゃ感がいいでしょ！　でも、結構使えるヤツなのよ。</p>
</div></div></div></div></div></div></div></div>



<p>さて、今回はこの前、アリエクでポチった１枚あたり45円のリポ充電基板が届いたので早速使ってみました。基板はこんな感じです。</p>



<div class="wp-block-image"><figure class="aligncenter size-large"><img loading="lazy" width="1024" height="768" src="/wp-content/uploads/2021/03/image-12-1024x768.png" alt="" class="wp-image-10258" srcset="/wp-content/uploads/2021/03/image-12-1024x768.png 1024w, /wp-content/uploads/2021/03/image-12-768x576.png 768w, /wp-content/uploads/2021/03/image-12-984x738.png 984w, /wp-content/uploads/2021/03/image-12.png 1213w" sizes="(max-width: 1024px) 100vw, 1024px" /></figure></div>



<h3>リチウムポリマー充放電保護基板</h3>



<blockquote class="wp-block-quote"><p>リポ充電基盤のType-C版が出てたんでポチった！</p><cite><a href="/2021/02/20/type-c/" target="_blank" rel="noreferrer noopener" data-wpel-link="internal">/2021/02/20/type-c/</a></cite></blockquote>



<div class="wp-block-image"><figure class="aligncenter size-large"><img loading="lazy" width="653" height="489" src="/wp-content/uploads/2021/03/image-18.png" alt="" class="wp-image-10278"/></figure></div>



<p>この前、買ったんですが結構届くのが速かったですね。写真のように繋がった状態で送られてきますので、手で折って分離します。基板が薄いので簡単に分離できます。</p>



<p>これのマイクロUSB版はだいぶ昔に以下で紹介しています。</p>



<blockquote class="wp-block-quote"><p>5V 18650　リチウムバッテリー充電モジュール</p><cite><em>投稿日:&nbsp;</em><a rel="noreferrer noopener" href="/2015/05/10/5v-18650%e3%80%80%e3%83%aa%e3%83%81%e3%82%a6%e3%83%a0%e3%83%90%e3%83%83%e3%83%86%e3%83%aa%e3%83%bc%e5%85%85%e9%9b%bb%e3%83%a2%e3%82%b8%e3%83%a5%e3%83%bc%e3%83%ab/" target="_blank" data-wpel-link="internal">2015年5月10日</a></cite></blockquote>



<p>このメインICはTP4056だったはずですが、今回の基板には型番・LN4056っていう刻印があります。</p>



<div class="wp-block-image"><figure class="aligncenter size-large"><img loading="lazy" width="560" height="414" src="/wp-content/uploads/2021/03/image-13.png" alt="" class="wp-image-10259"/></figure></div>



<p>これ、スペックシートが出てきませんね。これは、まぁTP4056の互換チップなんだと思います。多分作っているのはここ。</p>



<blockquote class="wp-block-quote"><p>上海南麟电子股份有限公司<br>Shanghai Nanlin Electronics Co.、Ltd</p><cite>http://www.natlinear.com/</cite></blockquote>



<p>南麟っていうのが愛称ですかね。中国のサイトを深く潜ればPDFもあるとは思いますが、これ以上追わず。工作したいので。近い型番だと、以下にPDFがあります。</p>



<blockquote class="wp-block-quote"><p>南麟PDF</p><cite>http://www.natlinear.com/uploadfiles/2014/LN/</cite></blockquote>



<p>工作終わってから、気になって探しました。結果、以下にありました。</p>



<blockquote class="wp-block-quote"><p>LN4056H</p><cite>http://www.icdemi.com/viewManual.aspx?p=LN4056H.pdf</cite></blockquote>



<p>製品概要を和訳すると以下です。</p>



<blockquote class="wp-block-quote"><p>USBインターフェースと互換性のある1.0Aリニアバッテリー管理チップ<br><br>■製品概要<br>LN4056Hは、定電流/定電圧で単セル充電式リチウム電池を充電できる充電器回路部品です。このデバイスは内部にパワートランジスタを備えており、アプリケーションで外部電流検出抵抗やブロッキングダイオードを必要としません。 LN4056Hは、周辺機器をほとんど必要とせず、USBバスの技術仕様に準拠しているため、ポータブルアプリケーションに非常に適しています。<br>熱変調​​回路は、デバイスの消費電力が比較的高い場合、または周囲温度が比較的高い場合に、チップ温度を安全な範囲内に制御できます。内部固定定電圧充電電圧は4.2Vで、外部抵抗で調整することもできます。充電電流は外部抵抗によって設定されます。入力電圧（ACアダプターまたはUSB電源）の電源を切ると、LN4056Hは自動的に低電力スリープモードになり、バッテリーの消費電流は0.1μA未満になります。バッテリ電圧が入力電圧よりも高い場合、内蔵パワーMOSFETは自動的にオフになります。その他の機能には、低入力電圧ラッチ、自動再充電、バッテリー温度監視、および充電ステータス/充電終了ステータス表示が含まれます。 LN4056Hは、イネーブルピンを介して充電をオフにすることができ、オフ状態のチップの静的消費電力は20uA未満です。チップには、バッテリ逆接続保護があります。<br>LN4056Hは、熱的に強化された8ピンスモールアウトラインパッケージESOP8を採用しています。</p><p>Local：<a href="/wp-content/uploads/2021/03/LN4056H.pdf" target="_blank" rel="noreferrer noopener" data-wpel-link="internal">pdf</a></p></blockquote>



<h3>バッテリーに繋がずUSBを接続すると？</h3>



<p>基板に電池を繋がないと、青色LEDが常時点灯して赤色LEDが不規則に点滅して光ります。この挙動はTP4056と同じですね。</p>



<div class="wp-block-image"><figure class="aligncenter size-large"><img loading="lazy" width="889" height="335" src="/wp-content/uploads/2021/03/image-14.png" alt="" class="wp-image-10260" srcset="/wp-content/uploads/2021/03/image-14.png 889w, /wp-content/uploads/2021/03/image-14-768x289.png 768w" sizes="(max-width: 889px) 100vw, 889px" /></figure></div>



<p>詳しく検査はしていませんが、仕様は同じと思うので組み込んでみることにします。</p>



<h3>ポケットオシロをType-C版に変更</h3>



<p>DSO Shellというポケットオシロですが、リポ電池仕様に変更してつかっていました。これは、USBからリチウムポリマー電池に充電するユニット（青い小さな基板）と、５Vから９Vに昇圧するDCDCコンバーター（写真の黒いやつ）が入っています。</p>



<p>以前、使っていた、マイクロUSB仕様の充電するユニットを今回のType-C仕様に交換します。まずは古いの取り払う作業をしたのですが、グルーガンで固定していただけですが、かなり強力に付いていました。写真は、古いのを取って新しいのに交換済みの状態です。</p>



<div class="wp-block-image"><figure class="aligncenter size-large"><img loading="lazy" width="944" height="662" src="/wp-content/uploads/2021/03/image-15.png" alt="" class="wp-image-10261" srcset="/wp-content/uploads/2021/03/image-15.png 944w, /wp-content/uploads/2021/03/image-15-768x539.png 768w" sizes="(max-width: 944px) 100vw, 944px" /></figure></div>



<p>ちょうど、電池も寿命で充電できなくなっていたので両方とも交換しました。バッテリーに繋いだ状態だと、赤色LEDだけ光って充電されます。そして、充電が完了すると青色LEDだけが光ります。</p>



<div class="wp-block-image"><figure class="aligncenter size-large"><img loading="lazy" width="939" height="697" src="/wp-content/uploads/2021/03/image-16.png" alt="" class="wp-image-10262" srcset="/wp-content/uploads/2021/03/image-16.png 939w, /wp-content/uploads/2021/03/image-16-768x570.png 768w" sizes="(max-width: 939px) 100vw, 939px" /></figure></div>



<p>黒い基板は、DSO Shellの電源電圧は９Vなので5Vを昇圧する基板ですが、これは交換せず使い回しします。</p>



<div class="wp-block-image"><figure class="aligncenter size-large"><img loading="lazy" width="750" height="603" src="/wp-content/uploads/2021/03/image-17.png" alt="" class="wp-image-10263"/></figure></div>



<p>上が古い基板で、下が今回のです。大きさは同じですね。基板の厚みは今回のType-Cのが薄かったです。コストカットでしょうか。まぁ、でも薄いほうが組込しやすいので、問題ないですけどね。</p>



<h3>この電池でポケットオシロはどのくらい動く？</h3>



<p>このリポ電池は250mahです。満充電でどのくらい動くのでしょうか。あまり気にしたことがないので、確認してみます。満充電した状態から、動かしっぱなしにしてどのくらい電池が持つのか？　電源ON・・・・</p>



<p>今の所10分くらい経過していますが、まだ動いていますね。この電池もアリエクでポチったやつです。5年くらい前に買って、まだ数個残っています。</p>



<blockquote class="wp-block-quote"><p>250mahのかわいいLipo到着</p><cite>リンク</cite></blockquote>



<p>さらに10分経過しましたが、まだ動いていますね。・・・・さらに5分経過。結構もちますね！　さらに5分したところで画面が点滅しました。およそ30分っていう感じですね。これだけ持てば十分です。この状態から満充電までは25分くらいでした。</p>



<h3>まとめ</h3>



<p>今回、なんとなくわかったのは以下となります。</p>



<p>・<s>謎のICが載っていたが、おそらく互換チップ</s><br>・追加調査で、これは上海南麟电子股份有限公司のLN4056H<br>・USBから充電したら赤く点灯し、満充電で青く点灯。問題なく動作した<br>・詳細にチェックしていないので気が向いたら確認してみよう</p>



<h3>あとがき</h3>



<p>やっぱりType-Cの充電はいいですね。最近ケーブルがType-Cばっかりになっているんで、マイクロUSBだとケーブル探さないといけないときがあります。それに、上下どっちに刺してもいいので楽ですよね。Type-C万歳です。</p>



<p>あと、チップの出どころがわかりスペックシートがあってよかったです。リチウムポリマー電池に充電するので、仕様が不明なICだとなんだか気持ち悪いですよね。南麟という会社は、今まで知らなかったのですが上海に2004年にできた比較的新しいチップ製造メーカーのようです。ISO9001：2008も取得していて、電源管理チップが専門のようです。</p>



<h3>著者にメッセージ</h3>



 


<p>間違いのご指摘など、コメントじゃなくて、個人的にやりとりしたい場合は<a class="c-link-text" href="/mail/" target="_blank" rel="noopener noreferrer" data-wpel-link="internal">こちらから</a>どうぞ。お返事が遅くなるときもありますが、ご了承を。</p>
]]></content:encoded>
					
		
		
			</item>
		<item>
		<title>XIAOでMacのスクリーンショット専用USBキーを作るDIY</title>
		<link>/2021/03/01/make-mac-sskey-xiao/</link>
		
		<dc:creator><![CDATA[JunkHack]]></dc:creator>
		<pubDate>Sun, 28 Feb 2021 17:20:05 +0000</pubDate>
				<category><![CDATA[arduino]]></category>
		<category><![CDATA[DIY]]></category>
		<category><![CDATA[osx]]></category>
		<category><![CDATA[WordPress]]></category>
		<guid isPermaLink="false">/?p=10186</guid>
				<media:thumbnail url="/wp-content/uploads/2021/03/DIY-USB-KEY-1.png" />
							<description><![CDATA[今回のDIYは、ちょっと実用的なものを作ろうかと思います 最近、はまっている小さくて安いArduino互換機、XIAOを使ってカスタマイズできるキーボードを作ろうと思います！　冒頭でも少し触れましたが、Macのスクショア [&#8230;]]]></description>
										<content:encoded><![CDATA[
<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex"><div class="w_b_wrap w_b_wrap_talk w_b_L w_b_flex w_b_div" style=""><div class="w_b_ava_box w_b_relative w_b_ava_L w_b_col w_b_f_n w_b_div"><div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_L w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div" style="">
<img src="/wp-content/uploads/2020/09/abata.png" width="96" height="96" alt="じゃんくはっく" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img" style="" />
</div></div></div><div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">じゃんくはっく</div></div><div class="w_b_bal_box w_b_bal_L w_b_relative w_b_direction_L w_b_w100 w_b_div"><div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewBox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "/></svg></div><div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div" style=""><div class="w_b_bal_wrap w_b_bal_wrap_L w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_L w_b_shadow_L w_b_ta_L w_b_div"><div class="w_b_quote w_b_div">
<p>スクショの専用キーがほしい！</p>
</div></div></div></div></div></div></div></div>



<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex w_b_mla w_b_jc_fe"><div class="w_b_wrap w_b_wrap_talk w_b_R w_b_flex w_b_jc_fe w_b_div" style=""><div class="w_b_bal_box w_b_bal_R w_b_relative w_b_direction_R w_b_w100 w_b_div"><div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewBox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "/></svg></div><div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div" style=""><div class="w_b_bal_wrap w_b_bal_wrap_R w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_R w_b_shadow_R w_b_ta_L w_b_div"><div class="w_b_quote w_b_div">
<p>Macだと、シフト＋コマンド＋３とかの？</p>
</div></div></div></div></div><div class="w_b_ava_box w_b_relative w_b_ava_R w_b_col w_b_f_n w_b_div"><div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_R w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div" style="">
<img src="/wp-content/uploads/2020/09/pi-.png" width="96" height="96" alt="ぴー" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img" style="" />
</div></div></div><div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">ぴー</div></div></div></div></div>



<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex"><div class="w_b_wrap w_b_wrap_talk w_b_L w_b_flex w_b_div" style=""><div class="w_b_ava_box w_b_relative w_b_ava_L w_b_col w_b_f_n w_b_div"><div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_L w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div" style="">
<img src="/wp-content/uploads/2020/09/abata.png" width="96" height="96" alt="じゃんくはっく" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img" style="" />
</div></div></div><div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">じゃんくはっく</div></div><div class="w_b_bal_box w_b_bal_L w_b_relative w_b_direction_L w_b_w100 w_b_div"><div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewBox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "/></svg></div><div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div" style=""><div class="w_b_bal_wrap w_b_bal_wrap_L w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_L w_b_shadow_L w_b_ta_L w_b_div"><div class="w_b_quote w_b_div">
<p>Mac標準だとそうだけど、Skitchっていうスクショツール使ってるからシフト＋コマンド＋５だね。</p>
</div></div></div></div></div></div></div></div>



<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex w_b_mla w_b_jc_fe"><div class="w_b_wrap w_b_wrap_talk w_b_R w_b_flex w_b_jc_fe w_b_div" style=""><div class="w_b_bal_box w_b_bal_R w_b_relative w_b_direction_R w_b_w100 w_b_div"><div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewBox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "/></svg></div><div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div" style=""><div class="w_b_bal_wrap w_b_bal_wrap_R w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_R w_b_shadow_R w_b_ta_L w_b_div"><div class="w_b_quote w_b_div">
<p>いろんな需要があると思うからカスタマイズできるといいね</p>
</div></div></div></div></div><div class="w_b_ava_box w_b_relative w_b_ava_R w_b_col w_b_f_n w_b_div"><div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_R w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div" style="">
<img src="/wp-content/uploads/2020/09/pi-.png" width="96" height="96" alt="ぴー" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img" style="" />
</div></div></div><div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">ぴー</div></div></div></div></div>



<p>今回のDIYは、ちょっと実用的なものを作ろうかと思います</p>



<p>最近、はまっている小さくて安いArduino互換機、XIAOを使ってカスタマイズできるキーボードを作ろうと思います！　冒頭でも少し触れましたが、MacのスクショアプリでSkitchっていうツール使っているんですが、このスクショのショート専用のキーボードを作ろうかと。ショートカットは、シフト＋コマンド＋５ですが、３つもボタンを押さないといけないので、１ボタンだと助かります。</p>



<div class="wp-block-image"><figure class="aligncenter size-large"><img loading="lazy" width="267" height="194" src="/wp-content/uploads/2021/02/image-6.png" alt="" class="wp-image-10197"/></figure></div>



<p>その後、Skitchの編集メニューから「画像をコピー」でクリップボードに入れてWordPressのローカルアプリに貼り付けるのが、一連の動きです。このショートカットがシフト＋コマンド＋C　です。</p>



<div class="wp-block-image"><figure class="aligncenter size-large"><img loading="lazy" width="221" height="384" src="/wp-content/uploads/2021/02/image-7.png" alt="" class="wp-image-10198"/></figure></div>



<p>構想では、この２つのボタンが専用であるといいなと。キャンセルしたいときにESCキーがあると便利かもしれませんね。</p>



<h3>使えるUSBライブラリは？</h3>



<blockquote class="wp-block-quote"><p>TinyUSB Mouse and Keyboard library</p><cite><a href="https://github.com/cyborg5/TinyUSB_Mouse_and_Keyboard/" target="_blank" rel="noreferrer noopener external" data-wpel-link="external" class="wpel-icon-right">https://github.com/cyborg5/TinyUSB_Mouse_and_Keyboard/<span class="wpel-icon wpel-image wpel-icon-1"></span></a></cite></blockquote>



<p>このライブラリは、Chris Youngさんが統合したTinyUSBです。以下で紹介されています。</p>



<blockquote class="wp-block-quote"><p><a href="https://learn.adafruit.com/mouse-and-keyboard-control-using-tinyusb-and-ble/overview" target="_blank" rel="noreferrer noopener external" data-wpel-link="external" class="wpel-icon-right">Mouse and Keyboard Control Using TinyUSB and BLE<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p></blockquote>



<p>examplesを試したのですが、記述がわかりやすいし使いやすそうだったのでこれでやってみることにします。他にも、Seeedの紹介ページにAdafruitのライブラリを使った例がありますが、examplesを見た限りでは使いにくそうでしたのでこちらはパスです。</p>



<blockquote class="wp-block-quote"><p><a href="https://wiki.seeedstudio.com/jp/Seeeduino-XIAO-TinyUSB/" target="_blank" rel="noreferrer noopener external" data-wpel-link="external" class="wpel-icon-right">Seeeduino XIAOをUSBデバイス(TinyUSB)として使う<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p></blockquote>



<h3>ライブラリを入れる</h3>



<p>マスターのZIPをArduinoIDEから入れて、例題をやってみます。</p>



<blockquote class="wp-block-quote"><p>ZIP : TinyUSB_Mouse_and_Keyboard</p><cite><a href="https://github.com/cyborg5/TinyUSB_Mouse_and_Keyboard/archive/master.zip" target="_blank" rel="noreferrer noopener external" data-wpel-link="external" class="wpel-icon-right">URL<span class="wpel-icon wpel-image wpel-icon-1"></span></a></cite></blockquote>



<p>Arduino IDEからライブラリをいれるのは、以下からです。</p>



<div class="wp-block-image"><figure class="aligncenter size-large"><img loading="lazy" width="555" height="189" src="/wp-content/uploads/2021/03/image.png" alt="" class="wp-image-10202"/></figure></div>



<p>ZIPのライブラリを入れると、以下のように同じところから見えていると思います。</p>



<div class="wp-block-image"><figure class="aligncenter size-large"><img loading="lazy" width="284" height="477" src="/wp-content/uploads/2021/03/image-1.png" alt="" class="wp-image-10203"/></figure></div>



<p>提供されたライブラリは、Macだと以下に入るようです。直接ここに入れてもOKです。</p>



<blockquote class="wp-block-quote"><p>/Users/<strong>USERNAME</strong>/Documents/Arduino/libraries/</p></blockquote>



<p>ちなみに、ArduinoIDE組込（デフォルトの）は以下です。</p>



<blockquote class="wp-block-quote"><p>/Applications/Arduino.app/Contents/Java/libraries/</p></blockquote>



<p>XIAOのボード関連は以下にあります。</p>



<blockquote class="wp-block-quote"><p>/Users/<strong>USERNAME</strong>/Library/Arduino15/packages/Seeeduino/</p></blockquote>



<p>ライブラリとか、PGのディレクトリ以下に格納しておいたほうが後からわかりやすいかもしれません。数年後、また動かそうとすると環境変わっていたりしますからね。その場合は、includeをダブルクオートで囲って記載すればカレントディレクリ（現在のディレクトリのこと）を参照します。</p>



<pre class="wp-block-code"><code>#include "TinyUSB_Mouse_and_Keyboard.h"</code></pre>



<h3>サンプルを動かしてみる</h3>



<p>Macユーザーで、Launchpad のショートカットをF5にしていれば動作します。</p>



<div class="wp-block-image"><figure class="aligncenter size-large"><img loading="lazy" width="668" height="615" src="/wp-content/uploads/2021/03/image-2.png" alt="" class="wp-image-10204"/></figure></div>



<pre class="wp-block-code"><code>$ git clone https://github.com/take-i/XIAO-USB-example.git
$ cd XIAO-USB-example/xiao_usb1/
$ open xiao_usb1.ino </code></pre>



<p>XIAOに書き込んで、見てください。ブラウザが起動して JunkHackのページが見えていれば成功です。</p>



<p>サンプル例では、Launchpadが開き、コマンドFで検索、英字モードに切り替えてterminalをタイプしてターミナルを開きます。ターミナルからはURLをオープンしています。macの場合、コマンドの修飾キーは以下のようにKEY_LEFT_GUIが相当します。WindowsだとWINキーです。</p>



<pre class="wp-block-code"><code>  // New terminal windows
  Keyboard.press(KEY_LEFT_GUI);
  Keyboard.write('n');
  Keyboard.releaseAll();</code></pre>



<p>Keyboard.pressは、押しっぱなし状態になるのでKeyboard.releaseAll()でリリースします。delayを入れないと、速すぎて期待する動作にならないので適当に調整します。</p>



<h3>４ボタンの専用キーボードを作る！</h3>



<p>さて、サンプルはうまく動いたので実際にボタンをつけて日常的に使える状態にします。こんなコードにしました。</p>



<pre class="wp-block-code"><code>https:&#47;&#47;github.com/take-i/XIAO-USB-example/tree/master/ss-key</code></pre>



<p>Pin接続は、A7 , A8 , A9 , A10 とGNDの５つです。なお、このPGは同時にボタンを押した時の考慮はしていませんのでご注意を。クリティカルなボタンの場合は、何かキーが押されている場合は違うキーの処理に入らないようにする必要があります。</p>



<h3>筐体に組み込む！</h3>



<p>３Dプリンターとメカニカルスイッチで作るのが面倒だったので、適当なジャンク品のキーボードを漁ってきました。</p>



<div class="wp-block-image"><figure class="aligncenter size-large"><img loading="lazy" width="1024" height="565" src="/wp-content/uploads/2021/03/image-3-1024x565.png" alt="" class="wp-image-10207" srcset="/wp-content/uploads/2021/03/image-3-1024x565.png 1024w, /wp-content/uploads/2021/03/image-3-768x423.png 768w, /wp-content/uploads/2021/03/image-3-984x543.png 984w, /wp-content/uploads/2021/03/image-3.png 1177w" sizes="(max-width: 1024px) 100vw, 1024px" /></figure></div>



<p>15年くらい前の無線キーボードです。エンターキーが無くなっているのは、子供に剥がされたからです。それ以来、使っていませんでしたがここに来て約に立ちそうです。</p>



<p>このタイプのキーボードはノートPCと同じで、キーボードの下はフィルムのメンブレンスイッチになっています。これにジャンパー配線するのは厳しいので、端っこのパーツを使うことにしました。</p>



<div class="wp-block-image"><figure class="aligncenter size-large"><img loading="lazy" width="1024" height="722" src="/wp-content/uploads/2021/03/image-4-1024x722.png" alt="" class="wp-image-10208" srcset="/wp-content/uploads/2021/03/image-4-1024x722.png 1024w, /wp-content/uploads/2021/03/image-4-768x542.png 768w, /wp-content/uploads/2021/03/image-4-984x694.png 984w, /wp-content/uploads/2021/03/image-4.png 1116w" sizes="(max-width: 1024px) 100vw, 1024px" /></figure></div>



<p>こっちは基盤があって、なんとかなりそうです。キーボード筐体をグラインダーで切断し、左側部分を使うことにしました。こんな感じ。</p>



<div class="wp-block-image"><figure class="aligncenter size-large"><img loading="lazy" width="1024" height="765" src="/wp-content/uploads/2021/03/image-6-1024x765.png" alt="" class="wp-image-10210" srcset="/wp-content/uploads/2021/03/image-6-1024x765.png 1024w, /wp-content/uploads/2021/03/image-6-768x573.png 768w, /wp-content/uploads/2021/03/image-6-984x735.png 984w, /wp-content/uploads/2021/03/image-6.png 1212w" sizes="(max-width: 1024px) 100vw, 1024px" /></figure></div>



<p>配線はこんな感じ。XIAOは小さいので、ほんと助かります。</p>



<figure class="wp-block-image size-large"><img loading="lazy" width="839" height="628" src="/wp-content/uploads/2021/03/image-7.png" alt="" class="wp-image-10211" srcset="/wp-content/uploads/2021/03/image-7.png 839w, /wp-content/uploads/2021/03/image-7-768x575.png 768w" sizes="(max-width: 839px) 100vw, 839px" /></figure>



<figure class="wp-block-image size-large"><img loading="lazy" width="1024" height="688" src="/wp-content/uploads/2021/03/XIAO_Pin.png" alt="" class="wp-image-10213" srcset="/wp-content/uploads/2021/03/XIAO_Pin.png 1024w, /wp-content/uploads/2021/03/XIAO_Pin-768x516.png 768w, /wp-content/uploads/2021/03/XIAO_Pin-984x661.png 984w" sizes="(max-width: 1024px) 100vw, 1024px" /></figure>



<p>黒い線がGNDで、それ以外はボタンからのプリント基板の配線からジャンパー線を出して使っています。</p>



<p>こんな感じで、無線キーボードの上に置いてあります。</p>



<div class="wp-block-image"><figure class="aligncenter size-large"><img loading="lazy" width="1024" height="742" src="/wp-content/uploads/2021/03/image-5-1024x742.png" alt="" class="wp-image-10209" srcset="/wp-content/uploads/2021/03/image-5-1024x742.png 1024w, /wp-content/uploads/2021/03/image-5-768x557.png 768w, /wp-content/uploads/2021/03/image-5-984x713.png 984w, /wp-content/uploads/2021/03/image-5.png 1251w" sizes="(max-width: 1024px) 100vw, 1024px" /></figure></div>



<p>右側からESC、スクショ、スクショのコピー、https://www.canva.com/ を開く　の４機能を持たせてあります。今もこの記事を書いているときにこのボタンを使っていますが、かなり便利ですね！　canvaを割り当てているのは、ブログ記事のサムネイルをいつもここで作るからです。今回はこんな感じかな？</p>



<div class="wp-block-image"><figure class="aligncenter size-large"><img loading="lazy" width="800" height="800" src="/wp-content/uploads/2021/03/DIY-USB-KEY.png" alt="" class="wp-image-10212" srcset="/wp-content/uploads/2021/03/DIY-USB-KEY.png 800w, /wp-content/uploads/2021/03/DIY-USB-KEY-768x768.png 768w" sizes="(max-width: 800px) 100vw, 800px" /></figure></div>



<p>Macからはこんな感じで認識されています。</p>



<div class="wp-block-image"><figure class="aligncenter size-large"><img loading="lazy" width="540" height="383" src="/wp-content/uploads/2021/03/image-8.png" alt="" class="wp-image-10214"/></figure></div>



<p>キーボードの修飾キーにも、出ていますね</p>



<div class="wp-block-image"><figure class="aligncenter size-large"><img loading="lazy" width="665" height="605" src="/wp-content/uploads/2021/03/image-9.png" alt="" class="wp-image-10215"/></figure></div>



<h3>MacのKeycodeを確認</h3>



<p>※追記<br>MacだとどんなKeycodeがタイプされるのか確認しておきたかったので、macosで動作するキーロガーのソースを少し修正してDecで数字を出すように改修したものが以下にあります。</p>



<blockquote class="wp-block-quote"><p>Mac OS X Keylogger</p><cite><a href="https://github.com/take-i/keylogger-macos" target="_blank" rel="noreferrer noopener external" data-wpel-link="external" class="wpel-icon-right">https://github.com/take-i/keylogger-macos<span class="wpel-icon wpel-image wpel-icon-1"></span></a></cite></blockquote>



<p>オリジナルは、アトランタのアプリ開発者、ケーシー・スカボローさんが作ったものです。簡単に使い方を記載しておきます。</p>



<pre class="wp-block-code"><code>$ sudo touch /var/log/keystroke.log
$ sudo chmod 644 /var/log/keystroke.log
$ git clone https://github.com/take-i/keylogger-macos.git &amp;&amp; cd keylogger-macos/
$ make
$ sudo ./keylogger</code></pre>



<p>ログは以下のパスに数字で出力されます。</p>



<pre class="wp-block-code"><code>$ tail -f /var/log/keystroke.log</code></pre>



<p>たとえば、Macのキーボード配列の場合、F3キーはMission Controlのキーとなり、Keycodeは、160となります。F3の場合は99です。純正キーボードの場合は、以下のようにキーボード設定に「F1、F2などのキー標準のファンクションキーとして使用」のチェックボックスがでます。社外キーボードの場合、これはでないようです。</p>



<div class="wp-block-image"><figure class="aligncenter size-large"><img loading="lazy" width="668" height="581" src="/wp-content/uploads/2021/03/mac-keyboard.png" alt="" class="wp-image-10252"/></figure></div>



<p>DIYキーボードをUSB接続したとき、macのキーボードだと認識させてMission Controlのコードとして認識させるようにする方法を模索したのですが、ちょっとよくわかりませんでした。また、いつか再チャレンジしたときに覚書として書いておきます。</p>



<h3>まとめ</h3>



<p>今回、なんとなくわかった・わからなかったのは以下となります。</p>



<p>・Seeed XIAOは簡単にキーボード・マウスのデバイスが作れる<br>・スイッチOn,OffタイプであればPinの数分、キーは作れる（最大、１１Key）<br>・ライブラリは、TinyUSB Mouse and Keyboard libraryが使いやすかった<br>・KeycodeというのがUSBの仕様で決まっているようです（<a rel="noreferrer noopener external" href="https://www.usb.org/sites/default/files/documents/hut1_12v2.pdf" target="_blank" data-wpel-link="external" class="wpel-icon-right">hut1_12v2.pdf<span class="wpel-icon wpel-image wpel-icon-1"></span></a>）<br>・こっちのUSB仕様書のほうが新しいかな？（<a rel="noreferrer noopener external" href="https://usb.org/sites/default/files/hut1_21_0.pdf" target="_blank" data-wpel-link="external" class="wpel-icon-right">hut1_21_0.pdf<span class="wpel-icon wpel-image wpel-icon-1"></span></a>）<br>・macの場合は、<a rel="noreferrer noopener external" href="https://github.com/caseyscarborough/keylogger" target="_blank" data-wpel-link="external" class="wpel-icon-right">Mac OS X Keylogger<span class="wpel-icon wpel-image wpel-icon-1"></span></a>　を少し手直しすれば番号がわかる<br>・しかし、USBの仕様書とは違う値が帰る（例：F3は、macだと10進で160または99、USB仕様書では、60）<br>・PGの定義は、0xC4で10進だと196<br>・<a rel="noreferrer noopener external" href="http://blog.livedoor.jp/hardyboy/archives/5532602.html" target="_blank" data-wpel-link="external" class="wpel-icon-right">ここ<span class="wpel-icon wpel-image wpel-icon-1"></span></a>によれば、0x88以上は、その値から0x88を引いた数（10進だと136）となるようです。つまり、196-136=60　なるほど！PGの定義からは謎がとけました<br>・しかし、macのkeycodeは違う値を出す。ここがよくわからない<br>・おそらく、macはkeycodeのマッピングテーブルを持っているのだろう<br>・または、キーボード種類によってF3はMission ControlになるようOSがマッピングしているのだろう<br>・keycodeとUSBデバイスのレイアウトの関係はまだ奥が深そうだ<br>・フィルムのメンブレンスイッチって自作できないかな？<br>・アルミテープとラミネートフィルムで作れないかな？</p>



<h3>あとがき</h3>



<p>作ってみて、実際に使ってみたらすごく具合がいいです。USBデバイスをこんなに簡単に作れるとは、驚きですね。いつか、本格的なキーボード作りもしてみたいです。40%キーボードとか小さくて可愛いので使ってみたいんですが、何から手をつけていいのかよくわかりません。あと、薄いMacのキーボードに手が馴染んでしまったのでという理由もあります。</p>



<p>まぁ次キーボード作る機会もあると思うので、その時は自作したいですね。</p>



<h3>著者にメッセージ</h3>



 


<p>間違いのご指摘など、コメントじゃなくて、個人的にやりとりしたい場合は<a class="c-link-text" href="/mail/" target="_blank" rel="noopener noreferrer" data-wpel-link="internal">こちらから</a>どうぞ。お返事が遅くなるときもありますが、ご了承を。</p>
]]></content:encoded>
					
		
		
			</item>
		<item>
		<title>XIAOとスマホだけでnode.jsのJohnny-Fiveを動かす最短コースをご案内！</title>
		<link>/2021/02/26/xiao-node-j5/</link>
		
		<dc:creator><![CDATA[JunkHack]]></dc:creator>
		<pubDate>Fri, 26 Feb 2021 01:07:38 +0000</pubDate>
				<category><![CDATA[Android]]></category>
		<category><![CDATA[DIY]]></category>
		<category><![CDATA[Linux]]></category>
		<guid isPermaLink="false">/?p=10169</guid>
				<media:thumbnail url="/wp-content/uploads/2021/02/Johnny-Five.png" />
							<description><![CDATA[はい、ちょっと興奮気味なんですが今日のネタは、 「XIAOとスマホを接続して、それだけでXIAOを制御する！」 ってことがメインテーマです。物理的な接続イメージは図に書くとこんな感じです。node.js実行環境をterm [&#8230;]]]></description>
										<content:encoded><![CDATA[
<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex"><div class="w_b_wrap w_b_wrap_talk w_b_L w_b_flex w_b_div" style=""><div class="w_b_ava_box w_b_relative w_b_ava_L w_b_col w_b_f_n w_b_div"><div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_L w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div" style="">
<img src="/wp-content/uploads/2020/09/abata.png" width="96" height="96" alt="じゃんくはっく" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img" style="" />
</div></div></div><div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">じゃんくはっく</div></div><div class="w_b_bal_box w_b_bal_L w_b_relative w_b_direction_L w_b_w100 w_b_div"><div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewBox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "/></svg></div><div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div" style=""><div class="w_b_bal_wrap w_b_bal_wrap_L w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_L w_b_shadow_L w_b_ta_L w_b_div"><div class="w_b_quote w_b_div">
<p>きたきたきたー！</p>
</div></div></div></div></div></div></div></div>



<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex w_b_mla w_b_jc_fe"><div class="w_b_wrap w_b_wrap_talk w_b_R w_b_flex w_b_jc_fe w_b_div" style=""><div class="w_b_bal_box w_b_bal_R w_b_relative w_b_direction_R w_b_w100 w_b_div"><div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewBox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "/></svg></div><div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div" style=""><div class="w_b_bal_wrap w_b_bal_wrap_R w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_R w_b_shadow_R w_b_ta_L w_b_div"><div class="w_b_quote w_b_div">
<p>なんか興奮してますね！w</p>
</div></div></div></div></div><div class="w_b_ava_box w_b_relative w_b_ava_R w_b_col w_b_f_n w_b_div"><div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_R w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div" style="">
<img src="/wp-content/uploads/2020/09/pi-.png" width="96" height="96" alt="ぴー" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img" style="" />
</div></div></div><div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">ぴー</div></div></div></div></div>



<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex"><div class="w_b_wrap w_b_wrap_talk w_b_L w_b_flex w_b_div" style=""><div class="w_b_ava_box w_b_relative w_b_ava_L w_b_col w_b_f_n w_b_div"><div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_L w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div" style="">
<img src="/wp-content/uploads/2020/09/abata.png" width="96" height="96" alt="じゃんくはっく" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img" style="" />
</div></div></div><div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">じゃんくはっく</div></div><div class="w_b_bal_box w_b_bal_L w_b_relative w_b_direction_L w_b_w100 w_b_div"><div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewBox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "/></svg></div><div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div" style=""><div class="w_b_bal_wrap w_b_bal_wrap_L w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_L w_b_shadow_L w_b_ta_L w_b_div"><div class="w_b_quote w_b_div">
<p>スマホとXIAOだけでNodeのJohnny-Fiveを動かせるようになったよ！</p>
</div></div></div></div></div></div></div></div>



<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex w_b_mla w_b_jc_fe"><div class="w_b_wrap w_b_wrap_talk w_b_R w_b_flex w_b_jc_fe w_b_div" style=""><div class="w_b_bal_box w_b_bal_R w_b_relative w_b_direction_R w_b_w100 w_b_div"><div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewBox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "/></svg></div><div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div" style=""><div class="w_b_bal_wrap w_b_bal_wrap_R w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_R w_b_shadow_R w_b_ta_L w_b_div"><div class="w_b_quote w_b_div">
<p>NodeとかJohnny-Fiveとか何それ？</p>
</div></div></div></div></div><div class="w_b_ava_box w_b_relative w_b_ava_R w_b_col w_b_f_n w_b_div"><div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_R w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div" style="">
<img src="/wp-content/uploads/2020/09/pi-.png" width="96" height="96" alt="ぴー" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img" style="" />
</div></div></div><div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">ぴー</div></div></div></div></div>



<p>はい、ちょっと興奮気味なんですが今日のネタは、</p>



<p>「XIAOとスマホを接続して、<strong>それだけで</strong>XIAOを制御する！」</p>



<div class="wp-block-image"><figure class="aligncenter size-large"><img loading="lazy" width="318" height="448" src="/wp-content/uploads/2021/02/fa41d394f26268f5ebe759f6764d1f4b.png" alt="" class="wp-image-10170"/></figure></div>



<p>ってことがメインテーマです。物理的な接続イメージは図に書くとこんな感じです。node.js実行環境をtermuxに作り、johnny-fiveというnode環境で動作するものをFirmataプロトコルでXIAOとやりとりします。もっと簡単にいえば、</p>



<p>JavaScriptでXIAOを操る　ですね。</p>



<p>通常、node.js実行環境はPCに作ったりしますので、物理的な接続イメージは以下のようになるかと思います。</p>



<div class="wp-block-image"><figure class="aligncenter size-large"><img loading="lazy" width="506" height="242" src="/wp-content/uploads/2021/02/pc-to-j5.png" alt="" class="wp-image-10179"/></figure></div>



<p>JavaScriptでXIAOのGPIOを操作するのですが、まだこの構成のメリットがよくわかっていませんので、触ってみようと思いました。</p>



<h3>物理的に用意するもの</h3>



<p>(1) Androidスマホ<br>(2) Seeed XIAO<br>(3) ケーブル（Type-C x Type-C）</p>



<p>Androidスマホは手持ちのものでも、余ったものでもOKです。XIAOは3個入りで1800円くらいでアマゾンから購入できます。ケーブルは100円ショップですね。</p>



<h3>Androidスマホ の必要アプリ</h3>



<blockquote class="wp-block-quote"><p>GoogleStore : Termux</p><cite><a href="https://play.google.com/store/apps/details?id=com.termux" target="_blank" rel="noreferrer noopener external" data-wpel-link="external" class="wpel-icon-right">https://play.google.com/store/apps/details?id=com.termux<span class="wpel-icon wpel-image wpel-icon-1"></span></a></cite></blockquote>



<p>まず、Androidスマホのアプリを入れておきます。あと、もう一つ有償アプリですが以下を入れておきます。日本円で190円です。</p>



<blockquote class="wp-block-quote"><p>GoogleStore : BT/USB/TCP Bridge Pro</p><cite><a href="https://play.google.com/store/apps/details?id=masar.bluetoothbridge.pro" target="_blank" rel="noreferrer noopener external" data-wpel-link="external" class="wpel-icon-right">https://play.google.com/store/apps/details?id=masar.bluetoothbridge.pro<span class="wpel-icon wpel-image wpel-icon-1"></span></a></cite></blockquote>



<p>これはブリッジアプリで、今回の用途ではXIAOのUSB接続のシリアル通信をTCP上にブリッジする用途で使います。シリアルTCPのブジッジアプリは他にもいろいろありますが、XIAOと接続できた勇逸の神アプリです。</p>



<h3>Termuxのセットアップ</h3>



<p>アプリを入れたら、パッケージをアップデートしておきます。Termuxのコンソールからタイプするのが面倒なら、PCからSSHして作業するといいかもです。</p>



<pre class="wp-block-code"><code>pkg update
pkg upgrade</code></pre>



<p>以下が今回必要なものです。</p>



<pre class="wp-block-code"><code>pkg install nodejs python clang make openssh -y</code></pre>



<p>手持ちの環境、HUAWEI P20 liteでは以下が入りました。</p>



<pre class="wp-block-code"><code>$ dpkg --list | egrep 'node|python|clang|make|openssh' | cut -b 5-50
clang              11.1.0         aarch64     
make               4.3-1          aarch64     
nodejs             14.15.4-1      aarch64     
openssh            8.4p1-1        aarch64     
python             3.9.2          aarch64     
termux-exec        1:0.8          aarch64 </code></pre>



<p>nodejsはもう14なんですね。速すぎる！ぜんぜんついていけないです。</p>



<h3>サンプルソースとインストール</h3>



<p>まず、termuxでの操作です。コピペしやすいよう$ は省いておきます。</p>



<pre class="wp-block-code"><code>cd
mkdir j5
cd j5
wget https://github.com/take-i/j5-termux/archive/main.zip</code></pre>



<p>まだ説明も何も書いていませんがそのうち、簡単に書いておきます。</p>



<blockquote class="wp-block-quote"><p>サンプルソース</p><cite>https://github.com/take-i/j5-termux</cite></blockquote>



<h3>サンプルソース解凍しインストール</h3>



<p>example にLEDが光るサンプルソースが入っています。</p>



<pre class="wp-block-code"><code>unzip main.zip 
cd j5-termux-main/example/
npm install</code></pre>



<h3>IPアドレスを修正</h3>



<p>WiFiに接続していると思いますので、termux上でIPを確認しておきます。</p>



<pre class="wp-block-code"><code>ifconfig | grep inet</code></pre>



<p>以下のようなIPv4が出ますので、それをメモしておきます。この場合は、192.168.1.36が自分のスマホのIPですね。</p>



<pre class="wp-block-code"><code>inet 192.168.1.36  netmask 255.255.255.0  broadcast 192.168.1.255</code></pre>



<p>サンプルソースのIPを修正します。portは、あとでブリッジアプリで設定しますので、1024番〜の適当なポートにしておきます。1234でもOKです。</p>



<pre class="wp-block-code"><code>------- example/index.js
::
var options = {
  host: '192.168.1.36',  //host name or IP
  port: 1234  // port
}</code></pre>



<h3>XIAOにFirmataをセットアップ</h3>



<p>この記事を書いている時はまだ、XIAOはFirmataのコードをビルドするとエラーになりますが、以下を適用すればOKです。そのうち、masterにマージされると思うので、ビルドエラーが出なければOKです。</p>



<blockquote class="wp-block-quote"><p>add seeedunio xiao to boards.h please #475</p><cite><a href="https://github.com/firmata/arduino/issues/475" target="_blank" rel="noreferrer noopener external" data-wpel-link="external" class="wpel-icon-right">https://github.com/firmata/arduino/issues/475<span class="wpel-icon wpel-image wpel-icon-1"></span></a></cite></blockquote>



<p>具体的には、以下からFirmataをダウンロードします。</p>



<blockquote class="wp-block-quote"><p>firmata/arduino Releases<br><a href="https://github.com/firmata/arduino/releases/download/2.5.8/Arduino-1.0.x-Firmata-2.5.8.zip" data-wpel-link="external" target="_blank" rel="external noopener noreferrer" class="wpel-icon-right">Arduino-1.0.x-Firmata-2.5.8.zip<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p><cite>https://github.com/firmata/arduino/releases/</cite></blockquote>



<p>先ほどのFixをBoards.hに反映し、ArduinoIDEからインポートします。</p>



<div class="wp-block-image"><figure class="aligncenter size-large"><img loading="lazy" width="564" height="209" src="/wp-content/uploads/2021/02/arduino-ide.png" alt="" class="wp-image-10177"/></figure></div>



<p>スケッチ例＞Firmata＞StandardFirmata のスケッチをXIAOに書込みます。</p>



<div class="wp-block-image"><figure class="aligncenter size-large"><img loading="lazy" width="732" height="606" src="/wp-content/uploads/2021/02/firmata-ex.png" alt="" class="wp-image-10178"/></figure></div>



<p>エラーなく書き込めたらOKです。</p>



<h3>スマホでブリッジアプリを設定</h3>



<p>次はスマホで　<a rel="noreferrer noopener external" href="https://play.google.com/store/apps/details?id=masar.bluetoothbridge.pro" target="_blank" data-wpel-link="external" class="wpel-icon-right">BT/USB/TCP Bridge Pro<span class="wpel-icon wpel-image wpel-icon-1"></span></a>　のアプリを設定します。このアプリはDevceAとBをブリッジしますので画面のように設定します。</p>



<div class="wp-block-image"><figure class="aligncenter size-large"><img loading="lazy" width="802" height="783" src="/wp-content/uploads/2021/02/ss-b1.png" alt="" class="wp-image-10172" srcset="/wp-content/uploads/2021/02/ss-b1.png 802w, /wp-content/uploads/2021/02/ss-b1-768x750.png 768w" sizes="(max-width: 802px) 100vw, 802px" /></figure></div>



<p>XIAOをUSB接続するとアクセス許可がでますのでOKします。「このUSBデバイスをデフォルトにする」はチェックしておいたほうがいいですね。</p>



<div class="wp-block-image"><figure class="aligncenter size-large"><img loading="lazy" width="795" height="785" src="/wp-content/uploads/2021/02/ss-b2.png" alt="" class="wp-image-10173" srcset="/wp-content/uploads/2021/02/ss-b2.png 795w, /wp-content/uploads/2021/02/ss-b2-768x758.png 768w" sizes="(max-width: 795px) 100vw, 795px" /></figure></div>



<p>USBデバイスに接続（USB connect）し、TCP Serverをスタートさせます。２つ上の画像、右側のようになっていればOKです。</p>



<h3>起動！</h3>



<p>Termuxのindex.jsがある場所で以下のコマンドを実行すると動作します。</p>



<pre class="wp-block-code"><code>node index.js</code></pre>



<p>成功すれば、以下のようにターミナルに表示されているはずです。</p>



<pre class="wp-block-code"><code>Connected to USB2TCP Bridge
IO ready!
1614296838868 Available Firmata  
1614296838874 Connected Firmata  
1614296838882 Repl Initialized  
>> Board connected!</code></pre>



<p>XIAOの青色LEDが光っていれば成功です。写真では青色LEDが光っているタイミングを写せなかったので光っていませんが、チカチカしているはずです。</p>



<figure class="wp-block-image size-large"><img loading="lazy" width="591" height="373" src="/wp-content/uploads/2021/02/01c575643bf8b553884997634c862516.png" alt="" class="wp-image-10174"/></figure>



<p>お疲れ様です。</p>



<h3>まとめ</h3>



<p>今回、なんとなくわかったのは以下となります。</p>



<p>・Termux上でJ5を使う時は、USBに接続したボードを認識しないので、別アプリでUSBをTCPにブリッジさせて使う<br>・ブリッジさせるアプリはたくさんあるが、J5からXIAOと通信できたのはこれだけ<br>・実際に開発するときは、スマホ充電しながらUSB接続しないと電池持ちが。<br>・J5の使い所がまだよくわかっていないので、例をこなしながらどんなメリットがあるのか体験してみる</p>



<h3>あとがき</h3>



<p>node.js実行環境をTermuxに作ってそこから有線USB接続したXIAOを操れることがわかりました。まだ、どんなことができるのか、そしてどんなメリットがあるのかまーったく分かっていませんが今後、面白い活用方法などがあれば紹介、DIYしたいなと思います。</p>



<h3>著者にメッセージ</h3>



 


<p>間違いのご指摘など、コメントじゃなくて、個人的にやりとりしたい場合は<a class="c-link-text" href="/mail/" target="_blank" rel="noopener noreferrer" data-wpel-link="internal">こちらから</a>どうぞ。お返事が遅くなるときもありますが、ご了承を。</p>
]]></content:encoded>
					
		
		
			</item>
		<item>
		<title>Arduino Nano互換機に書き込めないだと！</title>
		<link>/2021/02/23/arduino-nano/</link>
					<comments>/2021/02/23/arduino-nano/#comments</comments>
		
		<dc:creator><![CDATA[JunkHack]]></dc:creator>
		<pubDate>Tue, 23 Feb 2021 06:17:03 +0000</pubDate>
				<category><![CDATA[arduino]]></category>
		<category><![CDATA[DIY]]></category>
		<guid isPermaLink="false">/?p=10154</guid>
				<media:thumbnail url="/wp-content/uploads/2021/02/arduinoNano.png" />
							<description><![CDATA[いやはや、5年も触っていないといろいろ完璧に忘れています。ArduinoNanoという小さなArduino があるんですが、それにLチカでも書き込んで動作確認しようとしたら、書き込めずエラーが出てしまいました。持っている [&#8230;]]]></description>
										<content:encoded><![CDATA[
<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex"><div class="w_b_wrap w_b_wrap_talk w_b_L w_b_flex w_b_div" style=""><div class="w_b_ava_box w_b_relative w_b_ava_L w_b_col w_b_f_n w_b_div"><div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_L w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div" style="">
<img src="/wp-content/uploads/2020/09/abata.png" width="96" height="96" alt="じゃんくはっく" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img" style="" />
</div></div></div><div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">じゃんくはっく</div></div><div class="w_b_bal_box w_b_bal_L w_b_relative w_b_direction_L w_b_w100 w_b_div"><div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewBox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "/></svg></div><div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div" style=""><div class="w_b_bal_wrap w_b_bal_wrap_L w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_L w_b_shadow_L w_b_ta_L w_b_div"><div class="w_b_quote w_b_div">
<p>5年振りにArduino Nano（互換機）を触ったら書き込みできなーい！</p>
</div></div></div></div></div></div></div></div>



<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex w_b_mla w_b_jc_fe"><div class="w_b_wrap w_b_wrap_talk w_b_R w_b_flex w_b_jc_fe w_b_div" style=""><div class="w_b_bal_box w_b_bal_R w_b_relative w_b_direction_R w_b_w100 w_b_div"><div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewBox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "/></svg></div><div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div" style=""><div class="w_b_bal_wrap w_b_bal_wrap_R w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_R w_b_shadow_R w_b_ta_L w_b_div"><div class="w_b_quote w_b_div">
<p>あら、壊れたのかしら？</p>
</div></div></div></div></div><div class="w_b_ava_box w_b_relative w_b_ava_R w_b_col w_b_f_n w_b_div"><div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_R w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div" style="">
<img src="/wp-content/uploads/2020/09/pi-.png" width="96" height="96" alt="ぴー" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img" style="" />
</div></div></div><div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">ぴー</div></div></div></div></div>



<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex"><div class="w_b_wrap w_b_wrap_talk w_b_L w_b_flex w_b_div" style=""><div class="w_b_ava_box w_b_relative w_b_ava_L w_b_col w_b_f_n w_b_div"><div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_L w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div" style="">
<img src="/wp-content/uploads/2020/09/abata.png" width="96" height="96" alt="じゃんくはっく" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img" style="" />
</div></div></div><div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">じゃんくはっく</div></div><div class="w_b_bal_box w_b_bal_L w_b_relative w_b_direction_L w_b_w100 w_b_div"><div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewBox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "/></svg></div><div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div" style=""><div class="w_b_bal_wrap w_b_bal_wrap_L w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_L w_b_shadow_L w_b_ta_L w_b_div"><div class="w_b_quote w_b_div">
<p>「マイコンボードに書き込もうとしましたが、エラーが発生しました。」と出るのよ</p>
</div></div></div></div></div></div></div></div>



<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex w_b_mla w_b_jc_fe"><div class="w_b_wrap w_b_wrap_talk w_b_R w_b_flex w_b_jc_fe w_b_div" style=""><div class="w_b_bal_box w_b_bal_R w_b_relative w_b_direction_R w_b_w100 w_b_div"><div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewBox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "/></svg></div><div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div" style=""><div class="w_b_bal_wrap w_b_bal_wrap_R w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_R w_b_shadow_R w_b_ta_L w_b_div"><div class="w_b_quote w_b_div">
<p>アリエクでまた買えば</p>



<p>200円くらいでしょ？</p>
</div></div></div></div></div><div class="w_b_ava_box w_b_relative w_b_ava_R w_b_col w_b_f_n w_b_div"><div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_R w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div" style="">
<img src="/wp-content/uploads/2020/09/pi-.png" width="96" height="96" alt="ぴー" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img" style="" />
</div></div></div><div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">ぴー</div></div></div></div></div>



<p>いやはや、5年も触っていないといろいろ完璧に忘れています。ArduinoNanoという小さなArduino があるんですが、それにLチカでも書き込んで動作確認しようとしたら、書き込めずエラーが出てしまいました。持っているNano互換機はこれです。</p>



<div class="wp-block-image"><figure class="aligncenter size-large"><img loading="lazy" width="690" height="478" src="/wp-content/uploads/2021/02/nano.png" alt="" class="wp-image-10165"/></figure></div>



<blockquote class="wp-block-quote"><p>JunkHack : arduino hello world!　投稿日: 2015年3月15日<br>6年くらい前の記事で、$3でアリエクでポチったもの</p><cite><a href="/2015/03/15/arduino-hello-world/" target="_blank" rel="noreferrer noopener" data-wpel-link="internal">/2015/03/15/arduino-hello-world/</a></cite></blockquote>



<p>今回のエラーログは以下のようになります。</p>



<pre class="wp-block-code"><code>avrdude: Version 6.3-20190619
         Copyright (c) 2000-2005 Brian Dean, http://www.bdmicro.com/
         Copyright (c) 2007-2014 Joerg Wunsch

         System wide configuration file is "/Applications/Arduino1.8.12.app/Contents/Java/hardware/tools/avr/etc/avrdude.conf"
         User configuration file is "/Users/junkhack/.avrduderc"
         User configuration file does not exist or is not a regular file, skipping

         Using Port                    : /dev/cu.wchusbserial14120
         Using Programmer              : arduino
         Overriding Baud Rate          : 115200
avrdude: stk500_recv(): programmer is not responding
avrdude: stk500_getsync() attempt 1 of 10: not in sync: resp=0x00
：：（省略）
avrdude: stk500_recv(): programmer is not responding
avrdude: stk500_getsync() attempt 10 of 10: not in sync: resp=0x00

avrdude done.  Thank you.

マイコンボードに書き込もうとしましたが、エラーが発生しました。
このページを参考にしてください。
http:&#47;&#47;www.arduino.cc/en/Guide/Troubleshooting#upload</code></pre>



<p>通信が出来ていないような感じですね。キーワード「avrdude: stk500_recv(): programmer is not responding」でググってみるとブートローダーが壊れたとか、いろいろ出て来て壊れたのかなと。でも、実は違うようです。</p>



<h3>プロセッサ：ATmega328P(Old Bootloader)を選べば大丈夫！</h3>



<blockquote class="wp-block-quote"><p>Arduino / micro:bit / M5Stick勉強会の電録簿<br>ボード・アップデートで書き込みエラー</p><cite><a href="http://www.umek.topaz.ne.jp/mameduino/boardupdate_error/" target="_blank" rel="noreferrer noopener external" data-wpel-link="external" class="wpel-icon-right">http://www.umek.topaz.ne.jp/mameduino/boardupdate_error/<span class="wpel-icon wpel-image wpel-icon-1"></span></a></cite></blockquote>



<p>このサイトによれば、どうやら、ボード設定メニューのプロセッサー種別選択のサブメニューにて「ATmega328P(Old Bootloader)」を選択するだけでいいようです。</p>



<div class="wp-block-image"><figure class="aligncenter size-large"><img loading="lazy" width="648" height="407" src="/wp-content/uploads/2021/02/ArudinoNano.png" alt="" class="wp-image-10155"/></figure></div>



<p>はい、ちゃんと書き込めました。どうやら、Nanoの新しいやつは、通信速度が112.5kbps<strong> </strong>ということで、古いNanoは57.6kbpsということのようです。</p>



<p>ブートローダーを新しくすることもできるようで、もう一台arduinoがあれば以下のように書き込めるようです。</p>



<blockquote class="wp-block-quote"><p>Arduino as ISP and Arduino Bootloaders</p><cite><a href="https://www.arduino.cc/en/Tutorial/BuiltInExamples/ArduinoISP" target="_blank" rel="noreferrer noopener external" data-wpel-link="external" class="wpel-icon-right">https://www.arduino.cc/en/Tutorial/BuiltInExamples/ArduinoISP<span class="wpel-icon wpel-image wpel-icon-1"></span></a></cite></blockquote>



<p><s>また今度やってみようかな。今日はいろいろ違う目的がありますので。</s></p>



<p>いや、こういうのはわかった時に即実行が良いですね。ブログのネタにもなるし少し休憩後、書き込んでみました。</p>



<h3>UnoをISPにしてNanoに書き込みする！</h3>



<p>こういうのは全体の流れを把握するのが大事です。大きくは以下と理解。</p>



<p>(1) UnoをISPにして、Nanoに書き込む<br>　　→　手持ちにUnoがあったのですが、それ以外でもOK<br>(2) まず、UnoにArduinoISPのスケッチを書き込む<br>　　→　スケッチ例＞11.ArduinoISP＞ArduinoISP<br>　　　　※書き込んだら、次に配線をしますのでUSBを外します<br>(3) UnoとNanoを配線する<br>　　→　配線は６本<br>(4) IDEのツールからブートローダーを書き込む<br>　　→　UnoをUSBでPCに接続。その後書き込みます</p>



<h3>(1) UnoをISPにして、Nanoに書き込む</h3>



<p>ISPとは、インサーキットシリアルプログラマーということで、ICSPとも略されるようですね。基板に繋いだまま内蔵メモリにプログラムを書き込むことを言うようです。今回の例だと、Nanoのブートローダーを書き込むにあたり、UnoをISPにして書き込むわけです！　</p>



<h3>(2) まず、UnoにArduinoISPのスケッチを書き込む</h3>



<p>アリエクで昔、本物のUnoをポチっていました。裏が白い基板のです。</p>



<figure class="wp-block-image size-large"><img loading="lazy" width="1024" height="381" src="/wp-content/uploads/2021/02/ss-uno-1024x381.png" alt="" class="wp-image-10160" srcset="/wp-content/uploads/2021/02/ss-uno-1024x381.png 1024w, /wp-content/uploads/2021/02/ss-uno-768x286.png 768w, /wp-content/uploads/2021/02/ss-uno-984x366.png 984w, /wp-content/uploads/2021/02/ss-uno.png 1196w" sizes="(max-width: 1024px) 100vw, 1024px" /></figure>



<p>まずは、ISPのスケッチをIDEから引っ張りだしてきて、Unoに書き込みます。</p>



<pre class="wp-block-code"><code>スケッチ例 > 11.ArduinoISP > ArduinoISP</code></pre>



<p>次に配線しますので、USBを外しておきます。</p>



<h3>(3) UnoとNanoを配線する</h3>



<p>配線は６本で、こんな感じです。写真ではUSBが接続さていますが書き込みが終わったときに撮ったからです。配線するときは、外してやってくださいね。</p>



<div class="wp-block-image"><figure class="aligncenter size-large"><img loading="lazy" width="683" height="512" src="/wp-content/uploads/2021/02/IMG_20210223_114749_jpg.png" alt="" class="wp-image-10159"/></figure></div>



<div class="wp-block-jetpack-markdown"><table>
<thead>
<tr>
<th>ISP UNO</th>
<th>書込ターゲットNANO</th>
</tr>
</thead>
<tbody>
<tr>
<td>D13</td>
<td>D13</td>
</tr>
<tr>
<td>D12</td>
<td>D12</td>
</tr>
<tr>
<td>D11</td>
<td>D11</td>
</tr>
<tr>
<td>D10</td>
<td>RST</td>
</tr>
<tr>
<td>+5V</td>
<td>+5V</td>
</tr>
<tr>
<td>GND</td>
<td>GND</td>
</tr>
</tbody>
</table>
</div>



<p>実体配線図だとこういうことですね。</p>



<figure class="wp-block-image size-large"><img loading="lazy" width="800" height="877" src="/wp-content/uploads/2021/02/ArduinoUNOtoUNO_ISP2.jpg" alt="" class="wp-image-10161" srcset="/wp-content/uploads/2021/02/ArduinoUNOtoUNO_ISP2.jpg 800w, /wp-content/uploads/2021/02/ArduinoUNOtoUNO_ISP2-768x842.jpg 768w" sizes="(max-width: 800px) 100vw, 800px" /></figure>



<p>さて、書き込みましょうか！　USBをUno（ISP）に接続します。</p>



<h3>(4) IDEのツールからブートローダーを書き込む</h3>



<figure class="wp-block-image size-large"><img loading="lazy" width="776" height="703" src="/wp-content/uploads/2021/02/Uno-isp-to-nano.png" alt="" class="wp-image-10162" srcset="/wp-content/uploads/2021/02/Uno-isp-to-nano.png 776w, /wp-content/uploads/2021/02/Uno-isp-to-nano-768x696.png 768w" sizes="(max-width: 776px) 100vw, 776px" /></figure>



<p>ツールからボート、プロセッサ、シリアルポート、書込装置を程よく選択して「ブートローダを書き込む」でOKです。ログには以下のように流れました。</p>



<pre class="wp-block-code"><code>/Applications/Arduino1.8.12.app/Contents/Java/hardware/tools/avr/bin/avrdude -C/Applications/Arduino1.8.12.app/Contents/Java/hardware/tools/avr/etc/avrdude.conf -v -patmega328p -cstk500v1 -P/dev/cu.usbmodem14111 -b19200 -Uflash:w:/Applications/Arduino1.8.12.app/Contents/Java/hardware/arduino/avr/bootloaders/optiboot/optiboot_atmega328.hex:i -Ulock:w:0x0F:m 

avrdude: Version 6.3-20190619
         Copyright (c) 2000-2005 Brian Dean, http://www.bdmicro.com/
         Copyright (c) 2007-2014 Joerg Wunsch

         System wide configuration file is "/Applications/Arduino1.8.12.app/Contents/Java/hardware/tools/avr/etc/avrdude.conf"
         User configuration file is "/Users/junkhack/.avrduderc"
         User configuration file does not exist or is not a regular file, skipping

         Using Port                    : /dev/cu.usbmodem14111
         Using Programmer              : stk500v1
         Overriding Baud Rate          : 19200
Reading | ################################################## | 100% 0.01s

avrdude: verifying ...
avrdude: 1 bytes of lock verified
avrdude: reading input file "0xFD"
avrdude: writing efuse (1 bytes):

Writing | ################################################## | 100% 0.01s

avrdude: 1 bytes of efuse written
avrdude: verifying efuse memory against 0xFD:
avrdude: load data efuse data from input file 0xFD:
avrdude: input file 0xFD contains 1 bytes
avrdude: reading on-chip efuse data:

Reading | ################################################## | 100% 0.01s

avrdude: verifying ...
avrdude: 1 bytes of efuse verified
avrdude: reading input file "0xDA"
avrdude: writing hfuse (1 bytes):

Writing | ################################################## | 100% 0.01s

avrdude: 1 bytes of hfuse written
avrdude: verifying hfuse memory against 0xDA:
avrdude: load data hfuse data from input file 0xDA:
avrdude: input file 0xDA contains 1 bytes
avrdude: reading on-chip hfuse data:

Reading | ################################################## | 100% 0.01s

avrdude: verifying ...
avrdude: 1 bytes of hfuse verified
avrdude: reading input file "0xFF"
avrdude: writing lfuse (1 bytes):

Writing | ################################################## | 100% 0.01s

avrdude: 1 bytes of lfuse written
avrdude: verifying lfuse memory against 0xFF:
avrdude: load data lfuse data from input file 0xFF:
avrdude: input file 0xFF contains 1 bytes
avrdude: reading on-chip lfuse data:

Reading | ################################################## | 100% 0.01s

avrdude: verifying ...
avrdude: 1 bytes of lfuse verified

avrdude done.  Thank you.

         AVR Part                      : ATmega328P
         Chip Erase delay              : 9000 us
         PAGEL                         : PD7
         BS2                           : PC2
         RESET disposition             : dedicated
         RETRY pulse                   : SCK
         serial program mode           : yes
         parallel program mode         : yes
         Timeout                       : 200
         StabDelay                     : 100
         CmdexeDelay                   : 25
         SyncLoops                     : 32
         ByteDelay                     : 0
         PollIndex                     : 3
         PollValue                     : 0x53
         Memory Detail                 :

                                  Block Poll               Page                       Polled
           Memory Type Mode Delay Size  Indx Paged  Size   Size #Pages MinW  MaxW   ReadBack
           ----------- ---- ----- ----- ---- ------ ------ ---- ------ ----- ----- ---------
           eeprom        65    20     4    0 no       1024    4      0  3600  3600 0xff 0xff
           flash         65     6   128    0 yes     32768  128    256  4500  4500 0xff 0xff
           lfuse          0     0     0    0 no          1    0      0  4500  4500 0x00 0x00
           hfuse          0     0     0    0 no          1    0      0  4500  4500 0x00 0x00
           efuse          0     0     0    0 no          1    0      0  4500  4500 0x00 0x00
           lock           0     0     0    0 no          1    0      0  4500  4500 0x00 0x00
           calibration    0     0     0    0 no          1    0      0     0     0 0x00 0x00
           signature      0     0     0    0 no          3    0      0     0     0 0x00 0x00

         Programmer Type : STK500
         Description     : Atmel STK500 Version 1.x firmware
         Hardware Version: 2
         Firmware Version: 1.18
         Topcard         : Unknown
         Vtarget         : 0.0 V
         Varef           : 0.0 V
         Oscillator      : Off
         SCK period      : 0.1 us

avrdude: AVR device initialized and ready to accept instructions

Reading | ################################################## | 100% 0.02s

avrdude: Device signature = 0x1e950f (probably m328p)
avrdude: NOTE: "flash" memory has been specified, an erase cycle will be performed
         To disable this feature, specify the -D option.
avrdude: erasing chip
avrdude: reading input file "/Applications/Arduino1.8.12.app/Contents/Java/hardware/arduino/avr/bootloaders/optiboot/optiboot_atmega328.hex"
avrdude: writing flash (32768 bytes):

Writing | ################################################## | 100% 0.00s

avrdude: 32768 bytes of flash written
avrdude: verifying flash memory against /Applications/Arduino1.8.12.app/Contents/Java/hardware/arduino/avr/bootloaders/optiboot/optiboot_atmega328.hex:
avrdude: load data flash data from input file /Applications/Arduino1.8.12.app/Contents/Java/hardware/arduino/avr/bootloaders/optiboot/optiboot_atmega328.hex:
avrdude: input file /Applications/Arduino1.8.12.app/Contents/Java/hardware/arduino/avr/bootloaders/optiboot/optiboot_atmega328.hex contains 32768 bytes
avrdude: reading on-chip flash data:

Reading | ################################################## | 100% 0.00s

avrdude: verifying ...
avrdude: 32768 bytes of flash verified
avrdude: reading input file "0x0F"
avrdude: writing lock (1 bytes):

Writing | ################################################## | 100% 0.02s

avrdude: 1 bytes of lock written
avrdude: verifying lock memory against 0x0F:
avrdude: load data lock data from input file 0x0F:
avrdude: input file 0x0F contains 1 bytes
avrdude: reading on-chip lock data:

Reading | ################################################## | 100% 0.01s

avrdude: verifying ...
avrdude: 1 bytes of lock verified

avrdude done.  Thank you.</code></pre>



<h3>新しいブートローダをNanoで確認</h3>



<p>今書き込んだNanoの動作確認です。ボード設定メニューのプロセッサー種別選択のサブメニューにて「ATmega328P」を選択します。Old Bootloaderじゃないやつです。</p>



<p>LEDブリンクをNanoに書き込み！　以下がログですが、115200kbpsで通信していますね。</p>



<pre class="wp-block-code"><code>avrdude: Version 6.3-20190619
         Copyright (c) 2000-2005 Brian Dean, http://www.bdmicro.com/
         Copyright (c) 2007-2014 Joerg Wunsch

         System wide configuration file is "/Applications/Arduino1.8.12.app/Contents/Java/hardware/tools/avr/etc/avrdude.conf"
         User configuration file is "/Users/junkhack/.avrduderc"
         User configuration file does not exist or is not a regular file, skipping

         Using Port                    : /dev/cu.wchusbserial14120
         Using Programmer              : arduino
         Overriding Baud Rate          : 115200
         AVR Part                      : ATmega328P
         Chip Erase delay              : 9000 us
         PAGEL                         : PD7
         BS2                           : PC2
         RESET disposition             : dedicated
         RETRY pulse                   : SCK
         serial program mode           : yes
         parallel program mode         : yes
         Timeout                       : 200
         StabDelay                     : 100
         CmdexeDelay                   : 25
         SyncLoops                     : 32
         ByteDelay                     : 0
         PollIndex                     : 3
         PollValue                     : 0x53
         Memory Detail                 :

                                  Block Poll               Page                       Polled
           Memory Type Mode Delay Size  Indx Paged  Size   Size #Pages MinW  MaxW   ReadBack
           ----------- ---- ----- ----- ---- ------ ------ ---- ------ ----- ----- ---------
           eeprom        65    20     4    0 no       1024    4      0  3600  3600 0xff 0xff
           flash         65     6   128    0 yes     32768  128    256  4500  4500 0xff 0xff
           lfuse          0     0     0    0 no          1    0      0  4500  4500 0x00 0x00
           hfuse          0     0     0    0 no          1    0      0  4500  4500 0x00 0x00
           efuse          0     0     0    0 no          1    0      0  4500  4500 0x00 0x00
           lock           0     0     0    0 no          1    0      0  4500  4500 0x00 0x00
           calibration    0     0     0    0 no          1    0      0     0     0 0x00 0x00
           signature      0     0     0    0 no          3    0      0     0     0 0x00 0x00

         Programmer Type : Arduino
         Description     : Arduino
         Hardware Version: 3
         Firmware Version: 4.4
         Vtarget         : 0.3 V
         Varef           : 0.3 V
         Oscillator      : 28.800 kHz
         SCK period      : 3.3 us

avrdude: AVR device initialized and ready to accept instructions

Reading | ################################################## | 100% 0.02s

avrdude: Device signature = 0x1e950f (probably m328p)
avrdude: reading input file "/var/folders/f1/5d6ycdnj6v58mcq9kn4b3ksm0000gn/T/arduino_build_539320/Blink.ino.hex"
avrdude: writing flash (924 bytes):

Writing | ################################################## | 100% 0.48s

avrdude: 924 bytes of flash written
avrdude: verifying flash memory against /var/folders/f1/5d6ycdnj6v58mcq9kn4b3ksm0000gn/T/arduino_build_539320/Blink.ino.hex:
avrdude: load data flash data from input file /var/folders/f1/5d6ycdnj6v58mcq9kn4b3ksm0000gn/T/arduino_build_539320/Blink.ino.hex:
avrdude: input file /var/folders/f1/5d6ycdnj6v58mcq9kn4b3ksm0000gn/T/arduino_build_539320/Blink.ino.hex contains 924 bytes
avrdude: reading on-chip flash data:

Reading | ################################################## | 100% 0.45s

avrdude: verifying ...
avrdude: 924 bytes of flash verified

avrdude done.  Thank you.</code></pre>



<p>flash verified　が出ていますね。うまくいったようです！　ログをよく見てみるとファームウェアバージョンは4.4ということのようです。</p>



<blockquote class="wp-block-quote"><p>Hardware Version: 3<br>Firmware Version: 4.4</p></blockquote>



<h3>まとめ</h3>



<p>今回、なんとなくわかったのは以下となります。</p>



<p>・ブートローダが古ければ、Arduino を書込機器（ISP）にして新しくできる<br>・古いArduinoなら、プロセッサー種別選択で「ATmega328P(Old Bootloader)」を選択<br>・違いは、通信速度のようです。それ以外の違いはまだ不明</p>



<h3>あとがき</h3>



<p>5年も使っていなかったので、扱いが悪くて壊れたのかな？　と思っていましたが、対応方法があってよかったです！　まさかブートローダが新しくなっていてIDEから古いのを選択しないとダメだとは思っていませんでした。壊れていなくてよかったです。</p>



<p>5年経過しているので、いろいろな環境が変わっていますね。5年前よりいろいろ進化しているので、ハマることもあるかもですが以前より楽しいことができそうな気がします。</p>



<h3>著者にメッセージ</h3>



 


<p>間違いのご指摘など、コメントじゃなくて、個人的にやりとりしたい場合は<a class="c-link-text" href="/mail/" target="_blank" rel="noopener noreferrer" data-wpel-link="internal">こちらから</a>どうぞ。お返事が遅くなるときもありますが、ご了承を。</p>
]]></content:encoded>
					
					<wfw:commentRss>/2021/02/23/arduino-nano/feed/</wfw:commentRss>
			<slash:comments>1</slash:comments>
		
		
			</item>
	</channel>
</rss>
