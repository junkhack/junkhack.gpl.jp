<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="profile" href="http://gmpg.org/xfn/11">
<link rel="pingback" href="/xmlrpc.php"> <noscript id="aonoscrcss"></noscript>
<title>osx &#8211; JunkHack</title>
<meta name="robots" content="max-image-preview:large">
<link rel="dns-prefetch" href="//www.google.com">
<link rel="dns-prefetch" href="//www.googletagmanager.com">
<link rel="dns-prefetch" href="//fonts.googleapis.com">
<link rel="dns-prefetch" href="//pagead2.googlesyndication.com">
<link rel="alternate" type="application/rss+xml" title="JunkHack &raquo; フィード" href="/feed/">
<link rel="alternate" type="application/rss+xml" title="JunkHack &raquo; コメントフィード" href="/comments/feed/">
<link rel="alternate" type="application/rss+xml" title="JunkHack &raquo; osx カテゴリーのフィード" href="/category/osx/feed/">
<link rel="stylesheet" id="wp-block-library-css" href="/wp-includes/css/dist/block-library/style.min.css?ver=5.8.3" type="text/css" media="all">
<link rel="stylesheet" id="contact-form-7-css" href="/wp-content/cache/autoptimize/css/autoptimize_single_76e12144b6be9bc0a17dd880c5566156.css?ver=5.4.1" type="text/css" media="all">
<link rel="stylesheet" id="contact-form-7-confirm-css" href="/wp-content/cache/autoptimize/css/autoptimize_single_c605b424176e2b3541570e9ebd66830b.css?ver=5.1" type="text/css" media="all">
<link rel="stylesheet" id="wpel-style-css" href="/wp-content/cache/autoptimize/css/autoptimize_single_04d23f0dc44b526ca48d1d564eb7537c.css?ver=2.50" type="text/css" media="all">
<link rel="stylesheet" id="wpfront-scroll-top-css" href="/wp-content/plugins/wpfront-scroll-top/css/wpfront-scroll-top.min.css?ver=2.0.7.08086" type="text/css" media="all">
<link rel="stylesheet" id="related-frontend-css-css" href="/wp-content/cache/autoptimize/css/autoptimize_single_ce8bbdb7cabcf5f0fa8d28d9868b7638.css?ver=0.1.0" type="text/css" media="all">
<link rel="stylesheet" id="hew-fonts-css" href="https://fonts.googleapis.com/css?family=Open+Sans%3A400%2C600%2C700%2C400italic%2C600italic%2C700italic%7CNoto+Serif%3A400%2C700%2C400italic%2C700italic&#038;subset=latin" type="text/css" media="all">
<link rel="stylesheet" id="genericons-css" href="/wp-content/cache/autoptimize/css/autoptimize_single_c14dd6e84e694a66c7e27f11220ed49a.css?ver=3.4.1" type="text/css" media="all">
<link rel="stylesheet" id="hew-style-css" href="/wp-content/cache/autoptimize/css/autoptimize_single_bd2482c37d2bc505ed15c848d16adf6d.css?ver=5.8.3" type="text/css" media="all"> <script type="text/javascript" src="/wp-content/plugins/jquery-manager/assets/js/jquery-3.5.1.min.js" id="jquery-core-js"></script> <script type="text/javascript" src="/wp-content/plugins/jquery-manager/assets/js/jquery-migrate-3.3.0.min.js" id="jquery-migrate-js"></script>  <script type="text/javascript" src="https://www.googletagmanager.com/gtag/js?id=UA-199105184-1" id="google_gtagjs-js" async></script> <script type="text/javascript" id="google_gtagjs-js-after">window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}
gtag('set', 'linker', {"domains":["hack.gpl.jp"]} );
gtag("js", new Date());
gtag("set", "developer_id.dZTNiMT", true);
gtag("config", "UA-199105184-1", {"anonymize_ip":true});</script> <link rel="https://api.w.org/" href="/wp-json/">
<link rel="alternate" type="application/json" href="/wp-json/wp/v2/categories/62">
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="/wp-includes/wlwmanifest.xml">
<meta name="generator" content="WordPress 5.8.3">
<meta name="generator" content="Site Kit by Google 1.48.1">
<meta name="google-adsense-platform-account" content="ca-host-pub-2644536267352236">
<meta name="google-adsense-platform-domain" content="sitekit.withgoogle.com">  <script async="async" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2711753458083215" crossorigin="anonymous" type="text/javascript"></script> <style id="uagb-style-conditional-extension">@media (min-width: 1025px){body .uag-hide-desktop.uagb-google-map__wrap,body .uag-hide-desktop{display:none}}@media (min-width: 768px) and (max-width: 1024px){body .uag-hide-tab.uagb-google-map__wrap,body .uag-hide-tab{display:none}}@media (max-width: 767px){body .uag-hide-mob.uagb-google-map__wrap,body .uag-hide-mob{display:none}}</style>
</head>  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-161935417-3"></script> <script>window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-161935417-3');</script> <body class="archive category category-osx category-62 has-sidebar has-header-image">
<div id="page" class="hfeed site">
<div id="widgets-wrapper" class="hide"><div id="secondary" class="wrap top-widget-area" role="complementary"><div id="sidebar-4" class="widget-area" role="complementary"><aside id="block-2" class="widget widget_block"><script async src="https://cse.google.com/cse.js?cx=df8210082ba786774"></script> <div class="gcse-search"></div></aside></div></div></div> <a class="skip-link screen-reader-text" href="#content">コンテンツへ移動</a><header id="masthead" class="site-header" role="banner"> <a class="site-logo" href="/" title="JunkHack" rel="home noopener noreferrer" data-wpel-link="internal"> <noscript><img src="https://secure.gravatar.com/avatar/997681319c3cbb0bdcca95770d5edaa6/?s=80&#038;d=mm" width="80" height="80" alt="" class="no-grav header-image"></noscript>
<img src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%2080%2080%22%3E%3C/svg%3E" data-src="https://secure.gravatar.com/avatar/997681319c3cbb0bdcca95770d5edaa6/?s=80&#038;d=mm" width="80" height="80" alt="" class="lazyload no-grav header-image"> </a><div class="site-branding">
<h1 class="site-title"><a href="/" rel="home noopener noreferrer" data-wpel-link="internal">JunkHack</a></h1>
<h2 class="site-description">アリエクでポチった JUNKHACK</h2>
</div>
<nav id="site-navigation" class="main-navigation" role="navigation"> <button class="menu-toggle toggle-button"><span class="screen-reader-text">メインメニュー</span></button><div class="menu-new-menu-container"><ul id="menu-new-menu" class="menu">
<li id="menu-item-10686" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-10686"><a href="/list/" data-wpel-link="internal" rel="noopener noreferrer">List</a></li>
<li id="menu-item-11016" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-11016"><a href="/mail/" data-wpel-link="internal" rel="noopener noreferrer">CONTACT</a></li>
<li id="menu-item-10671" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-10671"><a href="https://jh.gpl.jp/" data-wpel-link="external" target="_blank" rel="external noopener noreferrer" class="wpel-icon-right">Mirror Netlify<span class="wpel-icon wpel-image wpel-icon-1"></span></a></li>
</ul></div></nav><div class="toggle-wrapper"> <a href="#" class="widgets-toggle toggle-button" title="ウィジェット"> <span class="screen-reader-text">ウィジェット</span> </a>
</div></header><div id="content" class="site-content"><section id="primary" class="content-area"><main id="main" class="site-main" role="main"><header class="page-header"><h1 class="page-title">カテゴリー: <span>osx</span>
</h1></header><article id="post-10588" class="post-10588 post type-post status-publish format-standard has-post-thumbnail hentry category-linux category-osx"><div class="entry-wrapper">
<header class="entry-header"> <span class="entry-format theme-genericon"></span><div class="entry-meta"> <span class="posted-on">投稿日: <a href="/2021/05/30/ryzen-5-3600-linux-unixbench/" rel="bookmark noopener noreferrer" data-wpel-link="internal"><time class="entry-date published" datetime="2021-05-30T03:04:36+09:00">2021年5月30日</time><time class="updated" datetime="2021-05-30T03:04:39+09:00">2021年5月30日</time></a> </span><span class="posted-on">更新日:2021年5月30日</span> <span class="categories"> <a href="/category/linux/" rel="category tag noopener noreferrer" data-wpel-link="internal">Linux</a>, <a href="/category/osx/" rel="category tag noopener noreferrer" data-wpel-link="internal">osx</a></span>
</div>
<h1 class="entry-title"><a href="/2021/05/30/ryzen-5-3600-linux-unixbench/" rel="bookmark noopener noreferrer" data-wpel-link="internal">備忘録：Ryzen 5 3600のLinuxでUnixBench</a></h1></header><div class="entry-content">
<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex"><div class="w_b_wrap w_b_wrap_talk w_b_L w_b_flex w_b_div">
<div class="w_b_ava_box w_b_relative w_b_ava_L w_b_col w_b_f_n w_b_div">
<div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_L w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div"> <noscript><img src="/wp-content/uploads/2020/09/abata.png" width="96" height="96" alt="じゃんくはっく" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img"></noscript>
<img src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%2096%2096%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2020/09/abata.png" width="96" height="96" alt="じゃんくはっく" class="lazyload w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img">
</div></div></div>
<div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">じゃんくはっく</div>
</div>
<div class="w_b_bal_box w_b_bal_L w_b_relative w_b_direction_L w_b_w100 w_b_div">
<div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewbox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "></polygon></svg></div>
<div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div"><div class="w_b_bal_wrap w_b_bal_wrap_L w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_L w_b_shadow_L w_b_ta_L w_b_div"><div class="w_b_quote w_b_div"><p>WordPressの仕事が終わったんで、今日は好きなことやるよ！</p></div></div></div></div>
</div>
</div></div></div>
<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex w_b_mla w_b_jc_fe"><div class="w_b_wrap w_b_wrap_talk w_b_R w_b_flex w_b_jc_fe w_b_div">
<div class="w_b_bal_box w_b_bal_R w_b_relative w_b_direction_R w_b_w100 w_b_div">
<div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewbox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "></polygon></svg></div>
<div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div"><div class="w_b_bal_wrap w_b_bal_wrap_R w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_R w_b_shadow_R w_b_ta_L w_b_div"><div class="w_b_quote w_b_div"><p>WordPressの仕事もやってるのね！</p></div></div></div></div>
</div>
<div class="w_b_ava_box w_b_relative w_b_ava_R w_b_col w_b_f_n w_b_div">
<div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_R w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div"> <noscript><img src="/wp-content/uploads/2020/09/pi-.png" width="96" height="96" alt="ぴー" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img"></noscript>
<img src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%2096%2096%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2020/09/pi-.png" width="96" height="96" alt="ぴー" class="lazyload w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img">
</div></div></div>
<div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">ぴー</div>
</div>
</div></div></div>
<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex"><div class="w_b_wrap w_b_wrap_talk w_b_L w_b_flex w_b_div">
<div class="w_b_ava_box w_b_relative w_b_ava_L w_b_col w_b_f_n w_b_div">
<div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_L w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div"> <noscript><img src="/wp-content/uploads/2020/09/abata.png" width="96" height="96" alt="じゃんくはっく" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img"></noscript>
<img src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%2096%2096%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2020/09/abata.png" width="96" height="96" alt="じゃんくはっく" class="lazyload w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img">
</div></div></div>
<div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">じゃんくはっく</div>
</div>
<div class="w_b_bal_box w_b_bal_L w_b_relative w_b_direction_L w_b_w100 w_b_div">
<div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewbox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "></polygon></svg></div>
<div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div"><div class="w_b_bal_wrap w_b_bal_wrap_L w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_L w_b_shadow_L w_b_ta_L w_b_div"><div class="w_b_quote w_b_div"><p>だいたい、何でも頼まれたらやっちゃうよ！w</p></div></div></div></div>
</div>
</div></div></div>
<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex w_b_mla w_b_jc_fe"><div class="w_b_wrap w_b_wrap_talk w_b_R w_b_flex w_b_jc_fe w_b_div">
<div class="w_b_bal_box w_b_bal_R w_b_relative w_b_direction_R w_b_w100 w_b_div">
<div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewbox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "></polygon></svg></div>
<div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div"><div class="w_b_bal_wrap w_b_bal_wrap_R w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_R w_b_shadow_R w_b_ta_L w_b_div"><div class="w_b_quote w_b_div"><p>で、Linuxはubuntuですか？</p></div></div></div></div>
</div>
<div class="w_b_ava_box w_b_relative w_b_ava_R w_b_col w_b_f_n w_b_div">
<div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_R w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div"> <noscript><img src="/wp-content/uploads/2020/09/pi-.png" width="96" height="96" alt="ぴー" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img"></noscript>
<img src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%2096%2096%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2020/09/pi-.png" width="96" height="96" alt="ぴー" class="lazyload w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img">
</div></div></div>
<div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">ぴー</div>
</div>
</div></div></div>
<p>そういえば、だいぶ前にRyzen 5 3600をメインマシンにしたんですが、これでLinux動かしてなくて、UnixBenchのスコアが気になっていました。Diskはさくっと入れ替えられるよう、2.5inchの脱着ベイをつけてありますので今回はこのマシンにUbuntuを入れてUnixBenchを計測してみようと思います。</p>
<div class="wp-block-image"><figure class="aligncenter size-large"><noscript><img width="522" height="577" src="/wp-content/uploads/2021/05/ryzen5.png" alt="" class="wp-image-10589"></noscript>
<img width="522" height="577" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20522%20577%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/05/ryzen5.png" alt="" class="lazyload wp-image-10589"></figure></div>
<blockquote class="wp-block-quote">
<p>Intelチップ、2022年までしばらくさようなら！<br><em>投稿日: <a href="/2020/03/13/goodby-intel/" data-wpel-link="internal" rel="noopener noreferrer"><time datetime="2020-03-13T06:20:53+09:00">2020年3月13日</time></a> 更新日:2020年11月13日</em></p>
<cite><a href="/2020/03/13/goodby-intel/" target="_blank" rel="noreferrer noopener" data-wpel-link="internal">Link</a></cite>
</blockquote>
<p>もう１年以上使っていますね。intelがRyzenを盛り返すまで繋ぎで使っているんですが、なかなかintelは画期的なのを出しませんね。AppleはM1のオリジナルCPU出してきたし、５年後はintelが昔のAMDみたいになっていなければいいんですが。</p>
<h3>Ubuntu 20.04.1 LTSでUnixBench</h3>
<p>MacOS10.14.x でUnixBenchを計測した時は、マルチCPUで2323.1でした。Ubuntu 20.04.1 LTSで、Ryzen 5 3600は以下のスコアです。</p>
<blockquote class="wp-block-quote"><p>UNIX Benchmarks (Version 5.1.3) on AMD Ryzen 5 3600<br><br>Single-Core Score：2422.6<br>Multi-Core Score：7919.0</p></blockquote>
<p>詳細は以下です。SSDは、SLCのsata2 64GBです。</p>
<pre class="wp-block-code"><code>   BYTE UNIX Benchmarks (Version 5.1.3)

   System: mone: GNU/Linux
   OS: GNU/Linux -- 5.4.0-42-generic -- #46-Ubuntu SMP Fri Jul 10 00:24:02 UTC 2020
   Machine: x86_64 (x86_64)
   Language: en_US.utf8 (charmap="UTF-8", collate="UTF-8")
------------------------------------------------------------------------
Benchmark Run: 日  5月 30 2021 00:29:08 - 00:57:06
12 CPUs in system; running 1 parallel copy of tests

Dhrystone 2 using register variables       50630225.0 lps   (10.0 s, 7 samples)
Double-Precision Whetstone                     9059.2 MWIPS (9.9 s, 7 samples)
Execl Throughput                               7946.0 lps   (29.9 s, 2 samples)
File Copy 1024 bufsize 2000 maxblocks       1256459.1 KBps  (30.0 s, 2 samples)
File Copy 256 bufsize 500 maxblocks          338174.5 KBps  (30.0 s, 2 samples)
File Copy 4096 bufsize 8000 maxblocks       3192098.2 KBps  (30.0 s, 2 samples)
Pipe Throughput                             2633467.7 lps   (10.0 s, 7 samples)
Pipe-based Context Switching                 364452.5 lps   (10.0 s, 7 samples)
Process Creation                              10672.3 lps   (30.0 s, 2 samples)
Shell Scripts (1 concurrent)                  10448.3 lpm   (60.0 s, 2 samples)
Shell Scripts (8 concurrent)                   5218.2 lpm   (60.0 s, 2 samples)
System Call Overhead                        3716288.0 lps   (10.0 s, 7 samples)

System Benchmarks Index Values               BASELINE       RESULT    INDEX
Dhrystone 2 using register variables         116700.0   50630225.0   4338.5
Double-Precision Whetstone                       55.0       9059.2   1647.1
Execl Throughput                                 43.0       7946.0   1847.9
File Copy 1024 bufsize 2000 maxblocks          3960.0    1256459.1   3172.9
File Copy 256 bufsize 500 maxblocks            1655.0     338174.5   2043.4
File Copy 4096 bufsize 8000 maxblocks          5800.0    3192098.2   5503.6
Pipe Throughput                               12440.0    2633467.7   2116.9
Pipe-based Context Switching                   4000.0     364452.5    911.1
Process Creation                                126.0      10672.3    847.0
Shell Scripts (1 concurrent)                     42.4      10448.3   2464.2
Shell Scripts (8 concurrent)                      6.0       5218.2   8697.0
System Call Overhead                          15000.0    3716288.0   2477.5
                                                                   ========
System Benchmarks Index Score                                        2422.6

------------------------------------------------------------------------
Benchmark Run: 日  5月 30 2021 00:57:06 - 01:25:17
12 CPUs in system; running 12 parallel copies of tests

Dhrystone 2 using register variables      377415057.2 lps   (10.0 s, 7 samples)
Double-Precision Whetstone                    85109.8 MWIPS (9.8 s, 7 samples)
Execl Throughput                              38242.8 lps   (29.9 s, 2 samples)
File Copy 1024 bufsize 2000 maxblocks        870656.3 KBps  (30.0 s, 2 samples)
File Copy 256 bufsize 500 maxblocks          231207.7 KBps  (30.0 s, 2 samples)
File Copy 4096 bufsize 8000 maxblocks       2754722.9 KBps  (30.0 s, 2 samples)
Pipe Throughput                            17510677.3 lps   (10.0 s, 7 samples)
Pipe-based Context Switching                1622682.3 lps   (10.0 s, 7 samples)
Process Creation                              70024.7 lps   (30.0 s, 2 samples)
Shell Scripts (1 concurrent)                  67019.5 lpm   (60.0 s, 2 samples)
Shell Scripts (8 concurrent)                  10011.7 lpm   (60.0 s, 2 samples)
System Call Overhead                       16785255.3 lps   (10.0 s, 7 samples)

System Benchmarks Index Values               BASELINE       RESULT    INDEX
Dhrystone 2 using register variables         116700.0  377415057.2  32340.6
Double-Precision Whetstone                       55.0      85109.8  15474.5
Execl Throughput                                 43.0      38242.8   8893.7
File Copy 1024 bufsize 2000 maxblocks          3960.0     870656.3   2198.6
File Copy 256 bufsize 500 maxblocks            1655.0     231207.7   1397.0
File Copy 4096 bufsize 8000 maxblocks          5800.0    2754722.9   4749.5
Pipe Throughput                               12440.0   17510677.3  14076.1
Pipe-based Context Switching                   4000.0    1622682.3   4056.7
Process Creation                                126.0      70024.7   5557.5
Shell Scripts (1 concurrent)                     42.4      67019.5  15806.5
Shell Scripts (8 concurrent)                      6.0      10011.7  16686.2
System Call Overhead                          15000.0   16785255.3  11190.2
                                                                   ========
System Benchmarks Index Score                                        7919.0</code></pre>
<p>同じRyzenだと、<em>ThinkCentre M75q-1 Tiny</em>　の<em>Ryzen 5 Pro 3400GE (3.30GHz, 2MB)</em>　が以下のスコアです。</p>
<blockquote class="wp-block-quote"><p>UNIX Benchmarks (Version 5.1.3) on <em>Ryzen 5 Pro 3400GE (3.30GHz, 2MB)</em><br><br>Single-Core Score：2151.7<br>Multi-Core Score：6552.1</p></blockquote>
<p>Ryzen 5 3600のが速いですが、このマシンも頑張っていますね。これは以下で紹介しています。</p>
<blockquote class="wp-block-quote">
<p>130W電源でThinkCentre M75q-1 Tinyのベンチマーク</p>
<cite><a href="/2020/07/02/130wm75q-1-tinybench/" target="_blank" rel="noreferrer noopener" data-wpel-link="internal">URL</a></cite>
</blockquote>
<p>ちなみに、このマシンはWEBサーバにしようと思いっていたのですがフォートナイトやるっていうんで息子に持っていかれてしまいました。。。なので、このブログはスマホPixel3のWEBサーバでがんばっています！</p>
<h3>まとめ</h3>
<p>今回、なんとなくわかったのは以下となります。</p>
<p>・Ryzen 5 3600 は、シングル2422.6　マルチ7919.0　のUnixbenchスコア<br>・2021/05/30時点でintelの次のCPUは、「Alder Lake」を2021年後半に発売予定<br>・これは10nmのようです<br>・特に困っていないので、7nmとか5nmのintelが出るまでじっくり待ちます</p>
<h3>あとがき</h3>
<p>Intelがこのまま、黙ってAMDを先行させるだけではないと思っていますが、苦戦しているようです。まぁ、しかし、普通の作業をしているだけであれば、Core i7 3770; (Ivy Bridge)でもぜんぜん十分で、いまだにサブマシン（メインマシンに近い存在）で頑張っています。このCPUは、第3世代のもので、今から約10年前にリリースされました。macosも10.8くらいから10.15（現在）でずっと使っています。重い作業するのは、ビルドするときくらいでしょうか。あとはアプリケーションを同時に30個くらい開いたりしながら作業するとき、少しもたつくくらいです。</p>
<h3>著者にメッセージ</h3>
<p>間違いのご指摘など、コメントじゃなくて、個人的にやりとりしたい場合は<a href="https://hack.gpl.jp/mail/" target="_blank" rel="noopener noreferrer" data-wpel-link="internal">こちらから</a>どうぞ。お返事が遅くなるときもありますが、ご了承を。</p>
</div>
<footer class="entry-footer"></footer>
</div></article><article id="post-10343" class="post-10343 post type-post status-publish format-standard has-post-thumbnail hentry category-osx"><div class="entry-wrapper">
<header class="entry-header"> <span class="entry-format theme-genericon"></span><div class="entry-meta"> <span class="posted-on">投稿日: <a href="/2021/03/22/apple-wireless-keyboard-us/" rel="bookmark noopener noreferrer" data-wpel-link="internal"><time class="entry-date published" datetime="2021-03-22T06:30:00+09:00">2021年3月22日</time><time class="updated" datetime="2021-07-04T21:17:02+09:00">2021年7月4日</time></a> </span><span class="posted-on">更新日:2021年7月4日</span> <span class="categories"> <a href="/category/osx/" rel="category tag noopener noreferrer" data-wpel-link="internal">osx</a></span>
</div>
<h1 class="entry-title"><a href="/2021/03/22/apple-wireless-keyboard-us/" rel="bookmark noopener noreferrer" data-wpel-link="internal">Apple純正のUSキーボードの分解メモ</a></h1></header><div class="entry-content">
<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex"><div class="w_b_wrap w_b_wrap_talk w_b_L w_b_flex w_b_div">
<div class="w_b_ava_box w_b_relative w_b_ava_L w_b_col w_b_f_n w_b_div">
<div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_L w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div"> <noscript><img src="/wp-content/uploads/2020/09/abata.png" width="96" height="96" alt="じゃんくはっく" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img"></noscript>
<img src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%2096%2096%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2020/09/abata.png" width="96" height="96" alt="じゃんくはっく" class="lazyload w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img">
</div></div></div>
<div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">じゃんくはっく</div>
</div>
<div class="w_b_bal_box w_b_bal_L w_b_relative w_b_direction_L w_b_w100 w_b_div">
<div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewbox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "></polygon></svg></div>
<div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div"><div class="w_b_bal_wrap w_b_bal_wrap_L w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_L w_b_shadow_L w_b_ta_L w_b_div"><div class="w_b_quote w_b_div"><p>メルカリで純正ワイヤレスキーボードのUS配列をゲットしたよ！</p></div></div></div></div>
</div>
</div></div></div>
<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex w_b_mla w_b_jc_fe"><div class="w_b_wrap w_b_wrap_talk w_b_R w_b_flex w_b_jc_fe w_b_div">
<div class="w_b_bal_box w_b_bal_R w_b_relative w_b_direction_R w_b_w100 w_b_div">
<div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewbox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "></polygon></svg></div>
<div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div"><div class="w_b_bal_wrap w_b_bal_wrap_R w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_R w_b_shadow_R w_b_ta_L w_b_div"><div class="w_b_quote w_b_div"><p>またジャンクですか〜？</p></div></div></div></div>
</div>
<div class="w_b_ava_box w_b_relative w_b_ava_R w_b_col w_b_f_n w_b_div">
<div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_R w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div"> <noscript><img src="/wp-content/uploads/2020/09/pi-.png" width="96" height="96" alt="ぴー" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img"></noscript>
<img src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%2096%2096%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2020/09/pi-.png" width="96" height="96" alt="ぴー" class="lazyload w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img">
</div></div></div>
<div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">ぴー</div>
</div>
</div></div></div>
<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex"><div class="w_b_wrap w_b_wrap_talk w_b_L w_b_flex w_b_div">
<div class="w_b_ava_box w_b_relative w_b_ava_L w_b_col w_b_f_n w_b_div">
<div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_L w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div"> <noscript><img src="/wp-content/uploads/2020/09/abata.png" width="96" height="96" alt="じゃんくはっく" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img"></noscript>
<img src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%2096%2096%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2020/09/abata.png" width="96" height="96" alt="じゃんくはっく" class="lazyload w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img">
</div></div></div>
<div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">じゃんくはっく</div>
</div>
<div class="w_b_bal_box w_b_bal_L w_b_relative w_b_direction_L w_b_w100 w_b_div">
<div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewbox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "></polygon></svg></div>
<div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div"><div class="w_b_bal_wrap w_b_bal_wrap_L w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_L w_b_shadow_L w_b_ta_L w_b_div"><div class="w_b_quote w_b_div"><p>一応、完動品っぽい！ジャンクじゃないよー</p></div></div></div></div>
</div>
</div></div></div>
<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex w_b_mla w_b_jc_fe"><div class="w_b_wrap w_b_wrap_talk w_b_R w_b_flex w_b_jc_fe w_b_div">
<div class="w_b_bal_box w_b_bal_R w_b_relative w_b_direction_R w_b_w100 w_b_div">
<div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewbox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "></polygon></svg></div>
<div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div"><div class="w_b_bal_wrap w_b_bal_wrap_R w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_R w_b_shadow_R w_b_ta_L w_b_div"><div class="w_b_quote w_b_div"><p>めずらしぃ！</p></div></div></div></div>
</div>
<div class="w_b_ava_box w_b_relative w_b_ava_R w_b_col w_b_f_n w_b_div">
<div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_R w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div"> <noscript><img src="/wp-content/uploads/2020/09/pi-.png" width="96" height="96" alt="ぴー" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img"></noscript>
<img src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%2096%2096%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2020/09/pi-.png" width="96" height="96" alt="ぴー" class="lazyload w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img">
</div></div></div>
<div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">ぴー</div>
</div>
</div></div></div>
<p>アップルのワイヤレスキーボードとはこんな製品です。今は、Magic Keyboard(充電式)　っていうタイプなんで、乾電池を入れるこのタイプは古い製品ですね。写真は日本語配列ですが、これのUS配列でかたかながないタイプです。記号の位置や、英数・かなボタンが無いタイプとなります。</p>
<div class="wp-block-image"><figure class="aligncenter size-large"><noscript><img width="422" height="407" src="/wp-content/uploads/2021/03/image-37.png" alt="" class="wp-image-10344"></noscript>
<img width="422" height="407" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20422%20407%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/03/image-37.png" alt="" class="lazyload wp-image-10344"></figure></div>
<p>で、この古いタイプのワイヤレスキーボードは電池が３本のタイプと、２本のタイプがありますが、安ければどっちでもよかったので３本タイプをゲットしておきました。</p>
<h3>状態を確認！</h3>
<div class="wp-block-image"><figure class="aligncenter size-large"><noscript><img width="984" height="421" src="/wp-content/uploads/2021/03/image-38.png" alt="" class="wp-image-10345" srcset="/wp-content/uploads/2021/03/image-38.png 984w, /wp-content/uploads/2021/03/image-38-768x329.png 768w" sizes="(max-width: 984px) 100vw, 984px"></noscript>
<img width="984" height="421" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20984%20421%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/03/image-38.png" alt="" class="lazyload wp-image-10345" data-srcset="/wp-content/uploads/2021/03/image-38.png 984w, /wp-content/uploads/2021/03/image-38-768x329.png 768w" data-sizes="(max-width: 984px) 100vw, 984px"></figure></div>
<p>ぱっと見は、結構綺麗なんですが写真のようにスペースキーが少し変です。左側が沈んで、右側は浮いています。たぶん、清掃して組む時にちゃんとハマっていなかっただけっぽいので、押し心地もよくないしちょっとバラしてみることにしました。</p>
<h3>バラすとこんな感じです</h3>
<p>このタイプのキーはパンタグラフのプラスチックがキートップにハマっているだけです。外すのは、キートップを上側か、下側から持ち上げれば外れます。スペースキーなど、少し大きめのキーは、針金で補強されています。</p>
<div class="wp-block-image"><figure class="aligncenter size-large"><noscript><img width="644" height="484" src="/wp-content/uploads/2021/03/image-39.png" alt="" class="wp-image-10346"></noscript>
<img width="644" height="484" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20644%20484%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/03/image-39.png" alt="" class="lazyload wp-image-10346"></figure></div>
<p>良くみると、パンタグラフの一部と、金属部分が少し曲がっています。がーん！　左が沈んで右が浮いていた原因はこれですね。</p>
<div class="wp-block-image"><figure class="aligncenter size-large"><noscript><img width="1024" height="394" src="/wp-content/uploads/2021/03/image-40-1024x394.png" alt="" class="wp-image-10347" srcset="/wp-content/uploads/2021/03/image-40-1024x394.png 1024w, /wp-content/uploads/2021/03/image-40-768x296.png 768w, /wp-content/uploads/2021/03/image-40-984x379.png 984w, /wp-content/uploads/2021/03/image-40.png 1216w" sizes="(max-width: 1024px) 100vw, 1024px"></noscript>
<img width="1024" height="394" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%201024%20394%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/03/image-40-1024x394.png" alt="" class="lazyload wp-image-10347" data-srcset="/wp-content/uploads/2021/03/image-40-1024x394.png 1024w, /wp-content/uploads/2021/03/image-40-768x296.png 768w, /wp-content/uploads/2021/03/image-40-984x379.png 984w, /wp-content/uploads/2021/03/image-40.png 1216w" data-sizes="(max-width: 1024px) 100vw, 1024px"></figure></div>
<p>パンタグラフは爪折れが右側にあったので、左右入れ替えて、右側が浮かないようにして対応。これでうまく治らない場合はまた考えることにします。あと、針金を受ける金属部分が曲がっていたので、ストロークが動かず、左側が沈んでしまっていたようです。金属部分は修正しておきました。</p>
<h3>ハメ方のコツ</h3>
<p>嵌める前に、掃除もしておきました。多分、前のオーナーが掃除してくれたんだと思います。あまり汚れはなかったのですが、ブラシと綿棒で軽く清掃。</p>
<p>で、ハメるコツですが、スペースキーなど、補強に針金が入っているキーはまず片一方を穴に通してやると簡単にハマります。</p>
<div class="wp-block-image"><figure class="aligncenter size-large"><noscript><img width="778" height="581" src="/wp-content/uploads/2021/03/image-41.png" alt="" class="wp-image-10348" srcset="/wp-content/uploads/2021/03/image-41.png 778w, /wp-content/uploads/2021/03/image-41-768x574.png 768w" sizes="(max-width: 778px) 100vw, 778px"></noscript>
<img width="778" height="581" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20778%20581%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/03/image-41.png" alt="" class="lazyload wp-image-10348" data-srcset="/wp-content/uploads/2021/03/image-41.png 778w, /wp-content/uploads/2021/03/image-41-768x574.png 768w" data-sizes="(max-width: 778px) 100vw, 778px"></figure></div>
<p>この薄型のキーボードは見かけによらず長持ちしますので、末長く使うなら保守用のジャンクを購入して修理するのもありかなと。今は使わない日本語キーボードを保守用のドナーにしておいても良いかも。薄い割には押し心地が結構よくて、気に入っています。毎日使っていても、かなり長持ちします。</p>
<p>下の写真は修理が終わったところ。浮いていた部分もしっかりハマって、折れていた爪も今のところ問題なく、しっかりタイプできるようになりました。</p>
<div class="wp-block-image"><figure class="aligncenter size-large"><noscript><img width="1024" height="390" src="/wp-content/uploads/2021/03/image-42-1024x390.png" alt="" class="wp-image-10349" srcset="/wp-content/uploads/2021/03/image-42-1024x390.png 1024w, /wp-content/uploads/2021/03/image-42-768x293.png 768w, /wp-content/uploads/2021/03/image-42-984x375.png 984w, /wp-content/uploads/2021/03/image-42.png 1215w" sizes="(max-width: 1024px) 100vw, 1024px"></noscript>
<img width="1024" height="390" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%201024%20390%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/03/image-42-1024x390.png" alt="" class="lazyload wp-image-10349" data-srcset="/wp-content/uploads/2021/03/image-42-1024x390.png 1024w, /wp-content/uploads/2021/03/image-42-768x293.png 768w, /wp-content/uploads/2021/03/image-42-984x375.png 984w, /wp-content/uploads/2021/03/image-42.png 1215w" data-sizes="(max-width: 1024px) 100vw, 1024px"></figure></div>
<p>純正の場合は、このように電池残量が見えたりします。</p>
<div class="wp-block-image"><figure class="aligncenter size-large"><noscript><img width="480" height="189" src="/wp-content/uploads/2021/03/image-43.png" alt="" class="wp-image-10360"></noscript>
<img width="480" height="189" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20480%20189%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/03/image-43.png" alt="" class="lazyload wp-image-10360"></figure></div>
<p>あと、キーボード設定で「F1、F2などのキーを標準のファンクションキーとして使用」のオプションが表示されます。</p>
<div class="wp-block-image"><figure class="aligncenter size-large"><noscript><img width="668" height="581" src="/wp-content/uploads/2021/03/image-44.png" alt="" class="wp-image-10361"></noscript>
<img width="668" height="581" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20668%20581%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/03/image-44.png" alt="" class="lazyload wp-image-10361"></figure></div>
<h3>まとめ</h3>
<p>今回、なんとなくわかったのは以下となります。</p>
<p>・メルカリ相場は２０００円〜４０００円くらい<br>・Apple Wireless Keyboardは、電池３本のA1255と、２本のA1314とがある<br>・パンタグラフの爪は弱そうなので、バラして掃除するときは要注意<br>・キートップだけ外して、パンタグラフはつけたまま掃除のほうが良いです<br>・やっぱりUS配列は使いやすい<br>・パチモノとは大違い、Apple純正はタイプしやすいです！</p>
<h3>あとがき</h3>
<p>10年以上、このワイヤレスの日本語配列を使っていたのですが、拠点が複数になり１年前から英語配列のパチモノキーボードを使っていました。もともと英語配列のキーボードを使っていたので、すっかり慣れてしまったのですが、トニカクこのパチモノキーボードの押し心地が非常によくありません。</p>
<div class="wp-block-image"><figure class="aligncenter size-large"><noscript><img width="1024" height="469" src="/wp-content/uploads/2021/03/image-45-1024x469.png" alt="" class="wp-image-10364" srcset="/wp-content/uploads/2021/03/image-45-1024x469.png 1024w, /wp-content/uploads/2021/03/image-45-768x351.png 768w, /wp-content/uploads/2021/03/image-45-984x450.png 984w, /wp-content/uploads/2021/03/image-45.png 1097w" sizes="(max-width: 1024px) 100vw, 1024px"></noscript>
<img width="1024" height="469" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%201024%20469%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/03/image-45-1024x469.png" alt="" class="lazyload wp-image-10364" data-srcset="/wp-content/uploads/2021/03/image-45-1024x469.png 1024w, /wp-content/uploads/2021/03/image-45-768x351.png 768w, /wp-content/uploads/2021/03/image-45-984x450.png 984w, /wp-content/uploads/2021/03/image-45.png 1097w" data-sizes="(max-width: 1024px) 100vw, 1024px"></figure></div>
<p>あえて言葉で表現するなら、Apple純正はしっとりした感じ。パチモノは軽くてキートップから滑る感じなんですよね。純正は薄くてもしっかりとした打鍵感がありますが、パチモノは打鍵感が弱いんです。うーん、言葉ではうまく表現できないですね。w　まぁ、安いのでしかたありません。Bluetoothキーボードが１０００円ちょっとで手に入るのはある意味、驚異的ですからね。</p>
<p>で、毎日触るキーボードですので、Apple純正の、US配列をゲットすることにしたのです。</p>
<p>　この薄型のキーボード、見た目は押しにくそうですが実は結構快適にタイプできます。キーストロークがあるタイプだと疲れてしまうのでこの薄い、ストロークがほとんどないこのキーボードが好きなんです。最近はこれの後継でMagic Keyboardというのがあるようで、次に壊れたら、これを使ってみようかなと思います。</p>
<p>　このキーボードが好きな理由は他にもあって、ESC横のF1〜F4あたりのキーに触りやすくて、ミッションコントロールなど特殊キーを割り当てています。いつかは、メカニカルスイッチのキーボードをDIYしたいので、こういう薄型タイプからは卒業しないといけないのですが、、、</p>
<h3>著者にメッセージ</h3>
<p>間違いのご指摘など、コメントじゃなくて、個人的にやりとりしたい場合は<a href="https://hack.gpl.jp/mail/" target="_blank" rel="noopener noreferrer" data-wpel-link="internal">こちらから</a>どうぞ。お返事が遅くなるときもありますが、ご了承を。</p>
</div>
<footer class="entry-footer"></footer>
</div></article><article id="post-10294" class="post-10294 post type-post status-publish format-standard has-post-thumbnail hentry category-amzon category-osx"><div class="entry-wrapper">
<header class="entry-header"> <span class="entry-format theme-genericon"></span><div class="entry-meta"> <span class="posted-on">投稿日: <a href="/2021/03/15/samsung-ssd-840-series/" rel="bookmark noopener noreferrer" data-wpel-link="internal"><time class="entry-date published" datetime="2021-03-15T02:52:42+09:00">2021年3月15日</time><time class="updated" datetime="2021-07-04T21:17:11+09:00">2021年7月4日</time></a> </span><span class="posted-on">更新日:2021年7月4日</span> <span class="categories"> <a href="/category/amzon/" rel="category tag noopener noreferrer" data-wpel-link="internal">AMZON</a>, <a href="/category/osx/" rel="category tag noopener noreferrer" data-wpel-link="internal">osx</a></span>
</div>
<h1 class="entry-title"><a href="/2021/03/15/samsung-ssd-840-series/" rel="bookmark noopener noreferrer" data-wpel-link="internal">6年使ったSSDが突然、認識せず、あれこれした記録</a></h1></header><div class="entry-content">
<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex"><div class="w_b_wrap w_b_wrap_talk w_b_L w_b_flex w_b_div">
<div class="w_b_ava_box w_b_relative w_b_ava_L w_b_col w_b_f_n w_b_div">
<div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_L w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div"> <noscript><img src="/wp-content/uploads/2020/09/abata.png" width="96" height="96" alt="じゃんくはっく" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img"></noscript>
<img src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%2096%2096%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2020/09/abata.png" width="96" height="96" alt="じゃんくはっく" class="lazyload w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img">
</div></div></div>
<div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">じゃんくはっく</div>
</div>
<div class="w_b_bal_box w_b_bal_L w_b_relative w_b_direction_L w_b_w100 w_b_div">
<div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewbox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "></polygon></svg></div>
<div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div"><div class="w_b_bal_wrap w_b_bal_wrap_L w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_L w_b_shadow_L w_b_ta_L w_b_div"><div class="w_b_quote w_b_div"><p>６年使ったSSDが突然、認識されなくなって困った・・・</p></div></div></div></div>
</div>
</div></div></div>
<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex w_b_mla w_b_jc_fe"><div class="w_b_wrap w_b_wrap_talk w_b_R w_b_flex w_b_jc_fe w_b_div">
<div class="w_b_bal_box w_b_bal_R w_b_relative w_b_direction_R w_b_w100 w_b_div">
<div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewbox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "></polygon></svg></div>
<div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div"><div class="w_b_bal_wrap w_b_bal_wrap_R w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_R w_b_shadow_R w_b_ta_L w_b_div"><div class="w_b_quote w_b_div"><p>バックアップとか大丈夫だった？</p></div></div></div></div>
</div>
<div class="w_b_ava_box w_b_relative w_b_ava_R w_b_col w_b_f_n w_b_div">
<div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_R w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div"> <noscript><img src="/wp-content/uploads/2020/09/pi-.png" width="96" height="96" alt="ぴー" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img"></noscript>
<img src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%2096%2096%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2020/09/pi-.png" width="96" height="96" alt="ぴー" class="lazyload w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img">
</div></div></div>
<div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">ぴー</div>
</div>
</div></div></div>
<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex"><div class="w_b_wrap w_b_wrap_talk w_b_L w_b_flex w_b_div">
<div class="w_b_ava_box w_b_relative w_b_ava_L w_b_col w_b_f_n w_b_div">
<div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_L w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div"> <noscript><img src="/wp-content/uploads/2020/09/abata.png" width="96" height="96" alt="じゃんくはっく" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img"></noscript>
<img src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%2096%2096%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2020/09/abata.png" width="96" height="96" alt="じゃんくはっく" class="lazyload w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img">
</div></div></div>
<div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">じゃんくはっく</div>
</div>
<div class="w_b_bal_box w_b_bal_L w_b_relative w_b_direction_L w_b_w100 w_b_div">
<div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewbox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "></polygon></svg></div>
<div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div"><div class="w_b_bal_wrap w_b_bal_wrap_L w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_L w_b_shadow_L w_b_ta_L w_b_div"><div class="w_b_quote w_b_div"><p>丁度いいタイミングでOS載せ替えようとしてた時だったから、大丈夫だったよ！</p></div></div></div></div>
</div>
</div></div></div>
<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex w_b_mla w_b_jc_fe"><div class="w_b_wrap w_b_wrap_talk w_b_R w_b_flex w_b_jc_fe w_b_div">
<div class="w_b_bal_box w_b_bal_R w_b_relative w_b_direction_R w_b_w100 w_b_div">
<div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewbox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "></polygon></svg></div>
<div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div"><div class="w_b_bal_wrap w_b_bal_wrap_R w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_R w_b_shadow_R w_b_ta_L w_b_div"><div class="w_b_quote w_b_div"><p>SSDの寿命って実際どのくらいなんでしょうね？</p></div></div></div></div>
</div>
<div class="w_b_ava_box w_b_relative w_b_ava_R w_b_col w_b_f_n w_b_div">
<div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_R w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div"> <noscript><img src="/wp-content/uploads/2020/09/pi-.png" width="96" height="96" alt="ぴー" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img"></noscript>
<img src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%2096%2096%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2020/09/pi-.png" width="96" height="96" alt="ぴー" class="lazyload w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img">
</div></div></div>
<div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">ぴー</div>
</div>
</div></div></div>
<p>ということで、ちょうどOSを載せ替えようとSSDを調達して、大事なデータをコピーし終えたところで、突然認識しなくなりました。認識しなくなったSSDはこれ。当時のカタログの切り抜きを。</p>
<div class="wp-block-image"><figure class="aligncenter size-large"><a href="/wp-content/uploads/2021/03/samsung-ssd-840-series.pdf" target="_blank" rel="noopener noreferrer" data-wpel-link="internal"><noscript><img width="1024" height="352" src="/wp-content/uploads/2021/03/image-20-1024x352.png" alt="" class="wp-image-10296" srcset="/wp-content/uploads/2021/03/image-20-1024x352.png 1024w, /wp-content/uploads/2021/03/image-20-768x264.png 768w, /wp-content/uploads/2021/03/image-20-984x338.png 984w, /wp-content/uploads/2021/03/image-20.png 1038w" sizes="(max-width: 1024px) 100vw, 1024px"></noscript>
<img width="1024" height="352" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%201024%20352%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/03/image-20-1024x352.png" alt="" class="lazyload wp-image-10296" data-srcset="/wp-content/uploads/2021/03/image-20-1024x352.png 1024w, /wp-content/uploads/2021/03/image-20-768x264.png 768w, /wp-content/uploads/2021/03/image-20-984x338.png 984w, /wp-content/uploads/2021/03/image-20.png 1038w" data-sizes="(max-width: 1024px) 100vw, 1024px"></a></figure></div>
<p>正式な型番と購入した値段、時期は以下です。</p>
<p>Samsung SSD840 500GB MZ-7TD500B/IT</p>
<div class="wp-block-image"><figure class="aligncenter size-large"><noscript><img width="633" height="117" src="/wp-content/uploads/2021/03/image-21.png" alt="" class="wp-image-10297"></noscript>
<img width="633" height="117" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20633%20117%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/03/image-21.png" alt="" class="lazyload wp-image-10297"></figure></div>
<p>2013年8月2日当時に購入したものですが、当時は結構高かったですね！1年後くらいに１回壊れたので、保証があったので新品にしていだきました。なので、2014年12月から、2021年３月まで使っていたことになります。約６年ですね。</p>
<p>順番は前後しますが、壊れたからSSDを新調したわけではなくOSを載せ替えようと、新しいSSDを先に購入しておいたわけです。ラッキーでした！</p>
<h3>新しいSSDは何にするか品定め！</h3>
<p>　さて、OSを載せ替えるので新しいSSDを調達しようと思います。価格と相談ですが、容量どのくらいにしようかと久しぶりにリサーチ。</p>
<p>　なんと１TBが、￥10,980じゃないですか！７年前の価格に換算すると、５万ちょいですよ。しかもCrucialで国内正規品。これでいいやということで速攻ぽちっとしました。当時は500GBでも十分と思っていましたが、あれこれ動画編集とかアプリとかいろいろ入れるので500GBだとちょっと窮屈でした。1TBあればだいぶ余裕ができますね。</p>
<blockquote class="wp-block-quote">
<p>Amazon : Crucial SSD 1000GB MX500<br>￥10,980</p>
<cite><a href="https://amzn.to/2ORFRiK" target="_blank" rel="noreferrer noopener external" data-wpel-link="external" class="wpel-icon-right">https://amzn.to/2ORFRiK<span class="wpel-icon wpel-image wpel-icon-1"></span></a></cite>
</blockquote>
<div class="wp-block-image"><figure class="aligncenter size-large"><noscript><img width="620" height="490" src="/wp-content/uploads/2021/03/image-19.png" alt="" class="wp-image-10295"></noscript>
<img width="620" height="490" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20620%20490%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/03/image-19.png" alt="" class="lazyload wp-image-10295"></figure></div>
<p>このSSDのスペックは以下です。５年保証で、360TBのTBWがあります。きっと５年では、使いきれない書き込み総量ですね。</p>
<h5>Crucial SSD 1000GB MX500　CT1000MX500SSD1/JP</h5>
<pre class="wp-block-code"><code>発売時期：2018年 10月
Micron 3D TLC NANDフラッシュを採用
Silicon Motion SM2258 SSDコントローラを搭載
2.5インチフォームファクター、厚さ7mmの薄型モデル
SATA 6Gbpsインターフェース対応
読込速度 最大560MB/s
書込速度 最大510MB/s
4kランダム読込 95,000IOPS
4kランダム書込 90,000IOPS
ファイルの保存や転送の高速化するDynamic Write Accelerationテクノロジー
AES 256ビットのハードウェア暗号化によりデータを安全かつ確実に保護
Acronis True Image for Crucialに対応
Crucial Storage Executiveに対応
250GB、500GB、1TB、2TBの容量をラインナップ
5年間の制限付保証
総書込容量（TBW）360TB
（1日当たり197GBの書込を5年間行った場合に相当）</code></pre>
<blockquote class="wp-block-quote">
<p>参考</p>
<cite><a href="https://chimolog.co/bto-ssd-mx500-1tb/" target="_blank" rel="noreferrer noopener external" data-wpel-link="external" class="wpel-icon-right">https://chimolog.co/bto-ssd-mx500-1tb/<span class="wpel-icon wpel-image wpel-icon-1"></span></a><br><a href="https://www.crucial.jp/ssd/mx500/ct1000mx500ssd1" target="_blank" rel="noreferrer noopener external" data-wpel-link="external" class="wpel-icon-right">https://www.crucial.jp/ssd/mx500/ct1000mx500ssd1<span class="wpel-icon wpel-image wpel-icon-1"></span></a><br><a href="/wp-content/uploads/2021/03/crucial-mx500-ssd-productflyer-ja.pdf" target="_blank" rel="noreferrer noopener" data-wpel-link="internal">PDF</a></cite>
</blockquote>
<h3>macos10.15.7にしてデータ戻し中・・</h3>
<p>順調にmacos10.15.7 にアップデートしてデータなどを戻し中にコピーが終わったあと、突然認識しなくなりました。データコピーはSSDをUSB3.0に繋ぐケーブルで接続していました。</p>
<div class="wp-block-image"><figure class="aligncenter size-large"><noscript><img width="859" height="305" src="/wp-content/uploads/2021/03/image-22.png" alt="" class="wp-image-10300" srcset="/wp-content/uploads/2021/03/image-22.png 859w, /wp-content/uploads/2021/03/image-22-768x273.png 768w" sizes="(max-width: 859px) 100vw, 859px"></noscript>
<img width="859" height="305" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20859%20305%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/03/image-22.png" alt="" class="lazyload wp-image-10300" data-srcset="/wp-content/uploads/2021/03/image-22.png 859w, /wp-content/uploads/2021/03/image-22-768x273.png 768w" data-sizes="(max-width: 859px) 100vw, 859px"></figure></div>
<blockquote class="wp-block-quote">
<p>aliexpress：USB 3.0 to Sata Cable</p>
<cite><a href="https://s.click.aliexpress.com/e/_9J98zQ" target="_blank" rel="noreferrer noopener external" data-wpel-link="external" class="wpel-icon-right">URL<span class="wpel-icon wpel-image wpel-icon-1"></span></a></cite>
</blockquote>
<div class="wp-block-image"><figure class="aligncenter size-large"><noscript><img width="1024" height="549" src="/wp-content/uploads/2021/03/image-23-1024x549.png" alt="" class="wp-image-10301" srcset="/wp-content/uploads/2021/03/image-23-1024x549.png 1024w, /wp-content/uploads/2021/03/image-23-768x412.png 768w, /wp-content/uploads/2021/03/image-23-984x528.png 984w, /wp-content/uploads/2021/03/image-23.png 1040w" sizes="(max-width: 1024px) 100vw, 1024px"></noscript>
<img width="1024" height="549" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%201024%20549%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/03/image-23-1024x549.png" alt="" class="lazyload wp-image-10301" data-srcset="/wp-content/uploads/2021/03/image-23-1024x549.png 1024w, /wp-content/uploads/2021/03/image-23-768x412.png 768w, /wp-content/uploads/2021/03/image-23-984x528.png 984w, /wp-content/uploads/2021/03/image-23.png 1040w" data-sizes="(max-width: 1024px) 100vw, 1024px"></figure></div>
<p>アリエクで500円くらいのものです。結構、便利でUSBだと遅いし容量も欲しい時なんかに重宝します。１本あると便利ですよ。</p>
<h3>なんとか認識させる！</h3>
<p><a rel="noreferrer noopener external" href="https://www.cgsecurity.org/wiki/TestDisk_Download" target="_blank" data-wpel-link="external" class="wpel-icon-right">Testdisk<span class="wpel-icon wpel-image wpel-icon-1"></span></a> でパーティション検出させようと１日以上かけてパーティション解析。このツールのインストールはbrewで入ります。</p>
<pre class="wp-block-code"><code>$ brew install testdisk
$ sudo testdisk</code></pre>
<div class="wp-block-image"><figure class="aligncenter size-large"><noscript><img width="501" height="532" src="/wp-content/uploads/2021/03/image-24.png" alt="" class="wp-image-10302"></noscript>
<img width="501" height="532" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20501%20532%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/03/image-24.png" alt="" class="lazyload wp-image-10302"></figure></div>
<p>なんかおかしいですよね！　このDISKはパーティションは２つしかないのですが、複数見つかります。ほげー。あ、ちなみにtestdisk はログは取らない方がよいです。あとでわかりましたが、でかいログファイルを消すことになりました。Disk Drillのクリーンアップ画面です。</p>
<div class="wp-block-image"><figure class="aligncenter size-large"><noscript><img width="960" height="357" src="/wp-content/uploads/2021/03/image-36.png" alt="" class="wp-image-10321" srcset="/wp-content/uploads/2021/03/image-36.png 960w, /wp-content/uploads/2021/03/image-36-768x286.png 768w" sizes="(max-width: 960px) 100vw, 960px"></noscript>
<img width="960" height="357" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20960%20357%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/03/image-36.png" alt="" class="lazyload wp-image-10321" data-srcset="/wp-content/uploads/2021/03/image-36.png 960w, /wp-content/uploads/2021/03/image-36-768x286.png 768w" data-sizes="(max-width: 960px) 100vw, 960px"></figure></div>
<p>testdiskを実行する際は、ログを意図的に残したい場合意外は、<strong>[ No Log ]</strong>を選択　して実行したほうが無難です。操作全般は以下が参考になります。</p>
<blockquote class="wp-block-quote">
<p>データ復旧大図鑑：Mac版TestDiskの使い方</p>
<cite><a href="https://jisaku-pc.net/hddhukyuu/archives/8354" target="_blank" rel="noreferrer noopener external" data-wpel-link="external" class="wpel-icon-right">https://jisaku-pc.net/hddhukyuu/archives/8354<span class="wpel-icon wpel-image wpel-icon-1"></span></a></cite>
</blockquote>
<p>だめもとで、いらないパーティションを削除して書き込んでみます。</p>
<div class="wp-block-image"><figure class="aligncenter size-large"><noscript><img width="499" height="532" src="/wp-content/uploads/2021/03/image-25.png" alt="" class="wp-image-10303"></noscript>
<img width="499" height="532" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20499%20532%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/03/image-25.png" alt="" class="lazyload wp-image-10303"></figure></div>
<p>上下矢印で行を選択、左右矢印でD状態にできます。OKだったらEnter。</p>
<div class="wp-block-image"><figure class="aligncenter size-large"><noscript><img width="499" height="532" src="/wp-content/uploads/2021/03/image-26.png" alt="" class="wp-image-10304"></noscript>
<img width="499" height="532" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20499%20532%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/03/image-26.png" alt="" class="lazyload wp-image-10304"></figure></div>
<p>じゃ、書き込んでみます。</p>
<div class="wp-block-image"><figure class="aligncenter size-large"><noscript><img width="501" height="309" src="/wp-content/uploads/2021/03/image-27.png" alt="" class="wp-image-10305"></noscript>
<img width="501" height="309" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20501%20309%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/03/image-27.png" alt="" class="lazyload wp-image-10305"></figure></div>
<p>はい、ダメでした！　ま、大事なデータはすでにコピー済ですから問題ありません。</p>
<p>じゃ、ディスクユーティリティーでフォーマットしましょうか。</p>
<div class="wp-block-image"><figure class="aligncenter size-large"><noscript><img width="781" height="535" src="/wp-content/uploads/2021/03/image-28.png" alt="" class="wp-image-10306" srcset="/wp-content/uploads/2021/03/image-28.png 781w, /wp-content/uploads/2021/03/image-28-768x526.png 768w" sizes="(max-width: 781px) 100vw, 781px"></noscript>
<img width="781" height="535" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20781%20535%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/03/image-28.png" alt="" class="lazyload wp-image-10306" data-srcset="/wp-content/uploads/2021/03/image-28.png 781w, /wp-content/uploads/2021/03/image-28-768x526.png 768w" data-sizes="(max-width: 781px) 100vw, 781px"></figure></div>
<p>ぐぬぬ。フォーマットさえ出来ないとは！　以下のパターンもありました。</p>
<pre class="wp-block-preformatted">“Samsung SSD 840 Series Media”（disk2）を消去して“500G”を作成中
 ディスクをマウント解除中
 パーティションマップを作成中
 パーティションのアクティベートを待機中
 disk2s2をMac OS拡張（ジャーナリング）、名前を500Gとしてフォーマット中
 Initialized /dev/rdisk2s2 as a 466 GB case-insensitive HFS Plus volume with a 40960k journal
 ディスクをマウント中
 disk2s2を消去した後にマウントできませんでした
 空のAPFSコンテナを新規作成中
 内部エラーが起きました。:（-69614）
 操作が失敗しました…</pre>
<p>根本理由はわかりませんが、EFI領域が邪魔しているのかもしれません。試しにリブートして、リカバリーモードでディスクユーティリティーを起動したらうまくフォーマットできました。同じようなエラーコードでフォーマットできないときは、お試しを。実機だとコマンド＋Rですね。Hackintoshだと、リカバリーモードをEFIブート時に選択します。</p>
<h3>Smart情報を見てみる！</h3>
<p>一応、無事にフォーマットできたので、ディスクユーティリティーのFastAidでチェックしておきましたが問題はありませんでした。今度は有償ツールですが、Disk Drillで見てみます。</p>
<div class="wp-block-image"><figure class="aligncenter size-large"><noscript><img width="729" height="409" src="/wp-content/uploads/2021/03/image-29.png" alt="" class="wp-image-10307"></noscript>
<img width="729" height="409" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20729%20409%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/03/image-29.png" alt="" class="lazyload wp-image-10307"></figure></div>
<p>なんか「寿命」の文字がたくさん出ています。しかし、それほど気にしてはいけません。</p>
<p>Smart情報は各社、独自で出しているようなので仕様が完全に共通化していません。ここでは以下くらいが参考になるかなと。16326時間、稼働していて電源は5116回付けたと。最後の書き込み量は単位はなんでしょうか？　赤字で記載した部分はよくない数字です。</p>
<p><span class="has-inline-color has-vivid-red-color">Reallocated sector count　43</span><br>Power-on hours count　16326<br>Power cycle count　5116<br><span class="has-inline-color has-vivid-red-color">Used Reserved Block Count　43</span><br><span class="has-inline-color has-vivid-red-color">Runtime Bad Count (total)　43</span><br>Total LBAs Written　3541977737</p>
<p>Linuxのsmartctlコマンドだと以下のように出るようです。同じ型番のサンプルデータはGITHUBにあったのでリンクしておきます。このSSDは赤字相当の数字は０ですね。書き込み総量は33.13 TBもあるのにね。</p>
<p>Github：SMART/SSD/Samsung/SSD 840/SSD 840 Series 500GB<br><a rel="noreferrer noopener external" href="https://github.com/linuxhw/SMART/blob/master/SSD/Samsung/SSD%20840/SSD%20840%20Series%20500GB/DE094E5F655D#L64" target="_blank" data-wpel-link="external" class="wpel-icon-right">Link<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p>
<pre class="wp-block-code"><code>ID# ATTRIBUTE_NAME          FLAGS    VALUE WORST THRESH FAIL RAW_VALUE
  5 Reallocated_Sector_Ct   PO--CK   100   100   010    -    0
  9 Power_On_Hours          -O--CK   091   091   000    -    40511
 12 Power_Cycle_Count       -O--CK   096   096   000    -    3871
177 Wear_Leveling_Count     PO--C-   086   086   000    -    169
179 Used_Rsvd_Blk_Cnt_Tot   PO--C-   100   100   010    -    0
181 Program_Fail_Cnt_Total  -O--CK   100   100   010    -    0
182 Erase_Fail_Count_Total  -O--CK   100   100   010    -    0
183 Runtime_Bad_Block       PO--C-   100   100   010    -    0
187 Uncorrectable_Error_Cnt -O--CK   100   100   000    -    0
190 Airflow_Temperature_Cel -O--CK   069   048   000    -    31
195 ECC_Error_Rate          -O-RC-   200   200   000    -    0
199 CRC_Error_Count         -OSRCK   099   099   000    -    122
235 POR_Recovery_Count      -O--C-   099   099   000    -    1745
241 Total_LBAs_Written      -O--CK   099   099   000    -    71143537386
                            ||||||_ K auto-keep
                            |||||__ C event count
                            ||||___ R error rate
                            |||____ S speed/performance
                            ||_____ O updated online
                            |______ P prefailure warning</code></pre>
<p>書き込み量のTotal LBAs Writtenは、どうやらセクターサイズを掛けるようです。testdisk とかでみると、セクターサイズは512byteのようです。</p>
<div class="wp-block-image"><figure class="aligncenter size-large"><noscript><img width="380" height="210" src="/wp-content/uploads/2021/03/image-31.png" alt="" class="wp-image-10309"></noscript>
<img width="380" height="210" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20380%20210%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/03/image-31.png" alt="" class="lazyload wp-image-10309"></figure></div>
<p>以下の計算機で算出すると、1.65 TBとなりました。</p>
<blockquote class="wp-block-quote">
<p>SSD Total Bytes Written (TBW) Calculator</p>
<cite>https://www.virten.net/2016/12/ssd-total-bytes-written-calculator/</cite>
</blockquote>
<h3>Samsung SSD840のTBWは？</h3>
<p>当時のカタログをみても、TBWは記載されていませんでした。書いてある記載は、MTBF(平均故障間隔)として、150万時間とあります。</p>
<figure class="wp-block-image size-large"><a href="/wp-content/uploads/2021/03/840catalog.png" data-wpel-link="internal" rel="noopener noreferrer"><noscript><img width="1024" height="742" src="/wp-content/uploads/2021/03/840catalog-1024x742.png" alt="" class="wp-image-10310" srcset="/wp-content/uploads/2021/03/840catalog-1024x742.png 1024w, /wp-content/uploads/2021/03/840catalog-768x556.png 768w, /wp-content/uploads/2021/03/840catalog-984x713.png 984w, /wp-content/uploads/2021/03/840catalog.png 1189w" sizes="(max-width: 1024px) 100vw, 1024px"></noscript>
<img width="1024" height="742" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%201024%20742%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/03/840catalog-1024x742.png" alt="" class="lazyload wp-image-10310" data-srcset="/wp-content/uploads/2021/03/840catalog-1024x742.png 1024w, /wp-content/uploads/2021/03/840catalog-768x556.png 768w, /wp-content/uploads/2021/03/840catalog-984x713.png 984w, /wp-content/uploads/2021/03/840catalog.png 1189w" data-sizes="(max-width: 1024px) 100vw, 1024px"></a></figure><p>以下に当時のレビューがありましたが、その中に以下とあります。</p>
<blockquote class="wp-block-quote">
<p>総書き込み容量（TBW）は、当社規定で1日あたり20GBで計算しています。そして、840では毎日20GB書き込む人でも3年間は十分保証できる品質を実現した、ということです。</p>
<cite>https://akiba-pc.watch.impress.co.jp/hotline/20121117/sp_fline.html</cite>
</blockquote>
<p>つまり、21.9TByteがTBWということですかね。ということは、まだ1.65 TBしか書き込みしていませんが、Reallocated sector count　43など出ていますので、かなり要注意が必要ですね。これは実際に不良セクタが発生した数なので、今後もっと増えていくはずです。つまり、即ダメになるわけじゃないですが、もう寿命に近づいていると思って間違いありません。SMART情報をモニタリングしながら、軽めの作業に使うことにします。音楽再生用のキャッシュとか、データが飛んでも問題ないような用途です。</p>
<h3>TechTool Pro 13でチェック</h3>
<p>ちょっと違うツールを使って、SSDをチェックしてみることします。TechTool Pro 13のサーフェーススキャンとSmartチェックをやってみます。</p>
<div class="wp-block-image"><figure class="aligncenter size-large"><noscript><img width="1024" height="665" src="/wp-content/uploads/2021/03/image-32-1024x665.png" alt="" class="wp-image-10311" srcset="/wp-content/uploads/2021/03/image-32-1024x665.png 1024w, /wp-content/uploads/2021/03/image-32-768x499.png 768w, /wp-content/uploads/2021/03/image-32-984x639.png 984w, /wp-content/uploads/2021/03/image-32.png 1032w" sizes="(max-width: 1024px) 100vw, 1024px"></noscript>
<img width="1024" height="665" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%201024%20665%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/03/image-32-1024x665.png" alt="" class="lazyload wp-image-10311" data-srcset="/wp-content/uploads/2021/03/image-32-1024x665.png 1024w, /wp-content/uploads/2021/03/image-32-768x499.png 768w, /wp-content/uploads/2021/03/image-32-984x639.png 984w, /wp-content/uploads/2021/03/image-32.png 1032w" data-sizes="(max-width: 1024px) 100vw, 1024px"></figure></div>
<p>サーフェイーススキャンは問題ありませんでした。</p>
<div class="wp-block-image"><figure class="aligncenter size-large"><noscript><img width="1024" height="665" src="/wp-content/uploads/2021/03/image-33-1024x665.png" alt="" class="wp-image-10312" srcset="/wp-content/uploads/2021/03/image-33-1024x665.png 1024w, /wp-content/uploads/2021/03/image-33-768x499.png 768w, /wp-content/uploads/2021/03/image-33-984x639.png 984w, /wp-content/uploads/2021/03/image-33.png 1032w" sizes="(max-width: 1024px) 100vw, 1024px"></noscript>
<img width="1024" height="665" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%201024%20665%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/03/image-33-1024x665.png" alt="" class="lazyload wp-image-10312" data-srcset="/wp-content/uploads/2021/03/image-33-1024x665.png 1024w, /wp-content/uploads/2021/03/image-33-768x499.png 768w, /wp-content/uploads/2021/03/image-33-984x639.png 984w, /wp-content/uploads/2021/03/image-33.png 1032w" data-sizes="(max-width: 1024px) 100vw, 1024px"></figure></div>
<p>注意は必要そうですが、まだ行けそうな感じですかね。Windowsマシンにくっつけて、SAMSUNG Magician Softwareでチェックしてみるのがいいんですが面倒なんでやめました。またの機会に確認してみます。</p>
<blockquote class="wp-block-quote">
<p>SAMSUNG Magician Software</p>
<cite>https://www.samsung.com/semiconductor/minisite/jp/support/tools/</cite>
</blockquote>
<h3>現状のSSD速度ベンチマーク</h3>
<p>実質、購入してから６年使っているSSDのベンチマークを計測しておきます。</p>
<p>SSDに記録されている時間は、16326時間で約６８０日、トータル書き込み量は1.65 TBの、Samsung SSD 840 Series MZ-7TD500B/IT　です。</p>
<div class="wp-block-image"><figure class="aligncenter size-large"><noscript><img width="422" height="390" src="/wp-content/uploads/2021/03/image-34.png" alt="" class="wp-image-10313"></noscript>
<img width="422" height="390" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20422%20390%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/03/image-34.png" alt="" class="lazyload wp-image-10313"></figure></div>
<p>あと、今回購入したCrucial SSD 1000GB MX500　CT1000MX500SSD1/JPは以下です。</p>
<div class="wp-block-image"><figure class="aligncenter size-large"><noscript><img width="422" height="390" src="/wp-content/uploads/2021/03/image-35.png" alt="" class="wp-image-10314"></noscript>
<img width="422" height="390" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20422%20390%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/03/image-35.png" alt="" class="lazyload wp-image-10314"></figure></div>
<h3>まとめ</h3>
<p>今回、なんとなくわかったのは以下となります。</p>
<p>・バックアップは大事<br>・不良セクタは４３個あった。今後増えそう<br>・書き込み総量は超えていないが、そろそろ寿命と判断していいだろう<br>・耐用年数を超えたら、TMP領域など軽めのDISK用途に使う<br>・心配なら廃棄すれば間違いないです<br>・SMART情報は各社違うので、要確認必要<br>・Disk DrillのSMART表示、監視は参考程度に<br>・TechTool Pro 13のほうが、Disk関連のチェックは豊富<br>・今回はtestdisk では復旧できず<br>・ディスクユーティリティーで初期化出来ない時は、OSをリカバリーモードで起動してやれば今回はフォーマットできた<br>・紹介しなかったけど、TechTool Pro 13のスナップショット機能は便利<br>・SSDはHDDと比べても結構、耐久性あるな！<br>・最近のSSDは、保証期間中に書き込み総量を超えるのはまず、無理<br>・しかし、故障するかどうかは使う環境により左右される</p>
<h3>あとがき</h3>
<p>SSDの寿命というのは、今回体験したようにいつか訪れます。稼働部品がないHDDとは違いSSDならずっと使えるはずと思いガチです。長年ずっと使い続けているなら、ちょっと点検してみるのもいいかもしれませんね。</p>
<p>加えて、ファイルシステムの不整合というのは、使っているうちにどうしても発生してしまいます。５、６年の間には停電もあり、ブレーカー落ちることもあり１年に一回くらいは、OSをクリーンインストールしてバックアップ（DropBoxやGoogleDriveなど）に大事なデータは分散バックアップしておくのがやっぱり大事だなーと改めて思いました。今回は、特に大事なデータは消失しませんでしたが、運がよかったなーと思います。ちょっと違うタイミングだったら結構慌てていたかもしれません。</p>
<p>　ついつい面倒になって、クリーンインストールは腰が重いですが、これからは１年に一回くらいはやろうと思います。あと、SMART情報のモニタリングはやっておいたほうがいいですね。今回、死にかけのSSDの寿命が完全に尽きたらまたレポートしようかなと思います。</p>
<p>　あと、HDDですが６TBが１万で買えるんですね！　みんなNAS用途で使ってるみたいですが、何入れてるんでしょうか。TVの録画データとかですかね。</p>
<h3>著者にメッセージ</h3>
<p>間違いのご指摘など、コメントじゃなくて、個人的にやりとりしたい場合は<a href="https://hack.gpl.jp/mail/" target="_blank" rel="noopener noreferrer" data-wpel-link="internal">こちらから</a>どうぞ。お返事が遅くなるときもありますが、ご了承を。</p>
</div>
<footer class="entry-footer"></footer>
</div></article><article id="post-10186" class="post-10186 post type-post status-publish format-standard has-post-thumbnail hentry category-arduino category-diy category-osx category-wordpress"><div class="entry-wrapper">
<header class="entry-header"> <span class="entry-format theme-genericon"></span><div class="entry-meta"> <span class="posted-on">投稿日: <a href="/2021/03/01/make-mac-sskey-xiao/" rel="bookmark noopener noreferrer" data-wpel-link="internal"><time class="entry-date published" datetime="2021-03-01T02:20:05+09:00">2021年3月1日</time><time class="updated" datetime="2021-05-02T06:56:55+09:00">2021年5月2日</time></a> </span><span class="posted-on">更新日:2021年5月2日</span> <span class="categories"> <a href="/category/arduino/" rel="category tag noopener noreferrer" data-wpel-link="internal">arduino</a>, <a href="/category/diy/" rel="category tag noopener noreferrer" data-wpel-link="internal">DIY</a>, <a href="/category/osx/" rel="category tag noopener noreferrer" data-wpel-link="internal">osx</a>, <a href="/category/wordpress/" rel="category tag noopener noreferrer" data-wpel-link="internal">WordPress</a></span>
</div>
<h1 class="entry-title"><a href="/2021/03/01/make-mac-sskey-xiao/" rel="bookmark noopener noreferrer" data-wpel-link="internal">XIAOでMacのスクリーンショット専用USBキーを作るDIY</a></h1></header><div class="entry-content">
<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex"><div class="w_b_wrap w_b_wrap_talk w_b_L w_b_flex w_b_div">
<div class="w_b_ava_box w_b_relative w_b_ava_L w_b_col w_b_f_n w_b_div">
<div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_L w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div"> <noscript><img src="/wp-content/uploads/2020/09/abata.png" width="96" height="96" alt="じゃんくはっく" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img"></noscript>
<img src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%2096%2096%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2020/09/abata.png" width="96" height="96" alt="じゃんくはっく" class="lazyload w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img">
</div></div></div>
<div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">じゃんくはっく</div>
</div>
<div class="w_b_bal_box w_b_bal_L w_b_relative w_b_direction_L w_b_w100 w_b_div">
<div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewbox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "></polygon></svg></div>
<div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div"><div class="w_b_bal_wrap w_b_bal_wrap_L w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_L w_b_shadow_L w_b_ta_L w_b_div"><div class="w_b_quote w_b_div"><p>スクショの専用キーがほしい！</p></div></div></div></div>
</div>
</div></div></div>
<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex w_b_mla w_b_jc_fe"><div class="w_b_wrap w_b_wrap_talk w_b_R w_b_flex w_b_jc_fe w_b_div">
<div class="w_b_bal_box w_b_bal_R w_b_relative w_b_direction_R w_b_w100 w_b_div">
<div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewbox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "></polygon></svg></div>
<div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div"><div class="w_b_bal_wrap w_b_bal_wrap_R w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_R w_b_shadow_R w_b_ta_L w_b_div"><div class="w_b_quote w_b_div"><p>Macだと、シフト＋コマンド＋３とかの？</p></div></div></div></div>
</div>
<div class="w_b_ava_box w_b_relative w_b_ava_R w_b_col w_b_f_n w_b_div">
<div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_R w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div"> <noscript><img src="/wp-content/uploads/2020/09/pi-.png" width="96" height="96" alt="ぴー" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img"></noscript>
<img src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%2096%2096%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2020/09/pi-.png" width="96" height="96" alt="ぴー" class="lazyload w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img">
</div></div></div>
<div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">ぴー</div>
</div>
</div></div></div>
<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex"><div class="w_b_wrap w_b_wrap_talk w_b_L w_b_flex w_b_div">
<div class="w_b_ava_box w_b_relative w_b_ava_L w_b_col w_b_f_n w_b_div">
<div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_L w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div"> <noscript><img src="/wp-content/uploads/2020/09/abata.png" width="96" height="96" alt="じゃんくはっく" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img"></noscript>
<img src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%2096%2096%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2020/09/abata.png" width="96" height="96" alt="じゃんくはっく" class="lazyload w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img">
</div></div></div>
<div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">じゃんくはっく</div>
</div>
<div class="w_b_bal_box w_b_bal_L w_b_relative w_b_direction_L w_b_w100 w_b_div">
<div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewbox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "></polygon></svg></div>
<div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div"><div class="w_b_bal_wrap w_b_bal_wrap_L w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_L w_b_shadow_L w_b_ta_L w_b_div"><div class="w_b_quote w_b_div"><p>Mac標準だとそうだけど、Skitchっていうスクショツール使ってるからシフト＋コマンド＋５だね。</p></div></div></div></div>
</div>
</div></div></div>
<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex w_b_mla w_b_jc_fe"><div class="w_b_wrap w_b_wrap_talk w_b_R w_b_flex w_b_jc_fe w_b_div">
<div class="w_b_bal_box w_b_bal_R w_b_relative w_b_direction_R w_b_w100 w_b_div">
<div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewbox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "></polygon></svg></div>
<div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div"><div class="w_b_bal_wrap w_b_bal_wrap_R w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_R w_b_shadow_R w_b_ta_L w_b_div"><div class="w_b_quote w_b_div"><p>いろんな需要があると思うからカスタマイズできるといいね</p></div></div></div></div>
</div>
<div class="w_b_ava_box w_b_relative w_b_ava_R w_b_col w_b_f_n w_b_div">
<div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_R w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div"> <noscript><img src="/wp-content/uploads/2020/09/pi-.png" width="96" height="96" alt="ぴー" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img"></noscript>
<img src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%2096%2096%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2020/09/pi-.png" width="96" height="96" alt="ぴー" class="lazyload w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img">
</div></div></div>
<div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">ぴー</div>
</div>
</div></div></div>
<p>今回のDIYは、ちょっと実用的なものを作ろうかと思います</p>
<p>最近、はまっている小さくて安いArduino互換機、XIAOを使ってカスタマイズできるキーボードを作ろうと思います！　冒頭でも少し触れましたが、MacのスクショアプリでSkitchっていうツール使っているんですが、このスクショのショート専用のキーボードを作ろうかと。ショートカットは、シフト＋コマンド＋５ですが、３つもボタンを押さないといけないので、１ボタンだと助かります。</p>
<div class="wp-block-image"><figure class="aligncenter size-large"><noscript><img width="267" height="194" src="/wp-content/uploads/2021/02/image-6.png" alt="" class="wp-image-10197"></noscript>
<img width="267" height="194" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20267%20194%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/02/image-6.png" alt="" class="lazyload wp-image-10197"></figure></div>
<p>その後、Skitchの編集メニューから「画像をコピー」でクリップボードに入れてWordPressのローカルアプリに貼り付けるのが、一連の動きです。このショートカットがシフト＋コマンド＋C　です。</p>
<div class="wp-block-image"><figure class="aligncenter size-large"><noscript><img width="221" height="384" src="/wp-content/uploads/2021/02/image-7.png" alt="" class="wp-image-10198"></noscript>
<img width="221" height="384" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20221%20384%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/02/image-7.png" alt="" class="lazyload wp-image-10198"></figure></div>
<p>構想では、この２つのボタンが専用であるといいなと。キャンセルしたいときにESCキーがあると便利かもしれませんね。</p>
<h3>使えるUSBライブラリは？</h3>
<blockquote class="wp-block-quote">
<p>TinyUSB Mouse and Keyboard library</p>
<cite><a href="https://github.com/cyborg5/TinyUSB_Mouse_and_Keyboard/" target="_blank" rel="noreferrer noopener external" data-wpel-link="external" class="wpel-icon-right">https://github.com/cyborg5/TinyUSB_Mouse_and_Keyboard/<span class="wpel-icon wpel-image wpel-icon-1"></span></a></cite>
</blockquote>
<p>このライブラリは、Chris Youngさんが統合したTinyUSBです。以下で紹介されています。</p>
<blockquote class="wp-block-quote"><p><a href="https://learn.adafruit.com/mouse-and-keyboard-control-using-tinyusb-and-ble/overview" target="_blank" rel="noreferrer noopener external" data-wpel-link="external" class="wpel-icon-right">Mouse and Keyboard Control Using TinyUSB and BLE<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p></blockquote>
<p>examplesを試したのですが、記述がわかりやすいし使いやすそうだったのでこれでやってみることにします。他にも、Seeedの紹介ページにAdafruitのライブラリを使った例がありますが、examplesを見た限りでは使いにくそうでしたのでこちらはパスです。</p>
<blockquote class="wp-block-quote"><p><a href="https://wiki.seeedstudio.com/jp/Seeeduino-XIAO-TinyUSB/" target="_blank" rel="noreferrer noopener external" data-wpel-link="external" class="wpel-icon-right">Seeeduino XIAOをUSBデバイス(TinyUSB)として使う<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p></blockquote>
<h3>ライブラリを入れる</h3>
<p>マスターのZIPをArduinoIDEから入れて、例題をやってみます。</p>
<blockquote class="wp-block-quote">
<p>ZIP : TinyUSB_Mouse_and_Keyboard</p>
<cite><a href="https://github.com/cyborg5/TinyUSB_Mouse_and_Keyboard/archive/master.zip" target="_blank" rel="noreferrer noopener external" data-wpel-link="external" class="wpel-icon-right">URL<span class="wpel-icon wpel-image wpel-icon-1"></span></a></cite>
</blockquote>
<p>Arduino IDEからライブラリをいれるのは、以下からです。</p>
<div class="wp-block-image"><figure class="aligncenter size-large"><noscript><img width="555" height="189" src="/wp-content/uploads/2021/03/image.png" alt="" class="wp-image-10202"></noscript>
<img width="555" height="189" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20555%20189%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/03/image.png" alt="" class="lazyload wp-image-10202"></figure></div>
<p>ZIPのライブラリを入れると、以下のように同じところから見えていると思います。</p>
<div class="wp-block-image"><figure class="aligncenter size-large"><noscript><img width="284" height="477" src="/wp-content/uploads/2021/03/image-1.png" alt="" class="wp-image-10203"></noscript>
<img width="284" height="477" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20284%20477%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/03/image-1.png" alt="" class="lazyload wp-image-10203"></figure></div>
<p>提供されたライブラリは、Macだと以下に入るようです。直接ここに入れてもOKです。</p>
<blockquote class="wp-block-quote"><p>/Users/<strong>USERNAME</strong>/Documents/Arduino/libraries/</p></blockquote>
<p>ちなみに、ArduinoIDE組込（デフォルトの）は以下です。</p>
<blockquote class="wp-block-quote"><p>/Applications/Arduino.app/Contents/Java/libraries/</p></blockquote>
<p>XIAOのボード関連は以下にあります。</p>
<blockquote class="wp-block-quote"><p>/Users/<strong>USERNAME</strong>/Library/Arduino15/packages/Seeeduino/</p></blockquote>
<p>ライブラリとか、PGのディレクトリ以下に格納しておいたほうが後からわかりやすいかもしれません。数年後、また動かそうとすると環境変わっていたりしますからね。その場合は、includeをダブルクオートで囲って記載すればカレントディレクリ（現在のディレクトリのこと）を参照します。</p>
<pre class="wp-block-code"><code>#include "TinyUSB_Mouse_and_Keyboard.h"</code></pre>
<h3>サンプルを動かしてみる</h3>
<p>Macユーザーで、Launchpad のショートカットをF5にしていれば動作します。</p>
<div class="wp-block-image"><figure class="aligncenter size-large"><noscript><img width="668" height="615" src="/wp-content/uploads/2021/03/image-2.png" alt="" class="wp-image-10204"></noscript>
<img width="668" height="615" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20668%20615%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/03/image-2.png" alt="" class="lazyload wp-image-10204"></figure></div>
<pre class="wp-block-code"><code>$ git clone https://github.com/take-i/XIAO-USB-example.git
$ cd XIAO-USB-example/xiao_usb1/
$ open xiao_usb1.ino </code></pre>
<p>XIAOに書き込んで、見てください。ブラウザが起動して JunkHackのページが見えていれば成功です。</p>
<p>サンプル例では、Launchpadが開き、コマンドFで検索、英字モードに切り替えてterminalをタイプしてターミナルを開きます。ターミナルからはURLをオープンしています。macの場合、コマンドの修飾キーは以下のようにKEY_LEFT_GUIが相当します。WindowsだとWINキーです。</p>
<pre class="wp-block-code"><code>  // New terminal windows
  Keyboard.press(KEY_LEFT_GUI);
  Keyboard.write('n');
  Keyboard.releaseAll();</code></pre>
<p>Keyboard.pressは、押しっぱなし状態になるのでKeyboard.releaseAll()でリリースします。delayを入れないと、速すぎて期待する動作にならないので適当に調整します。</p>
<h3>４ボタンの専用キーボードを作る！</h3>
<p>さて、サンプルはうまく動いたので実際にボタンをつけて日常的に使える状態にします。こんなコードにしました。</p>
<pre class="wp-block-code"><code>https:&#47;&#47;github.com/take-i/XIAO-USB-example/tree/master/ss-key</code></pre>
<p>Pin接続は、A7 , A8 , A9 , A10 とGNDの５つです。なお、このPGは同時にボタンを押した時の考慮はしていませんのでご注意を。クリティカルなボタンの場合は、何かキーが押されている場合は違うキーの処理に入らないようにする必要があります。</p>
<h3>筐体に組み込む！</h3>
<p>３Dプリンターとメカニカルスイッチで作るのが面倒だったので、適当なジャンク品のキーボードを漁ってきました。</p>
<div class="wp-block-image"><figure class="aligncenter size-large"><noscript><img width="1024" height="565" src="/wp-content/uploads/2021/03/image-3-1024x565.png" alt="" class="wp-image-10207" srcset="/wp-content/uploads/2021/03/image-3-1024x565.png 1024w, /wp-content/uploads/2021/03/image-3-768x423.png 768w, /wp-content/uploads/2021/03/image-3-984x543.png 984w, /wp-content/uploads/2021/03/image-3.png 1177w" sizes="(max-width: 1024px) 100vw, 1024px"></noscript>
<img width="1024" height="565" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%201024%20565%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/03/image-3-1024x565.png" alt="" class="lazyload wp-image-10207" data-srcset="/wp-content/uploads/2021/03/image-3-1024x565.png 1024w, /wp-content/uploads/2021/03/image-3-768x423.png 768w, /wp-content/uploads/2021/03/image-3-984x543.png 984w, /wp-content/uploads/2021/03/image-3.png 1177w" data-sizes="(max-width: 1024px) 100vw, 1024px"></figure></div>
<p>15年くらい前の無線キーボードです。エンターキーが無くなっているのは、子供に剥がされたからです。それ以来、使っていませんでしたがここに来て約に立ちそうです。</p>
<p>このタイプのキーボードはノートPCと同じで、キーボードの下はフィルムのメンブレンスイッチになっています。これにジャンパー配線するのは厳しいので、端っこのパーツを使うことにしました。</p>
<div class="wp-block-image"><figure class="aligncenter size-large"><noscript><img width="1024" height="722" src="/wp-content/uploads/2021/03/image-4-1024x722.png" alt="" class="wp-image-10208" srcset="/wp-content/uploads/2021/03/image-4-1024x722.png 1024w, /wp-content/uploads/2021/03/image-4-768x542.png 768w, /wp-content/uploads/2021/03/image-4-984x694.png 984w, /wp-content/uploads/2021/03/image-4.png 1116w" sizes="(max-width: 1024px) 100vw, 1024px"></noscript>
<img width="1024" height="722" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%201024%20722%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/03/image-4-1024x722.png" alt="" class="lazyload wp-image-10208" data-srcset="/wp-content/uploads/2021/03/image-4-1024x722.png 1024w, /wp-content/uploads/2021/03/image-4-768x542.png 768w, /wp-content/uploads/2021/03/image-4-984x694.png 984w, /wp-content/uploads/2021/03/image-4.png 1116w" data-sizes="(max-width: 1024px) 100vw, 1024px"></figure></div>
<p>こっちは基盤があって、なんとかなりそうです。キーボード筐体をグラインダーで切断し、左側部分を使うことにしました。こんな感じ。</p>
<div class="wp-block-image"><figure class="aligncenter size-large"><noscript><img width="1024" height="765" src="/wp-content/uploads/2021/03/image-6-1024x765.png" alt="" class="wp-image-10210" srcset="/wp-content/uploads/2021/03/image-6-1024x765.png 1024w, /wp-content/uploads/2021/03/image-6-768x573.png 768w, /wp-content/uploads/2021/03/image-6-984x735.png 984w, /wp-content/uploads/2021/03/image-6.png 1212w" sizes="(max-width: 1024px) 100vw, 1024px"></noscript>
<img width="1024" height="765" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%201024%20765%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/03/image-6-1024x765.png" alt="" class="lazyload wp-image-10210" data-srcset="/wp-content/uploads/2021/03/image-6-1024x765.png 1024w, /wp-content/uploads/2021/03/image-6-768x573.png 768w, /wp-content/uploads/2021/03/image-6-984x735.png 984w, /wp-content/uploads/2021/03/image-6.png 1212w" data-sizes="(max-width: 1024px) 100vw, 1024px"></figure></div>
<p>配線はこんな感じ。XIAOは小さいので、ほんと助かります。</p>
<figure class="wp-block-image size-large"><noscript><img width="839" height="628" src="/wp-content/uploads/2021/03/image-7.png" alt="" class="wp-image-10211" srcset="/wp-content/uploads/2021/03/image-7.png 839w, /wp-content/uploads/2021/03/image-7-768x575.png 768w" sizes="(max-width: 839px) 100vw, 839px"></noscript>
<img width="839" height="628" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20839%20628%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/03/image-7.png" alt="" class="lazyload wp-image-10211" data-srcset="/wp-content/uploads/2021/03/image-7.png 839w, /wp-content/uploads/2021/03/image-7-768x575.png 768w" data-sizes="(max-width: 839px) 100vw, 839px"></figure><figure class="wp-block-image size-large"><noscript><img width="1024" height="688" src="/wp-content/uploads/2021/03/XIAO_Pin.png" alt="" class="wp-image-10213" srcset="/wp-content/uploads/2021/03/XIAO_Pin.png 1024w, /wp-content/uploads/2021/03/XIAO_Pin-768x516.png 768w, /wp-content/uploads/2021/03/XIAO_Pin-984x661.png 984w" sizes="(max-width: 1024px) 100vw, 1024px"></noscript>
<img width="1024" height="688" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%201024%20688%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/03/XIAO_Pin.png" alt="" class="lazyload wp-image-10213" data-srcset="/wp-content/uploads/2021/03/XIAO_Pin.png 1024w, /wp-content/uploads/2021/03/XIAO_Pin-768x516.png 768w, /wp-content/uploads/2021/03/XIAO_Pin-984x661.png 984w" data-sizes="(max-width: 1024px) 100vw, 1024px"></figure><p>黒い線がGNDで、それ以外はボタンからのプリント基板の配線からジャンパー線を出して使っています。</p>
<p>こんな感じで、無線キーボードの上に置いてあります。</p>
<div class="wp-block-image"><figure class="aligncenter size-large"><noscript><img width="1024" height="742" src="/wp-content/uploads/2021/03/image-5-1024x742.png" alt="" class="wp-image-10209" srcset="/wp-content/uploads/2021/03/image-5-1024x742.png 1024w, /wp-content/uploads/2021/03/image-5-768x557.png 768w, /wp-content/uploads/2021/03/image-5-984x713.png 984w, /wp-content/uploads/2021/03/image-5.png 1251w" sizes="(max-width: 1024px) 100vw, 1024px"></noscript>
<img width="1024" height="742" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%201024%20742%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/03/image-5-1024x742.png" alt="" class="lazyload wp-image-10209" data-srcset="/wp-content/uploads/2021/03/image-5-1024x742.png 1024w, /wp-content/uploads/2021/03/image-5-768x557.png 768w, /wp-content/uploads/2021/03/image-5-984x713.png 984w, /wp-content/uploads/2021/03/image-5.png 1251w" data-sizes="(max-width: 1024px) 100vw, 1024px"></figure></div>
<p>右側からESC、スクショ、スクショのコピー、https://www.canva.com/ を開く　の４機能を持たせてあります。今もこの記事を書いているときにこのボタンを使っていますが、かなり便利ですね！　canvaを割り当てているのは、ブログ記事のサムネイルをいつもここで作るからです。今回はこんな感じかな？</p>
<div class="wp-block-image"><figure class="aligncenter size-large"><noscript><img width="800" height="800" src="/wp-content/uploads/2021/03/DIY-USB-KEY.png" alt="" class="wp-image-10212" srcset="/wp-content/uploads/2021/03/DIY-USB-KEY.png 800w, /wp-content/uploads/2021/03/DIY-USB-KEY-768x768.png 768w" sizes="(max-width: 800px) 100vw, 800px"></noscript>
<img width="800" height="800" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20800%20800%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/03/DIY-USB-KEY.png" alt="" class="lazyload wp-image-10212" data-srcset="/wp-content/uploads/2021/03/DIY-USB-KEY.png 800w, /wp-content/uploads/2021/03/DIY-USB-KEY-768x768.png 768w" data-sizes="(max-width: 800px) 100vw, 800px"></figure></div>
<p>Macからはこんな感じで認識されています。</p>
<div class="wp-block-image"><figure class="aligncenter size-large"><noscript><img width="540" height="383" src="/wp-content/uploads/2021/03/image-8.png" alt="" class="wp-image-10214"></noscript>
<img width="540" height="383" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20540%20383%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/03/image-8.png" alt="" class="lazyload wp-image-10214"></figure></div>
<p>キーボードの修飾キーにも、出ていますね</p>
<div class="wp-block-image"><figure class="aligncenter size-large"><noscript><img width="665" height="605" src="/wp-content/uploads/2021/03/image-9.png" alt="" class="wp-image-10215"></noscript>
<img width="665" height="605" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20665%20605%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/03/image-9.png" alt="" class="lazyload wp-image-10215"></figure></div>
<h3>MacのKeycodeを確認</h3>
<p>※追記<br>MacだとどんなKeycodeがタイプされるのか確認しておきたかったので、macosで動作するキーロガーのソースを少し修正してDecで数字を出すように改修したものが以下にあります。</p>
<blockquote class="wp-block-quote">
<p>Mac OS X Keylogger</p>
<cite><a href="https://github.com/take-i/keylogger-macos" target="_blank" rel="noreferrer noopener external" data-wpel-link="external" class="wpel-icon-right">https://github.com/take-i/keylogger-macos<span class="wpel-icon wpel-image wpel-icon-1"></span></a></cite>
</blockquote>
<p>オリジナルは、アトランタのアプリ開発者、ケーシー・スカボローさんが作ったものです。簡単に使い方を記載しておきます。</p>
<pre class="wp-block-code"><code>$ sudo touch /var/log/keystroke.log
$ sudo chmod 644 /var/log/keystroke.log
$ git clone https://github.com/take-i/keylogger-macos.git &amp;&amp; cd keylogger-macos/
$ make
$ sudo ./keylogger</code></pre>
<p>ログは以下のパスに数字で出力されます。</p>
<pre class="wp-block-code"><code>$ tail -f /var/log/keystroke.log</code></pre>
<p>たとえば、Macのキーボード配列の場合、F3キーはMission Controlのキーとなり、Keycodeは、160となります。F3の場合は99です。純正キーボードの場合は、以下のようにキーボード設定に「F1、F2などのキー標準のファンクションキーとして使用」のチェックボックスがでます。社外キーボードの場合、これはでないようです。</p>
<div class="wp-block-image"><figure class="aligncenter size-large"><noscript><img width="668" height="581" src="/wp-content/uploads/2021/03/mac-keyboard.png" alt="" class="wp-image-10252"></noscript>
<img width="668" height="581" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20668%20581%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2021/03/mac-keyboard.png" alt="" class="lazyload wp-image-10252"></figure></div>
<p>DIYキーボードをUSB接続したとき、macのキーボードだと認識させてMission Controlのコードとして認識させるようにする方法を模索したのですが、ちょっとよくわかりませんでした。また、いつか再チャレンジしたときに覚書として書いておきます。</p>
<h3>まとめ</h3>
<p>今回、なんとなくわかった・わからなかったのは以下となります。</p>
<p>・Seeed XIAOは簡単にキーボード・マウスのデバイスが作れる<br>・スイッチOn,OffタイプであればPinの数分、キーは作れる（最大、１１Key）<br>・ライブラリは、TinyUSB Mouse and Keyboard libraryが使いやすかった<br>・KeycodeというのがUSBの仕様で決まっているようです（<a rel="noreferrer noopener external" href="https://www.usb.org/sites/default/files/documents/hut1_12v2.pdf" target="_blank" data-wpel-link="external" class="wpel-icon-right">hut1_12v2.pdf<span class="wpel-icon wpel-image wpel-icon-1"></span></a>）<br>・こっちのUSB仕様書のほうが新しいかな？（<a rel="noreferrer noopener external" href="https://usb.org/sites/default/files/hut1_21_0.pdf" target="_blank" data-wpel-link="external" class="wpel-icon-right">hut1_21_0.pdf<span class="wpel-icon wpel-image wpel-icon-1"></span></a>）<br>・macの場合は、<a rel="noreferrer noopener external" href="https://github.com/caseyscarborough/keylogger" target="_blank" data-wpel-link="external" class="wpel-icon-right">Mac OS X Keylogger<span class="wpel-icon wpel-image wpel-icon-1"></span></a>　を少し手直しすれば番号がわかる<br>・しかし、USBの仕様書とは違う値が帰る（例：F3は、macだと10進で160または99、USB仕様書では、60）<br>・PGの定義は、0xC4で10進だと196<br>・<a rel="noreferrer noopener external" href="http://blog.livedoor.jp/hardyboy/archives/5532602.html" target="_blank" data-wpel-link="external" class="wpel-icon-right">ここ<span class="wpel-icon wpel-image wpel-icon-1"></span></a>によれば、0x88以上は、その値から0x88を引いた数（10進だと136）となるようです。つまり、196-136=60　なるほど！PGの定義からは謎がとけました<br>・しかし、macのkeycodeは違う値を出す。ここがよくわからない<br>・おそらく、macはkeycodeのマッピングテーブルを持っているのだろう<br>・または、キーボード種類によってF3はMission ControlになるようOSがマッピングしているのだろう<br>・keycodeとUSBデバイスのレイアウトの関係はまだ奥が深そうだ<br>・フィルムのメンブレンスイッチって自作できないかな？<br>・アルミテープとラミネートフィルムで作れないかな？</p>
<h3>あとがき</h3>
<p>作ってみて、実際に使ってみたらすごく具合がいいです。USBデバイスをこんなに簡単に作れるとは、驚きですね。いつか、本格的なキーボード作りもしてみたいです。40%キーボードとか小さくて可愛いので使ってみたいんですが、何から手をつけていいのかよくわかりません。あと、薄いMacのキーボードに手が馴染んでしまったのでという理由もあります。</p>
<p>まぁ次キーボード作る機会もあると思うので、その時は自作したいですね。</p>
<h3>著者にメッセージ</h3>
<p>間違いのご指摘など、コメントじゃなくて、個人的にやりとりしたい場合は<a href="https://hack.gpl.jp/mail/" target="_blank" rel="noopener noreferrer" data-wpel-link="internal">こちらから</a>どうぞ。お返事が遅くなるときもありますが、ご了承を。</p>
</div>
<footer class="entry-footer"></footer>
</div></article><article id="post-5929" class="post-5929 post type-post status-publish format-standard hentry category-linux category-osx category-wordpress"><div class="entry-wrapper">
<header class="entry-header"> <span class="entry-format theme-genericon"></span><div class="entry-meta"> <span class="posted-on">投稿日: <a href="/2020/09/07/u-turnnatorhairpinnatcannotbeusedinportforwardroute/" rel="bookmark noopener noreferrer" data-wpel-link="internal"><time class="entry-date published updated" datetime="2020-09-07T17:01:27+09:00">2020年9月7日</time></a> </span><span class="posted-on">更新日:2020年9月7日</span> <span class="categories"> <a href="/category/linux/" rel="category tag noopener noreferrer" data-wpel-link="internal">Linux</a>, <a href="/category/osx/" rel="category tag noopener noreferrer" data-wpel-link="internal">osx</a>, <a href="/category/wordpress/" rel="category tag noopener noreferrer" data-wpel-link="internal">WordPress</a></span>
</div>
<h1 class="entry-title"><a href="/2020/09/07/u-turnnatorhairpinnatcannotbeusedinportforwardroute/" rel="bookmark noopener noreferrer" data-wpel-link="internal">ポートフォワードの経路で、Uターン NATとかヘアピンNATが使えないルータの場合のあれこれ</a></h1></header><div class="entry-content">
<p>先日、以下のように困っていました。</p>
<blockquote class="wp-block-quote"><p><a rel="noreferrer noopener" href="/2020/08/31/termux%e3%81%aeapache2phpmariadb%e3%81%ae%e3%83%81%e3%83%a5%e3%83%bc%e3%83%8b%e3%83%b3%e3%82%b0%e5%89%8d%e3%81%aewordpress%e3%81%ae%e9%80%9f%e5%ba%a6%e3%81%a8%e3%81%8b/" target="_blank" data-wpel-link="internal">Termuxのapache2+php+mariadbのチューニング前のwordpressの速度とか</a><br>：：<br>まぁ、速度的なことより困っていることがあります。それは、ローカルのマシンから、termux上で動作しているwordpressにグローバルIPでアクセスできないことです。この場合、ルータの管理画面にアクセスしちゃうんで、どうしようかなと。こういうのなんていうんでしたっけか？　とにかく、今の拠点のルータ（PR-400KI）は、内側ネットワークから外側のグローバルアドレスにアクセスしたものを、変換（最終的にサーバのプライベートアドレスに変換）してくれないのです。</p></blockquote>
<p>これ、言葉で書くとよくわかりませんが、どんな問題かというと以下のようになります。</p>
<figure class="wp-block-image size-large"><noscript><img src="/wp-content/uploads/2020/09/untitled_diagram_drawio_-_diagrams_net.png?w=607" alt="" class="wp-image-5932"></noscript>
<img src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20210%20140%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2020/09/untitled_diagram_drawio_-_diagrams_net.png?w=607" alt="" class="lazyload wp-image-5932"></figure><p>こういう表現として、<strong><a rel="noreferrer noopener external" href="https://www.google.com/search?q=U%E3%82%BF%E3%83%BC%E3%83%B3NAT+%E3%81%A8%E3%81%AF" target="_blank" data-wpel-link="external" class="wpel-icon-right">UターンNAT<span class="wpel-icon wpel-image wpel-icon-1"></span></a></strong>とか、<strong><a rel="noreferrer noopener external" href="https://www.google.com/search?q=%E3%83%98%E3%82%A2%E3%83%94%E3%83%B3NAT+%E3%81%A8%E3%81%AF" target="_blank" data-wpel-link="external" class="wpel-icon-right">ヘアピンNAT<span class="wpel-icon wpel-image wpel-icon-1"></span></a></strong>とか呼ぶようです。これが出来るルータとできないルータがあり、NTTから借りているルータではできませんでした。いろいろ解決方法があるとは思いますが、一番簡単なのは、クライアントPCをVPNで外部のネットワークからアクセスさせる方法です。つくば大学の<strong><a rel="noreferrer noopener external" href="https://www.vpngate.net/ja/" target="_blank" data-wpel-link="external" class="wpel-icon-right">VPN Gate<span class="wpel-icon wpel-image wpel-icon-1"></span></a></strong>を使えば簡単に解決できますが、インターネット経路となりいまいちです。プレイベート間の通信なのでリバースプロキシを経由する方法が良さそうです。ポート変換がなければ、hosts を書き換えるか、内部DNSを立ち上げればいいのですが、今回の場合は、スマホサーバで提供しているポートは8080です。80と8080を対応付ける必要があり、hosts だけでは無理なので、リバースプロキシを通して、アクセスしてみることにします。</p>
<p>　ブログの更新は、クライアントPCからしか行わないのでこのPC中に設置してみました。もちろんリバースプロキシを分離して、内部DNSを立ち上げれば、理論上は何台でも違うポートとIPを使って好きなドメインでアクセスできます。そのうち、IoTデバイスとか、スマホサーバでクラスタリングとかロードバランサーとか使い出したら内部DNSやリバースプロキシは欲しくなってくるのですが、それはその時にまた考えることにします。</p>
<p>　ということで、クライアントにリバースプロキシを作って、スマホサーバの8080ポートで提供されているWordPress にアクセスしてみることにします。幸い、クライアントはMacなので nginx とかで簡単に作れます。</p>
<h2>Macでリバースプロキシをnginxで作る</h2>
<figure class="wp-block-image size-large"><noscript><img src="/wp-content/uploads/2020/09/untitled_diagram_drawio_-_diagrams_net-1.png?w=607" alt="" class="wp-image-5935"></noscript>
<img src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20210%20140%22%3E%3C/svg%3E" data-src="/wp-content/uploads/2020/09/untitled_diagram_drawio_-_diagrams_net-1.png?w=607" alt="" class="lazyload wp-image-5935"></figure><p>経路のイメージはこんな感じでしょうか。まずは、nginx を入れます。</p>
<pre class="wp-block-code"><code>$ brew install nginx</code></pre>
<p>起動と再起動、停止は以下のようにします。</p>
<pre class="wp-block-code"><code>・起動
$ sudo nginx
・再起動
$ sudo nginx -s reload
・停止
$ sudo nginx -s stop</code></pre>
<p>設定を以下のように書き換えます。server_nameや、proxy_passのIPやポートなど読み替えて書き換えてみてください。</p>
<pre class="wp-block-code"><code>/usr/local/etc/nginx/nginx.conf
::
worker_processes 1;
error_log /usr/local/var/log/nginx/error.log;

events {
  worker_connections  1024;
}

http {
  # This should be in the same directory as this conf
  # e.g. /usr/local/etc/nginx
  include       mime.types;
  default_type  application/octet-stream;
  
  # Note this log_format is named 'main', and is used with the access log below
  log_format   main '$remote_addr - $remote_user &#091;$time_local]  $status '
    '"$request" $body_bytes_sent "$http_referer" '
    '"$http_user_agent" "$http_x_forwarded_for"';

  sendfile        on;
  keepalive_timeout  65;

  # Without this I got this error: 'upstream sent too big header
  # while reading response header from upstream'
  proxy_buffer_size   128k;
  proxy_buffers   4 256k;
  proxy_busy_buffers_size   256k;

  server {
      listen 80;
      server_name jh.gpl.jp;
      proxy_set_header    Host    $host;
      proxy_set_header    X-Real-IP    $remote_addr;
      proxy_set_header    X-Forwarded-Host       $host;
      proxy_set_header    X-Forwarded-Server    $http_host;
      proxy_set_header    X-Forwarded-For    $proxy_add_x_forwarded_for;
      access_log /usr/local/var/log/nginx/reverse-proxy.access.log  main;

      location / {
          proxy_pass         http://192.168.1.38:8080;
      }
  }
}</code></pre>
<p>hosts を書き換えます。</p>
<pre class="wp-block-code"><code>$ cat /etc/hosts
::
127.0.0.1 jh.gpl.jp</code></pre>
<p>nginx を再起動して、ブラウザでドメインに対してアクセスすればOKです。</p>
<p>ちなみに、wp-config.php に以下を追記すると、接続元が192.168.1.26 の時だけWordPress のドメイン名が www.gpl.jp に書き換わります。もちろん、アクセスするクライアントのhosts は書き換える必要があります。</p>
<pre class="wp-block-code"><code>if( $_SERVER&#091;'REMOTE_ADDR'] == '192.168.1.26' ){
    define('WP_HOME','http://www.gpl.jp');
    define('WP_SITEURL','http://www.gpl.jp');
}</code></pre>
<p>ということで、macos で簡単にリバースプロキシーを立ち上げて、内部ネットワークの違うポートで提供されているWordPress にアクセスする方法でした。</p>
<p>Lan内部のスマホからもアクセスしたい場合は、内部DNSをDHCPで配布して、リバースプロキシーと対応付けしないとだめですので、完璧を求めるならそれらが必要です。そのうち、作る機会があれば紹介したいなと思います。</p>
<p></p>
</div>
<footer class="entry-footer"></footer>
</div></article><article id="post-5812" class="post-5812 post type-post status-publish format-standard hentry category-blog category-osx"><div class="entry-wrapper">
<header class="entry-header"> <span class="entry-format theme-genericon"></span><div class="entry-meta"> <span class="posted-on">投稿日: <a href="/2020/09/01/addmacosstaticroute/" rel="bookmark noopener noreferrer" data-wpel-link="internal"><time class="entry-date published updated" datetime="2020-09-01T22:49:00+09:00">2020年9月1日</time></a> </span><span class="posted-on">更新日:2020年9月1日</span> <span class="categories"> <a href="/category/blog/" rel="category tag noopener noreferrer" data-wpel-link="internal">Blog</a>, <a href="/category/osx/" rel="category tag noopener noreferrer" data-wpel-link="internal">osx</a></span>
</div>
<h1 class="entry-title"><a href="/2020/09/01/addmacosstaticroute/" rel="bookmark noopener noreferrer" data-wpel-link="internal">備忘録：macosの静的ルートの追加</a></h1></header><div class="entry-content">
<p>いつも忘れてしまうので、メモしておくことに。Linuxとは、少し違い永続的な設定方法は専用コマンドがあります。networksetup コマンドです。</p>
<h4>・ネットワークデバイス名の一覧</h4>
<pre>$ networksetup -listallnetworkservices
An asterisk (*) denotes that a network service is disabled.
Built-in Serial Port (1)
Ethernet
iPhone USB
Wi-Fi
Bluetooth PAN</pre>
<h4>・ネットワークデバイスの情報</h4>
<pre>$ networksetup -getinfo Ethernet
DHCP Configuration
IP address: 192.168.1.26
Subnet mask: 255.255.255.0
Router: 192.168.1.1
Client ID: 
IPv6: Automatic
IPv6 IP address: none
IPv6 Router: none
Ethernet Address: 90:2b:34:d0:02:80</pre>
<h4>・静的経路の追加と削除</h4>
<p>永続的に追加。この例では、124.41.83.243/32 あては、192.168.1.38 へ送ります。</p>
<pre>$ sudo networksetup -setadditionalroutes Ethernet 124.41.83.243 255.255.255.255 192.168.1.38</pre>
<p>削除。何もパラメータに設定しないと消えます。</p>
<pre>$ sudo networksetup -setadditionalroutes Ethernet
There are no additional IPv4 routes on Ethernet.</pre>
<p>再起動すると消えますが一時的に設定したい場合</p>
<pre>sudo route -n add 124.41.83.243/32 192.168.1.38</pre>
<p>削除は</p>
<pre>sudo route -n delete 124.41.83.243/32</pre>
<h4>・確認</h4>
<pre>$ networksetup -getadditionalroutes Ethernet
124.41.83.243 255.255.255.255 192.168.1.38</pre>
<p>または、</p>
<pre>$ netstat -rn
Routing tables

Internet:
Destination        Gateway            Flags        Refs      Use   Netif Expire
default            192.168.1.1        UGSc           67        5     en0
124.41.83.243      192.168.1.38       UGHS            0        0     en0
::</pre>
</div>
<footer class="entry-footer"></footer>
</div></article><nav class="navigation posts-navigation" role="navigation" aria-label="投稿"><h2 class="screen-reader-text">投稿ナビゲーション</h2>
<div class="nav-links"><div class="nav-previous"><a href="/category/osx/page/2/" data-wpel-link="internal" rel="noopener noreferrer">過去の投稿</a></div></div></nav></main></section></div>
<footer id="colophon" class="site-footer wrap" role="contentinfo"><div class="site-info"> Copyleft - all rights reversed. <span class="sep"> | </span> JunkHack 2011 - 2022 <span class="sep"> | </span> <a href="/about-junkhack/" data-wpel-link="internal" rel="noopener noreferrer">運営者情報<span class="gf"></span></a><span class="sep"> | </span> <a href="/mail/" data-wpel-link="internal" rel="noopener noreferrer">お問い合わせ<span class="gf"></span></a><span class="sep"> | </span> <a href="/privacy/" data-wpel-link="internal" rel="noopener noreferrer">プライバシーポリシー<span class="gf"></span></a>
</div></footer>
</div>
<div id="wpfront-scroll-top-container"> <noscript><img src="/wp-content/plugins/wpfront-scroll-top/images/icons/1.png" alt=""></noscript>
<img class="lazyload" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20210%20140%22%3E%3C/svg%3E" data-src="/wp-content/plugins/wpfront-scroll-top/images/icons/1.png" alt="">
</div> <script type="text/javascript">function wpfront_scroll_top_init() {
                if (typeof wpfront_scroll_top === "function" && typeof jQuery !== "undefined") {
                    wpfront_scroll_top({"scroll_offset":100,"button_width":0,"button_height":0,"button_opacity":0.8,"button_fade_duration":200,"scroll_duration":400,"location":1,"marginX":20,"marginY":20,"hide_iframe":false,"auto_hide":false,"auto_hide_after":2,"button_action":"top","button_action_element_selector":"","button_action_container_selector":"html, body","button_action_element_offset":0});
                } else {
                    setTimeout(wpfront_scroll_top_init, 100);
                }
            }
            wpfront_scroll_top_init();</script> <noscript><style>.lazyload{display:none;}</style></noscript>
<script data-noptimize="1">window.lazySizesConfig=window.lazySizesConfig||{};window.lazySizesConfig.loadMode=1;</script><script async data-noptimize="1" src="/wp-content/plugins/autoptimize/classes/external/js/lazysizes.min.js?ao_version=2.9.5"></script><link rel="stylesheet" id="word_balloon_user_style-css" href="/wp-content/plugins/word-balloon/css/word_balloon_user.min.css?ver=4.18.4" type="text/css" media="all">
<link rel="stylesheet" id="word_balloon_skin_talk-css" href="/wp-content/plugins/word-balloon/css/skin/word_balloon_talk.min.css?ver=4.18.4" type="text/css" media="all">
<link rel="stylesheet" id="word_balloon_inview_style-css" href="/wp-content/plugins/word-balloon/css/word_balloon_inview.min.css?ver=4.18.4" type="text/css" media="all"> <script type="text/javascript" src="/wp-includes/js/dist/vendor/regenerator-runtime.min.js?ver=0.13.7" id="regenerator-runtime-js"></script> <script type="text/javascript" src="/wp-includes/js/dist/vendor/wp-polyfill.min.js?ver=3.15.0" id="wp-polyfill-js"></script> <script type="text/javascript" id="contact-form-7-js-extra">var wpcf7 = {"api":{"root":"\/wp-json\/","namespace":"contact-form-7\/v1"},"cached":"1"};</script> <script type="text/javascript" id="google-invisible-recaptcha-js-before">var renderInvisibleReCaptcha = function() {

    for (var i = 0; i < document.forms.length; ++i) {
        var form = document.forms[i];
        var holder = form.querySelector('.inv-recaptcha-holder');

        if (null === holder) continue;
		holder.innerHTML = '';

         (function(frm){
			var cf7SubmitElm = frm.querySelector('.wpcf7-submit');
            var holderId = grecaptcha.render(holder,{
                'sitekey': '6Lf2z80ZAAAAAJpiFOn2Cix-QJQkaiC7uBA6NCkS', 'size': 'invisible', 'badge' : 'inline',
                'callback' : function (recaptchaToken) {
					if((null !== cf7SubmitElm) && (typeof jQuery != 'undefined')){jQuery(frm).submit();grecaptcha.reset(holderId);return;}
					 HTMLFormElement.prototype.submit.call(frm);
                },
                'expired-callback' : function(){grecaptcha.reset(holderId);}
            });

			if(null !== cf7SubmitElm && (typeof jQuery != 'undefined') ){
				jQuery(cf7SubmitElm).off('click').on('click', function(clickEvt){
					clickEvt.preventDefault();
					grecaptcha.execute(holderId);
				});
			}
			else
			{
				frm.onsubmit = function (evt){evt.preventDefault();grecaptcha.execute(holderId);};
			}


        })(form);
    }
};</script> <script type="text/javascript" async defer src="https://www.google.com/recaptcha/api.js?onload=renderInvisibleReCaptcha&#038;render=explicit&#038;hl=ja" id="google-invisible-recaptcha-js"></script> <script type="text/javascript" src="/wp-content/themes/hew-wpcom/js/contact.js?ver=20210612" id="sendmail-js"></script> <script type="text/javascript" src="https://www.google.com/recaptcha/api.js?render=6Lf2z80ZAAAAAJpiFOn2Cix-QJQkaiC7uBA6NCkS&#038;ver=3.0" id="google-recaptcha-js"></script> <script type="text/javascript" id="wpcf7-recaptcha-js-extra">var wpcf7_recaptcha = {"sitekey":"6Lf2z80ZAAAAAJpiFOn2Cix-QJQkaiC7uBA6NCkS","actions":{"homepage":"homepage","contactform":"contactform"}};</script> <script type="text/javascript" src="https://polyfill.io/v3/polyfill.min.js?features=IntersectionObserver" id="polyfill_IntersectionObserver-js"></script> <script defer src="/wp-content/cache/autoptimize/js/autoptimize_28a76201e8c516d37ffc311e7dc1a025.js"></script>
</body>
<!-- Cache Enabler by KeyCDN @ Sat, 15 Jan 2022 06:49:34 GMT (https-index.html.gz) -->
</html>