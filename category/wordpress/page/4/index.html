<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="profile" href="http://gmpg.org/xfn/11">
<link rel="alternate" type="application/rss+xml" title="JunkHack &raquo; フィード" href="//feed/">
<link rel="alternate" type="application/rss+xml" title="JunkHack &raquo; Yahoo フィード" href="//feed/yahoo/">
<link rel="alternate" type="application/rss+xml" title="JunkHack &raquo; SmartNews フィード" href="//feed/smartnews/">
<link rel="manifest" href="/wp-content/themes/jh-hew/manifest.json">
<link rel="icon alternate" href="/wp-content/themes/jh-hew/img/favicon-48.png" type="image/png">
<link rel="apple-touch-icon" href="/wp-content/themes/jh-hew/img/apple-touch-icon180.png" sizes="180x180">
<meta name="theme-color" content="#FAD641">
<meta name="apple-mobile-web-app-title" content="JunkHack">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="default">

<script type="text/javascript">window.DocsBotAI=window.DocsBotAI||{},DocsBotAI.init=function(c){return new Promise(function(e,o){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src="https://widget.docsbot.ai/chat.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n),t.addEventListener("load",function(){window.DocsBotAI.mount({id:c.id,supportCallback:c.supportCallback,identify:c.identify,options:c.options});var t;t=function(n){return new Promise(function(e){if(document.querySelector(n))return e(document.querySelector(n));var o=new MutationObserver(function(t){document.querySelector(n)&&(e(document.querySelector(n)),o.disconnect())});o.observe(document.body,{childList:!0,subtree:!0})})},t&&t("#docsbotai-root").then(e).catch(o)}),t.addEventListener("error",function(t){o(t.message)})})};</script>
<script type="text/javascript">DocsBotAI.init({id: "HPyLlfLvXH85ROf3H0hM/r4tbR7inmYatdLFK2ZC0"});</script>

<script>if ('serviceWorker' in navigator && 'localhost' !== window.location.hostname) {
	window.addEventListener('load', function () {
		navigator.serviceWorker.register('/sw.js').then(
			function (registration) {
				console.log('ServiceWorker registration successful with scope: ', registration.scope);
			},
			function (err) {
				console.log('ServiceWorker registration failed: ', err);
			}
		);
	});
}</script>


		<link charset="utf-8" rel="stylesheet" type="text/css" href="/wp-content/themes/jh-hew/js/nehan2/nehan2.css">
		<script charset="utf-8" type="text/javascript" src="/wp-content/themes/jh-hew/js/nehan2/subject.js"></script>
		<script charset="utf-8" type="text/javascript" src="/wp-content/themes/jh-hew/js/nehan2/Plugin_haiku.js"></script>
		<script charset="utf-8" type="text/javascript" src="/wp-content/themes/jh-hew/js/nehan2/nehan2.js"></script>
		<script type="text/javascript">

		let pw = window.innerWidth;
		let ph = window.innerHeight;
		let wsize = 0;
		function resizeWindow(event){
				pw = window.innerWidth;
				ph = window.innerHeight;
		}
	
		window.addEventListener("resize", resizeWindow);

			window.onload = function(){
			var createPageFrame = function(body){
				var node = document.createElement("div");
				var style = node.style;
				node.innerHTML = body;
				node.className = "page-frame";
				return node;
			};

			var outputAllPages = function(dstId, provider){
				var pageNo = 0;
				var dstNode = document.getElementById(dstId);

				// add <subject> element to parser for easy markup(see subject.js)
				Nehan.Plugin.defineSubjectElement(provider);
				Nehan.Plugin_haiku.defineHaikuElement(provider);

				while(provider.hasNextPage()){
					var pageData = provider.outputPage(pageNo++);
					var pageFrame = createPageFrame(pageData.html);
					dstNode.appendChild(pageFrame);
				}
			};
			
			var text = document.getElementById("src-text").innerHTML;
		// output default page1.
		if(pw < 480){
			// output vertical post.27moji
			outputAllPages("result-vertical", new Nehan.PageProvider({
				direction:"vertical",
				width:310,
				height:440,
				fontSize:16
			}, text));
		}
		if(pw > 479 && pw < 600){
			// output vertical post.27moji
			outputAllPages("result-vertical", new Nehan.PageProvider({
				direction:"vertical",
				width:420,
				height:440,
				fontSize:16
			}, text));
		}
		if(pw > 599 && pw < 744){
			// output vertical post.27moji
			outputAllPages("result-vertical", new Nehan.PageProvider({
				direction:"vertical",
				width:540,
				height:440,
				fontSize:16
			}, text));
		}
		if(pw > 743 && pw < 889){
			// output vertical post.27moji
			outputAllPages("result-vertical", new Nehan.PageProvider({
				direction:"vertical",
				width:680,
				height:440,
				fontSize:16
			}, text));
		}
		if(pw > 888){
			// output vertical post.27moji
			outputAllPages("result-vertical", new Nehan.PageProvider({
				direction:"vertical",
				width:890,
				height:440,
				fontSize:16
			}, text));
		}
		
		document.getElementById("progress").style.display = "none";
		};
		</script>
		
<title>WordPress &#8211; ページ 4 &#8211; JunkHack</title>
<meta name="robots" content="max-image-preview:large">

                                    
            <link rel="dns-prefetch" href="//fonts.googleapis.com">
<link rel="alternate" type="application/rss+xml" title="JunkHack &raquo; WordPress カテゴリーのフィード" href="/category/wordpress/feed/">
<script type="text/javascript">
/* <![CDATA[ */
window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/14.0.0\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/14.0.0\/svg\/","svgExt":".svg","source":{"concatemoji":"\/wp-includes\/js\/wp-emoji-release.min.js?ver=6.4.3"}};
/*! This file is auto-generated */
!function(i,n){var o,s,e;function c(e){try{var t={supportTests:e,timestamp:(new Date).valueOf()};sessionStorage.setItem(o,JSON.stringify(t))}catch(e){}}function p(e,t,n){e.clearRect(0,0,e.canvas.width,e.canvas.height),e.fillText(t,0,0);var t=new Uint32Array(e.getImageData(0,0,e.canvas.width,e.canvas.height).data),r=(e.clearRect(0,0,e.canvas.width,e.canvas.height),e.fillText(n,0,0),new Uint32Array(e.getImageData(0,0,e.canvas.width,e.canvas.height).data));return t.every(function(e,t){return e===r[t]})}function u(e,t,n){switch(t){case"flag":return n(e,"🏳️‍⚧️","🏳️​⚧️")?!1:!n(e,"🇺🇳","🇺​🇳")&&!n(e,"🏴󠁧󠁢󠁥󠁮󠁧󠁿","🏴​󠁧​󠁢​󠁥​󠁮​󠁧​󠁿");case"emoji":return!n(e,"🫱🏻‍🫲🏿","🫱🏻​🫲🏿")}return!1}function f(e,t,n){var r="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?new OffscreenCanvas(300,150):i.createElement("canvas"),a=r.getContext("2d",{willReadFrequently:!0}),o=(a.textBaseline="top",a.font="600 32px Arial",{});return e.forEach(function(e){o[e]=t(a,e,n)}),o}function t(e){var t=i.createElement("script");t.src=e,t.defer=!0,i.head.appendChild(t)}"undefined"!=typeof Promise&&(o="wpEmojiSettingsSupports",s=["flag","emoji"],n.supports={everything:!0,everythingExceptFlag:!0},e=new Promise(function(e){i.addEventListener("DOMContentLoaded",e,{once:!0})}),new Promise(function(t){var n=function(){try{var e=JSON.parse(sessionStorage.getItem(o));if("object"==typeof e&&"number"==typeof e.timestamp&&(new Date).valueOf()<e.timestamp+604800&&"object"==typeof e.supportTests)return e.supportTests}catch(e){}return null}();if(!n){if("undefined"!=typeof Worker&&"undefined"!=typeof OffscreenCanvas&&"undefined"!=typeof URL&&URL.createObjectURL&&"undefined"!=typeof Blob)try{var e="postMessage("+f.toString()+"("+[JSON.stringify(s),u.toString(),p.toString()].join(",")+"));",r=new Blob([e],{type:"text/javascript"}),a=new Worker(URL.createObjectURL(r),{name:"wpTestEmojiSupports"});return void(a.onmessage=function(e){c(n=e.data),a.terminate(),t(n)})}catch(e){}c(n=f(s,u,p))}t(n)}).then(function(e){for(var t in e)n.supports[t]=e[t],n.supports.everything=n.supports.everything&&n.supports[t],"flag"!==t&&(n.supports.everythingExceptFlag=n.supports.everythingExceptFlag&&n.supports[t]);n.supports.everythingExceptFlag=n.supports.everythingExceptFlag&&!n.supports.flag,n.DOMReady=!1,n.readyCallback=function(){n.DOMReady=!0}}).then(function(){return e}).then(function(){var e;n.supports.everything||(n.readyCallback(),(e=n.source||{}).concatemoji?t(e.concatemoji):e.wpemoji&&e.twemoji&&(t(e.twemoji),t(e.wpemoji)))}))}((window,document),window._wpemojiSettings);
/* ]]> */
</script>
<style id="wp-emoji-styles-inline-css" type="text/css">img.wp-smiley, img.emoji {
		display: inline !important;
		border: none !important;
		box-shadow: none !important;
		height: 1em !important;
		width: 1em !important;
		margin: 0 0.07em !important;
		vertical-align: -0.1em !important;
		background: none !important;
		padding: 0 !important;
	}</style>
<link rel="stylesheet" id="wp-block-library-css" href="/wp-includes/css/dist/block-library/style.min.css?ver=6.4.3" type="text/css" media="all">
<style id="classic-theme-styles-inline-css" type="text/css">/*! This file is auto-generated */
.wp-block-button__link{color:#fff;background-color:#32373c;border-radius:9999px;box-shadow:none;text-decoration:none;padding:calc(.667em + 2px) calc(1.333em + 2px);font-size:1.125em}.wp-block-file__button{background:#32373c;color:#fff;text-decoration:none}</style>
<style id="global-styles-inline-css" type="text/css">body{--wp--preset--color--black: #000000;--wp--preset--color--cyan-bluish-gray: #abb8c3;--wp--preset--color--white: #ffffff;--wp--preset--color--pale-pink: #f78da7;--wp--preset--color--vivid-red: #cf2e2e;--wp--preset--color--luminous-vivid-orange: #ff6900;--wp--preset--color--luminous-vivid-amber: #fcb900;--wp--preset--color--light-green-cyan: #7bdcb5;--wp--preset--color--vivid-green-cyan: #00d084;--wp--preset--color--pale-cyan-blue: #8ed1fc;--wp--preset--color--vivid-cyan-blue: #0693e3;--wp--preset--color--vivid-purple: #9b51e0;--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple: linear-gradient(135deg,rgba(6,147,227,1) 0%,rgb(155,81,224) 100%);--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan: linear-gradient(135deg,rgb(122,220,180) 0%,rgb(0,208,130) 100%);--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange: linear-gradient(135deg,rgba(252,185,0,1) 0%,rgba(255,105,0,1) 100%);--wp--preset--gradient--luminous-vivid-orange-to-vivid-red: linear-gradient(135deg,rgba(255,105,0,1) 0%,rgb(207,46,46) 100%);--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray: linear-gradient(135deg,rgb(238,238,238) 0%,rgb(169,184,195) 100%);--wp--preset--gradient--cool-to-warm-spectrum: linear-gradient(135deg,rgb(74,234,220) 0%,rgb(151,120,209) 20%,rgb(207,42,186) 40%,rgb(238,44,130) 60%,rgb(251,105,98) 80%,rgb(254,248,76) 100%);--wp--preset--gradient--blush-light-purple: linear-gradient(135deg,rgb(255,206,236) 0%,rgb(152,150,240) 100%);--wp--preset--gradient--blush-bordeaux: linear-gradient(135deg,rgb(254,205,165) 0%,rgb(254,45,45) 50%,rgb(107,0,62) 100%);--wp--preset--gradient--luminous-dusk: linear-gradient(135deg,rgb(255,203,112) 0%,rgb(199,81,192) 50%,rgb(65,88,208) 100%);--wp--preset--gradient--pale-ocean: linear-gradient(135deg,rgb(255,245,203) 0%,rgb(182,227,212) 50%,rgb(51,167,181) 100%);--wp--preset--gradient--electric-grass: linear-gradient(135deg,rgb(202,248,128) 0%,rgb(113,206,126) 100%);--wp--preset--gradient--midnight: linear-gradient(135deg,rgb(2,3,129) 0%,rgb(40,116,252) 100%);--wp--preset--font-size--small: 13px;--wp--preset--font-size--medium: 20px;--wp--preset--font-size--large: 36px;--wp--preset--font-size--x-large: 42px;--wp--preset--spacing--20: 0.44rem;--wp--preset--spacing--30: 0.67rem;--wp--preset--spacing--40: 1rem;--wp--preset--spacing--50: 1.5rem;--wp--preset--spacing--60: 2.25rem;--wp--preset--spacing--70: 3.38rem;--wp--preset--spacing--80: 5.06rem;--wp--preset--shadow--natural: 6px 6px 9px rgba(0, 0, 0, 0.2);--wp--preset--shadow--deep: 12px 12px 50px rgba(0, 0, 0, 0.4);--wp--preset--shadow--sharp: 6px 6px 0px rgba(0, 0, 0, 0.2);--wp--preset--shadow--outlined: 6px 6px 0px -3px rgba(255, 255, 255, 1), 6px 6px rgba(0, 0, 0, 1);--wp--preset--shadow--crisp: 6px 6px 0px rgba(0, 0, 0, 1);}:where(.is-layout-flex){gap: 0.5em;}:where(.is-layout-grid){gap: 0.5em;}body .is-layout-flow > .alignleft{float: left;margin-inline-start: 0;margin-inline-end: 2em;}body .is-layout-flow > .alignright{float: right;margin-inline-start: 2em;margin-inline-end: 0;}body .is-layout-flow > .aligncenter{margin-left: auto !important;margin-right: auto !important;}body .is-layout-constrained > .alignleft{float: left;margin-inline-start: 0;margin-inline-end: 2em;}body .is-layout-constrained > .alignright{float: right;margin-inline-start: 2em;margin-inline-end: 0;}body .is-layout-constrained > .aligncenter{margin-left: auto !important;margin-right: auto !important;}body .is-layout-constrained > :where(:not(.alignleft):not(.alignright):not(.alignfull)){max-width: var(--wp--style--global--content-size);margin-left: auto !important;margin-right: auto !important;}body .is-layout-constrained > .alignwide{max-width: var(--wp--style--global--wide-size);}body .is-layout-flex{display: flex;}body .is-layout-flex{flex-wrap: wrap;align-items: center;}body .is-layout-flex > *{margin: 0;}body .is-layout-grid{display: grid;}body .is-layout-grid > *{margin: 0;}:where(.wp-block-columns.is-layout-flex){gap: 2em;}:where(.wp-block-columns.is-layout-grid){gap: 2em;}:where(.wp-block-post-template.is-layout-flex){gap: 1.25em;}:where(.wp-block-post-template.is-layout-grid){gap: 1.25em;}.has-black-color{color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-color{color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-color{color: var(--wp--preset--color--white) !important;}.has-pale-pink-color{color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-color{color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-color{color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-color{color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-color{color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-color{color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-color{color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-color{color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-color{color: var(--wp--preset--color--vivid-purple) !important;}.has-black-background-color{background-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-background-color{background-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-background-color{background-color: var(--wp--preset--color--white) !important;}.has-pale-pink-background-color{background-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-background-color{background-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-background-color{background-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-background-color{background-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-background-color{background-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-background-color{background-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-background-color{background-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-background-color{background-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-background-color{background-color: var(--wp--preset--color--vivid-purple) !important;}.has-black-border-color{border-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-border-color{border-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-border-color{border-color: var(--wp--preset--color--white) !important;}.has-pale-pink-border-color{border-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-border-color{border-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-border-color{border-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-border-color{border-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-border-color{border-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-border-color{border-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-border-color{border-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-border-color{border-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-border-color{border-color: var(--wp--preset--color--vivid-purple) !important;}.has-vivid-cyan-blue-to-vivid-purple-gradient-background{background: var(--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple) !important;}.has-light-green-cyan-to-vivid-green-cyan-gradient-background{background: var(--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan) !important;}.has-luminous-vivid-amber-to-luminous-vivid-orange-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange) !important;}.has-luminous-vivid-orange-to-vivid-red-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-orange-to-vivid-red) !important;}.has-very-light-gray-to-cyan-bluish-gray-gradient-background{background: var(--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray) !important;}.has-cool-to-warm-spectrum-gradient-background{background: var(--wp--preset--gradient--cool-to-warm-spectrum) !important;}.has-blush-light-purple-gradient-background{background: var(--wp--preset--gradient--blush-light-purple) !important;}.has-blush-bordeaux-gradient-background{background: var(--wp--preset--gradient--blush-bordeaux) !important;}.has-luminous-dusk-gradient-background{background: var(--wp--preset--gradient--luminous-dusk) !important;}.has-pale-ocean-gradient-background{background: var(--wp--preset--gradient--pale-ocean) !important;}.has-electric-grass-gradient-background{background: var(--wp--preset--gradient--electric-grass) !important;}.has-midnight-gradient-background{background: var(--wp--preset--gradient--midnight) !important;}.has-small-font-size{font-size: var(--wp--preset--font-size--small) !important;}.has-medium-font-size{font-size: var(--wp--preset--font-size--medium) !important;}.has-large-font-size{font-size: var(--wp--preset--font-size--large) !important;}.has-x-large-font-size{font-size: var(--wp--preset--font-size--x-large) !important;}
.wp-block-navigation a:where(:not(.wp-element-button)){color: inherit;}
:where(.wp-block-post-template.is-layout-flex){gap: 1.25em;}:where(.wp-block-post-template.is-layout-grid){gap: 1.25em;}
:where(.wp-block-columns.is-layout-flex){gap: 2em;}:where(.wp-block-columns.is-layout-grid){gap: 2em;}
.wp-block-pullquote{font-size: 1.5em;line-height: 1.6;}</style>
<link rel="stylesheet" id="wp-ai-content-generator-css" href="/wp-content/plugins/gpt3-ai-content-generator/public/css/wp-ai-content-generator-public.css?ver=1.8.30" type="text/css" media="all">
<link rel="stylesheet" id="wpel-style-css" href="/wp-content/plugins/wp-external-links/public/css/wpel.css?ver=2.59" type="text/css" media="all">
<link rel="stylesheet" id="mouse-css" href="/wp-content/plugins/wp-keypopup-algolia/mouse.css?ver=6.4.3" type="text/css" media="all">
<link rel="stylesheet" id="related-frontend-css-css" href="/wp-content/plugins/ccrw_related/css/frontend-style.css?ver=0.1.0" type="text/css" media="all">
<link rel="stylesheet" id="uagb-block-css-css" href="/wp-content/uploads/uag-plugin/custom-style-blocks.css?ver=2.12.2" type="text/css" media="all">
<link rel="stylesheet" id="zip-ai-sidebar-css" href="/wp-content/plugins/ultimate-addons-for-gutenberg/lib/zip-ai/sidebar/build/sidebar-app.css?ver=1.1.0" type="text/css" media="all">
<link rel="stylesheet" id="zip-ai-sidebar-google-fonts-css" href="https://fonts.googleapis.com/css2?family=Inter%3Awght%40400%3B500%3B600%3B700&#038;display=swap&#038;ver=1.1.0" type="text/css" media="all">
<link rel="stylesheet" id="JankHack-Hew-fonts-css" href="https://fonts.googleapis.com/css?family=Open+Sans%3A400%2C600%2C700%2C400italic%2C600italic%2C700italic%7CNoto+Serif%3A400%2C700%2C400italic%2C700italic&#038;subset=latin" type="text/css" media="all">
<link rel="stylesheet" id="genericons-css" href="/wp-content/themes/jh-hew/genericons/genericons.css?ver=3.4.1" type="text/css" media="all">
<link rel="stylesheet" id="JankHack-Hew-style-css" href="/wp-content/themes/jh-hew/style.css?ver=6.4.3" type="text/css" media="all">
<link rel="stylesheet" id="algolia-autocomplete-css" href="/wp-content/plugins/wp-search-with-algolia/css/algolia-autocomplete.css?ver=2.7.0" type="text/css" media="all">
<script type="text/javascript" src="/wp-content/plugins/jquery-manager/assets/js/jquery-3.5.1.min.js" id="jquery-core-js"></script>
<script type="text/javascript" src="/wp-content/plugins/jquery-manager/assets/js/jquery-migrate-3.3.0.min.js" id="jquery-migrate-js"></script>
<script type="text/javascript" src="/wp-content/plugins/gpt3-ai-content-generator/public/js/wp-ai-content-generator-public.js?ver=1.8.30" id="wp-ai-content-generator-js"></script>
<script type="text/javascript" src="/wp-content/plugins/wp-keypopup-algolia/mousetrap.min.js?ver=6.4.3" id="mice-js"></script>
<script type="text/javascript" id="mouse-js-extra">
/* <![CDATA[ */
var mouse = {"home":"\/","list":"\/list\/","search":"\/s\/"};
/* ]]> */
</script>
<script type="text/javascript" src="/wp-content/plugins/wp-keypopup-algolia/mouse.js?ver=6.4.3" id="mouse-js"></script>
<link rel="https://api.w.org/" href="/wp-json/">
<link rel="alternate" type="application/json" href="/wp-json/wp/v2/categories/83">
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="/xmlrpc.php?rsd">
<meta name="generator" content="WordPress 6.4.3">
		<style>.algolia-search-highlight {
				background-color: #fffbcc;
				border-radius: 2px;
				font-style: normal;
			}</style>
		<style type="text/css">.broken_link, a.broken_link {
	text-decoration: line-through;
}</style>
<style id="uagb-style-conditional-extension">@media (min-width: 1025px){body .uag-hide-desktop.uagb-google-map__wrap,body .uag-hide-desktop{display:none !important}}@media (min-width: 768px) and (max-width: 1024px){body .uag-hide-tab.uagb-google-map__wrap,body .uag-hide-tab{display:none !important}}@media (max-width: 767px){body .uag-hide-mob.uagb-google-map__wrap,body .uag-hide-mob{display:none !important}}</style>
<style id="uagb-style-frontend-83">.uagb-block-188fea4d .uagb-search-form__container .uagb-search-submit{width: 60px;padding: 0;border: 0;}.uagb-block-188fea4d .uagb-search-form__container .uagb-search-form__input::placeholder{opacity: 0.6;}.uagb-block-188fea4d .uagb-search-form__container .uagb-search-submit .uagb-wp-search-button-icon-wrap svg{width: 17px;height: 17px;font-size: 17px;}.uagb-block-188fea4d .uagb-search-form__container .uagb-search-submit .uagb-wp-search-button-text{color: #313131;}.uagb-block-188fea4d.uagb-layout-input .uagb-wp-search-icon-wrap svg{width: 17px;height: 17px;font-size: 17px;}.uagb-block-188fea4d .uagb-search-form__container .uagb-search-form__input{background-color: #ECEEEF;border: 0;border-radius: 0px;margin: 0;outline: unset;padding-top: 15px;padding-bottom: 15px;padding-right: 13px;padding-left: 13px;}.uagb-block-188fea4d .uagb-search-wrapper .uagb-search-form__container{border-top-left-radius: 3px;border-top-right-radius: 3px;border-bottom-left-radius: 3px;border-bottom-right-radius: 3px;border-style: none;outline: unset;box-shadow: 0px 0px    ;transition: all .5s;width: 100%;}.uagb-block-188fea4d .uagb-search-form__container .uagb-wp-search-icon-wrap{background-color: #ECEEEF;padding-top: 15px;padding-bottom: 15px;padding-left: 13px;}.uagb-block-188fea4d.uagb-layout-input-button .uagb-search-wrapper .uagb-search-form__container .uagb-search-submit{background-color: #9d9d9d;}@media only screen and (max-width: 976px) {.uagb-block-188fea4d .uagb-search-wrapper .uagb-search-form__container .uagb-search-form__input{padding-top: 15px;padding-bottom: 15px;padding-right: 13px;padding-left: 13px;}.uagb-block-188fea4d .uagb-search-form__container .uagb-wp-search-icon-wrap{padding-top: 15px;padding-bottom: 15px;padding-left: 13px;}}@media only screen and (max-width: 767px) {.uagb-block-188fea4d .uagb-search-wrapper .uagb-search-form__container .uagb-search-form__input{padding-top: 15px;padding-bottom: 15px;padding-right: 13px;padding-left: 13px;}.uagb-block-188fea4d .uagb-search-form__container .uagb-wp-search-icon-wrap{padding-top: 15px;padding-bottom: 15px;padding-left: 13px;}}</style>
<link rel="icon" href="/wp-content/uploads/2020/09/logo.png" sizes="32x32">
<link rel="icon" href="/wp-content/uploads/2020/09/logo.png" sizes="192x192">
<link rel="apple-touch-icon" href="/wp-content/uploads/2020/09/logo.png">
<meta name="msapplication-TileImage" content="/wp-content/uploads/2020/09/logo.png">
</head>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-161935417-3"></script>
<script>window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-161935417-3');</script>
<body class="archive paged category category-wordpress category-83 wp-custom-logo paged-4 category-paged-4 has-sidebar has-header-image">
<div id="page" class="hfeed site">
		<div id="widgets-wrapper" class="hide">
		
<div id="secondary" class="wrap top-widget-area" role="complementary">
		<div id="sidebar-1" class="widget-area" role="complementary">
		<aside id="block-9" class="widget widget_block"><p><script async="" src="https://cse.google.com/cse.js?cx=df8210082ba786774"></script></p>
<div class="gcse-search"></div></aside><aside id="block-10" class="widget widget_block widget_media_image"><div class="wp-block-image">
<figure class="aligncenter size-full"><img fetchpriority="high" decoding="async" width="748" height="99" src="/wp-content/uploads/2023/07/a-seach.png" alt="" class="wp-image-11535"></figure>
</div></aside>	</div>
<!-- #first .widget-area -->
	
	
	
	</div>
<!-- #secondary -->
	</div>
	
	<a class="skip-link screen-reader-text" href="#content">コンテンツへ移動</a>

	<header id="masthead" class="site-header" role="banner">
					<a class="site-logo" href="/" title="JunkHack" rel="home noopener noreferrer" data-wpel-link="internal">
				<img src="https://secure.gravatar.com/avatar/997681319c3cbb0bdcca95770d5edaa6/?s=80&#038;d=mm" width="80" height="80" alt="" class="no-grav header-image">
			</a>
		
		<div class="site-branding">
			<h1 class="site-title"><a href="/" rel="home noopener noreferrer" data-wpel-link="internal">JunkHack</a></h1>
			<h2 class="site-description">アリエクでポチった JUNKHACK</h2>
		</div>

					<nav id="site-navigation" class="main-navigation" role="navigation">
				<button class="menu-toggle toggle-button"><span class="screen-reader-text">メインメニュー</span></button>
				<div class="menu-new-menu-container"><ul id="menu-new-menu" class="menu">
<li id="menu-item-10686" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-10686"><a href="/list/" data-wpel-link="internal" rel="noopener noreferrer">List</a></li>
<li id="menu-item-11016" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-11016"><a href="/mail/" data-wpel-link="internal" rel="noopener noreferrer">CONTACT</a></li>
<li id="menu-item-10671" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-10671"><a href="https://jh.gpl.jp/" data-wpel-link="external" target="_blank" rel="external noopener noreferrer" class="wpel-icon-right">Mirror Netlify<span class="wpel-icon wpel-image wpel-icon-1"></span></a></li>
</ul></div>			</nav><!-- #site-navigation -->
		
		
				<div class="toggle-wrapper">
			<a href="#" class="widgets-toggle toggle-button" title="ウィジェット">
				<span class="screen-reader-text">ウィジェット</span>
			</a>
		</div>
		
	</header><!-- #masthead -->
	
	<div id="content" class="site-content">
	<section id="primary" class="content-area">
		<main id="main" class="site-main" role="main">

		
			<header class="page-header">
				<h1 class="page-title">カテゴリー: <span>WordPress</span>
</h1>			</header><!-- .page-header -->

						
				
<article id="post-9841" class="post-9841 post type-post status-publish format-standard has-post-thumbnail hentry category-android category-linux category-wordpress">
	<div class="entry-wrapper">



		<header class="entry-header">
					<span class="entry-format theme-genericon"></span>
	
			<div class="entry-meta">
				<span class="posted-on">投稿日: <a href="/2020/10/26/openwrt-dnsmasq/" rel="bookmark noopener noreferrer" data-wpel-link="internal"><time class="entry-date published" datetime="2020-10-26T04:57:02+09:00">2020年10月26日</time><time class="updated" datetime="2020-10-26T04:57:07+09:00">2020年10月26日</time></a> </span><span class="posted-on">更新日:2020年10月26日</span> <span class="categories">  <a href="/category/android/" rel="category tag noopener noreferrer" data-wpel-link="internal">Android</a>, <a href="/category/linux/" rel="category tag noopener noreferrer" data-wpel-link="internal">Linux</a>, <a href="/category/wordpress/" rel="category tag noopener noreferrer" data-wpel-link="internal">WordPress</a></span>			</div>
<!-- .entry-meta -->

							<h1 class="entry-title"><a href="/2020/10/26/openwrt-dnsmasq/" rel="bookmark noopener noreferrer" data-wpel-link="internal">メルカリ８８０円のルータに組み込みLINUXのOpenWrtで内部DNSを動かす！</a></h1>					</header><!-- .entry-header -->

		<div class="entry-content">
			
<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex w_b_div"><div class="w_b_wrap w_b_wrap_talk w_b_L w_b_flex w_b_div">
<div class="w_b_ava_box w_b_relative w_b_ava_L w_b_col w_b_f_n w_b_div">
<div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_L w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div">
<img decoding="async" src="/wp-content/uploads/2020/09/abata.png" width="96" height="96" alt="じゃんくはっく" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img">
</div></div></div>
<div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">じゃんくはっく</div>
</div>
<div class="w_b_bal_box w_b_bal_L w_b_relative w_b_direction_L w_b_w100 w_b_div">
<div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewbox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "></polygon></svg></div>
<div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div"><div class="w_b_bal_wrap w_b_bal_wrap_L w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_L w_b_shadow_L w_b_ta_L w_b_div"><div class="w_b_quote w_b_div">
<p>やっとPixel3に引っ越しできたよ！</p>
</div></div></div></div>
</div>
</div></div></div>



<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex w_b_mla w_b_jc_fe w_b_div"><div class="w_b_wrap w_b_wrap_talk w_b_R w_b_flex w_b_jc_fe w_b_div">
<div class="w_b_bal_box w_b_bal_R w_b_relative w_b_direction_R w_b_w100 w_b_div">
<div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewbox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "></polygon></svg></div>
<div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div"><div class="w_b_bal_wrap w_b_bal_wrap_R w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_R w_b_shadow_R w_b_ta_L w_b_div"><div class="w_b_quote w_b_div">
<p>おめでとー！　何をそんなに苦労してたの？</p>
</div></div></div></div>
</div>
<div class="w_b_ava_box w_b_relative w_b_ava_R w_b_col w_b_f_n w_b_div">
<div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_R w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div">
<img decoding="async" src="/wp-content/uploads/2020/09/pi-.png" width="96" height="96" alt="ぴー" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img">
</div></div></div>
<div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">ぴー</div>
</div>
</div></div></div>



<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex w_b_div"><div class="w_b_wrap w_b_wrap_talk w_b_L w_b_flex w_b_div">
<div class="w_b_ava_box w_b_relative w_b_ava_L w_b_col w_b_f_n w_b_div">
<div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_L w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div">
<img decoding="async" src="/wp-content/uploads/2020/09/abata.png" width="96" height="96" alt="じゃんくはっく" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img">
</div></div></div>
<div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">じゃんくはっく</div>
</div>
<div class="w_b_bal_box w_b_bal_L w_b_relative w_b_direction_L w_b_w100 w_b_div">
<div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewbox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "></polygon></svg></div>
<div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div"><div class="w_b_bal_wrap w_b_bal_wrap_L w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_L w_b_shadow_L w_b_ta_L w_b_div"><div class="w_b_quote w_b_div">
<p>いやー、ローカルにDNSを立ち上げようとあれこれとね！</p>
</div></div></div></div>
</div>
</div></div></div>



<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex w_b_mla w_b_jc_fe w_b_div"><div class="w_b_wrap w_b_wrap_talk w_b_R w_b_flex w_b_jc_fe w_b_div">
<div class="w_b_bal_box w_b_bal_R w_b_relative w_b_direction_R w_b_w100 w_b_div">
<div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewbox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "></polygon></svg></div>
<div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div"><div class="w_b_bal_wrap w_b_bal_wrap_R w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_R w_b_shadow_R w_b_ta_L w_b_div"><div class="w_b_quote w_b_div">
<p>結局、どうやってローカルDNS立ち上げたの？</p>
</div></div></div></div>
</div>
<div class="w_b_ava_box w_b_relative w_b_ava_R w_b_col w_b_f_n w_b_div">
<div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_R w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div">
<img decoding="async" src="/wp-content/uploads/2020/09/pi-.png" width="96" height="96" alt="ぴー" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img">
</div></div></div>
<div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">ぴー</div>
</div>
</div></div></div>



<p>ということで、今見ているこのWordPressブログはUMIDIGI F2から Google Pixel3のスマホに引っ越ししました！</p>



<p>　一番嬉しいのは、ローカルからブログを書く時、もうVPNを繋げて書かなくてもよくなった点ですね！　今まではUターンNATの問題で内部ネットワークからはこのブログにアクセスできなかったのです。ブログ記事を書く時もVPN経由で外からアクセスしていたので、記事を書くのが少し面倒だったんです。今回は、Pixel3に引っ越ししてローカルDNSを立ち上げた事を記事にしようかなと思います。</p>



<h3 class="wp-block-heading">ローカルDNSを立ち上げろ！</h3>



<p>なぜローカルDNSを立ち上げる必要があったかは、このあたりを見ていただくとその経緯がわかるかなと思います。</p>



<blockquote class="wp-block-quote">
<p>ポートフォワードの経路で、Uターン NATとかヘアピンNATが使えないルータの場合のあれこれ</p>
<cite>Link</cite>
</blockquote>



<p>ローカルにDNSを立ち上げれば、UターンNATがダメなルータを使っていても迂回した経路が作れます。そして、Termuxの1024以下ポートが使えない問題は、root化した Pixel3を使って回避しました。つまり、今動いているNGINXは、port80とport443で動作しています。こんな感じ！</p>



<pre class="wp-block-code"><code># ps axu | grep nginx
root     12762  0.0  0.0 10868580 2144 ?       Ss   02:14   0:00 nginx: master process nginx
u0_a218  12763  0.0  0.1 10869584 3912 ?       S    02:14   0:00 nginx: worker process
::
u0_a218  12771  0.0  0.0 10868708 2312 ?       S    02:14   0:00 nginx: cache manager process

# netstat -an | egrep ':80 |:443 ' | grep LISTEN
tcp        0      0 0.0.0.0:80              0.0.0.0:*               LISTEN     
tcp        0      0 0.0.0.0:443             0.0.0.0:*               LISTEN  </code></pre>



<p>当初は、このroot化したPixel3にDNSを起動させる予定だったんですが、思いの外うまく動かなくて結局、安いルータをメルカリでゲットしました。なんとお値段、送料込み８８０円！</p>



<div class="wp-block-image"><figure class="aligncenter size-large"><img loading="lazy" decoding="async" width="640" height="480" src="/wp-content/uploads/2020/10/12dh9400001w5a9w.jpg" alt="" class="wp-image-9846"><figcaption>I-O DATA WN-AC1167GR</figcaption></figure></div>



<blockquote class="wp-block-quote">
<p>11ac対応867Mbps（規格値）Wi-Fiルーター<br>WN-AC1167GR</p>
<cite><a href="https://www.iodata.jp/product/network/wnlan/wn-ac1167gr/index.htm" target="_blank" rel="noreferrer noopener external" data-wpel-link="external" class="wpel-icon-right">https://www.iodata.jp/product/network/wnlan/wn-ac1167gr/index.htm<span class="wpel-icon wpel-image wpel-icon-1"></span></a></cite>
</blockquote>



<p>このルータに、OpenWrtというオープンソースな組み込み用Linuxがあって、このI-Oデータのルータにも適合したファームウェアがあります。これを使って、dnsmasqというDNSが使えるので、ローカルDNSとして活用してみました。</p>



<h3 class="wp-block-heading">I-O DATA WN-AC1167GRにOpenWrtを！</h3>



<p>まずは、OpenWrtを入れます。このファームウェアは以下にあります。</p>



<blockquote class="wp-block-quote">
<p>OpenWrt Project　Techdata: I-O Data WN-AC1167GR</p>
<cite><a rel="noreferrer noopener external" href="https://openwrt.org/toh/hwdata/i-o_data/i-o_data_wn-ac1167gr" target="_blank" data-wpel-link="external" class="wpel-icon-right">https://openwrt.org/toh/hwdata/i-o_data/i-o_data_wn-ac1167gr<span class="wpel-icon wpel-image wpel-icon-1"></span></a></cite>
</blockquote>



<p>Firmware OpenWrt Install URL　から、ファクトリーイメージがあるので、これを純正のファームウェアアップデートから書き込みするだけです。LANポートは、デフォルトで192.168.1.1/24　のネットワークになっていてDHCPサーバも動いています。</p>



<div class="wp-block-image"><figure class="aligncenter size-large"><img loading="lazy" decoding="async" width="641" height="703" src="/wp-content/uploads/2020/10/OpenWrt.png" alt="" class="wp-image-9847"></figure></div>



<p>このCPUは、MediaTek MT7620Aが載っているようですね。32bitのarmで1coreのようです。</p>



<blockquote class="wp-block-quote">
<p>MediaTek　<strong>MT7620N/A</strong></p>
<cite><a href="https://www.mediatek.jp/products/mt7620n-a" target="_blank" rel="noreferrer noopener external" data-wpel-link="external" class="wpel-icon-right">https://www.mediatek.jp/products/mt7620n-a<span class="wpel-icon wpel-image wpel-icon-1"></span></a></cite>
</blockquote>



<p>詳細な設定は、省きますがLAN側のネットワークに上位ルーター側で使っているネットワークを割り振っているだけです。DHCPはこのルータでは止めてあります。WAN側の青いLANは使っていません。FireWallも全部外してあります。うまく設定すれば、WAN側とLAN側をブリッジさせて同一ネットワークで使うこともできると思いますが、なぜかうまくいかず結局、シンプルな設定にしました。</p>



<p>　あと、とりあえず、いろいろ試して5Ghz帯の無線LANは安定しなかったので、２GHZの無線LANにしています。何か設定の勘所があるのかもですが、ちょっと追うのはヤメておきます。</p>



<div class="wp-block-image"><figure class="aligncenter size-large"><img loading="lazy" decoding="async" width="655" height="266" src="/wp-content/uploads/2020/10/OpenWrt-1.png" alt="" class="wp-image-9848"></figure></div>



<p>このようにインターフェイスはLAN側のポートだけ使って、あとは無線LANの設定をLANに紐づけているだけです。いわゆるブリッジ接続（アクセスポイント的な）で使っている感じですね。</p>



<h3 class="wp-block-heading">OpenWrtで、DNSMASQの設定を！</h3>



<p>OpenWrtルータは、SSHも出来ますのでログインしてdnsmasqがどの設定ファイルを見ているか確認してみます。管理画面からも設定はできるんですが、どの設定項目がどのパラメータなのかわかりにくいので、直接設定ファイルを見てみました。</p>



<div class="wp-block-image"><figure class="aligncenter size-large"><img loading="lazy" decoding="async" width="473" height="394" src="/wp-content/uploads/2020/10/root_OpenWrt.png" alt="" class="wp-image-9849"></figure></div>



<p>psコマンドは、BusyBoxのやつを使っているようですね。オプションは効きませんでした。こんな感じでdnsmasqの起動オプションを確認。</p>



<pre class="wp-block-code"><code>root@OpenWrt:~# ps | grep dnsmasq
  847 dnsmasq   1344 S    /usr/sbin/dnsmasq -C /var/etc/dnsmasq.conf.cfg01411c -k -x /var/run/dnsmasq/dnsmasq.cfg01411c.pid</code></pre>



<p>-C オプションが設定ファイルです。このファイルの中は、こんな感じです。</p>



<pre class="wp-block-code"><code># auto-generated config file from /etc/config/dhcp
conf-file=/etc/dnsmasq.conf
filterwin2k
no-negcache
strict-order
localise-queries
read-ethers
enable-ubus
expand-hosts
bind-dynamic
quiet-dhcp
domain=gpl.jp
server=/gpl.jp/
server=8.8.8.8
server=192.168.1.1
dhcp-leasefile=/tmp/dhcp.leases
resolv-file=/etc/resolv.conf
stop-dns-rebind
rebind-localhost-ok
dhcp-broadcast=tag:needs-broadcast
addn-hosts=/tmp/hosts
conf-dir=/tmp/dnsmasq.d
user=dnsmasq
group=dnsmasq


dhcp-ignore-names=tag:dhcp_bogus_hostname
conf-file=/usr/share/dnsmasq/dhcpbogushostname.conf


bogus-priv
conf-file=/usr/share/dnsmasq/rfc6761.conf</code></pre>



<p>あとは、hostsの内容はWEB GUI画面から管理できます。</p>



<div class="wp-block-image"><figure class="aligncenter size-large"><img loading="lazy" decoding="async" width="655" height="275" src="/wp-content/uploads/2020/10/OpenWrt-2.png" alt="" class="wp-image-9850"></figure></div>



<p>リモートのmacから、digで確認してみます。</p>



<pre class="wp-block-code"><code>$ dig @192.168.1.100 hack.gpl.jp

; &lt;&lt;>> DiG 9.10.6 &lt;&lt;>> @192.168.1.100 hack.gpl.jp
; (1 server found)
;; global options: +cmd
;; Got answer:
;; ->>HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 2575
;; flags: qr aa rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 1

;; OPT PSEUDOSECTION:
; EDNS: version: 0, flags:; udp: 4096
;; QUESTION SECTION:
;hack.gpl.jp.			IN	A

;; ANSWER SECTION:
hack.gpl.jp.		0	IN	A	192.168.1.47

;; Query time: 0 msec
;; SERVER: 192.168.1.100#53(192.168.1.100)
;; WHEN: Mon Oct 26 03:55:29 JST 2020
;; MSG SIZE  rcvd: 56</code></pre>



<p>管理外のドメインも引いてくれるか確認しておきます。なんとか大丈夫そうなので、設定はよしとします。ハマった点としては５Ghz帯の無線LANだとどうしても、接続が切れてしまうようでした。何か、設定があるのかもですが解決できなかったので2Ghz帯のにしています。無線LANとスマホは近くに置いてあるのでまぁ実質問題ないでしょう。Pixel3からスピードテストすると以下のようです。</p>



<div class="wp-block-image"><figure class="aligncenter size-large"><img loading="lazy" decoding="async" width="357" height="313" src="/wp-content/uploads/2020/10/speedtest.png" alt="" class="wp-image-9851"></figure></div>



<p>監視サイトからの読み込みも　２秒くらいなのでまぁ良いかなと。</p>



<h3 class="wp-block-heading">まとめ</h3>



<p>今回、なんとなくわかったのは以下となります。</p>



<p>・OpenWrtは、iptablesも設定できるようなのでうまく応用すればいろいろ使えそう<br>・今回は、5Ghzの無線LANは通信が切れてしまう現象が起きた<br>・なので、2Ghzの無線LANで運用することに<br>・DNSMASQは、それなりに動いているようだ<br>・無線LANの機器なので消費電力は5Wくらい。省電力<br>・違う無線LAN配下からは、pingが通らない。これはなぜか？<br>・上位ルータからはPingは通る<br>・引っ越ししたroot化したpixel3は今の所、調子良さそう</p>



<h3 class="wp-block-heading">あとがき</h3>



<p>無線LANがぶつぶつ切れて、設定がぜんぜん進まず、どうしようかと思ったんですが2Ghzにしてなんとか安定しているように見えます。組み込みのLinuxと無線LANドライバーは、弄れる知識がないのでいつかチャレンジしてみようとは思いますが、今はもうお腹いっぱいです。設定疲れました！でも、なんとか当初の目標がクリアできてよかったです。たかが、内部DNSですが、消費電力が少なくて今のところ便利に使えています。あとは、そのくらい安定して動作するか検証ですね。</p>



<h3 class="wp-block-heading">著者にメッセージ</h3>



<p>コメントじゃなくて、個人的にやりとりしたい場合はこちらからどうぞ。お返事が遅くなるときもありますが、ご了承を。</p>


<p>間違いのご指摘など、コメントじゃなくて、個人的にやりとりしたい場合は<a class="c-link-text" href="/mail/" target="_blank" rel="noopener noreferrer" data-wpel-link="internal">こちらから</a>どうぞ。お返事が遅くなるときもありますが、ご了承を。</p>
					</div>
<!-- .entry-content -->

			<footer class="entry-footer">
							
			</footer><!-- .entry-footer -->
		</div>
<!-- .entry-wrapper -->
</article><!-- #post-## -->

			
				
<article id="post-9827" class="post-9827 post type-post status-publish format-standard has-post-thumbnail hentry category-android category-linux category-wordpress">
	<div class="entry-wrapper">



		<header class="entry-header">
					<span class="entry-format theme-genericon"></span>
	
			<div class="entry-meta">
				<span class="posted-on">投稿日: <a href="/2020/10/22/d-j-b-daemontools-termux/" rel="bookmark noopener noreferrer" data-wpel-link="internal"><time class="entry-date published" datetime="2020-10-22T17:33:26+09:00">2020年10月22日</time><time class="updated" datetime="2020-10-22T17:33:39+09:00">2020年10月22日</time></a> </span><span class="posted-on">更新日:2020年10月22日</span> <span class="categories">  <a href="/category/android/" rel="category tag noopener noreferrer" data-wpel-link="internal">Android</a>, <a href="/category/linux/" rel="category tag noopener noreferrer" data-wpel-link="internal">Linux</a>, <a href="/category/wordpress/" rel="category tag noopener noreferrer" data-wpel-link="internal">WordPress</a></span>			</div>
<!-- .entry-meta -->

							<h1 class="entry-title"><a href="/2020/10/22/d-j-b-daemontools-termux/" rel="bookmark noopener noreferrer" data-wpel-link="internal">D.J.BツールのdaemontoolsをTermuxで動かしてみたよ！</a></h1>					</header><!-- .entry-header -->

		<div class="entry-content">
			
<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex w_b_div"><div class="w_b_wrap w_b_wrap_talk w_b_L w_b_flex w_b_div">
<div class="w_b_ava_box w_b_relative w_b_ava_L w_b_col w_b_f_n w_b_div">
<div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_L w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div">
<img loading="lazy" decoding="async" src="/wp-content/uploads/2020/09/abata.png" width="96" height="96" alt="じゃんくはっく" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img">
</div></div></div>
<div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">じゃんくはっく</div>
</div>
<div class="w_b_bal_box w_b_bal_L w_b_relative w_b_direction_L w_b_w100 w_b_div">
<div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewbox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "></polygon></svg></div>
<div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div"><div class="w_b_bal_wrap w_b_bal_wrap_L w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_L w_b_shadow_L w_b_ta_L w_b_div"><div class="w_b_quote w_b_div">
<p>ぴーちゃん、DJBのdaemontoolsって知ってる？</p>
</div></div></div></div>
</div>
</div></div></div>



<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex w_b_mla w_b_jc_fe w_b_div"><div class="w_b_wrap w_b_wrap_talk w_b_R w_b_flex w_b_jc_fe w_b_div">
<div class="w_b_bal_box w_b_bal_R w_b_relative w_b_direction_R w_b_w100 w_b_div">
<div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewbox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "></polygon></svg></div>
<div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div"><div class="w_b_bal_wrap w_b_bal_wrap_R w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_R w_b_shadow_R w_b_ta_L w_b_div"><div class="w_b_quote w_b_div">
<p>・・・まったく知りません！</p>
</div></div></div></div>
</div>
<div class="w_b_ava_box w_b_relative w_b_ava_R w_b_col w_b_f_n w_b_div">
<div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_R w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div">
<img loading="lazy" decoding="async" src="/wp-content/uploads/2020/09/pi-.png" width="96" height="96" alt="ぴー" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img">
</div></div></div>
<div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">ぴー</div>
</div>
</div></div></div>



<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex w_b_div"><div class="w_b_wrap w_b_wrap_talk w_b_L w_b_flex w_b_div">
<div class="w_b_ava_box w_b_relative w_b_ava_L w_b_col w_b_f_n w_b_div">
<div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_L w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div">
<img loading="lazy" decoding="async" src="/wp-content/uploads/2020/09/abata.png" width="96" height="96" alt="じゃんくはっく" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img">
</div></div></div>
<div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">じゃんくはっく</div>
</div>
<div class="w_b_bal_box w_b_bal_L w_b_relative w_b_direction_L w_b_w100 w_b_div">
<div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewbox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "></polygon></svg></div>
<div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div"><div class="w_b_bal_wrap w_b_bal_wrap_L w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_L w_b_shadow_L w_b_ta_L w_b_div"><div class="w_b_quote w_b_div">
<p>デーモンを起動管理させるツールなんだけど、これがTermuxで動かせないかな？ってチャレンジしてみたよ。</p>
</div></div></div></div>
</div>
</div></div></div>



<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex w_b_mla w_b_jc_fe w_b_div"><div class="w_b_wrap w_b_wrap_talk w_b_R w_b_flex w_b_jc_fe w_b_div">
<div class="w_b_bal_box w_b_bal_R w_b_relative w_b_direction_R w_b_w100 w_b_div">
<div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewbox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "></polygon></svg></div>
<div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div"><div class="w_b_bal_wrap w_b_bal_wrap_R w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_R w_b_shadow_R w_b_ta_L w_b_div"><div class="w_b_quote w_b_div">
<p>またマニアックなネタですね！w</p>
</div></div></div></div>
</div>
<div class="w_b_ava_box w_b_relative w_b_ava_R w_b_col w_b_f_n w_b_div">
<div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_R w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div">
<img loading="lazy" decoding="async" src="/wp-content/uploads/2020/09/pi-.png" width="96" height="96" alt="ぴー" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img">
</div></div></div>
<div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">ぴー</div>
</div>
</div></div></div>



<p>はいな！　またマニアックネタかもしれませんので需要はあまり無いかもしれませんね。w</p>



<h3 class="wp-block-heading">daemontoolsとは？</h3>



<p>　このツールは、DJBことダニエル・ジュリアス・バーンスタインさん（<a rel="noreferrer noopener external" href="https://ja.wikipedia.org/wiki/%E3%83%80%E3%83%8B%E3%82%A8%E3%83%AB%E3%83%BB%E3%83%90%E3%83%BC%E3%83%B3%E3%82%B9%E3%82%BF%E3%82%A4%E3%83%B3" target="_blank" data-wpel-link="external" class="wpel-icon-right">WIKI<span class="wpel-icon wpel-image wpel-icon-1"></span></a>参照）が作ったツール群です。DJBさんは、qmailやdjbdnsというメールやDNSも作っています。<a href="https://ja.wikipedia.org/wiki/Daemontools" target="_blank" rel="noreferrer noopener external" data-wpel-link="external" class="wpel-icon-right">daemontools<span class="wpel-icon wpel-image wpel-icon-1"></span></a>は、全部で17個の単体プログラムで作られている常駐するプログラムを起動管理するものです。</p>



<p>　DJBツールは、設定や取り扱いがよくわからんという人もいて好き嫌いの別れるツールです。しかし、驚異的にバグが少なく非常に興味深い作りになっています。</p>



<p>その昔、sendmailやbindに嫌気がさしてqmailやdjbdnsを使っていた時期があったのですが、rpmやdebパッケージなどがないので設定はそれなりにしないと動きません。作者がバイナリ配布を認めていないんです。その為、RedHatはqmailのサポートを明示的に切り捨てています。ちなみに、無償で登録できるRedHatの開発者アカウントがあれば、ナレッジも読めますよ。</p>



<blockquote class="wp-block-quote">
<p>Red Hat は、Red Hat Enterprise Linux で qmail SMTP サーバーの使用をサポートしていますか?</p>
<cite><a href="https://access.redhat.com/ja/articles/2540051" target="_blank" rel="noreferrer noopener external" data-wpel-link="external" class="wpel-icon-right">https://access.redhat.com/ja/articles/2540051<span class="wpel-icon wpel-image wpel-icon-1"></span></a></cite>
</blockquote>



<p>そんな感じでDJB作のソフトウェアを10年ぶりくらいに使ってみました。あまりに久しぶりすぎて、だいぶ使い方とか忘れていましたがなんとか動いているように見えますのでちょっとメモしておきます。</p>



<h3 class="wp-block-heading">daemontoolsの概略</h3>



<p>daemontools とは、デーモンを監視するツールのことで、qmail の作者 D.J.B. によるツールの事。メリットは、daemontools によって監視させておけば、 自動的に再起動してくれます。注意事項は以下。</p>



<ul>
<li>バックグラウンドになるデーモンは管理できない。</li>
<li>この為、run から動作させるプロセスは、 &amp; を付けてバックグラウンドにしないこと。</li>
</ul>



<p>詳細は、オフィシャルサイトを参照。<a href="https://cr.yp.to/daemontools.html" target="_blank" rel="noreferrer noopener external" data-wpel-link="external" class="wpel-icon-right">https://cr.yp.to/daemontools.html<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p>



<p>今回は、Androidで動作するTermuxでdaemontoolsを動作させるように修正をしました。</p>



<h3 class="wp-block-heading">インストール</h3>



<p>daemontoolsは、展開したソースディレクトリにコマンドがシンボリック・リンクされます。</p>



<p>このインストール例では、ホームディレクトリに&nbsp;<code>bin</code>&nbsp;を作成し、そこに展開してインストールします。</p>



<pre class="wp-block-code"><code>$ mkdir bin
$ cd bin

$ git clone https://github.com/take-i/termux-daemontools.git
$ cd termux-daemontools/admin/daemontools-0.76/
$ package/install</code></pre>



<p>インストールは以上で終了です！　ビルドツールが入れてなくてmakeできない場合は、このように入れておいてください。</p>



<pre class="wp-block-code"><code>$ pkg install autoconf automake bison bzip2 \
              clang cmake coreutils diffutils \
              flex gawk git grep gzip libtool \
              make patch perl sed silversearcher-ag \
              tar termux-exec wget -y</code></pre>



<h3 class="wp-block-heading">コマンドはどこにあるの？</h3>



<p>コマンドは、termux配下の&nbsp;<code>$PREFIX/bin</code>&nbsp;ディレクトリ以下にありますが、これはシンボリック・リンクです。</p>



<pre class="wp-block-code"><code>$ which svscan
/data/data/com.termux/files/usr/bin/svscan</code></pre>



<p>また、このシンボリック・リンク先は、<code>$PREFIX/command/</code>&nbsp;になります。</p>



<pre class="wp-block-code"><code>$ ls -l /data/data/com.termux/files/usr/bin/svscan
lrwxrwxrwx 1 u0_a257 u0_a257 46 Oct 21 15:10 /data/data/com.termux/files/usr/bin/svscan -> /data/data/com.termux/files/usr/command/svscan</code></pre>



<p>つまり、コマンドの本体はビルドしたディレクトリ以下にあります。ビルドしたディレクトリを削除するときは注意しましょう。</p>



<pre class="wp-block-code"><code>$ tree $PREFIX/command/
├── envdir -> /data/data/com.termux/files/home/bin/termux-daemontools/admin/daemontools/command/envdir
├── envuidgid -> /data/data/com.termux/files/home/bin/termux-daemontools/admin/daemontools/command/envuidgid
├── fghack -> /data/data/com.termux/files/home/bin/termux-daemontools/admin/daemontools/command/fghack
├── multilog -> /data/data/com.termux/files/home/bin/termux-daemontools/admin/daemontools/command/multilog
├── pgrphack -> /data/data/com.termux/files/home/bin/termux-daemontools/admin/daemontools/command/pgrphack
├── readproctitle -> /data/data/com.termux/files/home/bin/termux-daemontools/admin/daemontools/command/readproctitle
├── setlock -> /data/data/com.termux/files/home/bin/termux-daemontools/admin/daemontools/command/setlock
├── setuidgid -> /data/data/com.termux/files/home/bin/termux-daemontools/admin/daemontools/command/setuidgid
├── softlimit -> /data/data/com.termux/files/home/bin/termux-daemontools/admin/daemontools/command/softlimit
├── supervise -> /data/data/com.termux/files/home/bin/termux-daemontools/admin/daemontools/command/supervise
├── svc -> /data/data/com.termux/files/home/bin/termux-daemontools/admin/daemontools/command/svc
├── svok -> /data/data/com.termux/files/home/bin/termux-daemontools/admin/daemontools/command/svok
├── svscan -> /data/data/com.termux/files/home/bin/termux-daemontools/admin/daemontools/command/svscan
├── svscanboot -> /data/data/com.termux/files/home/bin/termux-daemontools/admin/daemontools/command/svscanboot
├── svstat -> /data/data/com.termux/files/home/bin/termux-daemontools/admin/daemontools/command/svstat
├── tai64n -> /data/data/com.termux/files/home/bin/termux-daemontools/admin/daemontools/command/tai64n
└── tai64nlocal -> /data/data/com.termux/files/home/bin/termux-daemontools/admin/daemontools/command/tai64nlocal</code></pre>



<h3 class="wp-block-heading">daemontoolsの起動</h3>



<p>必須ではありませんが、明示的にPATHを記載したい場合は以下のように追記しておきます。</p>



<p>~/.bashrc</p>



<pre class="wp-block-code"><code>::
#djb tool daemontools
export PATH=$PATH:$PREFIX/command</code></pre>



<p>リモートシェルから、Daemontools の起動は、スマートフォンのroot化を行なっている場合は root で起動できます。その場合は、</p>



<pre class="wp-block-code"><code>$ nohup sudo svscan $PREFIX/service/ &amp;</code></pre>



<p>一般ユーザーで起動する場合は、</p>



<pre class="wp-block-code"><code>$ nohup svscan $PREFIX/service/ &amp;</code></pre>



<p>どちらかの方法で起動してください。なお、<a href="/category/wordpress/page/4/Boot" target="_blank" rel="noreferrer noopener" class="broken_link" data-wpel-link="internal">Termux:Boot</a> の有償アプリを入れている場合は、~/.termux/boot/　以下に以下のような起動スクリプトを記載しておくとスマホを再起動してホーム画面まで行った時に自動的に起動します。</p>



<pre class="wp-block-code"><code>#!/data/data/com.termux/files/usr/bin/sh

export PATH=$PATH:$HOME/bin
export PATH=$PATH:$PREFIX/command
export PREFIX=/data/data/com.termux/files/usr

sudo svscan $PREFIX/service/ &amp;</code></pre>



<h3 class="wp-block-heading">設定のサンプル</h3>



<p>例えば、crondをdaemontoolsで起動させるサンプルです。ホームディレクトリにbootディレクトリを作成して後から $PREFIX/service/ にシンボリック・リンクを張って起動させます。以下の例では、実態のディレクトリは$HOME/boot/ですが、どこでもOKです。$PREFIX/var/boot/ とか好きなところにディレクトリを作成してください。</p>



<pre class="wp-block-code"><code>$ cd
$ mkdir -p boot/crond
$ cd boot/crond

$ vi run</code></pre>



<pre class="wp-block-code"><code>#!/bin/sh

export PATH=$PATH:$HOME/bin
export PATH=$PATH:$PREFIX/command
export PREFIX=/data/data/com.termux/files/usr

exec 2>&amp;1
exec > /dev/null

# start up script example.
# need pkg install cronie
exec crond -n</code></pre>



<p>デーモン起動しないように、crond を -n オプションでフォアグランドで起動しています。</p>



<pre class="wp-block-code"><code>$ cd ../
$ chmod +t crond</code></pre>



<p>このように<a href="https://ja.wikipedia.org/wiki/%E3%82%B9%E3%83%86%E3%82%A3%E3%83%83%E3%82%AD%E3%83%BC%E3%83%93%E3%83%83%E3%83%88" target="_blank" rel="noreferrer noopener external" data-wpel-link="external" class="wpel-icon-right">スティッキービット<span class="wpel-icon wpel-image wpel-icon-1"></span></a>をディレクトリに付けておきます。</p>



<h3 class="wp-block-heading">起動</h3>



<p>シンボリック・リンクを張ると起動します。</p>



<pre class="wp-block-code"><code>$ ln -s $HOME/boot/crond $PREFIX/service/</code></pre>



<h3 class="wp-block-heading">起動確認</h3>



<p>ルートで、svscan を動作させている場合は以下のようにすれば svstatコマンドで確認できます。</p>



<pre class="wp-block-code"><code>$ tsu
# svstat $PREFIX/service/crond
/data/data/com.termux/files/usr/service/crond: up (pid 8704) 191 seconds</code></pre>



<p>rootで動作させている場合は、プロセスツリーが以下のようになっています。</p>



<pre class="wp-block-code"><code>init─┬
　　　::
     ├─magiskd─┬─logcat
     │         ├─sh───svscan─┬─supervise───run───sleep
     │         │             └─supervise───crond</code></pre>



<p>つまり、Termuxを完全に落としてもcronは動き続けてくれます！</p>



<h3 class="wp-block-heading">サービスの一時的な停止</h3>



<pre class="wp-block-code"><code>$ svc -d $PREFIX/service/crond</code></pre>



<h3 class="wp-block-heading">
<a href="https://github.com/take-i/termux-daemontools/blob/master/readme-jp.md#%E3%82%B5%E3%83%BC%E3%83%93%E3%82%B9%E3%81%AE%E5%86%8D%E9%96%8B" data-wpel-link="external" target="_blank" rel="external noopener noreferrer" class="wpel-icon-right"><span class="wpel-icon wpel-image wpel-icon-1"></span></a>サービスの再開</h3>



<pre class="wp-block-code"><code>$ svc -u $PREFIX/service/crond</code></pre>



<h3 class="wp-block-heading">
<a href="https://github.com/take-i/termux-daemontools/blob/master/readme-jp.md#%E6%B0%B8%E7%B6%9A%E7%9A%84%E3%81%AA%E3%82%B5%E3%83%BC%E3%83%93%E3%82%B9%E3%81%AE%E5%89%8A%E9%99%A4" data-wpel-link="external" target="_blank" rel="external noopener noreferrer" class="wpel-icon-right"><span class="wpel-icon wpel-image wpel-icon-1"></span></a>永続的なサービスの削除</h3>



<p>監視ディレクトリからシンボリック・リンクを削除します。</p>



<pre class="wp-block-code"><code>$ cd $PREFIX/service/
$ unlink crond</code></pre>



<h3 class="wp-block-heading">
<a href="https://github.com/take-i/termux-daemontools/blob/master/readme-jp.md#%E6%B0%B8%E7%B6%9A%E7%9A%84%E3%81%AA%E3%82%B5%E3%83%BC%E3%83%93%E3%82%B9%E3%81%AE%E5%89%8A%E9%99%A4" data-wpel-link="external" target="_blank" rel="external noopener noreferrer" class="wpel-icon-right"><span class="wpel-icon wpel-image wpel-icon-1"></span></a>注意事項</h3>



<p>setuidgidなど、一般ユーザ（termuxをインストールしたユーザ）では動作しないと思います。また、すべてのコマンドをテストしていませんので、動作無保証です。テスト済みのコマンドは以下から確認できます。</p>



<blockquote class="wp-block-quote">
<p>Github：termux-daemontools</p>
<cite><a href="https://github.com/take-i/termux-daemontools/blob/master/readme-jp.md" target="_blank" rel="noreferrer noopener external" data-wpel-link="external" class="wpel-icon-right">https://github.com/take-i/termux-daemontools/blob/master/readme-jp.md<span class="wpel-icon wpel-image wpel-icon-1"></span></a></cite>
</blockquote>



<h3 class="wp-block-heading">まとめ</h3>



<p>今回の要点は以下となります。</p>



<p>・daemontoolsは、Termuxでもなんとか動作させることができた<br>・root化されていないTermuxでも動作する<br>・root化されているスマホだと、Termuxをタスクから完全に落としても動作するデーモンを管理できる<br>・メリットとしては、root化されていない端末の場合、サービス起動管理が一元化できそう。<br>・setlockは、いろいろ使えそうなのでちゃんと動くか確認してみたい。</p>



<h3 class="wp-block-heading">あとがき</h3>



<p>一応、djbdnsもtermuxで動作させようとあれこれ弄っていたのですが、どうやらうまく動作させることができませんでした。Androidの起動管理がよくわかっていなくて、djbdnsを起動させるとメモリーがどんどん膨らみ、swapも使い果たして再起動してしまいます。これは、djbdnsの問題ではなく、おそらくandroidの起動するシステムが関連している感じですがよくわかっていません。</p>



<p>　当初の目的では、DNSを動作させることだったんですがこれは当分、違う方法でやることにします。</p>



<h3 class="wp-block-heading">著者にメッセージ</h3>



 


<p>間違いのご指摘など、コメントじゃなくて、個人的にやりとりしたい場合は<a class="c-link-text" href="/mail/" target="_blank" rel="noopener noreferrer" data-wpel-link="internal">こちらから</a>どうぞ。お返事が遅くなるときもありますが、ご了承を。</p>
					</div>
<!-- .entry-content -->

			<footer class="entry-footer">
							
			</footer><!-- .entry-footer -->
		</div>
<!-- .entry-wrapper -->
</article><!-- #post-## -->

			
				
<article id="post-9815" class="post-9815 post type-post status-publish format-standard has-post-thumbnail hentry category-android category-linux category-wordpress">
	<div class="entry-wrapper">



		<header class="entry-header">
					<span class="entry-format theme-genericon"></span>
	
			<div class="entry-meta">
				<span class="posted-on">投稿日: <a href="/2020/10/09/smartphone-in-the-fridge/" rel="bookmark noopener noreferrer" data-wpel-link="internal"><time class="entry-date published" datetime="2020-10-09T05:00:14+09:00">2020年10月9日</time><time class="updated" datetime="2020-10-09T05:18:31+09:00">2020年10月9日</time></a> </span><span class="posted-on">更新日:2020年10月9日</span> <span class="categories">  <a href="/category/android/" rel="category tag noopener noreferrer" data-wpel-link="internal">Android</a>, <a href="/category/linux/" rel="category tag noopener noreferrer" data-wpel-link="internal">Linux</a>, <a href="/category/wordpress/" rel="category tag noopener noreferrer" data-wpel-link="internal">WordPress</a></span>			</div>
<!-- .entry-meta -->

							<h1 class="entry-title"><a href="/2020/10/09/smartphone-in-the-fridge/" rel="bookmark noopener noreferrer" data-wpel-link="internal">スマホを冷蔵庫に入れて冷え冷え状態でベンチマークしたらどうなる？</a></h1>					</header><!-- .entry-header -->

		<div class="entry-content">
			
<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex w_b_div"><div class="w_b_wrap w_b_wrap_talk w_b_L w_b_flex w_b_div">
<div class="w_b_ava_box w_b_relative w_b_ava_L w_b_col w_b_f_n w_b_div">
<div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_L w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div">
<img loading="lazy" decoding="async" src="/wp-content/uploads/2020/09/abata.png" width="96" height="96" alt="じゃんくはっく" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img">
</div></div></div>
<div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">じゃんくはっく</div>
</div>
<div class="w_b_bal_box w_b_bal_L w_b_relative w_b_direction_L w_b_w100 w_b_div">
<div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewbox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "></polygon></svg></div>
<div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div"><div class="w_b_bal_wrap w_b_bal_wrap_L w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_L w_b_shadow_L w_b_ta_L w_b_div"><div class="w_b_quote w_b_div">
<p>冷蔵庫に入れて冷やしてベンチ測ると、どうなるんだろう？</p>
</div></div></div></div>
</div>
</div></div></div>



<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex w_b_mla w_b_jc_fe w_b_div"><div class="w_b_wrap w_b_wrap_talk w_b_R w_b_flex w_b_jc_fe w_b_div">
<div class="w_b_bal_box w_b_bal_R w_b_relative w_b_direction_R w_b_w100 w_b_div">
<div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewbox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "></polygon></svg></div>
<div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div"><div class="w_b_bal_wrap w_b_bal_wrap_R w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_R w_b_shadow_R w_b_ta_L w_b_div"><div class="w_b_quote w_b_div">
<p>なんかググると、スマホは冷蔵庫に入れちゃだめ！ってあるよ。</p>
</div></div></div></div>
</div>
<div class="w_b_ava_box w_b_relative w_b_ava_R w_b_col w_b_f_n w_b_div">
<div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_R w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div">
<img loading="lazy" decoding="async" src="/wp-content/uploads/2020/09/pi-.png" width="96" height="96" alt="ぴー" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img">
</div></div></div>
<div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">ぴー</div>
</div>
</div></div></div>



<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex w_b_div"><div class="w_b_wrap w_b_wrap_talk w_b_L w_b_flex w_b_div">
<div class="w_b_ava_box w_b_relative w_b_ava_L w_b_col w_b_f_n w_b_div">
<div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_L w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div">
<img loading="lazy" decoding="async" src="/wp-content/uploads/2020/09/abata.png" width="96" height="96" alt="じゃんくはっく" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img">
</div></div></div>
<div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">じゃんくはっく</div>
</div>
<div class="w_b_bal_box w_b_bal_L w_b_relative w_b_direction_L w_b_w100 w_b_div">
<div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewbox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "></polygon></svg></div>
<div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div"><div class="w_b_bal_wrap w_b_bal_wrap_L w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_L w_b_shadow_L w_b_ta_L w_b_div"><div class="w_b_quote w_b_div">
<p>冷蔵庫は約10度くらいなんで、寒冷地の温度とそう変わらないよね？</p>
</div></div></div></div>
</div>
</div></div></div>



<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex w_b_mla w_b_jc_fe w_b_div"><div class="w_b_wrap w_b_wrap_talk w_b_R w_b_flex w_b_jc_fe w_b_div">
<div class="w_b_bal_box w_b_bal_R w_b_relative w_b_direction_R w_b_w100 w_b_div">
<div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewbox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "></polygon></svg></div>
<div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div"><div class="w_b_bal_wrap w_b_bal_wrap_R w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_R w_b_shadow_R w_b_ta_L w_b_div"><div class="w_b_quote w_b_div">
<p>まぁ、気の済むまで実験してくださいw</p>
</div></div></div></div>
</div>
<div class="w_b_ava_box w_b_relative w_b_ava_R w_b_col w_b_f_n w_b_div">
<div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_R w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div">
<img loading="lazy" decoding="async" src="/wp-content/uploads/2020/09/pi-.png" width="96" height="96" alt="ぴー" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img">
</div></div></div>
<div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">ぴー</div>
</div>
</div></div></div>



<p>以前、Pixel3のベンチマークを計り直したとき、良いスコアが出たので「温度？」が関係しているのかなと思ったんですよね。今回は、冷蔵庫にPixel３をぶっこんでUnixBenchを計測してみたいと思います。</p>



<h3 class="wp-block-heading">まず結果から</h3>



<blockquote class="wp-block-quote">
<p><strong>スマホはどの程度低温に弱いのか実験！</strong></p>
<cite><a href="https://www.yamareco.com/modules/yamanote/detail.php?nid=1497" target="_blank" rel="noreferrer noopener external" data-wpel-link="external" class="wpel-icon-right">https://www.yamareco.com/modules/yamanote/detail.php?nid=1497<span class="wpel-icon wpel-image wpel-icon-1"></span></a></cite>
</blockquote>



<p>先人がやはりいました。この方は冷凍して実験したようです。人柱ですね！なので、冷蔵庫くらいでは問題なさそうなんじゃないかと思います。</p>



<div class="wp-block-image"><figure class="aligncenter size-large"><img loading="lazy" decoding="async" width="1024" height="768" src="/wp-content/uploads/2020/10/IMG_20201008_131649-1024x768.jpg" alt="" class="wp-image-9818" srcset="/wp-content/uploads/2020/10/IMG_20201008_131649-1024x768.jpg 1024w, /wp-content/uploads/2020/10/IMG_20201008_131649-768x576.jpg 768w, /wp-content/uploads/2020/10/IMG_20201008_131649-1536x1151.jpg 1536w, /wp-content/uploads/2020/10/IMG_20201008_131649-2048x1535.jpg 2048w, /wp-content/uploads/2020/10/IMG_20201008_131649-984x738.jpg 984w" sizes="(max-width: 1024px) 100vw, 1024px"></figure></div>



<p>スマホはこんな感じで冷蔵庫に入っています。猫カンがあるのは突っ込まないでね！　まず、結果からご報告です。</p>



<p>・Pixel3 Android11　冷蔵庫に入れて計測</p>



<blockquote class="wp-block-quote"><p>シングル：583.3<br>8CPU：1833.7</p></blockquote>



<p>なんと過去最高です！</p>



<div class="wp-block-image"><figure class="aligncenter size-large"><a href="https://thingspeak.com/channels/123997" data-wpel-link="external" target="_blank" rel="external noopener noreferrer"><img loading="lazy" decoding="async" width="945" height="668" src="/wp-content/uploads/2020/10/10.png" alt="" class="wp-image-9817" srcset="/wp-content/uploads/2020/10/10.png 945w, /wp-content/uploads/2020/10/10-768x543.png 768w" sizes="(max-width: 945px) 100vw, 945px"></a></figure></div>



<p>今回は、CPU温度の他、バッテリー温度もグラフ化しました。ベンチマーク中はこのように上昇しました。冷やした状態からだと、CPU温度は過去最高87度まで上昇したようですね。</p>



<p>　冷やせば速く動作するってことは実験からわかったので、筐体を分解してファンを取り付けて運用するのはアリかもしれません。</p>



<h3 class="wp-block-heading">詳細ベンチを・・</h3>



<p>詳細についてはこちらに貼り付けておきます。</p>



<pre class="wp-block-code"><code>========================================================================
   BYTE UNIX Benchmarks (Version 5.1.3)

   System: localhost: Android
   OS: Android -- 4.9.223-g5bded8e40b62-ab6647920 -- #0 SMP PREEMPT Thu Jul 2 03:22:48 UTC 2020
   Machine: aarch64 (unknown)
   Language: en_US.utf8 (charmap=, collate=)
   13:07:43 up 4 days,  3:18,  load average: 0.22, 0.20, 0.18; runlevel 

------------------------------------------------------------------------
Benchmark Run: Thu Oct 08 2020 13:07:43 - 13:35:50
8 CPUs in system; running 1 parallel copy of tests

Dhrystone 2 using register variables       29344957.6 lps   (10.0 s, 7 samples)
Double-Precision Whetstone                     6364.3 MWIPS (10.0 s, 7 samples)
Execl Throughput                                353.6 lps   (29.9 s, 2 samples)
File Copy 1024 bufsize 2000 maxblocks        448563.7 KBps  (30.0 s, 2 samples)
File Copy 256 bufsize 500 maxblocks          177698.8 KBps  (30.0 s, 2 samples)
File Copy 4096 bufsize 8000 maxblocks       1080251.9 KBps  (30.0 s, 2 samples)
Pipe Throughput                             1151314.0 lps   (10.0 s, 7 samples)
Pipe-based Context Switching                  53273.4 lps   (10.0 s, 7 samples)
Process Creation                               1031.2 lps   (30.0 s, 2 samples)
Shell Scripts (1 concurrent)                   1522.3 lpm   (60.0 s, 2 samples)
Shell Scripts (8 concurrent)                    599.3 lpm   (60.1 s, 2 samples)
System Call Overhead                        1186164.4 lps   (10.0 s, 7 samples)

System Benchmarks Index Values               BASELINE       RESULT    INDEX
Dhrystone 2 using register variables         116700.0   29344957.6   2514.6
Double-Precision Whetstone                       55.0       6364.3   1157.1
Execl Throughput                                 43.0        353.6     82.2
File Copy 1024 bufsize 2000 maxblocks          3960.0     448563.7   1132.7
File Copy 256 bufsize 500 maxblocks            1655.0     177698.8   1073.7
File Copy 4096 bufsize 8000 maxblocks          5800.0    1080251.9   1862.5
Pipe Throughput                               12440.0    1151314.0    925.5
Pipe-based Context Switching                   4000.0      53273.4    133.2
Process Creation                                126.0       1031.2     81.8
Shell Scripts (1 concurrent)                     42.4       1522.3    359.0
Shell Scripts (8 concurrent)                      6.0        599.3    998.9
System Call Overhead                          15000.0    1186164.4    790.8
                                                                   ========
System Benchmarks Index Score                                         583.3

------------------------------------------------------------------------
Benchmark Run: Thu Oct 08 2020 13:35:50 - 14:04:03
8 CPUs in system; running 8 parallel copies of tests

Dhrystone 2 using register variables      133676583.1 lps   (10.0 s, 7 samples)
Double-Precision Whetstone                    32433.5 MWIPS (10.2 s, 7 samples)
Execl Throughput                               1466.7 lps   (29.6 s, 2 samples)
File Copy 1024 bufsize 2000 maxblocks        672443.5 KBps  (30.0 s, 2 samples)
File Copy 256 bufsize 500 maxblocks          202034.3 KBps  (30.0 s, 2 samples)
File Copy 4096 bufsize 8000 maxblocks       1920062.6 KBps  (30.0 s, 2 samples)
Pipe Throughput                             4980247.5 lps   (10.0 s, 7 samples)
Pipe-based Context Switching                 324913.7 lps   (10.0 s, 7 samples)
Process Creation                              12358.3 lps   (30.0 s, 2 samples)
Shell Scripts (1 concurrent)                   5728.2 lpm   (60.1 s, 2 samples)
Shell Scripts (8 concurrent)                    698.4 lpm   (60.4 s, 2 samples)
System Call Overhead                        2734159.8 lps   (10.0 s, 7 samples)

System Benchmarks Index Values               BASELINE       RESULT    INDEX
Dhrystone 2 using register variables         116700.0  133676583.1  11454.7
Double-Precision Whetstone                       55.0      32433.5   5897.0
Execl Throughput                                 43.0       1466.7    341.1
File Copy 1024 bufsize 2000 maxblocks          3960.0     672443.5   1698.1
File Copy 256 bufsize 500 maxblocks            1655.0     202034.3   1220.8
File Copy 4096 bufsize 8000 maxblocks          5800.0    1920062.6   3310.5
Pipe Throughput                               12440.0    4980247.5   4003.4
Pipe-based Context Switching                   4000.0     324913.7    812.3
Process Creation                                126.0      12358.3    980.8
Shell Scripts (1 concurrent)                     42.4       5728.2   1351.0
Shell Scripts (8 concurrent)                      6.0        698.4   1164.1
System Call Overhead                          15000.0    2734159.8   1822.8
                                                                   ========
System Benchmarks Index Score                                        1833.7</code></pre>



<h3 class="wp-block-heading">ソースコード</h3>



<p>計測に使ったソースです。</p>



<pre class="wp-block-code"><code>#!/data/data/com.termux/files/usr/bin/python3
# coding: utf-8

import requests
import time
api_key='Write API Key'

def sender():
    # CPU Temp
    f = open("/sys/class/thermal/thermal_zone0/temp","r")
    t = f.read()
    f.close()
    cpu_temp = float(t) / 1000
    # Battery Temp
    f = open("/sys/devices/platform/soc/c440000.qcom,spmi/spmi-0/spmi0-02/c440000.qcom,spmi:qcom,pmi8998@2:qcom,qpnp-smb2/power_supply/battery/temp","r")
    t2 = f.read()
    f.close()
    battery_temp = float(t2) / 10
    # USB Temp
    f = open("/sys/devices/platform/soc/c440000.qcom,spmi/spmi-0/spmi0-02/c440000.qcom,spmi:qcom,pmi8998@2:qcom,qpnp-smb2/power_supply/usb/temp","r")
    t3 = f.read()
    f.close()
    usb_temp = float(t3) / 10
    # BMS Temp
    f = open("/sys/devices/platform/soc/c440000.qcom,spmi/spmi-0/spmi0-02/c440000.qcom,spmi:qcom,pmi8998@2:qpnp,fg/power_supply/bms/temp","r")
    t4 = f.read()
    f.close()
    bms_temp = float(t4) / 10

    payload = {'api_key': api_key, 'field1': float(cpu_temp), 'field2': float(battery_temp), 'field3': float(usb_temp), 'field4': float(bms_temp)}
    print("CPU Temp is:%s"%cpu_temp, end=' ')
    print("Battery_temp Temp is:%s"%battery_temp, end=' ')
    print("USB_temp Temp is:%s"%usb_temp, end=' ')
    print("BMS_temp Temp is:%s"%bms_temp, end=' ')
    r = requests.get('http://api.thingspeak.com/update', params=payload)
    print("Result: ", r.text)
    time.sleep(1.0)

def main():
    sender()

if __name__ == '__main__':
  main()</code></pre>



<h3 class="wp-block-heading">まとめ</h3>



<p>今回、なんとなくわかったのは以下となります。</p>



<p>・冷蔵庫に入れれば冷えてベンチマークは良い結果となる。<br>・UnixBenchは過去最高、マルチで１８００を超えた！<br>・バッテリー温度は、13.5度くらいまで下がった<br>・ベンチ中はCPU温度は87度まで上昇した！<br>・今の所、壊れていない。壊れてもいい人以外、真似しないように。<br>・スマホサーバとするなら、分解してヒートシンク＋ファンをつけるのが良さそう。</p>



<h3 class="wp-block-heading">あとがき</h3>



<p>WiFiアクセスポイントを冷蔵庫付近まで持ってきて電波強度を最強にして夏場は過ごすのもありかもしれません。まぁ、もう暑い季節はすぎてしまったのでやるなら来年、2021年度の夏ですかね！</p>



<p>　あと、root化していると、オーバークロックもできるようですがまだ試していません。</p>



<h3 class="wp-block-heading">著者にメッセージ</h3>



<p>コメントじゃなくて、個人的にやりとりしたい場合はこちらからどうぞ。お返事が遅くなるときもありますが、ご了承を。</p>


<p>間違いのご指摘など、コメントじゃなくて、個人的にやりとりしたい場合は<a class="c-link-text" href="/mail/" target="_blank" rel="noopener noreferrer" data-wpel-link="internal">こちらから</a>どうぞ。お返事が遅くなるときもありますが、ご了承を。</p>
					</div>
<!-- .entry-content -->

			<footer class="entry-footer">
							
			</footer><!-- .entry-footer -->
		</div>
<!-- .entry-wrapper -->
</article><!-- #post-## -->

			
				
<article id="post-9798" class="post-9798 post type-post status-publish format-standard has-post-thumbnail hentry category-android category-linux category-wordpress">
	<div class="entry-wrapper">



		<header class="entry-header">
					<span class="entry-format theme-genericon"></span>
	
			<div class="entry-meta">
				<span class="posted-on">投稿日: <a href="/2020/10/08/termux-cpu-temp-thingspeak/" rel="bookmark noopener noreferrer" data-wpel-link="internal"><time class="entry-date published" datetime="2020-10-08T08:13:41+09:00">2020年10月8日</time><time class="updated" datetime="2020-10-08T10:08:45+09:00">2020年10月8日</time></a> </span><span class="posted-on">更新日:2020年10月8日</span> <span class="categories">  <a href="/category/android/" rel="category tag noopener noreferrer" data-wpel-link="internal">Android</a>, <a href="/category/linux/" rel="category tag noopener noreferrer" data-wpel-link="internal">Linux</a>, <a href="/category/wordpress/" rel="category tag noopener noreferrer" data-wpel-link="internal">WordPress</a></span>			</div>
<!-- .entry-meta -->

							<h1 class="entry-title"><a href="/2020/10/08/termux-cpu-temp-thingspeak/" rel="bookmark noopener noreferrer" data-wpel-link="internal">TermuxスマホのCPU温度をThingSpeakでリアルタイム・グラフにしてみた！</a></h1>					</header><!-- .entry-header -->

		<div class="entry-content">
			
<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex w_b_div"><div class="w_b_wrap w_b_wrap_talk w_b_L w_b_flex w_b_div">
<div class="w_b_ava_box w_b_relative w_b_ava_L w_b_col w_b_f_n w_b_div">
<div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_L w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div">
<img loading="lazy" decoding="async" src="/wp-content/uploads/2020/09/abata.png" width="96" height="96" alt="じゃんくはっく" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img">
</div></div></div>
<div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">じゃんくはっく</div>
</div>
<div class="w_b_bal_box w_b_bal_L w_b_relative w_b_direction_L w_b_w100 w_b_div">
<div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewbox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "></polygon></svg></div>
<div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div"><div class="w_b_bal_wrap w_b_bal_wrap_L w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_L w_b_shadow_L w_b_ta_L w_b_div"><div class="w_b_quote w_b_div">
<p>Root化したPixel3のTermuxで遊んでるんだけど、CPUとかバッテリー温度とか取得できることがわかったよ！</p>
</div></div></div></div>
</div>
</div></div></div>



<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex w_b_mla w_b_jc_fe w_b_div"><div class="w_b_wrap w_b_wrap_talk w_b_R w_b_flex w_b_jc_fe w_b_div">
<div class="w_b_bal_box w_b_bal_R w_b_relative w_b_direction_R w_b_w100 w_b_div">
<div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewbox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "></polygon></svg></div>
<div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div"><div class="w_b_bal_wrap w_b_bal_wrap_R w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_R w_b_shadow_R w_b_ta_L w_b_div"><div class="w_b_quote w_b_div">
<p>サーバにするんだったら、温度は見ておきたいですからね！</p>
</div></div></div></div>
</div>
<div class="w_b_ava_box w_b_relative w_b_ava_R w_b_col w_b_f_n w_b_div">
<div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_R w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div">
<img loading="lazy" decoding="async" src="/wp-content/uploads/2020/09/pi-.png" width="96" height="96" alt="ぴー" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img">
</div></div></div>
<div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">ぴー</div>
</div>
</div></div></div>



<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex w_b_div"><div class="w_b_wrap w_b_wrap_talk w_b_L w_b_flex w_b_div">
<div class="w_b_ava_box w_b_relative w_b_ava_L w_b_col w_b_f_n w_b_div">
<div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_L w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div">
<img loading="lazy" decoding="async" src="/wp-content/uploads/2020/09/abata.png" width="96" height="96" alt="じゃんくはっく" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img">
</div></div></div>
<div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">じゃんくはっく</div>
</div>
<div class="w_b_bal_box w_b_bal_L w_b_relative w_b_direction_L w_b_w100 w_b_div">
<div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewbox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "></polygon></svg></div>
<div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div"><div class="w_b_bal_wrap w_b_bal_wrap_L w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_L w_b_shadow_L w_b_ta_L w_b_div"><div class="w_b_quote w_b_div">
<p>UnixBenchでCPU温度がどのくらいまで上がるか見ておきたかったんです。</p>
</div></div></div></div>
</div>
</div></div></div>



<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex w_b_mla w_b_jc_fe w_b_div"><div class="w_b_wrap w_b_wrap_talk w_b_R w_b_flex w_b_jc_fe w_b_div">
<div class="w_b_bal_box w_b_bal_R w_b_relative w_b_direction_R w_b_w100 w_b_div">
<div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewbox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "></polygon></svg></div>
<div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div"><div class="w_b_bal_wrap w_b_bal_wrap_R w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_R w_b_shadow_R w_b_ta_L w_b_div"><div class="w_b_quote w_b_div">
<p>ねぇ、ThingSpeakってなんなの？</p>
</div></div></div></div>
</div>
<div class="w_b_ava_box w_b_relative w_b_ava_R w_b_col w_b_f_n w_b_div">
<div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_R w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div">
<img loading="lazy" decoding="async" src="/wp-content/uploads/2020/09/pi-.png" width="96" height="96" alt="ぴー" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img">
</div></div></div>
<div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">ぴー</div>
</div>
</div></div></div>



<p>先日、メルカリでゲットしたPixel3をroot化して遊んでいます。そのうち、今動いているこのブログのサーバマシンとして、UmidigiF2から一旦置き換えてみようと思っています。UmidigiF2も、root化して遊んでみたいなと思っています。</p>



<p>　さて、今回はスマホの中にある温度センサーから取得してグラフ描画にチャレンジしてみます。</p>



<h3 class="wp-block-heading">ThingSpeakとは</h3>



<blockquote class="wp-block-quote">
<p>ThingSpeak Documentation &#8211; MathWorks 日本<br>：：<br><a rel="noreferrer noopener external" href="http://www.thingspeak.com/" target="_blank" data-wpel-link="external" class="wpel-icon-right">ThingSpeak<span class="wpel-icon wpel-image wpel-icon-1"></span></a> は <a rel="noreferrer noopener external" href="https://www.mathworks.com/solutions/internet-of-things/" target="_blank" data-wpel-link="external" class="wpel-icon-right">Internet of Things (IoT)<span class="wpel-icon wpel-image wpel-icon-1"></span></a> プラットフォームであり、クラウドでセンサーのデータを収集および保存したり、IoT アプリケーションを開発したりできます。</p>
<cite><a href="https://jp.mathworks.com/help/thingspeak/index.html" target="_blank" rel="noreferrer noopener external" data-wpel-link="external" class="wpel-icon-right">https://jp.mathworks.com/help/thingspeak/index.html<span class="wpel-icon wpel-image wpel-icon-1"></span></a></cite>
</blockquote>



<p>ThigSpeakは、結構昔からあってIoT機器からデータを投げつける定番のWEBサービスです。４、５年くらい前にも一度さわっていたりします。</p>



<blockquote class="wp-block-quote">
<p>Soracom で IoT はじめました</p>
<cite><a href="/2016/05/29/iot1/" target="_blank" rel="noreferrer noopener" data-wpel-link="internal">https://hack.gpl.jp/2016/05/29/iot1/</a></cite>
</blockquote>



<p>もう、Soracomはやめてしまいましたがこの時はOrange PI にUSBデータ通信ドングルをつけてsoracomから、CPU温度をThigSpeakに送信してグラフ化していました。</p>



<h3 class="wp-block-heading">Pixel3で温度はどうやって取得する？</h3>



<p>root化したので、いろんな情報が見れます。通常のLinuxとは少し違うので、あれこれ物色していたのですが Android である Pixel3 は、Termux の root シェルから以下のように android のコマンドを使って取得できることがわかりました。例えば、バッテリーの情報は以下のように取得できます。</p>



<pre class="wp-block-code"><code># dumpsys battery
Current Battery Service state:
  AC powered: true
  USB powered: false
  Wireless powered: false
  Max charging current: 750000
  Max charging voltage: 5000000
  Charge counter: 2569000
  status: 5
  health: 2
  present: true
  level: 100
  scale: 100
  voltage: 4355
  temperature: 270
  technology: Li-ion</code></pre>



<p>temperatureというが、バッテリー自体の温度のようです。他にも現在、AC電源から給電しているとか、状態（health）とかわかるようです。シェルからだと以下に温度が吐かれていることがわかりました。</p>



<pre class="wp-block-code"><code># cat /sys/devices/platform/soc/c440000.qcom,spmi/spmi-0/spmi0-02/c440000.qcom,spmi:qcom,pmi8998@2:qcom,qpnp-smb2/power_supply/battery/temp
295
# cat /sys/devices/platform/soc/c440000.qcom,spmi/spmi-0/spmi0-02/c440000.qcom,spmi:qcom,pmi8998@2:qcom,qpnp-smb2/power_supply/usb/temp
284
# cat /sys/devices/platform/soc/c440000.qcom,spmi/spmi-0/spmi0-02/c440000.qcom,spmi:qcom,pmi8998@2:qpnp,fg/power_supply/bms/temp
295
# cat /sys/devices/virtual/thermal/thermal_zone1/temp
34900</code></pre>



<p>一番最後のが、CPUの温度のようです。本当にCPU温度なのか、UnixBenchを動かしながら温度が上がるのか確認してみたいと思います。</p>



<h3 class="wp-block-heading">Pythonスクリプトを用意</h3>



<p>以前、OrengePiのときに動かした Pythonスクリプトがありますのでそれを使ってみました。あの時は、Python version2で書いていたのですが、今は　Python Version3系列がメインです。2to3というツールがPython3入れるとあるので、それで変換します。</p>



<blockquote class="wp-block-quote">
<p>2to3 &#8211; Python 2 から 3 への自動コード変換</p>
<cite><a href="https://docs.python.org/ja/3/library/2to3.html" target="_blank" rel="noreferrer noopener external" data-wpel-link="external" class="wpel-icon-right">https://docs.python.org/ja/3/library/2to3.html<span class="wpel-icon wpel-image wpel-icon-1"></span></a></cite>
</blockquote>



<p>変換は、-w オプションをつけるとオリジナルとバックアップが作られます。</p>



<pre class="wp-block-code"><code>$ 2to3 -w temp.py 
RefactoringTool: Skipping optional fixer: buffer
RefactoringTool: Skipping optional fixer: idioms
RefactoringTool: Skipping optional fixer: set_literal
RefactoringTool: Skipping optional fixer: ws_comma
RefactoringTool: Refactored temp.py
--- temp.py	(original)
+++ temp.py	(refactored)
@@ -13,9 +13,9 @@
     temp = float(t) / 1000
     payload = {'api_key': api_key, 'field1': float(temp)}
     f.close()
-    print "CPU Temp is:%s"%temp ,
+    print("CPU Temp is:%s"%temp, end=' ')
     r = requests.get('http://api.thingspeak.com/update', params=payload)
-    print "Result: ", r.text
+    print("Result: ", r.text)
     time.sleep(1.0)
 
 def main():
RefactoringTool: Files that were modified:
RefactoringTool: temp.py
$ ls -l
total 8
-rw------- 1 u0_a218 u0_a218 573 Oct  8 06:53 temp.py
-rw------- 1 u0_a218 u0_a218 564 Oct  8 06:52 temp.py.bak</code></pre>



<p>変換したスクリプト全体は以下となります。api_keyには、書き込み用のKeyを入れておいてください。</p>



<pre class="wp-block-code"><code>#!/data/data/com.termux/files/usr/bin/python3
# coding: utf-8

import requests
import time
api_key='thingspeak　Write API Key'

def sender():
  while True:
    f = open("/sys/class/thermal/thermal_zone0/temp","r")
    t = f.read()
    temp = float(t) / 1000
    payload = {'api_key': api_key, 'field1': float(temp)}
    f.close()
    print("CPU Temp is:%s"%temp, end=' ')
    r = requests.get('http://api.thingspeak.com/update', params=payload)
    print("Result: ", r.text)
    time.sleep(1.0)

def main():
    sender()

if __name__ == '__main__':
  main()</code></pre>



<p>動かして見ると以下のようになります。</p>



<pre class="wp-block-code"><code>$ sudo python ./temp.py
CPU Temp is:43.1 Result:  236518
CPU Temp is:31.3 Result:  0
CPU Temp is:31.3 Result:  0
CPU Temp is:31.3 Result:  0
CPU Temp is:31.3 Result:  0
：：</code></pre>



<h3 class="wp-block-heading">cronで定期実行</h3>



<p>Termuxにcronはデフォルトでは入っていませんので、入れて起動しておきます。</p>



<pre class="wp-block-code"><code>$ pkg install cronie -y
$ crond</code></pre>



<p>動いているか確認しておきます。</p>



<pre class="wp-block-code"><code>$ pgrep crond
23817
$ ps 23817
  PID TTY      STAT   TIME COMMAND
23817 ?        S&lt;s    0:00 crond</code></pre>



<p>では、ループ部分を削除して、cronに登録しておきましょう。２分に1回くらいにしておきます。</p>



<pre class="wp-block-code"><code># CPU Temp to ThingSpeak
# https://thingspeak.com/channels/123997
*/2 * * * * sudo /data/data/com.termux/files/usr/bin/python3 /data/data/com.termux/files/home/.suroot/temp.py</code></pre>



<h3 class="wp-block-heading">グラグを見て見る！</h3>



<p>無事にデータが投げられていれば、グラフが描画されていると思います。ThingSpeakのグラフを見て見ましょう。</p>



<div class="wp-block-image"><figure class="aligncenter size-large"><a href="https://thingspeak.com/channels/123997" data-wpel-link="external" target="_blank" rel="external noopener noreferrer"><img loading="lazy" decoding="async" width="944" height="323" src="/wp-content/uploads/2020/10/Pixel3_temperature_-_ThingSpeak_IoT.png" alt="" class="wp-image-9802" srcset="/wp-content/uploads/2020/10/Pixel3_temperature_-_ThingSpeak_IoT.png 944w, /wp-content/uploads/2020/10/Pixel3_temperature_-_ThingSpeak_IoT-768x263.png 768w" sizes="(max-width: 944px) 100vw, 944px"></a></figure></div>



<p>まだ登録したばかりなので、グラフの描画は中途半端ですが、大丈夫なようです。以前に、1分ごとに計測してUnixBenchを動作させたときのグラフは以下のようになりました。70度くらいまで上がっていますね。</p>



<div class="wp-block-image"><figure class="aligncenter size-large"><img loading="lazy" decoding="async" width="470" height="319" src="/wp-content/uploads/2020/10/5.png" alt="" class="wp-image-9803"></figure></div>



<p>それから、root化したのでhtopが正常に8CPU見れています。ベンチ中はフル回転ですね！</p>



<div class="wp-block-image"><figure class="aligncenter size-large"><img loading="lazy" decoding="async" width="737" height="940" src="/wp-content/uploads/2020/10/4.png" alt="" class="wp-image-9808"></figure></div>



<p>あと、UnixBenchを全開で動作させていたときの消費電力（USB-AC充電）は以下のようでした。</p>



<div class="wp-block-image"><figure class="aligncenter size-large"><img loading="lazy" decoding="async" width="696" height="358" src="/wp-content/uploads/2020/10/pixel-power.png" alt="" class="wp-image-9804"></figure></div>



<p>4.2w〜6.8wくらいです。5wとして計算してみると24時間動かして1ヶ月の電気代は、約97円でした。とても低消費で高パフォーマンスです！</p>



<div class="wp-block-image"><figure class="aligncenter size-large"><img loading="lazy" decoding="async" width="772" height="602" src="/wp-content/uploads/2020/10/5w1m.png" alt="" class="wp-image-9805" srcset="/wp-content/uploads/2020/10/5w1m.png 772w, /wp-content/uploads/2020/10/5w1m-768x599.png 768w" sizes="(max-width: 772px) 100vw, 772px"></figure></div>



<p>UnixBenchは、気温が低い時に計測したらなんと、1700を超えていました！</p>



<p>・Pixel3 Android11　再計測</p>



<blockquote class="wp-block-quote"><p>シングル：590.1<br>8CPU：1732.6</p></blockquote>



<h3 class="wp-block-heading">まとめ</h3>



<p>今回、なんとなくわかったのは以下となります。</p>



<p>・Androidシステムでは、dumpsysコマンドで各種情報がとれる<br>・各種温度は機種によって吐き出される場所が違うようだ<br>・/sys/配下に吐かれる電源関連のbattery、usb、bmsの温度はモニターしておいたほうがいいかも。常時充電しているから<br>・ThingSpeakのグラフは、あまり綺麗じゃないので自分自身で描画する仕組みを作りたい。<br>・MRTGや、RRDtoolなどtermuxで動作するグラフ描画ツールはないか？<br>・snmpdがtermuxで動かせればもっと楽できそうだが、まだなさそう。<br>・しかし、ここのコメントでは動かせる感じ<br>　https://github.com/net-snmp/net-snmp/issues/155</p>



<h3 class="wp-block-heading">あとがき</h3>



<p>スマホサーバ（AndroidOS+Termux）は消費電力も少なくて、お手軽で安く入手できIoTデバイスの情報を集める家庭内サーバとしても使える印象を持ちました。AndroidOS自体は、すごく安定しているので、電池駆動、SIM駆動、しかもタッチ画面付きで大きな戦力になりそうです。これから５Gの買い替え需要も発生するので、ますます安くて高性能なスマホが入手できる環境になります。無限の可能性を感じますね！</p>



<h3 class="wp-block-heading">著者にメッセージ</h3>



<p>コメントじゃなくて、個人的にやりとりしたい場合はこちらからどうぞ。お返事が遅くなるときもありますが、ご了承を。</p>


<p>間違いのご指摘など、コメントじゃなくて、個人的にやりとりしたい場合は<a class="c-link-text" href="/mail/" target="_blank" rel="noopener noreferrer" data-wpel-link="internal">こちらから</a>どうぞ。お返事が遅くなるときもありますが、ご了承を。</p>
					</div>
<!-- .entry-content -->

			<footer class="entry-footer">
							
			</footer><!-- .entry-footer -->
		</div>
<!-- .entry-wrapper -->
</article><!-- #post-## -->

			
				
<article id="post-9778" class="post-9778 post type-post status-publish format-standard has-post-thumbnail hentry category-android category-linux category-wordpress">
	<div class="entry-wrapper">



		<header class="entry-header">
					<span class="entry-format theme-genericon"></span>
	
			<div class="entry-meta">
				<span class="posted-on">投稿日: <a href="/2020/10/06/nextdns/" rel="bookmark noopener noreferrer" data-wpel-link="internal"><time class="entry-date published" datetime="2020-10-06T10:44:09+09:00">2020年10月6日</time><time class="updated" datetime="2020-10-06T16:11:54+09:00">2020年10月6日</time></a> </span><span class="posted-on">更新日:2020年10月6日</span> <span class="categories">  <a href="/category/android/" rel="category tag noopener noreferrer" data-wpel-link="internal">Android</a>, <a href="/category/linux/" rel="category tag noopener noreferrer" data-wpel-link="internal">Linux</a>, <a href="/category/wordpress/" rel="category tag noopener noreferrer" data-wpel-link="internal">WordPress</a></span>			</div>
<!-- .entry-meta -->

							<h1 class="entry-title"><a href="/2020/10/06/nextdns/" rel="bookmark noopener noreferrer" data-wpel-link="internal">まだ広告で消費してるの？　知らないと損!!　NextDNSを今すぐ設定して楽になろう！</a></h1>					</header><!-- .entry-header -->

		<div class="entry-content">
			
<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex w_b_div"><div class="w_b_wrap w_b_wrap_talk w_b_L w_b_flex w_b_div">
<div class="w_b_ava_box w_b_relative w_b_ava_L w_b_col w_b_f_n w_b_div">
<div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_L w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div">
<img loading="lazy" decoding="async" src="/wp-content/uploads/2020/09/abata.png" width="96" height="96" alt="じゃんくはっく" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img">
</div></div></div>
<div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">じゃんくはっく</div>
</div>
<div class="w_b_bal_box w_b_bal_L w_b_relative w_b_direction_L w_b_w100 w_b_div">
<div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewbox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "></polygon></svg></div>
<div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div"><div class="w_b_bal_wrap w_b_bal_wrap_L w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_L w_b_shadow_L w_b_ta_L w_b_div"><div class="w_b_quote w_b_div">
<p>今日はあまりマニアックなネタじゃないので、皆が有益になれると思うよ！</p>
</div></div></div></div>
</div>
</div></div></div>



<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex w_b_mla w_b_jc_fe w_b_div"><div class="w_b_wrap w_b_wrap_talk w_b_R w_b_flex w_b_jc_fe w_b_div">
<div class="w_b_bal_box w_b_bal_R w_b_relative w_b_direction_R w_b_w100 w_b_div">
<div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewbox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "></polygon></svg></div>
<div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div"><div class="w_b_bal_wrap w_b_bal_wrap_R w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_R w_b_shadow_R w_b_ta_L w_b_div"><div class="w_b_quote w_b_div">
<p>ちょっとタイトル煽ってますね？w</p>
</div></div></div></div>
</div>
<div class="w_b_ava_box w_b_relative w_b_ava_R w_b_col w_b_f_n w_b_div">
<div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_R w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div">
<img loading="lazy" decoding="async" src="/wp-content/uploads/2020/09/pi-.png" width="96" height="96" alt="ぴー" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img">
</div></div></div>
<div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">ぴー</div>
</div>
</div></div></div>



<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex w_b_div"><div class="w_b_wrap w_b_wrap_talk w_b_L w_b_flex w_b_div">
<div class="w_b_ava_box w_b_relative w_b_ava_L w_b_col w_b_f_n w_b_div">
<div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_L w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div">
<img loading="lazy" decoding="async" src="/wp-content/uploads/2020/09/abata.png" width="96" height="96" alt="じゃんくはっく" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img">
</div></div></div>
<div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">じゃんくはっく</div>
</div>
<div class="w_b_bal_box w_b_bal_L w_b_relative w_b_direction_L w_b_w100 w_b_div">
<div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewbox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "></polygon></svg></div>
<div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div"><div class="w_b_bal_wrap w_b_bal_wrap_L w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_L w_b_shadow_L w_b_ta_L w_b_div"><div class="w_b_quote w_b_div">
<p>そう？w　今回のネタは、広告を消す方法です！　これだったらみんなメリットあるよね！</p>
</div></div></div></div>
</div>
</div></div></div>



<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex w_b_mla w_b_jc_fe w_b_div"><div class="w_b_wrap w_b_wrap_talk w_b_R w_b_flex w_b_jc_fe w_b_div">
<div class="w_b_bal_box w_b_bal_R w_b_relative w_b_direction_R w_b_w100 w_b_div">
<div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewbox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "></polygon></svg></div>
<div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div"><div class="w_b_bal_wrap w_b_bal_wrap_R w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_R w_b_shadow_R w_b_ta_L w_b_div"><div class="w_b_quote w_b_div">
<p>でも、簡単じゃないとだめですよ！</p>
</div></div></div></div>
</div>
<div class="w_b_ava_box w_b_relative w_b_ava_R w_b_col w_b_f_n w_b_div">
<div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_R w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div">
<img loading="lazy" decoding="async" src="/wp-content/uploads/2020/09/pi-.png" width="96" height="96" alt="ぴー" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img">
</div></div></div>
<div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">ぴー</div>
</div>
</div></div></div>



<p>さて、今日のネタは「広告を消す！」です。しかも設定は簡単で、androidもiosもPC（mac・windows・Linuxも）でもぜーんぶ、簡単に設定できます。ぴーちゃんのご要望通り、設定は簡単なんで記事自体もすぐ終わっちゃいそうですが・・・</p>



<h3 class="wp-block-heading">さっそく設定！</h3>



<blockquote class="wp-block-quote">
<p>NextDNS</p>
<cite><a href="https://nextdns.io/" target="_blank" rel="noreferrer noopener external" data-wpel-link="external" class="wpel-icon-right">https://nextdns.io<span class="wpel-icon wpel-image wpel-icon-1"></span></a></cite>
</blockquote>



<p>まず、ここにアクセスして設定をゲットしましょう。以下のように説明が出ますのでその通りにするだけです。例えばandroidの場合は以下です。</p>



<div class="wp-block-image"><figure class="aligncenter size-large"><img loading="lazy" decoding="async" width="913" height="391" src="/wp-content/uploads/2020/10/NextDNS-setting.png" alt="" class="wp-image-9781" srcset="/wp-content/uploads/2020/10/NextDNS-setting.png 913w, /wp-content/uploads/2020/10/NextDNS-setting-768x329.png 768w" sizes="(max-width: 913px) 100vw, 913px"></figure></div>



<p>****.dns.nextdns.io をコピペします。そして、説明の通りスマホの設定からプライベートDNSをコピペして保存するだけOKです。</p>



<div class="wp-block-image"><figure class="aligncenter size-large"><img loading="lazy" decoding="async" width="432" height="864" src="/wp-content/uploads/2020/10/nextdns.png" alt="" class="wp-image-9780"></figure></div>



<p>実際に広告が消えたか確認してみましょう。あと、NextDNSはアカウント作っておいたほうがいいです。以下、確認できて気に入ったら登録して使ってみましょうね！</p>



<h3 class="wp-block-heading">広告が消える！！！</h3>



<p>さて、今回は説明するために、まださっきの「保存」ボタンは押していません。この状態で、例えば smartnewsのアプリを開きます。ブラウザでどこか広告が表示されるページを開いてもいいのですが、アプリ上の広告も消えますのでその一例です。</p>



<div class="wp-block-image"><figure class="aligncenter size-large"><img loading="lazy" decoding="async" width="431" height="864" src="/wp-content/uploads/2020/10/smartnews.png" alt="" class="wp-image-9782"></figure></div>



<p>ご覧のように中央にがっつりと、広告が表示されていますよね。smartnewsは好きなんすが、この広告が非常にうっとうしい！んですよね。これは見るべき情報なのか、広告なのかいちいち判断しないといけません。</p>



<p>　で、さきほどの保存（設定）ボタンを押して、NextDNSの設定をイキにさせます。SmartNewsは、↓下に引っ張り情報をリロードします。キャッシュが効いてうまく情報が更新されない場合は、一度アプリをタスクから終了して起動しなおしてみてください。</p>



<div class="wp-block-image"><figure class="aligncenter size-large"><img loading="lazy" decoding="async" width="431" height="864" src="/wp-content/uploads/2020/10/smartnews-1.png" alt="" class="wp-image-9783"></figure></div>



<p>なんということでしょう！　中央にデカデカと表示されていた広告はもうありません。それに、どのタブに行っても、もう紛らわしい広告が表示されていません！</p>



<h3 class="wp-block-heading">仕組みの概略</h3>



<p>広告を表示するためには、そのURLにアクセスする必要があります。URLにアクセスするためには、そのURLに含まれるドメイン名をIPに変換する必要があります。それを解決するのは通常、DNSのポート53応答によって行われます。プライベートDNSは、DNS問い合わせをどこか違うポートで暗号化通信しているようです。そしてNextDNSに名前解決を問い合わせ、広告関連のURLは全部、名前解決されなずブロックされる・したがって広告は表示できない・という事が原理の概要です。</p>



<p>　つまり、この仕組みなのでブラウザ上でもアプリ上でも広告が消えるというわけです。</p>



<h3 class="wp-block-heading">スマホ上でDNSのパケット採取</h3>



<p>上記の推論の一部を実際に確認してみたいと思います。まず、さきほど設定したプレイベートDNSの設定をOffにします。そして、スマホ側でDNS関連のポート53応答をキャプチャー（tcpdump）します。そして、smartnewsを起動してみます。</p>



<pre class="wp-block-code"><code>$ sudo tcpdump -i wlan0 -nn port 53
：：
09:48:34.548342 IP 192.168.1.47.59746 > 192.168.1.1.53: 8385+ A? conf.smartnews-ads.com. (40)
09:48:34.766102 IP 192.168.1.1.53 > 192.168.1.47.59746: 8385 3/0/0 CNAME conf.smartnews-ads.com.edgekey.net., CNAME e802.g.akamaiedge.net., A 23.41.23.121 (136)
09:48:35.137376 IP 192.168.1.47.58770 > 192.168.1.1.53: 34097+ AAAA? web.facebook.com. (34)
09:48:35.166724 IP 192.168.1.1.53 > 192.168.1.47.58770: 34097 3/0/0 CNAME star.facebook.com., CNAME star.c10r.facebook.com., AAAA 2a03:2880:f00f:1:face:b00c:0:1 (105)
09:48:35.167288 IP 192.168.1.47.50930 > 192.168.1.1.53: 56757+ A? web.facebook.com. (34)
09:48:35.370994 IP 192.168.1.1.53 > 192.168.1.47.50930: 56757 3/0/0 CNAME star.facebook.com., CNAME star.c10r.facebook.com., A 31.13.82.1 (93)
09:48:36.332043 IP 192.168.1.47.53699 > 192.168.1.1.53: 35334+ A? www.smartnews.com. (35)
09:48:36.342106 IP 192.168.1.47.59887 > 192.168.1.1.53: 26778+ A? thumbnail.smartnews-ads.com. (45)
09:48:36.426088 IP 192.168.1.47.2835 > 192.168.1.1.53: 19416+ AAAA? mp.smartnews.com. (34)
09:48:36.573501 IP 192.168.1.1.53 > 192.168.1.47.53699: 35334 3/0/0 CNAME any.smartnews.com.edgekey.net., CNAME e1393.d.akamaiedge.net., A 23.41.23.236 (127)
09:48:36.738275 IP 192.168.1.1.53 > 192.168.1.47.59887: 26778 3/0/0 CNAME any.smartnews-ads.com.edgekey.net., CNAME e802.g.akamaiedge.net., A 23.41.23.121 (140)
09:48:36.758832 IP 192.168.1.1.53 > 192.168.1.47.2835: 19416 4/0/0 CNAME any-dual.smartnews.com.edgekey.net., CNAME e1393.dscksd.akamaiedge.net., AAAA 2600:140b:4800:394::571, AAAA 2600:140b:4800:3a2::571 (176)
09:48:36.759283 IP 192.168.1.47.20694 > 192.168.1.1.53: 5578+ A? mp.smartnews.com. (34)
09:48:36.928482 IP 192.168.1.47.7412 > 192.168.1.1.53: 31103+ A? imasdk.googleapis.com. (39)
09:48:36.970033 IP 192.168.1.1.53 > 192.168.1.47.20694: 5578 3/0/0 CNAME any-dual.smartnews.com.edgekey.net., CNAME e1393.dscksd.akamaiedge.net., A 23.47.133.205 (136)
09:48:37.190502 IP 192.168.1.1.53 > 192.168.1.47.7412: 31103 1/0/0 A 172.217.161.234 (55)
09:48:37.703602 IP 192.168.1.47.64201 > 192.168.1.1.53: 65301+ AAAA? www.googleapis.com. (36)
09:48:37.722921 IP 192.168.1.1.53 > 192.168.1.47.64201: 65301 4/0/0 AAAA 2404:6800:400a:809::200a, AAAA 2404:6800:400a:80c::200a, AAAA 2404:6800:400a:80b::200a, AAAA 2404:6800:400a:808::200a (148)
09:48:37.744633 IP 192.168.1.47.61439 > 192.168.1.1.53: 61508+ AAAA? r4---sn-3pm7sn7k.googlevideo.com. (50)
09:48:37.764935 IP 192.168.1.1.53 > 192.168.1.47.61439: 61508 2/0/0 CNAME r4.sn-3pm7sn7k.googlevideo.com., AAAA 2404:6800:400e:4::a (107)
09:48:37.765776 IP 192.168.1.47.51232 > 192.168.1.1.53: 57935+ A? r4---sn-3pm7sn7k.googlevideo.com. (50)
09:48:37.980047 IP 192.168.1.1.53 > 192.168.1.47.51232: 57935 2/0/0 CNAME r4.sn-3pm7sn7k.googlevideo.com., A 74.125.171.106 (95)
09:48:39.222221 IP 192.168.1.47.52047 > 192.168.1.1.53: 31868+ AAAA? r5---sn-3pm7dn7r.googlevideo.com. (50)
09:48:39.247036 IP 192.168.1.1.53 > 192.168.1.47.52047: 31868 2/0/0 CNAME r5.sn-3pm7dn7r.googlevideo.com., AAAA 2404:6800:400a:19::a (107)
09:48:39.247652 IP 192.168.1.47.24883 > 192.168.1.1.53: 34181+ A? r5---sn-3pm7dn7r.googlevideo.com. (50)
09:48:39.443678 IP 192.168.1.1.53 > 192.168.1.47.24883: 34181 2/0/0 CNAME r5.sn-3pm7dn7r.googlevideo.com., A 74.125.102.202 (95)
09:48:40.359428 IP 192.168.1.47.34298 > 192.168.1.1.53: 12112+ AAAA? play.googleapis.com. (37)
09:48:40.383957 IP 192.168.1.1.53 > 192.168.1.47.34298: 12112 1/0/0 AAAA 2404:6800:400a:806::200a (65)
09:48:40.384632 IP 192.168.1.47.27441 > 192.168.1.1.53: 62063+ A? play.googleapis.com. (37)
09:48:40.607511 IP 192.168.1.1.53 > 192.168.1.47.27441: 62063 1/0/0 A 172.217.161.202 (53)
09:48:45.191301 IP 192.168.1.47.38030 > 192.168.1.1.53: 9923+ A? pagead2.googleadservices.com. (46)
09:48:45.191846 IP 192.168.1.47.45560 > 192.168.1.1.53: 4539+ A? googleads.g.doubleclick.net. (45)
09:48:45.489110 IP 192.168.1.1.53 > 192.168.1.47.38030: 9923 2/0/0 CNAME pagead.l.doubleclick.net., A 172.217.161.194 (100)
09:48:45.589661 IP 192.168.1.1.53 > 192.168.1.47.45560: 4539 2/0/0 CNAME pagead46.l.doubleclick.net., A 172.217.26.98 (86)</code></pre>



<p>192.168.1.1は、ルータアドレス、192.168.1.47はスマホです。</p>



<p>スマートニュース側には広告が表示されています。どれが広告関連の問い合わせかは不明です　しかし、ここではそれはあまり重要ではありません。そこを追うのはやめて、次にプレイベートDNSを設定し、同じようにポート53をキャプチャーしてみます。</p>



<pre class="wp-block-code"><code>$ sudo tcpdump -i wlan0 -nn port 53
：：
パケットが流れません！</code></pre>



<p>はい、このようにプライベートDNSを設定しているとDNS問い合わせであるポート53応答には何もキャプチャーされません。しかし、実際には広告がない状態で表示されています。つまり、名前解決の問い合わせはどこか違う経路でやっていることになります。ちょっと専門的になりますが以下にその説明があります。</p>



<blockquote class="wp-block-quote">
<p>DNS暗号化について</p>
<cite><a href="https://blog.cloudflare.com/jp/dns-encryption-explained-jp/" target="_blank" rel="noreferrer noopener external" class="broken_link wpel-icon-right" data-wpel-link="external">https://blog.cloudflare.com/jp/dns-encryption-explained-jp/<span class="wpel-icon wpel-image wpel-icon-1"></span></a></cite>
</blockquote>



<p>どうやら、DoT（tcp/853）とDoH（tcp/443）かのどちらかのようですね。</p>



<p>　どこがブロックされたのかは、NextDNSのログに載っています。他にも面白い機能がありますので、いつか紹介してみたいと思います。</p>



<h3 class="wp-block-heading">まとめ</h3>



<p>今回、なんとなくわかったのは以下となります。</p>



<p>・NextDNSは、ちゃんと広告が消える！<br>・仕組みは、DNSの問い合わせを検閲し、ブロックしてくれるようだ<br>・プレイベートDNSは、ポート53ではなく違うポートで通信しているようだ（暗号化については未確認）<br>・DNS over TLS（DoT）または、DNS over HTTPS（DoH）と略されるようだ<br>・ポートはそれぞれ、DoT（tcp/853）とDoH（tcp/443）が使われるようだ<br>・プラットフォームに依存しないので、NextDNSは神アプリ（サービス）だと思う<br>・パケット（今だとギガと表現ですかねw）の消費も節約できる</p>



<h3 class="wp-block-heading">あとがき</h3>



<p>ちょっとブラウジングすると、すぐ広告にぶち当たりますよね。でもNextDNSがあれば、かなりこの消耗が少なくなります。今の所、知ってる人だけ使っている機能で、広告業界はこれに対抗する術がまったくありません。今後、どうなるのでしょうかね。</p>



<h3 class="wp-block-heading">著者にメッセージ</h3>



<p>記事の間違いや指摘事項など、コメントじゃなくて、個人的にやりとりしたい場合はこちらからどうぞ。お返事が遅くなるときもありますが、ご了承を。</p>


<p>間違いのご指摘など、コメントじゃなくて、個人的にやりとりしたい場合は<a class="c-link-text" href="/mail/" target="_blank" rel="noopener noreferrer" data-wpel-link="internal">こちらから</a>どうぞ。お返事が遅くなるときもありますが、ご了承を。</p>
					</div>
<!-- .entry-content -->

			<footer class="entry-footer">
							
			</footer><!-- .entry-footer -->
		</div>
<!-- .entry-wrapper -->
</article><!-- #post-## -->

			
				
<article id="post-9758" class="post-9758 post type-post status-publish format-standard has-post-thumbnail hentry category-android category-linux category-wordpress">
	<div class="entry-wrapper">



		<header class="entry-header">
					<span class="entry-format theme-genericon"></span>
	
			<div class="entry-meta">
				<span class="posted-on">投稿日: <a href="/2020/10/05/pixel3android11rroot/" rel="bookmark noopener noreferrer" data-wpel-link="internal"><time class="entry-date published" datetime="2020-10-05T05:23:17+09:00">2020年10月5日</time><time class="updated" datetime="2021-07-04T21:17:42+09:00">2021年7月4日</time></a> </span><span class="posted-on">更新日:2021年7月4日</span> <span class="categories">  <a href="/category/android/" rel="category tag noopener noreferrer" data-wpel-link="internal">Android</a>, <a href="/category/linux/" rel="category tag noopener noreferrer" data-wpel-link="internal">Linux</a>, <a href="/category/wordpress/" rel="category tag noopener noreferrer" data-wpel-link="internal">WordPress</a></span>			</div>
<!-- .entry-meta -->

							<h1 class="entry-title"><a href="/2020/10/05/pixel3android11rroot/" rel="bookmark noopener noreferrer" data-wpel-link="internal">Pixel3・android11(R)正式リリース版でroot化！</a></h1>					</header><!-- .entry-header -->

		<div class="entry-content">
			
<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex w_b_div"><div class="w_b_wrap w_b_wrap_talk w_b_L w_b_flex w_b_div">
<div class="w_b_ava_box w_b_relative w_b_ava_L w_b_col w_b_f_n w_b_div">
<div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_L w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div">
<img loading="lazy" decoding="async" src="/wp-content/uploads/2020/09/abata.png" width="96" height="96" alt="じゃんくはっく" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img">
</div></div></div>
<div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">じゃんくはっく</div>
</div>
<div class="w_b_bal_box w_b_bal_L w_b_relative w_b_direction_L w_b_w100 w_b_div">
<div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewbox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "></polygon></svg></div>
<div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div"><div class="w_b_bal_wrap w_b_bal_wrap_L w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_L w_b_shadow_L w_b_ta_L w_b_div"><div class="w_b_quote w_b_div">
<p>Pixel3をAndroid11でroot化したよ！</p>
</div></div></div></div>
</div>
</div></div></div>



<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex w_b_mla w_b_jc_fe w_b_div"><div class="w_b_wrap w_b_wrap_talk w_b_R w_b_flex w_b_jc_fe w_b_div">
<div class="w_b_bal_box w_b_bal_R w_b_relative w_b_direction_R w_b_w100 w_b_div">
<div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewbox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "></polygon></svg></div>
<div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div"><div class="w_b_bal_wrap w_b_bal_wrap_R w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_R w_b_shadow_R w_b_ta_L w_b_div"><div class="w_b_quote w_b_div">
<p>どんなメリットがあるの？</p>
</div></div></div></div>
</div>
<div class="w_b_ava_box w_b_relative w_b_ava_R w_b_col w_b_f_n w_b_div">
<div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_R w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div">
<img loading="lazy" decoding="async" src="/wp-content/uploads/2020/09/pi-.png" width="96" height="96" alt="ぴー" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img">
</div></div></div>
<div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">ぴー</div>
</div>
</div></div></div>



<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex w_b_div"><div class="w_b_wrap w_b_wrap_talk w_b_L w_b_flex w_b_div">
<div class="w_b_ava_box w_b_relative w_b_ava_L w_b_col w_b_f_n w_b_div">
<div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_L w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div">
<img loading="lazy" decoding="async" src="/wp-content/uploads/2020/09/abata.png" width="96" height="96" alt="じゃんくはっく" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img">
</div></div></div>
<div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">じゃんくはっく</div>
</div>
<div class="w_b_bal_box w_b_bal_L w_b_relative w_b_direction_L w_b_w100 w_b_div">
<div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewbox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "></polygon></svg></div>
<div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div"><div class="w_b_bal_wrap w_b_bal_wrap_L w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_L w_b_shadow_L w_b_ta_L w_b_div"><div class="w_b_quote w_b_div">
<p>それは色々ありすぎて、目的によるね！</p>
</div></div></div></div>
</div>
</div></div></div>



<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex w_b_mla w_b_jc_fe w_b_div"><div class="w_b_wrap w_b_wrap_talk w_b_R w_b_flex w_b_jc_fe w_b_div">
<div class="w_b_bal_box w_b_bal_R w_b_relative w_b_direction_R w_b_w100 w_b_div">
<div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewbox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "></polygon></svg></div>
<div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div"><div class="w_b_bal_wrap w_b_bal_wrap_R w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_R w_b_shadow_R w_b_ta_L w_b_div"><div class="w_b_quote w_b_div">
<p>そんなマニアックなネタ、需要あるの？</p>
</div></div></div></div>
</div>
<div class="w_b_ava_box w_b_relative w_b_ava_R w_b_col w_b_f_n w_b_div">
<div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_R w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div">
<img loading="lazy" decoding="async" src="/wp-content/uploads/2020/09/pi-.png" width="96" height="96" alt="ぴー" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img">
</div></div></div>
<div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">ぴー</div>
</div>
</div></div></div>



<p>はいー！　ぴーちゃんの言う通り、マニアックネタになります。しかし、root化によるメリットは結構あります。もちろんデメリットもありますが、実際にいろいろ触って体験してみましょう。あと自己責任でよろしくね！真似して何か不利益が起きても著者は知りませんよ。</p>



<h3 class="wp-block-heading">そもそも、root化ってなに？</h3>



<p>このブログの趣旨としては、なるべく専用用語を使わずわかりやすく一般の人にも理解してもらいたい・そー著者は思っております。</p>



<div class="wp-block-word-balloon-word-balloon-block"><div class="w_b_box w_b_w100 w_b_flex w_b_mla w_b_jc_fe w_b_div"><div class="w_b_wrap w_b_wrap_talk w_b_R w_b_flex w_b_jc_fe w_b_div">
<div class="w_b_bal_box w_b_bal_R w_b_relative w_b_direction_R w_b_w100 w_b_div">
<div class="w_b_space w_b_mp0 w_b_div"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1" height="38" viewbox="0 0 1 1" fill="transparent" stroke="transparent" stroke-miterlimit="10" class="w_b_db w_b_mp0"><polygon fill="transparent" stroke="transparent" points="0,1 0,1 0,1 0,1 "></polygon></svg></div>
<div class="w_b_bal_outer w_b_flex w_b_mp0 w_b_relative w_b_div"><div class="w_b_bal_wrap w_b_bal_wrap_R w_b_div"><div class="w_b_bal w_b_relative w_b_talk w_b_talk_R w_b_shadow_R w_b_ta_L w_b_div"><div class="w_b_quote w_b_div">
<p>すべて使わないのは無理があるわね！</p>
</div></div></div></div>
</div>
<div class="w_b_ava_box w_b_relative w_b_ava_R w_b_col w_b_f_n w_b_div">
<div class="w_b_icon_wrap w_b_relative w_b_div"><div class="w_b_ava_wrap w_b_direction_R w_b_mp0 w_b_div"><div class="w_b_ava_effect w_b_relative w_b_oh w_b_radius w_b_size_M w_b_div">
<img loading="lazy" decoding="async" src="/wp-content/uploads/2020/09/pi-.png" width="96" height="96" alt="ぴー" class="w_b_ava_img w_b_w100 w_b_h100  w_b_mp0 w_b_img">
</div></div></div>
<div class="w_b_name w_b_w100 w_b_lh w_b_name_C w_b_ta_C w_b_mp0 w_b_div">ぴー</div>
</div>
</div></div></div>



<blockquote class="wp-block-quote">
<p>root化 (Android OS)<br>出典: フリー百科事典『ウィキペディア（Wikipedia）』</p>
<cite><a href="https://ja.wikipedia.org/wiki/Root%E5%8C%96_(Android_OS)" target="_blank" rel="noreferrer noopener external" data-wpel-link="external" class="wpel-icon-right">https://ja.wikipedia.org/wiki/Root%E5%8C%96_(Android_OS)<span class="wpel-icon wpel-image wpel-icon-1"></span></a></cite>
</blockquote>



<p>wikiではこのように説明されていますね。一言で言えば、Androidの最高管理権限をゲットするということです。一体、この権限を取得して何をするのか？　ということが、本来大事ですよね。目的があってこそのroot化です。</p>



<h3 class="wp-block-heading">root化して何するの・・・？</h3>



<p>今回、スマホ（Pixel3）をroot化したいなと思った１つの大きな目的はtermux です。Termuxは、root化しなくてもいろんなアプリが動作する大変面白い神アプリですが、1024ポート未満は、root権限がないと動作しません。例えば、nginxを80番ポートで動作させようとすると以下のようになります。</p>



<pre class="wp-block-code"><code>$ nginx
nginx: &#091;warn] the "user" directive makes sense only if the master process runs with super-user privileges, ignored in /data/data/com.termux/files/usr/etc/nginx/nginx.conf:3
nginx: &#091;emerg] bind() to 0.0.0.0:80 failed (13: Permission denied)</code></pre>



<p>このようにroot権限がないと、バインドできないんです。WEBサーバ以外にも、例えばDNSの53ポートや、SSLの443など、なるべくそのままのポートで動作させたいものがあります。root化していれば、この制限がなくなります。つまり、今の所、内部向けDNSと、WEB・SSLサーバをスマホで動作させたいのが root化の大きな目的です。</p>



<p>　現在、このブログが動作している Umidigi F2というスマホにもtermuxが動作していて、そこでは8080と8443ポートで動作しているWordPressがあります。現在は外向け用に、グローバルIP＋ポートをプライベートIP＋内部ポートに変換して運用していますが、内部からのアクセスだとUターンNATができないルータの影響で、内部ネットワークからはドメイン名でWordPressにアクセスできないのです。ポート変換がなければ、内部向けDNSを作ればシンプルに解決できますので、ポート53で動作する省電力DNSサーバとWEB/SSLサーバが欲しかったわけです。まだ検討中なので、実運用するかどうかはわかりません。</p>



<p>　というわけで、Pixel3のroot化やってみましょうか。</p>



<h3 class="wp-block-heading">ステップ１　概要</h3>



<p>こういうのは、全体像が見えていることが大事です。今回、Pixel3のAndroid11最新バージョンの状態でroot化をどのようにするか、要点をまとめてみます。</p>



<p>・Magiskというツールを使い、twrpは使わない<br>・Magiskを使い、純正ファクトリーイメージに含まれるBootにパッチする<br>・adb純正ツールで、BootをPixelに書き込む<br>・Termuxはroot権限を利用できるようMagiskに設定しておく</p>



<p>root化というのは、Bootプロセスの一部に細工を加えその後に展開されるOSイメージのroot権限を奪取して、永続化できるよう書き換えるというものです。Pixelの場合は、ブートローダは普通にだれでもアンロックできますので boot.imgを程よく書き換えればその後マウントされる中でrootがイキの状態に持っていけるということです。</p>



<p>他にも違うやり方はあると思いますが、Magiskというツールがなかなかよかったので、今回はこれでやることにします。boot中にどのような手法でやっているのか（一部、脆弱性を利用していると思いますが）、その具体的な手法については未調査です。</p>



<h3 class="wp-block-heading">ステップ２　必要なツールと準備</h3>



<p>さて、まずは前準備が大切です。</p>



<blockquote class="wp-block-quote">
<p>SDK・プラットフォームツール<br>：：<br>これは最新にしておいてね！</p>
<cite><a href="https://developer.android.com/studio/releases/platform-tools.html" target="_blank" rel="noreferrer noopener external" data-wpel-link="external" class="wpel-icon-right">https://developer.android.com/studio/releases/platform-tools.html<span class="wpel-icon wpel-image wpel-icon-1"></span></a></cite>
</blockquote>



<p>AndroidStudioから、最新にする方法もあります。また入れてあれば上記からDLして、本来入っているところに上書きしておけばOKです。現在の最新は以下のバージョンです。</p>



<pre class="wp-block-code"><code>$ adb --version
Android Debug Bridge version 1.0.41
Version 30.0.4-6686687</code></pre>



<p>次はファクトリーイメージをダウンロードしておきます。</p>



<blockquote class="wp-block-quote">
<p>Factory Image<br>::<br>&#8220;blueline&#8221; for Pixel 3<br>::<br>11.0.0 (RP1A.200720.009, Sep 2020)</p>
<cite><a href="https://developers.google.com/android/images" target="_blank" rel="noreferrer noopener external" data-wpel-link="external" class="wpel-icon-right">https://developers.google.com/android/images<span class="wpel-icon wpel-image wpel-icon-1"></span></a></cite>
</blockquote>



<p>Pixel3のコードネームは、bluline です。これの現在最新の11.0.0 (RP1A.200720.009, Sep 2020)をダウンロードしておきます。コマンドでやる場合は以下のようになります。著者は、ルート直下にsrcディレクトリ作ってますが、別にどこでやってもいいです。パスが長くなるのが嫌だっただけです。</p>



<pre class="wp-block-code"><code>$ sudo mkdir /src
$ sudo chmod 777 /src
$ cd /src
$ wget https://dl.google.com/dl/android/aosp/blueline-rp1a.200720.009-factory-145e4cc4.zip
$ shasum -a 256 blueline-rp1a.200720.009-factory-145e4cc4.zip

　※ Checksum を確認しておいてね。RP1A.200720.009</code></pre>



<h3 class="wp-block-heading">ステップ３　ファクトリーイメージを展開</h3>



<p>ダウンロードしたファイルを展開します。</p>



<pre class="wp-block-code"><code>$ unzip blueline-rp1a.200720.009-factory-145e4cc4.zip 
$ tree blueline-rp1a.200720.009
blueline-rp1a.200720.009
├── bootloader-blueline-b1c1-0.3-6623201.img
├── flash-all.bat
├── flash-all.sh
├── flash-base.sh
├── image-blueline-rp1a.200720.009.zip
└── radio-blueline-g845-00107-200702-b-6648703.img</code></pre>



<p>さらにその中のイメージファイルを展開</p>



<pre class="wp-block-code"><code>$ mv blueline-rp1a.200720.009/*.zip ./
$ mv blueline-rp1a.200720.009/*.img ./
$ unzip image-blueline-rp1a.200720.009.zip -d image-blueline-rp1a.200720.009
$ tree image-blueline-rp1a.200720.009
image-blueline-rp1a.200720.009
├── android-info.txt
├── boot.img
├── dtbo.img
├── product.img
├── super_empty.img
├── system.img
├── system_ext.img
├── system_other.img
├── vbmeta.img
└── vendor.img

$ mv image-blueline-rp1a.200720.009/boot.img ./</code></pre>



<h3 class="wp-block-heading">ステップ４　Magisk Managerを入れる</h3>



<p>スマホのアプリなので、スマホから操作です。</p>



<blockquote class="wp-block-quote">
<p>Magisk Manager Canary<br>　※ Magisk Manager Canary から、APKをDLして入れておく</p>
<cite><a href="https://github.com/topjohnwu/Magisk" target="_blank" rel="noreferrer noopener external" data-wpel-link="external" class="wpel-icon-right">https://github.com/topjohnwu/Magisk<span class="wpel-icon wpel-image wpel-icon-1"></span></a></cite>
</blockquote>



<div class="wp-block-image"><figure class="aligncenter size-large"><img loading="lazy" decoding="async" width="397" height="122" src="/wp-content/uploads/2020/10/MagiskManagerCanary.png" alt="" class="wp-image-9763"></figure></div>



<p>Canaryビルドのほうが、現時点ではインターフェイスが新しくなって使いやすかったです。</p>



<h3 class="wp-block-heading">ステップ５　boot.img をスマホに転送</h3>



<p>さきほど、ファクトリーイメージの中から取り出した、boot.img をスマホに転送しておきます。adb コマンドでやる場合は以下</p>



<pre class="wp-block-code"><code>$ adb push ./boot.img /sdcard/Download/
./boot.img: 1 file pushed, 0 skipped. 83.1 MB/s (67108864 bytes in 0.770s)</code></pre>



<p>Android File Transfer とか使ってもOKです。何らかの方法でスマホに転送してね。</p>



<h3 class="wp-block-heading">ステップ６　Magisk Managerアプリでパッチ</h3>



<p>スマホに転送したboot.imgをMagisk Managerアプリでパッチを当てます。</p>



<blockquote class="wp-block-quote">
<p>追記<br>　Magiskマネージャーはインストール後、設定→更新チャンネルをβ版に変更しておきます。記事執筆時。</p>
<cite>匿名さんからコメントいただきましたので修正、補足しておきます。</cite>
</blockquote>



<div class="wp-block-image"><figure class="aligncenter size-large"><img loading="lazy" decoding="async" width="887" height="833" src="/wp-content/uploads/2020/10/ss1-magisk-install.png" alt="" class="wp-image-9764" srcset="/wp-content/uploads/2020/10/ss1-magisk-install.png 887w, /wp-content/uploads/2020/10/ss1-magisk-install-768x721.png 768w" sizes="(max-width: 887px) 100vw, 887px"></figure></div>



<p>boot.imgを選択して、LET`S GO→　です。</p>



<div class="wp-block-image"><figure class="aligncenter size-large"><img loading="lazy" decoding="async" width="936" height="499" src="/wp-content/uploads/2020/10/boot-img-patch.png" alt="" class="wp-image-9765" srcset="/wp-content/uploads/2020/10/boot-img-patch.png 936w, /wp-content/uploads/2020/10/boot-img-patch-768x409.png 768w" sizes="(max-width: 936px) 100vw, 936px"></figure></div>



<p>All done! でパッチ当て成功です。</p>



<h3 class="wp-block-heading">ステップ７　magisk_patched.img をPCにダウンロード</h3>



<p>PCから、adbコマンドでパッチしたboot.imgを書き込みますのでさきほどの、magisk_patched.img をPCにダウンロードしておきます。adb コマンドでやる場合は、以下</p>



<pre class="wp-block-code"><code>$ adb pull /sdcard/Download/magisk_patched.img ./
/sdcard/Download/magisk_patched.img: 1 file pulled, 0 skipped. 69.2 MB/s (67108864 bytes in 0.925s)</code></pre>



<h3 class="wp-block-heading">ステップ８　OEMロック解除</h3>



<p>開発者オプションから、OEMロック解除をOnにしておきます。あと、USBデバックはONで。</p>



<p>一回、電源を落とします。電源オフの状態から電源＋ボリューム下キーを長押し “Fastboot Mode” を起動。</p>



<pre class="wp-block-code"><code>$ fastboot flashing unlock</code></pre>



<p>スマホ本体よりボリューム↑↓キーで『Unlock the bootloader』を選択、電源キーで確定します。</p>



<pre class="wp-block-code"><code>$ fastboot reboot</code></pre>



<h3 class="wp-block-heading">ステップ９　PCからイメージファイルを書込</h3>



<p>PCから、adbコマンドでいろいろ書き込みます。まずは、スマホをFastboot modeにしておきます。</p>



<blockquote class="wp-block-quote"><p>・再起動＞ボリューム下キー<br>　→ Fastboot mode でスマホが起動</p></blockquote>



<p>PCから認識されているか確認しておきます。以下のようにシリアルナンバーが表示されていればOKです。</p>



<pre class="wp-block-code"><code>$ fastboot devices
8*******6	fastboot</code></pre>



<p>ファクトリーイメージに含まれる、以下ファイルを書き込みます。</p>



<pre class="wp-block-code"><code>$ fastboot flash bootloader &lt;以下ファイルをD&amp;D&gt;

 bootloader-blueline-b1c1-0.3-6623201.img</code></pre>



<blockquote class="wp-block-quote">
<p>追記<br>　半角スペース忘れないこと→例：fastboot flash bootloader&lt;半角スペース&gt;&lt;ファイルパス&gt;</p>
<cite>匿名さんから、つまずいた点をご指摘いただきましたので記載しておきますね。</cite>
</blockquote>



<p>実行例は以下です。</p>



<pre class="wp-block-code"><code>$ fastboot flash bootloader ./bootloader-blueline-b1c1-0.3-6623201.img
Sending 'bootloader_b' (8537 KB)                   OKAY &#091;  0.290s]
Writing 'bootloader_b'                             (bootloader) Flashing Pack version b1c1-0.3-6623201
(bootloader) Flashing partition table for Lun = 0
(bootloader) Flashing partition table for Lun = 1
(bootloader) Flashing partition table for Lun = 2
(bootloader) Flashing partition table for Lun = 4
(bootloader) Flashing partition table for Lun = 5
(bootloader) Flashing partition msadp_b
(bootloader) Flashing partition xbl_b
(bootloader) Flashing partition xbl_config_b
(bootloader) Flashing partition aop_b
(bootloader) Flashing partition tz_b
(bootloader) Flashing partition hyp_b
(bootloader) Flashing partition abl_b
(bootloader) Flashing partition keymaster_b
(bootloader) Flashing partition cmnlib_b
(bootloader) Flashing partition cmnlib64_b
(bootloader) Flashing partition devcfg_b
(bootloader) Flashing partition qupfw_b
(bootloader) Flashing partition storsec_b
(bootloader) Flashing partition logfs
OKAY &#091;  0.825s]
Finished. Total time: 1.384s</code></pre>



<p>で、このコマンドをやっておきます。</p>



<pre class="wp-block-code"><code>$ fastboot reboot bootloader</code></pre>



<p>実行例は以下です。</p>



<pre class="wp-block-code"><code>$ fastboot reboot bootloader
Rebooting into bootloader                          OKAY &#091;  0.081s]
Finished. Total time: 0.081s</code></pre>



<p>radioファイルを書き込みます。</p>



<pre class="wp-block-code"><code>$ fastboot flash radio &lt;以下ファイル&gt;

　radio-blueline-g845-00107-200702-b-6648703.img</code></pre>



<p>実行例は以下です。</p>



<pre class="wp-block-code"><code>$ fastboot flash radio ./radio-blueline-g845-00107-200702-b-6648703.img 
Sending 'radio_b' (71436 KB)                       OKAY &#091;  1.670s]
Writing 'radio_b'                                  (bootloader) Flashing Pack version SSD:g845-00107-200702-B-6648703
(bootloader) Flashing partition modem_b
OKAY &#091;  0.555s]
Finished. Total time: 2.495s</code></pre>



<p>で、このコマンドをやっておきます。</p>



<pre class="wp-block-code"><code>$ fastboot reboot bootloader</code></pre>



<p>実行例は先と同じなので省略です。</p>



<p>Android11の本体イメージを書き込みます。</p>



<pre class="wp-block-code"><code>$ fastboot --skip-reboot update &lt;以下ファイル&gt;

　image-blueline-rp1a.200720.009.zip</code></pre>



<p>実行例です。ここは少し時間がかかります。途中リブートしましたがほっとけばOKです。</p>



<pre class="wp-block-code"><code>$ fastboot --skip-reboot update ./image-blueline-rp1a.200720.009.zip 
--------------------------------------------
Bootloader Version...: b1c1-0.3-6623201
Baseband Version.....: g845-00107-200702-B-6648703
Serial Number........: 8*******6
--------------------------------------------
extracting android-info.txt (0 MB) to RAM...
Checking 'product'                                 OKAY &#091;  0.058s]
Checking 'version-bootloader'                      OKAY &#091;  0.060s]
Checking 'version-baseband'                        OKAY &#091;  0.060s]
Setting current slot to 'b'                        OKAY &#091;  0.396s]
extracting boot.img (64 MB) to disk... took 0.503s
archive does not contain 'boot.sig'
Sending 'boot_b' (65536 KB)                        OKAY &#091;  1.531s]
Writing 'boot_b'                                   OKAY &#091;  0.468s]
extracting dtbo.img (8 MB) to disk... took 0.017s
archive does not contain 'dtbo.sig'
Sending 'dtbo_b' (8192 KB)                         OKAY &#091;  0.280s]
Writing 'dtbo_b'                                   OKAY &#091;  0.170s]
archive does not contain 'dt.img'
archive does not contain 'recovery.img'
extracting vbmeta.img (0 MB) to disk... took 0.000s
archive does not contain 'vbmeta.sig'
Sending 'vbmeta_b' (8 KB)                          OKAY &#091;  0.120s]
Writing 'vbmeta_b'                                 OKAY &#091;  0.067s]
archive does not contain 'vbmeta_system.img'
archive does not contain 'vendor_boot.img'
extracting super_empty.img (0 MB) to disk... took 0.000s
Rebooting into fastboot                            OKAY &#091;  0.060s]
&lt; waiting for any device &gt;

　※端末がリブート　＞　もう一度リブート
　　＞fastbootd 画面になる
　　＞さらに、コマンドが流れる

Sending 'system_b' (4 KB)                          OKAY &#091;  0.001s]
Updating super partition                           OKAY &#091;  0.006s]
Deleting 'system_a'                                OKAY &#091;  0.005s]
Deleting 'vendor_a'                                OKAY &#091;  0.005s]
Resizing 'product_b'                               OKAY &#091;  0.005s]
Resizing 'system_b'                                OKAY &#091;  0.005s]
Resizing 'system_ext_b'                            OKAY &#091;  0.006s]
Resizing 'vendor_b'                                OKAY &#091;  0.006s]
archive does not contain 'boot_other.img'
archive does not contain 'odm.img'
extracting product.img (1871 MB) to disk... took 14.110s
archive does not contain 'product.sig'
Resizing 'product_b'                               OKAY &#091;  0.006s]
Sending sparse 'product_b' 1/8 (262140 KB)         OKAY &#091;  6.294s]
Writing 'product_b'                                OKAY &#091;  2.634s]
Sending sparse 'product_b' 2/8 (262140 KB)         OKAY &#091;  6.388s]
Writing 'product_b'                                OKAY &#091;  1.599s]
Sending sparse 'product_b' 3/8 (262140 KB)         OKAY &#091;  6.376s]
Writing 'product_b'                                OKAY &#091;  1.598s]
Sending sparse 'product_b' 4/8 (262140 KB)         OKAY &#091;  6.399s]
Writing 'product_b'                                OKAY &#091;  1.648s]
Sending sparse 'product_b' 5/8 (262140 KB)         OKAY &#091;  6.375s]
Writing 'product_b'                                OKAY &#091;  1.612s]
Sending sparse 'product_b' 6/8 (262140 KB)         OKAY &#091;  6.385s]
Writing 'product_b'                                OKAY &#091;  1.625s]
Sending sparse 'product_b' 7/8 (262140 KB)         OKAY &#091;  6.404s]
Writing 'product_b'                                OKAY &#091;  1.586s]
Sending sparse 'product_b' 8/8 (81204 KB)          OKAY &#091;  2.447s]
Writing 'product_b'                                OKAY &#091;  0.579s]
extracting system.img (784 MB) to disk... took 4.331s
archive does not contain 'system.sig'
Resizing 'system_b'                                OKAY &#091;  0.006s]
Sending sparse 'system_b' 1/4 (262140 KB)          OKAY &#091;  6.089s]
Writing 'system_b'                                 OKAY &#091;  2.647s]
Sending sparse 'system_b' 2/4 (262140 KB)          OKAY &#091;  6.203s]
Writing 'system_b'                                 OKAY &#091;  1.607s]
Sending sparse 'system_b' 3/4 (262140 KB)          OKAY &#091;  6.149s]
Writing 'system_b'                                 OKAY &#091;  1.631s]
Sending sparse 'system_b' 4/4 (16400 KB)           OKAY &#091;  0.806s]
Writing 'system_b'                                 OKAY &#091;  0.171s]
extracting system_ext.img (183 MB) to disk... took 0.944s
archive does not contain 'system_ext.sig'
Resizing 'system_ext_b'                            OKAY &#091;  0.005s]
Sending 'system_ext_b' (187564 KB)                 OKAY &#091;  4.167s]
Writing 'system_ext_b'                             OKAY &#091;  2.209s]
extracting system_other.img (68 MB) to disk... took 0.385s
archive does not contain 'system.sig'
Sending 'system_a' (69880 KB)                      OKAY &#091;  1.558s]
Writing 'system_a'                                 OKAY &#091;  0.420s]
extracting vendor.img (408 MB) to disk... took 2.065s
archive does not contain 'vendor.sig'
Resizing 'vendor_b'                                OKAY &#091;  0.005s]
Sending sparse 'vendor_b' 1/2 (262140 KB)          OKAY &#091;  5.997s]
Writing 'vendor_b'                                 OKAY &#091;  2.631s]
Sending sparse 'vendor_b' 2/2 (156584 KB)          OKAY &#091;  3.825s]
Writing 'vendor_b'                                 OKAY &#091;  1.022s]
archive does not contain 'vendor_dlkm.img'
archive does not contain 'vendor_other.img'
Finished. Total time: 162.157s</code></pre>



<p>最後です。スマホでパッチしたboot.imgを書き込みます。</p>



<pre class="wp-block-code"><code>$ fastboot flash boot &lt;以下パッチしたimgファイル&gt;

　magisk_patched.img</code></pre>



<p>実行例です。</p>



<pre class="wp-block-code"><code>$ fastboot flash boot ./magisk_patched.img 
Sending 'boot_b' (65536 KB)                        OKAY &#091;  1.454s]
Writing 'boot_b'                                   OKAY &#091;  0.392s]
Finished. Total time: 1.855s</code></pre>



<h3 class="wp-block-heading">ステップ１０　スマホをリブートする</h3>



<p>スマホの画面は、fastbootd になっていますので、「Reboot system now」が選択された状態で電源ボタンを押します。リブートは40秒くらいして、OSが起動しました。</p>



<h3 class="wp-block-heading">ステップ１１　確認</h3>



<p>Magiskアプリは以下のようになっていれば、root化は成功しています。Termuxからrootパッケージを入れて、su　すると許可画面が出るのでOKしておけば以下のようにスーパーユーザーの画面に出てきます。</p>



<div class="wp-block-image"><figure class="aligncenter size-large"><img loading="lazy" decoding="async" width="945" height="887" src="/wp-content/uploads/2020/10/magisk-ss.png" alt="" class="wp-image-9767" srcset="/wp-content/uploads/2020/10/magisk-ss.png 945w, /wp-content/uploads/2020/10/magisk-ss-768x721.png 768w" sizes="(max-width: 945px) 100vw, 945px"></figure></div>



<p>逆にアプリから隠したい場合は、MagiskHideからアプリを選択しておきます。Termux側からの操作、例えばrootパッケージを入れてどうなったかなどは次回また紹介することにします。あと、<strong>OSの自動アップデートはOff</strong>にしておいてくださいね。ここ、めちゃ大事。開発者オプションから選択できます。</p>



<h3 class="wp-block-heading">まとめ</h3>



<p>今回、作業してみての感想やまとめは以下です。</p>



<p>・root化は久しぶりで事情がだいぶ変わっていた<br>・Magiskアプリはよくできている<br>・TWRPは、対応したらやってみる。たぶんUmidigiF2でやることになりそう<br>・日本語で、まとまっているサイトがなかった<br>・今年中にまたOSアップデートが来ると思うが、その時は状況みて導入するか考える</p>



<h3 class="wp-block-heading">あとがき</h3>



<p>ステップ９はわけるべきだったか迷いました。まぁ、流れは書き込みなのでいいかな？w　で、root化すると、tcpdump も使い放題、他のアプリ領域のデータも見放題となり、随分いろいろと物色してしまいました。また、当初の目標だった、1024ポート以下のサービス起動も問題なくできていろいろできることが増えそうです。</p>



<p>　あと、termux-root-packagesを見ていると知らないアプリがあって興味津々です。たとえば、tincとかっていうVPNデーモン。これすごく使いやすそうです。</p>



<h3 class="wp-block-heading">著者にメッセージ</h3>



<p>コメントじゃなくて、個人的にやりとりしたい場合はこちらからどうぞ。お返事が遅くなるときもありますが、ご了承を。</p>


<p>間違いのご指摘など、コメントじゃなくて、個人的にやりとりしたい場合は<a class="c-link-text" href="/mail/" target="_blank" rel="noopener noreferrer" data-wpel-link="internal">こちらから</a>どうぞ。お返事が遅くなるときもありますが、ご了承を。</p>
					</div>
<!-- .entry-content -->

			<footer class="entry-footer">
							
			</footer><!-- .entry-footer -->
		</div>
<!-- .entry-wrapper -->
</article><!-- #post-## -->

			
			
	<nav class="navigation posts-navigation" aria-label="投稿">
		<h2 class="screen-reader-text">投稿ナビゲーション</h2>
		<div class="nav-links">
<div class="nav-previous"><a href="/category/wordpress/page/5/" data-wpel-link="internal" rel="noopener noreferrer">過去の投稿</a></div>
<div class="nav-next"><a href="/category/wordpress/page/3/" data-wpel-link="internal" rel="noopener noreferrer">新しい投稿</a></div>
</div>
	</nav>
		
		</main><!-- #main -->
	</section><!-- #primary -->


	</div>
<!-- #content -->

	<footer id="colophon" class="site-footer wrap" role="contentinfo">
		<div class="site-info">
			Copyleft - all rights reversed.
			<span class="sep"> | </span>
			JunkHack 2011 - 2024
			<span class="sep"> | </span>
			<a href="/about-junkhack/" data-wpel-link="internal" rel="noopener noreferrer">運営者情報<span class="gf"></span></a><span class="sep"> | </span>
			<a href="/mail/" data-wpel-link="internal" rel="noopener noreferrer">お問い合わせ<span class="gf"></span></a><span class="sep"> | </span>
			<a href="/privacy/" data-wpel-link="internal" rel="noopener noreferrer">プライバシーポリシー<span class="gf"></span></a>
		</div>
<!-- .site-info -->

	</footer><!-- #colophon -->
</div>
<!-- #page -->

                <div id="mouse">
        <div class="inner">
            <h1>Search</h1>
            
                    <form class="uagb-search-wrapper" role="search" action="https://hack.gpl.jp/" method="get">
                        <div class="uagb-search-form__container" role="tablist">

                            <input placeholder="Search" class="uagb-search-form__input aa-input" id="searchbox" type="search" name="s" title="Search" autocomplete="off" spellcheck="false" role="combobox" aria-autocomplete="list" aria-expanded="false" aria-owns="algolia-autocomplete-listbox-0" dir="auto" style="width: 80%;">
                            <pre aria-hidden="true" style="position: absolute; visibility: hidden; white-space: pre; font-family: &quot;Open Sans&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: 400; word-spacing: 0px; letter-spacing: normal; text-indent: 0px; text-rendering: auto; text-transform: none;">
                            </pre>
                        </div>
                    </form>

            <table>
                <tr>
                    <td class="divide">
                        <table>
                                <tr>
        <td>
<span class="cmd">g</span> <span class="thn">then</span> <span class="cmd">h</span>
</td>
        <td><span class="help">&rarr; home</span></td>
        <td>Go to front page</td>
    </tr>    
                                    <tr>
        <td>
<span class="cmd">g</span> <span class="thn">then</span> <span class="cmd">l</span>
</td>
        <td><span class="help">&rarr; list</span></td>
        <td>Go to List page</td>
    </tr>    
                                    <tr>
        <td>
<span class="cmd">g</span> <span class="thn">then</span> <span class="cmd">s</span>
</td>
        <td><span class="help">&rarr; search</span></td>
        <td>Go to Search page</td>
    </tr>    
                            </table>                    
                    </td>
                    <td class="divide">
                        <table>
                                <tr>
        <td><span class="cmd">/ or esc</span></td>
        <td><span class="help">&rarr; search</span></td>
        <td>Toggle , Close the search box</td>
    </tr>    
                                    <tr>
        <td><span class="cmd">.</span></td>
        <td><span class="help">&rarr; Focus</span></td>
        <td>Focus the search box</td>
    </tr>    
                                    <tr>
        <td><span class="cmd">Mouse Click</span></td>
        <td><span class="help">&rarr; unFocus</span></td>
        <td>unFocus the search box</td>
    </tr>    
                            </table>
                    
                    </td>
                </tr>
            </table>  
        </div>
    </div>
    			<div id="zip-ai-sidebar"></div>
		<script type="text/javascript">var algolia = {"debug":false,"application_id":"8DCPU3VRUU","search_api_key":"052e9cca1df4182ec607663dc893c235","powered_by_enabled":true,"query":"","autocomplete":{"sources":[{"index_id":"posts_post","index_name":"wp_posts_post","label":"投稿","admin_name":"投稿","position":10,"max_suggestions":10,"tmpl_suggestion":"autocomplete-post-suggestion","enabled":true}],"input_selector":"input[name='s']:not(.no-autocomplete):not(#adminbar-search)"},"indices":{"searchable_posts":{"name":"wp_searchable_posts","id":"searchable_posts","enabled":true,"replicas":[]},"posts_post":{"name":"wp_posts_post","id":"posts_post","enabled":true,"replicas":[]}}};</script>
<script type="text/html" id="tmpl-autocomplete-header"><div class="autocomplete-header">
		<div class="autocomplete-header-title">{{{ data.label }}}</div>
		<div class="clear"></div>
	</div></script>

<script type="text/html" id="tmpl-autocomplete-post-suggestion">
	<a class="suggestion-link" href="{{ data.permalink }}" title="{{ data.post_title }}">
		<# if ( data.images.thumbnail ) { #>
			<img class="suggestion-post-thumbnail" src="{{ data.images.thumbnail.url }}" alt="{{ data.post_title }}">
		<# } #>
		<div class="suggestion-post-attributes">
			<span class="suggestion-post-title">{{{ data._highlightResult.post_title.value }}}</span>
			<# if ( data._snippetResult['content'] ) { #>
				<span class="suggestion-post-content">{{{ data._snippetResult['content'].value }}}</span>
			<# } #>
		</div>
			</a>
</script>

<script type="text/html" id="tmpl-autocomplete-term-suggestion">
	<a class="suggestion-link" href="{{ data.permalink }}" title="{{ data.name }}">
		<svg viewBox="0 0 21 21" width="21" height="21">
			<svg width="21" height="21" viewBox="0 0 21 21">
				<path
					d="M4.662 8.72l-1.23 1.23c-.682.682-.68 1.792.004 2.477l5.135 5.135c.7.693 1.8.688 2.48.005l1.23-1.23 5.35-5.346c.31-.31.54-.92.51-1.36l-.32-4.29c-.09-1.09-1.05-2.06-2.15-2.14l-4.3-.33c-.43-.03-1.05.2-1.36.51l-.79.8-2.27 2.28-2.28 2.27zm9.826-.98c.69 0 1.25-.56 1.25-1.25s-.56-1.25-1.25-1.25-1.25.56-1.25 1.25.56 1.25 1.25 1.25z"
					fill-rule="evenodd"></path>
			</svg>
		</svg>
		<span class="suggestion-post-title">{{{ data._highlightResult.name.value }}}</span>
	</a>
</script>

<script type="text/html" id="tmpl-autocomplete-user-suggestion">
	<a class="suggestion-link user-suggestion-link" href="{{ data.posts_url }}" title="{{ data.display_name }}">
		<# if ( data.avatar_url ) { #>
			<img class="suggestion-user-thumbnail" src="{{ data.avatar_url }}" alt="{{ data.display_name }}">
		<# } #>
		<span class="suggestion-post-title">{{{ data._highlightResult.display_name.value }}}</span>
	</a>
</script>

<script type="text/html" id="tmpl-autocomplete-footer">
	<div class="autocomplete-footer">
		<div class="autocomplete-footer-branding">
			<a href="#" class="algolia-powered-by-link" title="Algolia">
				<svg width="150px" height="25px" viewbox="0 0 572 64"><path fill="#36395A" d="M16 48.3c-3.4 0-6.3-.6-8.7-1.7A12.4 12.4 0 0 1 1.9 42C.6 40 0 38 0 35.4h6.5a6.7 6.7 0 0 0 3.9 6c1.4.7 3.3 1.1 5.6 1.1 2.2 0 4-.3 5.4-1a7 7 0 0 0 3-2.4 6 6 0 0 0 1-3.4c0-1.5-.6-2.8-1.9-3.7-1.3-1-3.3-1.6-5.9-1.8l-4-.4c-3.7-.3-6.6-1.4-8.8-3.4a10 10 0 0 1-3.3-7.9c0-2.4.6-4.6 1.8-6.4a12 12 0 0 1 5-4.3c2.2-1 4.7-1.6 7.5-1.6s5.5.5 7.6 1.6a12 12 0 0 1 5 4.4c1.2 1.8 1.8 4 1.8 6.7h-6.5a6.4 6.4 0 0 0-3.5-5.9c-1-.6-2.6-1-4.4-1s-3.2.3-4.4 1c-1.1.6-2 1.4-2.6 2.4-.5 1-.8 2-.8 3.1a5 5 0 0 0 1.5 3.6c1 1 2.6 1.7 4.7 1.9l4 .3c2.8.2 5.2.8 7.2 1.8 2.1 1 3.7 2.2 4.9 3.8a9.7 9.7 0 0 1 1.7 5.8c0 2.5-.7 4.7-2 6.6a13 13 0 0 1-5.6 4.4c-2.4 1-5.2 1.6-8.4 1.6Zm35.6 0c-2.6 0-4.8-.4-6.7-1.3a13 13 0 0 1-4.7-3.5 17.1 17.1 0 0 1-3.6-10.4v-1c0-2 .3-3.8 1-5.6a13 13 0 0 1 7.3-8.3 15 15 0 0 1 6.3-1.4A13.2 13.2 0 0 1 64 24.3c1 2.2 1.6 4.6 1.6 7.2V34H39.4v-4.3h21.8l-1.8 2.2c0-2-.3-3.7-.9-5.1a7.3 7.3 0 0 0-2.7-3.4c-1.2-.7-2.7-1.1-4.6-1.1s-3.4.4-4.7 1.3a8 8 0 0 0-2.9 3.6c-.6 1.5-.9 3.3-.9 5.4 0 2 .3 3.7 1 5.3a7.9 7.9 0 0 0 2.8 3.7c1.3.8 3 1.3 5 1.3s3.8-.5 5.1-1.3c1.3-1 2.1-2 2.4-3.2h6a11.8 11.8 0 0 1-7 8.7 16 16 0 0 1-6.4 1.2ZM80 48c-2.2 0-4-.3-5.7-1a8.4 8.4 0 0 1-3.7-3.3 9.7 9.7 0 0 1-1.3-5.2c0-2 .5-3.8 1.5-5.2a9 9 0 0 1 4.3-3.1c1.8-.7 4-1 6.7-1H89v4.1h-7.5c-2 0-3.4.5-4.4 1.4-1 1-1.6 2.1-1.6 3.6s.5 2.7 1.6 3.6c1 1 2.5 1.4 4.4 1.4 1.1 0 2.2-.2 3.2-.7 1-.4 1.9-1 2.6-2 .6-1 1-2.4 1-4.2l1.7 2.1c-.2 2-.7 3.8-1.5 5.2a9 9 0 0 1-3.4 3.3 12 12 0 0 1-5.3 1Zm9.5-.7v-8.8h-1v-10c0-1.8-.5-3.2-1.4-4.1-1-1-2.4-1.4-4.2-1.4a142.9 142.9 0 0 0-10.2.4v-5.6a74.8 74.8 0 0 1 8.6-.4c3 0 5.5.4 7.5 1.2s3.4 2 4.4 3.6c1 1.7 1.4 4 1.4 6.7v18.4h-5Zm12.9 0V17.8h5v12.3h-.2c0-4.2 1-7.4 2.8-9.5a11 11 0 0 1 8.3-3.1h1v5.6h-2a9 9 0 0 0-6.3 2.2c-1.5 1.5-2.2 3.6-2.2 6.4v15.6h-6.4Zm34.4 1a15 15 0 0 1-6.6-1.3c-1.9-.9-3.4-2-4.7-3.5a15.5 15.5 0 0 1-2.7-5c-.6-1.7-1-3.6-1-5.4v-1c0-2 .4-3.8 1-5.6a15 15 0 0 1 2.8-4.9c1.3-1.5 2.8-2.6 4.6-3.5a16.4 16.4 0 0 1 13.3.2c2 1 3.5 2.3 4.8 4a12 12 0 0 1 2 6H144c-.2-1.6-1-3-2.2-4.1a7.5 7.5 0 0 0-5.2-1.7 8 8 0 0 0-4.7 1.3 8 8 0 0 0-2.8 3.6 13.8 13.8 0 0 0 0 10.3c.6 1.5 1.5 2.7 2.8 3.6s2.8 1.3 4.8 1.3c1.5 0 2.7-.2 3.8-.8a7 7 0 0 0 2.6-2c.7-1 1-2 1.2-3.2h6.2a11 11 0 0 1-2 6.2 15.1 15.1 0 0 1-11.8 5.5Zm19.7-1v-40h6.4V31h-1.3c0-3 .4-5.5 1.1-7.6a9.7 9.7 0 0 1 3.5-4.8A9.9 9.9 0 0 1 172 17h.3c3.5 0 6 1.1 7.9 3.5 1.7 2.3 2.6 5.7 2.6 10v16.8h-6.4V29.6c0-2.1-.6-3.8-1.8-5a6.4 6.4 0 0 0-4.8-1.8c-2 0-3.7.7-5 2a7.8 7.8 0 0 0-1.9 5.5v17h-6.4Zm63.8 1a12.2 12.2 0 0 1-10.9-6.2 19 19 0 0 1-1.8-7.3h1.4v12.5h-5.1v-40h6.4v19.8l-2 3.5c.2-3.1.8-5.7 1.9-7.7a11 11 0 0 1 4.4-4.5c1.8-1 3.9-1.5 6.1-1.5a13.4 13.4 0 0 1 12.8 9.1c.7 1.9 1 3.8 1 6v1c0 2.2-.3 4.1-1 6a13.6 13.6 0 0 1-13.2 9.4Zm-1.2-5.5a8.4 8.4 0 0 0 7.9-5c.7-1.5 1.1-3.3 1.1-5.3s-.4-3.8-1.1-5.3a8.7 8.7 0 0 0-3.2-3.6 9.6 9.6 0 0 0-9.2-.2 8.5 8.5 0 0 0-3.3 3.2c-.8 1.4-1.3 3-1.3 5v2.3a9 9 0 0 0 1.3 4.8 9 9 0 0 0 3.4 3c1.4.7 2.8 1 4.4 1Zm27.3 3.9-10-28.9h6.5l9.5 28.9h-6Zm-7.5 12.2v-5.7h4.9c1 0 2-.1 2.9-.4a4 4 0 0 0 2-1.4c.4-.7.9-1.6 1.2-2.7l8.6-30.9h6.2l-9.3 32.4a14 14 0 0 1-2.5 5 8.9 8.9 0 0 1-4 2.8c-1.5.6-3.4.9-5.6.9h-4.4Zm9-12.2v-5.2h6.4v5.2H248Z"></path><path fill="#003DFF" d="M534.4 9.1H528a.8.8 0 0 1-.7-.7V1.8c0-.4.2-.7.6-.8l6.5-1c.4 0 .8.2.9.6v7.8c0 .4-.4.7-.8.7zM428 35.2V.8c0-.5-.3-.8-.7-.8h-.2l-6.4 1c-.4 0-.7.4-.7.8v35c0 1.6 0 11.8 12.3 12.2.5 0 .8-.4.8-.8V43c0-.4-.3-.7-.6-.8-4.5-.5-4.5-6-4.5-7zm106.5-21.8H528c-.4 0-.7.4-.7.8v34c0 .4.3.8.7.8h6.5c.4 0 .8-.4.8-.8v-34c0-.5-.4-.8-.8-.8zm-17.7 21.8V.8c0-.5-.3-.8-.8-.8l-6.5 1c-.4 0-.7.4-.7.8v35c0 1.6 0 11.8 12.3 12.2.4 0 .8-.4.8-.8V43c0-.4-.3-.7-.7-.8-4.4-.5-4.4-6-4.4-7zm-22.2-20.6a16.5 16.5 0 0 1 8.6 9.3c.8 2.2 1.3 4.8 1.3 7.5a19.4 19.4 0 0 1-4.6 12.6 14.8 14.8 0 0 1-5.2 3.6c-2 .9-5.2 1.4-6.8 1.4a21 21 0 0 1-6.7-1.4 15.4 15.4 0 0 1-8.6-9.3 21.3 21.3 0 0 1 0-14.4 15.2 15.2 0 0 1 8.6-9.3c2-.8 4.3-1.2 6.7-1.2s4.6.4 6.7 1.2zm-6.7 27.6c2.7 0 4.7-1 6.2-3s2.2-4.3 2.2-7.8-.7-6.3-2.2-8.3-3.5-3-6.2-3-4.7 1-6.1 3c-1.5 2-2.2 4.8-2.2 8.3s.7 5.8 2.2 7.8 3.5 3 6.2 3zm-88.8-28.8c-6.2 0-11.7 3.3-14.8 8.2a18.6 18.6 0 0 0 4.8 25.2c1.8 1.2 4 1.8 6.2 1.7s.1 0 .1 0h.9c4.2-.7 8-4 9.1-8.1v7.4c0 .4.3.7.8.7h6.4a.7.7 0 0 0 .7-.7V14.2c0-.5-.3-.8-.7-.8h-13.5zm6.3 26.5a9.8 9.8 0 0 1-5.7 2h-.5a10 10 0 0 1-9.2-14c1.4-3.7 5-6.3 9-6.3h6.4v18.3zm152.3-26.5h13.5c.5 0 .8.3.8.7v33.7c0 .4-.3.7-.8.7h-6.4a.7.7 0 0 1-.8-.7v-7.4c-1.2 4-4.8 7.4-9 8h-.1a4.2 4.2 0 0 1-.5.1h-.9a10.3 10.3 0 0 1-7-2.6c-4-3.3-6.5-8.4-6.5-14.2 0-3.7 1-7.2 3-10 3-5 8.5-8.3 14.7-8.3zm.6 28.4c2.2-.1 4.2-.6 5.7-2V21.7h-6.3a9.8 9.8 0 0 0-9 6.4 10.2 10.2 0 0 0 9.1 13.9h.5zM452.8 13.4c-6.2 0-11.7 3.3-14.8 8.2a18.5 18.5 0 0 0 3.6 24.3 10.4 10.4 0 0 0 13 .6c2.2-1.5 3.8-3.7 4.5-6.1v7.8c0 2.8-.8 5-2.2 6.3-1.5 1.5-4 2.2-7.5 2.2l-6-.3c-.3 0-.7.2-.8.5l-1.6 5.5c-.1.4.1.8.5 1h.1c2.8.4 5.5.6 7 .6 6.3 0 11-1.4 14-4.1 2.7-2.5 4.2-6.3 4.5-11.4V14.2c0-.5-.4-.8-.8-.8h-13.5zm6.3 8.2v18.3a9.6 9.6 0 0 1-5.6 2h-1a10.3 10.3 0 0 1-8.8-14c1.4-3.7 5-6.3 9-6.3h6.4zM291 31.5A32 32 0 0 1 322.8 0h30.8c.6 0 1.2.5 1.2 1.2v61.5c0 1.1-1.3 1.7-2.2 1l-19.2-17a18 18 0 0 1-11 3.4 18.1 18.1 0 1 1 18.2-14.8c-.1.4-.5.7-.9.6-.1 0-.3 0-.4-.2l-3.8-3.4c-.4-.3-.6-.8-.7-1.4a12 12 0 1 0-2.4 8.3c.4-.4 1-.5 1.6-.2l14.7 13.1v-46H323a26 26 0 1 0 10 49.7c.8-.4 1.6-.2 2.3.3l3 2.7c.3.2.3.7 0 1l-.2.2a32 32 0 0 1-47.2-28.6z"></path></svg>
			</a>
		</div>
	</div>
</script>

<script type="text/html" id="tmpl-autocomplete-empty"><div class="autocomplete-empty">
		クエリにマッチした結果はありません		<span class="empty-query">"{{ data.query }}"</span>
	</div></script>

<script type="text/javascript">
	window.addEventListener('load', function () {

		/* Initialize Algolia client */
		var client = algoliasearch( algolia.application_id, algolia.search_api_key );

		/**
		 * Algolia hits source method.
		 *
		 * This method defines a custom source to use with autocomplete.js.
		 *
		 * @param object $index Algolia index object.
		 * @param object $params Options object to use in search.
		 */
		var algoliaHitsSource = function( index, params ) {
			return function( query, callback ) {
				index
					.search( query, params )
					.then( function( response ) {
						callback( response.hits, response );
					})
					.catch( function( error ) {
						callback( [] );
					});
			}
		}

		/* Setup autocomplete.js sources */
		var sources = [];
		algolia.autocomplete.sources.forEach( function( config, i ) {
			var suggestion_template = wp.template( config[ 'tmpl_suggestion' ] );
			sources.push( {
				source: algoliaHitsSource( client.initIndex( config[ 'index_name' ] ), {
					hitsPerPage: config[ 'max_suggestions' ],
					attributesToSnippet: [
						'content:10'
					],
					highlightPreTag: '__ais-highlight__',
					highlightPostTag: '__/ais-highlight__'
				} ),
				templates: {
					header: function () {
						return wp.template( 'autocomplete-header' )( {
							label: _.escape( config[ 'label' ] )
						} );
					},
					suggestion: function ( hit ) {
						if ( hit.escaped === true ) {
							return suggestion_template( hit );
						}
						hit.escaped = true;

						for ( var key in hit._highlightResult ) {
							/* We do not deal with arrays. */
							if ( typeof hit._highlightResult[ key ].value !== 'string' ) {
								continue;
							}
							hit._highlightResult[ key ].value = _.escape( hit._highlightResult[ key ].value );
							hit._highlightResult[ key ].value = hit._highlightResult[ key ].value.replace( /__ais-highlight__/g, '<em>' ).replace( /__\/ais-highlight__/g, '<\/em>' );
						}

						for ( var key in hit._snippetResult ) {
							/* We do not deal with arrays. */
							if ( typeof hit._snippetResult[ key ].value !== 'string' ) {
								continue;
							}

							hit._snippetResult[ key ].value = _.escape( hit._snippetResult[ key ].value );
							hit._snippetResult[ key ].value = hit._snippetResult[ key ].value.replace( /__ais-highlight__/g, '<em>' ).replace( /__\/ais-highlight__/g, '<\/em>' );
						}

						return suggestion_template( hit );
					}
				}
			} );

		} );

		/* Setup dropdown menus */
		document.querySelectorAll( algolia.autocomplete.input_selector ).forEach( function( element ) {

			var config = {
				debug: algolia.debug,
				hint: false,
				openOnFocus: true,
				appendTo: 'body',
				templates: {
					empty: wp.template( 'autocomplete-empty' )
				}
			};

			if ( algolia.powered_by_enabled ) {
				config.templates.footer = wp.template( 'autocomplete-footer' );
			}

			/* Instantiate autocomplete.js */
			var autocomplete = algoliaAutocomplete( element, config, sources )
				.on( 'autocomplete:selected', function ( e, suggestion ) {
					/* Redirect the user when we detect a suggestion selection. */
					window.location.href = suggestion.permalink ?? suggestion.posts_url; // Users use the `posts_url` property instead of `permalink`.
				} );

			/* Force the dropdown to be re-drawn on scroll to handle fixed containers. */
			window.addEventListener( 'scroll', function() {
				if ( autocomplete.autocomplete.getWrapper().style.display === "block" ) {
					autocomplete.autocomplete.close();
					autocomplete.autocomplete.open();
				}
			} );
		} );

		var algoliaPoweredLink = document.querySelector( '.algolia-powered-by-link' );
		if ( algoliaPoweredLink ) {
			algoliaPoweredLink.addEventListener( 'click', function( e ) {
				e.preventDefault();
				window.location = "https://www.algolia.com/?utm_source=WordPress&utm_medium=extension&utm_content=" + window.location.hostname + "&utm_campaign=poweredby";
			} );
		}
	});
</script>
<link rel="stylesheet" id="word_balloon_user_style-css" href="/wp-content/plugins/word-balloon/css/word_balloon_user.min.css?ver=4.20.4" type="text/css" media="all">
<link rel="stylesheet" id="word_balloon_skin_talk-css" href="/wp-content/plugins/word-balloon/css/skin/word_balloon_talk.min.css?ver=4.20.4" type="text/css" media="all">
<link rel="stylesheet" id="word_balloon_inview_style-css" href="/wp-content/plugins/word-balloon/css/word_balloon_inview.min.css?ver=4.20.4" type="text/css" media="all">
<script type="text/javascript" src="/wp-content/plugins/gpt3-ai-content-generator/public/js/wpaicg-form-shortcode.js" id="wpaicg-gpt-form-js"></script>
<script type="text/javascript" id="wpaicg-init-js-extra">
/* <![CDATA[ */
var wpaicgParams = {"ajax_url":"\/wp-admin\/admin-ajax.php","search_nonce":"78c33add8a","logged_in":"0","languages":{"source":"Sources","no_result":"No result found","wrong":"Something went wrong","prompt_strength":"Please enter a valid prompt strength value between 0 and 1.","num_inference_steps":"Please enter a valid number of inference steps value between 1 and 500.","guidance_scale":"Please enter a valid guidance scale value between 1 and 20.","error_image":"Please select least one image for generate","save_image_success":"Save images to media successfully","select_all":"Select All","unselect":"Unselect","select_save_error":"Please select least one image to save","alternative":"Alternative Text","title":"Title","edit_image":"Edit Image","caption":"Caption","description":"Description","save":"Save","removed_pdf":"Your pdf session is cleared"}};
/* ]]> */
</script>
<script type="text/javascript" src="/wp-content/plugins/gpt3-ai-content-generator/public/js/wpaicg-init.js" id="wpaicg-init-js"></script>
<script type="text/javascript" src="/wp-content/plugins/gpt3-ai-content-generator/public/js/wpaicg-chat.js" id="wpaicg-chat-script-js"></script>
<script type="text/javascript" src="/wp-includes/js/dist/vendor/wp-polyfill-inert.min.js?ver=3.1.2" id="wp-polyfill-inert-js"></script>
<script type="text/javascript" src="/wp-includes/js/dist/vendor/regenerator-runtime.min.js?ver=0.14.0" id="regenerator-runtime-js"></script>
<script type="text/javascript" src="/wp-includes/js/dist/vendor/wp-polyfill.min.js?ver=3.15.0" id="wp-polyfill-js"></script>
<script type="text/javascript" src="/wp-includes/js/dist/vendor/react.min.js?ver=18.2.0" id="react-js"></script>
<script type="text/javascript" src="/wp-includes/js/dist/vendor/react-dom.min.js?ver=18.2.0" id="react-dom-js"></script>
<script type="text/javascript" src="/wp-includes/js/dist/hooks.min.js?ver=c6aec9a8d4e5a5d543a1" id="wp-hooks-js"></script>
<script type="text/javascript" src="/wp-includes/js/dist/i18n.min.js?ver=7701b0c3857f914212ef" id="wp-i18n-js"></script>
<script type="text/javascript" id="wp-i18n-js-after">
/* <![CDATA[ */
wp.i18n.setLocaleData( { 'text directionltr': [ 'ltr' ] } );
/* ]]> */
</script>
<script type="text/javascript" src="/wp-includes/js/dist/url.min.js?ver=b4979979018b684be209" id="wp-url-js"></script>
<script type="text/javascript" id="wp-api-fetch-js-translations">
/* <![CDATA[ */
( function( domain, translations ) {
	var localeData = translations.locale_data[ domain ] || translations.locale_data.messages;
	localeData[""].domain = domain;
	wp.i18n.setLocaleData( localeData, domain );
} )( "default", {"translation-revision-date":"2024-01-25 12:43:48+0000","generator":"GlotPress\/4.0.0-beta.2","domain":"messages","locale_data":{"messages":{"":{"domain":"messages","plural-forms":"nplurals=1; plural=0;","lang":"ja_JP"},"You are probably offline.":["現在オフラインのようです。"],"Media upload failed. If this is a photo or a large image, please scale it down and try again.":["メディアのアップロードに失敗しました。 写真または大きな画像の場合は、縮小してもう一度お試しください。"],"The response is not a valid JSON response.":["返答が正しい JSON レスポンスではありません。"],"An unknown error occurred.":["不明なエラーが発生しました。"]}},"comment":{"reference":"wp-includes\/js\/dist\/api-fetch.js"}} );
/* ]]> */
</script>
<script type="text/javascript" src="/wp-includes/js/dist/api-fetch.min.js?ver=0fa4dabf8bf2c7adf21a" id="wp-api-fetch-js"></script>
<script type="text/javascript" id="wp-api-fetch-js-after">
/* <![CDATA[ */
wp.apiFetch.use( wp.apiFetch.createRootURLMiddleware( "https://hack.gpl.jp/wp-json/" ) );
wp.apiFetch.nonceMiddleware = wp.apiFetch.createNonceMiddleware( "786b4b5986" );
wp.apiFetch.use( wp.apiFetch.nonceMiddleware );
wp.apiFetch.use( wp.apiFetch.mediaUploadMiddleware );
wp.apiFetch.nonceEndpoint = "https://hack.gpl.jp/wp-admin/admin-ajax.php?action=rest-nonce";
/* ]]> */
</script>
<script type="text/javascript" src="/wp-includes/js/dist/dom-ready.min.js?ver=392bdd43726760d1f3ca" id="wp-dom-ready-js"></script>
<script type="text/javascript" id="wp-a11y-js-translations">
/* <![CDATA[ */
( function( domain, translations ) {
	var localeData = translations.locale_data[ domain ] || translations.locale_data.messages;
	localeData[""].domain = domain;
	wp.i18n.setLocaleData( localeData, domain );
} )( "default", {"translation-revision-date":"2024-01-25 12:43:48+0000","generator":"GlotPress\/4.0.0-beta.2","domain":"messages","locale_data":{"messages":{"":{"domain":"messages","plural-forms":"nplurals=1; plural=0;","lang":"ja_JP"},"Notifications":["通知"]}},"comment":{"reference":"wp-includes\/js\/dist\/a11y.js"}} );
/* ]]> */
</script>
<script type="text/javascript" src="/wp-includes/js/dist/a11y.min.js?ver=7032343a947cfccf5608" id="wp-a11y-js"></script>
<script type="text/javascript" src="/wp-includes/js/dist/deprecated.min.js?ver=73ad3591e7bc95f4777a" id="wp-deprecated-js"></script>
<script type="text/javascript" src="/wp-includes/js/dist/dom.min.js?ver=49ff2869626fbeaacc23" id="wp-dom-js"></script>
<script type="text/javascript" src="/wp-includes/js/dist/escape-html.min.js?ver=03e27a7b6ae14f7afaa6" id="wp-escape-html-js"></script>
<script type="text/javascript" src="/wp-includes/js/dist/element.min.js?ver=ed1c7604880e8b574b40" id="wp-element-js"></script>
<script type="text/javascript" src="/wp-includes/js/dist/is-shallow-equal.min.js?ver=20c2b06ecf04afb14fee" id="wp-is-shallow-equal-js"></script>
<script type="text/javascript" id="wp-keycodes-js-translations">
/* <![CDATA[ */
( function( domain, translations ) {
	var localeData = translations.locale_data[ domain ] || translations.locale_data.messages;
	localeData[""].domain = domain;
	wp.i18n.setLocaleData( localeData, domain );
} )( "default", {"translation-revision-date":"2024-01-25 12:43:48+0000","generator":"GlotPress\/4.0.0-beta.2","domain":"messages","locale_data":{"messages":{"":{"domain":"messages","plural-forms":"nplurals=1; plural=0;","lang":"ja_JP"},"Tilde":["チルダ"],"Backtick":["バックティック"],"Period":["ピリオド"],"Comma":["カンマ"]}},"comment":{"reference":"wp-includes\/js\/dist\/keycodes.js"}} );
/* ]]> */
</script>
<script type="text/javascript" src="/wp-includes/js/dist/keycodes.min.js?ver=3460bd0fac9859d6886c" id="wp-keycodes-js"></script>
<script type="text/javascript" src="/wp-includes/js/dist/priority-queue.min.js?ver=422e19e9d48b269c5219" id="wp-priority-queue-js"></script>
<script type="text/javascript" src="/wp-includes/js/dist/compose.min.js?ver=3189b344ff39fef940b7" id="wp-compose-js"></script>
<script type="text/javascript" src="/wp-includes/js/dist/vendor/moment.min.js?ver=2.29.4" id="moment-js"></script>
<script type="text/javascript" id="moment-js-after">
/* <![CDATA[ */
moment.updateLocale( 'ja', {"months":["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],"monthsShort":["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],"weekdays":["日曜日","月曜日","火曜日","水曜日","木曜日","金曜日","土曜日"],"weekdaysShort":["日","月","火","水","木","金","土"],"week":{"dow":1},"longDateFormat":{"LT":"g:i A","LTS":null,"L":null,"LL":"Y年n月j日","LLL":"Y年n月j日 g:i A","LLLL":null}} );
/* ]]> */
</script>
<script type="text/javascript" src="/wp-includes/js/dist/date.min.js?ver=936c461ad5dce9c2c8ea" id="wp-date-js"></script>
<script type="text/javascript" id="wp-date-js-after">
/* <![CDATA[ */
wp.date.setSettings( {"l10n":{"locale":"ja","months":["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],"monthsShort":["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],"weekdays":["日曜日","月曜日","火曜日","水曜日","木曜日","金曜日","土曜日"],"weekdaysShort":["日","月","火","水","木","金","土"],"meridiem":{"am":"am","pm":"pm","AM":"AM","PM":"PM"},"relative":{"future":"%s後","past":"%s前","s":"1秒","ss":"%d秒","m":"1分","mm":"%d分","h":"1時間","hh":"%d時間","d":"1日","dd":"%d日","M":"1ヶ月","MM":"%dヶ月","y":"1年","yy":"%d年"},"startOfWeek":1},"formats":{"time":"g:i A","date":"Y年n月j日","datetime":"Y年n月j日 g:i A","datetimeAbbreviated":"Y年n月j日 g:i A"},"timezone":{"offset":9,"string":"Asia\/Tokyo","abbr":"JST"}} );
/* ]]> */
</script>
<script type="text/javascript" src="/wp-includes/js/dist/html-entities.min.js?ver=36a4a255da7dd2e1bf8e" id="wp-html-entities-js"></script>
<script type="text/javascript" src="/wp-includes/js/dist/primitives.min.js?ver=6984e6eb5d6157c4fe44" id="wp-primitives-js"></script>
<script type="text/javascript" src="/wp-includes/js/dist/private-apis.min.js?ver=11cb2ebaa70a9f1f0ab5" id="wp-private-apis-js"></script>
<script type="text/javascript" src="/wp-includes/js/dist/redux-routine.min.js?ver=0be1b2a6a79703e28531" id="wp-redux-routine-js"></script>
<script type="text/javascript" src="/wp-includes/js/dist/data.min.js?ver=dc5f255634f3da29c8d5" id="wp-data-js"></script>
<script type="text/javascript" id="wp-data-js-after">
/* <![CDATA[ */
( function() {
	var userId = 0;
	var storageKey = "WP_DATA_USER_" + userId;
	wp.data
		.use( wp.data.plugins.persistence, { storageKey: storageKey } );
} )();
/* ]]> */
</script>
<script type="text/javascript" id="wp-rich-text-js-translations">
/* <![CDATA[ */
( function( domain, translations ) {
	var localeData = translations.locale_data[ domain ] || translations.locale_data.messages;
	localeData[""].domain = domain;
	wp.i18n.setLocaleData( localeData, domain );
} )( "default", {"translation-revision-date":"2024-01-25 12:43:48+0000","generator":"GlotPress\/4.0.0-beta.2","domain":"messages","locale_data":{"messages":{"":{"domain":"messages","plural-forms":"nplurals=1; plural=0;","lang":"ja_JP"},"%s applied.":["%sを適用しました。"],"%s removed.":["%sを削除しました。"]}},"comment":{"reference":"wp-includes\/js\/dist\/rich-text.js"}} );
/* ]]> */
</script>
<script type="text/javascript" src="/wp-includes/js/dist/rich-text.min.js?ver=6222504ebedf0627981b" id="wp-rich-text-js"></script>
<script type="text/javascript" src="/wp-includes/js/dist/warning.min.js?ver=122829a085511691f14d" id="wp-warning-js"></script>
<script type="text/javascript" id="wp-components-js-translations">
/* <![CDATA[ */
( function( domain, translations ) {
	var localeData = translations.locale_data[ domain ] || translations.locale_data.messages;
	localeData[""].domain = domain;
	wp.i18n.setLocaleData( localeData, domain );
} )( "default", {"translation-revision-date":"2024-01-25 12:43:48+0000","generator":"GlotPress\/4.0.0-beta.2","domain":"messages","locale_data":{"messages":{"":{"domain":"messages","plural-forms":"nplurals=1; plural=0;","lang":"ja_JP"},"December":["12月"],"November":["11月"],"October":["10月"],"September":["9月"],"August":["8月"],"July":["7月"],"June":["6月"],"May":["5月"],"April":["4月"],"March":["3月"],"February":["2月"],"January":["1月"],"Notice":["通知"],"Error notice":["エラー通知"],"Information notice":["情報の通知"],"Warning notice":["警告の通知"],"Focal point top position":["焦点先頭位置"],"Focal point left position":["焦点左位置"],"Scrollable section":["スクロール可能なセクション"],"Initial %d result loaded. Type to filter all available results. Use up and down arrow keys to navigate.":["最初の%d件の結果がロードされました。タイプするとすべての利用可能な結果を絞り込みます。上下の矢印キーで移動します。"],"Defaults":["デフォルト"],"Extra Extra Large":["超特大"],"Show details":["詳細を表示"],"Decrement":["減少"],"Increment":["増加"],"All options reset":["すべてのオプションをリセット"],"All options are currently hidden":["すべてのオプションは現在非表示"],"%s is now visible":["%s が表示されました"],"%s hidden and reset to default":["%s は非表示で、デフォルトにリセット"],"%s reset to default":["%s をデフォルトにリセット"],"XXL":["XXL"],"XL":["XL"],"L":["L"],"M":["M"],"S":["S"],"Unset":["リセット"],"%1$s. Selected":["%1$s。選択済み"],"%1$s. Selected. There is %2$d event":["%1$s。選択済み。%2$d件のイベントがあります"],"View next month":["翌月を表示"],"View previous month":["前月を表示"],"Border color and style picker":["枠線色とスタイルピッカー"],"Loading …":["読み込み中…"],"Bottom border":["下枠線"],"Right border":["右枠線"],"Left border":["左枠線"],"Top border":["上枠線"],"Close border color":["枠線の色を閉じる"],"Border color picker.":["枠線のカラーピッカー。"],"Border color and style picker.":["枠線とスタイルピッカー。"],"Custom color picker. The currently selected color is called \"%1$s\" and has a value of \"%2$s\".":["カスタムカラーピッカー。現在選択中の色は「%1$s」、値は「%2$s」です。"],"Link sides":["まとめて指定する"],"Unlink sides":["個別に指定する"],"Reset all":["すべてリセット"],"Button label to reveal tool panel options%s options":["%sオプション"],"Show %s":["%sを表示"],"Hide and reset %s":["%sを非表示にしてリセット"],"Reset %s":["%sをリセット"],"Search %s":["%sを検索"],"Set custom size":["カスタムサイズを設定"],"Use size preset":["サイズプリセットを使用"],"Currently selected font size: %s":["現在選択中のフォントサイズ: %s"],"Highlights":["ハイライト"],"Size of a UI elementExtra Large":["特大"],"Size of a UI elementLarge":["大"],"Size of a UI elementMedium":["中"],"Size of a UI elementSmall":["小"],"Size of a UI elementNone":["なし"],"Currently selected: %s":["現在の選択: %s"],"No selection":["選択なし"],"Reset colors":["色をリセット"],"Reset gradient":["グラデーションをリセット"],"Remove all colors":["すべての色を削除"],"Remove all gradients":["すべてのグラデーションを削除"],"Color options":["色のオプション"],"Gradient options":["グラデーションのオプション"],"Add color":["色を追加"],"Add gradient":["グラデーションを追加"],"Gradient name":["グラデーション名"],"Color %s":["色 %s"],"Color format":["色のフォーマット"],"Hex color":["16進数の色"],"Invalid item":["無効な項目"],"Shadows":["影"],"Duotone: %s":["デュオトーン: %s"],"Duotone code: %s":["デュオトーンコード: %s"],"%1$s. There is %2$d event":["%1$s。%2$d件のイベントがあります"],"Relative to root font size (rem)rems":["rem"],"Relative to parent font size (em)ems":["em"],"Points (pt)":["ポイント (pt)"],"Picas (pc)":["パイカ (pc)"],"Inches (in)":["インチ (in)"],"Millimeters (mm)":["ミリメートル (mm)"],"Centimeters (cm)":["センチメートル (cm)"],"x-height of the font (ex)":["フォントの x-height (ex)"],"Width of the zero (0) character (ch)":["文字 0 (ゼロ) の幅 (ch)"],"Viewport largest dimension (vmax)":["viewport の幅と高さの大きい方 (vmax)"],"Viewport smallest dimension (vmin)":["viewport の幅と高さの小さい方 (vmin)"],"Percent (%)":["パーセント (%)"],"Border width":["枠線の幅"],"Dotted":["点線"],"Dashed":["破線"],"Viewport height (vh)":["viewport の高さ (vh)"],"Viewport width (vw)":["viewport の幅 (vw)"],"Relative to root font size (rem)":["ルート要素に対して相対的なフォントサイズ (rem)"],"Relative to parent font size (em)":["親要素に対して相対的なフォントサイズ (em)"],"Pixels (px)":["ピクセル (px)"],"Percentage (%)":["パーセント指定 (%)"],"Vertical":["縦"],"Horizontal":["横"],"Close search":["検索を閉じる"],"Search in %s":["%sで検索"],"Select unit":["ユニットを選択"],"Radial":["放射状"],"Linear":["線形"],"Media preview":["メディアのプレビュー"],"Coordinated Universal Time":["協定世界時"],"Remove color":["色を削除"],"Color name":["色名"],"Reset search":["検索をリセット"],"Box Control":["ボックスコントロール"],"Alignment Matrix Control":["配置位置コントロール"],"Bottom Center":["下部中央"],"Center Right":["中央右"],"Center Left":["中央左"],"Top Center":["上部中央"],"Solid":["単色"],"Finish":["完了"],"Page %1$d of %2$d":["%1$dページ目 (%2$dページ中)"],"Guide controls":["ガイドコントロール"],"Gradient: %s":["グラデーション: %s"],"Gradient code: %s":["グラデーションコード: %s"],"Remove Control Point":["コントロールポイントを削除"],"Use your left or right arrow keys or drag and drop with the mouse to change the gradient position. Press the button to change the color or remove the control point.":["グラデーション位置を変更するには左右の矢印キーを使うか、マウスでドラッグアンドドロップしてください。色を変更したり、コントロールポイントを削除するにはボタンを押してください。"],"Gradient control point at position %1$s%% with color code %2$s.":["グラデーションのコントロールポイント位置 %1$s%%、カラーコード %2$s。"],"Extra Large":["特大"],"Small":["小"],"Angle":["角度"],"Separate with commas or the Enter key.":["半角コンマまたはエンターキーで区切ります。"],"Separate with commas, spaces, or the Enter key.":["半角コンマ、スペースまたはエンターキーで区切ります。"],"Copied!":["コピーしました。"],"%d result found.":["%d件の結果が見つかりました。"],"Number of items":["項目数"],"Category":["カテゴリー"],"Z → A":["Z → A"],"A → Z":["A → Z"],"Oldest to newest":["投稿順 (過去から)"],"Newest to oldest":["投稿順 (最新から)"],"Order by":["並び順"],"Dismiss this notice":["この通知を非表示"],"%1$s (%2$s of %3$s)":["%1$s (%2$s\/%3$s)"],"Remove item":["項目を削除"],"Item removed.":["項目を削除しました。"],"Item added.":["項目を追加しました。"],"Add item":["項目を追加"],"Reset":["リセット"],"(opens in a new tab)":["(新しいタブで開く)"],"Minutes":["分"],"Color: %s":["色: %s"],"Color code: %s":["カラーコード: %s"],"Custom color picker.":["カスタムカラーピッカー。"],"No results.":["結果はありません。"],"%d result found, use up and down arrow keys to navigate.":["%d件の結果が見つかりました。移動するには上下の矢印キーを使ってください。"],"Time":["時刻"],"Day":["日"],"Month":["月"],"Date":["日付"],"Hours":["時"],"Item selected.":["項目を選択しました。"],"Previous":["前"],"Border color":["枠線の色"],"Year":["年"],"Custom Size":["カスタムサイズ"],"Back":["戻る"],"Tools":["ツール"],"Style":["スタイル"],"Large":["大"],"Drop files to upload":["ファイルをドロップしてアップロード"],"Clear":["クリア"],"Mixed":["混交"],"Custom":["カスタム"],"Next":["次"],"PM":["PM"],"AM":["AM"],"Bottom Right":["右下"],"Bottom Left":["左下"],"Top Right":["右上"],"Top Left":["左上"],"Type":["タイプ"],"Bottom":["下"],"Top":["上"],"Copy":["コピー"],"Font size":["フォントサイズ"],"Calendar":["カレンダー"],"No results found.":["見つかりませんでした。"],"All":["すべて"],"Default":["デフォルト"],"Close":["閉じる"],"Search":["検索"],"OK":["OK"],"Size":["サイズ"],"Medium":["中"],"Right":["右"],"Center":["中央"],"Left":["左"],"Cancel":["キャンセル"],"Done":["完了"],"Categories":["カテゴリー"],"Author":["投稿者"]}},"comment":{"reference":"wp-includes\/js\/dist\/components.js"}} );
/* ]]> */
</script>
<script type="text/javascript" src="/wp-includes/js/dist/components.min.js?ver=387d6480ace3103ccd8b" id="wp-components-js"></script>
<script type="text/javascript" src="/wp-includes/js/dist/plugins.min.js?ver=c485ff6186cdddabcf91" id="wp-plugins-js"></script>
<script type="text/javascript" id="zip-ai-sidebar-js-extra">
/* <![CDATA[ */
var zip_ai_react = {"ajax_url":"\/wp-admin\/admin-ajax.php","ajax_nonce":"1e07bcb7ec","admin_nonce":"ebf5f8e263","current_post_id":"9841","auth_middleware":"https:\/\/app.zipwp.com\/auth\/?type=token&redirect_url=%2Fwp-admin%2F%3Fnonce%3D8806fba6b3%26scs-authorize%3Dtrue&plugin=spectra","is_authorized":"","is_ai_assistant_enabled":"1","is_customize_preview":"","collab_product_details":{"product_name":"Spectra","product_slug":"spectra","product_logo":"<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<!-- Generator: Adobe Illustrator 26.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->\n<svg version=\"1.1\" id=\"Layer_1\" xmlns=\"http:\/\/www.w3.org\/2000\/svg\" xmlns:xlink=\"http:\/\/www.w3.org\/1999\/xlink\" x=\"0px\" y=\"0px\" viewBox=\"0 0 82 82\" style=\"enable-background:new 0 0 82 82;\" xml:space=\"preserve\" color=\"#6104ff\">\n<g>\n\t<path class=\"st0\" d=\"M41,1C18.9,1,1,18.9,1,41s17.9,40,40,40c22.1,0,40-17.9,40-40S63.1,1,41,1z M56.1,47.1c0,0.1,0,0.2,0,0.3\n\t\tc0,0.1,0,0.2,0,0.3l0,0.2c-0.2,1.2-0.6,2.3-1.3,3.3c-0.1,0.2-0.2,0.4-0.4,0.5c0,0,0,0.1-0.5,0.6c-0.4,0.5-0.5,0.6-0.6,0.7\n\t\tc0,0-0.1,0.1-0.1,0.1c0,0-0.1,0.1-0.1,0.1l-0.1,0c-0.1,0.1-0.2,0.1-0.2,0.2c-0.1,0.1-0.2,0.1-0.3,0.2l-0.1,0\n\t\tc-0.1,0.1-0.2,0.1-0.3,0.2L33.6,66.1c-0.2,0.1-0.3,0.2-0.5,0.2c-0.1,0-0.1,0-0.2,0c-0.2-0.1-0.5-0.2-0.6-0.4c0,0-0.4-0.8-0.5-0.8\n\t\tc0-0.1-0.1-0.1-0.1-0.2l0-0.1c0,0,0-0.1,0-0.1l0-0.1c0,0,0-0.1-0.1-0.1l0-0.1c0,0,0-0.1-0.1-0.1l0,0c-0.7-1.9-0.8-4-0.2-5.9\n\t\tc0.6-2,1.9-3.7,3.6-4.8l8.6-5.7c0.3-0.2,0.4-0.6,0.4-0.8c-0.1-0.3-0.2-0.6-0.6-0.6L33,44.3c-0.1,0-0.2,0-0.3-0.1l-0.1,0\n\t\tc-0.1,0-0.2,0-0.3-0.1l0,0c-0.1,0-0.2-0.1-0.3-0.1L32,44c-0.1,0-0.1,0-0.2-0.1l-0.1,0c-0.1,0-0.2-0.1-0.3-0.1l-0.1,0\n\t\tc-0.1,0-0.1,0-0.2-0.1l-0.1,0c-0.1,0-0.2-0.1-0.3-0.1l0,0c-0.1,0-0.2-0.1-0.3-0.1c-0.1,0-0.2-0.1-0.3-0.1l0,0\n\t\tc-0.1-0.1-0.2-0.1-0.3-0.2c-0.8-0.5-1.5-1.1-2.1-1.9l-0.2-0.3l-0.3-0.4c-1.3-2-1.8-4.4-1.3-6.7c0.2-0.7,0.4-1.5,0.8-2.3\n\t\tc0.1-0.2,0.2-0.4,0.3-0.5c0.1-0.1,0.1-0.2,0.1-0.2c0.1-0.2,0.2-0.4,0.4-0.5c0-0.1,0.1-0.1,0.1-0.2l0,0c0.1-0.1,0.1-0.2,0.2-0.2\n\t\tc0.1-0.1,0.1-0.1,0.2-0.2l0.1-0.1c0,0,0.1-0.1,0.1-0.1l0,0c0.1-0.1,0.1-0.1,0.2-0.2l0,0c0.1-0.1,0.1-0.1,0.2-0.2l0.1-0.1\n\t\tc0.1-0.1,0.1-0.1,0.2-0.2l0,0c0.1-0.1,0.1-0.1,0.2-0.2l0.1-0.1c0,0,0.1-0.1,0.1-0.1l0.1-0.1c0.1-0.1,0.2-0.1,0.2-0.2L48.4,16\n\t\tc0.2-0.2,0.5-0.2,0.8-0.2c0.3,0.1,0.5,0.2,0.7,0.5c0,0,0.1,0.2,0.2,0.3l0,0.1c0,0.1,0.1,0.2,0.1,0.2l0,0c0,0.1,0.1,0.1,0.1,0.2\n\t\tl0,0.1c0,0,0,0.1,0,0.1c0,0,0,0.1,0.1,0.1l0,0c0,0.1,0.1,0.2,0.1,0.3c0,0,0,0.1,0.1,0.2c0,0,0,0.1,0,0.1l0,0.1\n\t\tc0.7,1.8,0.7,3.9,0.1,5.8c-0.6,1.9-1.9,3.5-3.5,4.7l-8.6,5.7c-0.3,0.2-0.4,0.6-0.4,0.8c0.1,0.3,0.2,0.6,0.6,0.6l10.1,2\n\t\tc4.2,0.8,7.1,4.5,7.1,8.7C56.1,46.5,56.1,47.1,56.1,47.1z\" fill=\"currentColor\"\/>\n<\/g>\n<\/svg>\n","product_primary_color":"#5733ff","ai_assistant_learn_more_url":"\/wp-admin\/admin.php?page=spectra&path=ai-features","ai_assistant_authorized_disable_url":"\/wp-admin\/admin.php?page=spectra&path=ai-features&manage-features=yes","ai_assistant_unauthorized_disable_url":"\/wp-admin\/admin.php?page=spectra&path=ai-features&manage-features=yes"}};
/* ]]> */
</script>
<script type="text/javascript" src="/wp-content/plugins/ultimate-addons-for-gutenberg/lib/zip-ai/sidebar/build/sidebar-app.js?ver=591a455bc38a5a3f8de0" id="zip-ai-sidebar-js"></script>
<script type="text/javascript" src="/wp-content/themes/jh-hew/js/JankHack-Hew.js?ver=20140909" id="JankHack-Hew-scripts-js"></script>
<script type="text/javascript" src="/wp-content/themes/jh-hew/js/navigation.js?ver=20120206" id="JankHack-Hew-navigation-js"></script>
<script type="text/javascript" src="/wp-content/themes/jh-hew/js/skip-link-focus-fix.js?ver=20130115" id="JankHack-Hew-skip-link-focus-fix-js"></script>
<script type="text/javascript" src="/wp-content/themes/jh-hew/js/contact.js?ver=20210612" id="sendmail-js"></script>
<script type="text/javascript" src="/wp-includes/js/underscore.min.js?ver=1.13.4" id="underscore-js"></script>
<script type="text/javascript" id="wp-util-js-extra">
/* <![CDATA[ */
var _wpUtilSettings = {"ajax":{"url":"\/wp-admin\/admin-ajax.php"}};
/* ]]> */
</script>
<script type="text/javascript" src="/wp-includes/js/wp-util.min.js?ver=6.4.3" id="wp-util-js"></script>
<script type="text/javascript" src="/wp-content/plugins/wp-search-with-algolia/js/algoliasearch/dist/algoliasearch-lite.umd.js?ver=2.7.0" id="algolia-search-js"></script>
<script type="text/javascript" src="/wp-content/plugins/wp-search-with-algolia/js/autocomplete.js/dist/autocomplete.min.js?ver=2.7.0" id="algolia-autocomplete-js"></script>
<script type="text/javascript" src="/wp-content/plugins/wp-search-with-algolia/js/autocomplete-noconflict.js?ver=2.7.0" id="algolia-autocomplete-noconflict-js"></script>
<script type="text/javascript" id="wpfront-scroll-top-js-extra">
/* <![CDATA[ */
var wpfront_scroll_top_data = {"data":{"css":"#wpfront-scroll-top-container{display:none;position:fixed;cursor:pointer;z-index:9999;opacity:0}#wpfront-scroll-top-container div.text-holder{padding:3px 10px;border-radius:3px;-webkit-border-radius:3px;-webkit-box-shadow:4px 4px 5px 0 rgba(50,50,50,.5);-moz-box-shadow:4px 4px 5px 0 rgba(50,50,50,.5);box-shadow:4px 4px 5px 0 rgba(50,50,50,.5)}#wpfront-scroll-top-container a{outline-style:none;box-shadow:none;text-decoration:none}#wpfront-scroll-top-container {right: 80px;bottom: 10px;}        #wpfront-scroll-top-container img {\n            width: 55px;\n            height: 55px;\n        }\n        ","html":"<div id=\"wpfront-scroll-top-container\"><img src=\"\/wp-content\/plugins\/wpfront-scroll-top\/images\/icons\/1.png\" alt=\"\" title=\"\" \/><\/div>","data":{"hide_iframe":false,"button_fade_duration":200,"auto_hide":false,"auto_hide_after":2,"scroll_offset":100,"button_opacity":0.8,"button_action":"top","button_action_element_selector":"","button_action_container_selector":"html, body","button_action_element_offset":"0","scroll_duration":400}}};
/* ]]> */
</script>
<script type="text/javascript" src="/wp-content/plugins/wpfront-scroll-top/js/wpfront-scroll-top.min.js?ver=2.2.10081" id="wpfront-scroll-top-js"></script>
<script type="text/javascript" src="https://polyfill.io/v3/polyfill.min.js?features=IntersectionObserver" id="polyfill_IntersectionObserver-js"></script>
<script type="text/javascript" src="/wp-content/plugins/word-balloon/js/word_balloon_inview.min.js?ver=4.20.4" id="word_balloon_inview_script-js"></script>

</body>
</html>