{"id":1321,"date":"2015-10-09T22:14:11","date_gmt":"2015-10-09T13:14:11","guid":{"rendered":"https:\/\/hack.gpl.jp\/?p=1321"},"modified":"2015-10-09T22:14:11","modified_gmt":"2015-10-09T13:14:11","slug":"esp8266-%e3%81%a7adc-%e5%a2%97%e8%a8%ad%e3%81%9d%e3%81%ae3","status":"publish","type":"post","link":"https:\/\/hack.gpl.jp\/2015\/10\/09\/esp8266-%e3%81%a7adc-%e5%a2%97%e8%a8%ad%e3%81%9d%e3%81%ae3\/","title":{"rendered":"ESP8266 \u3067ADC \u5897\u8a2d\u305d\u306e3"},"content":{"rendered":"<p>\u5916\u90e8\u306eADC\u3092\u5229\u7528\u305b\u305a\u3001\u30b9\u30a4\u30c3\u30c1\u3092\u3064\u3051\u3066\u5185\u90e8\u306eADC\u3092\u5229\u7528\u3059\u308b\u3068\u3044\u3046\u30a2\u30d7\u30ed\u30fc\u30c1\u304c\u4ee5\u4e0b\u306b\u3042\u308a\u307e\u3057\u305f\u3002<\/p>\n<blockquote>\n<p>TINKERING WITH TECHNOLOGY<\/p>\n<p><a href=\"http:\/\/tinker.yeoman.com.au\/2015\/05\/26\/when-you-need-multiple-analog-inputs-for-your-esp8266-application\/\" target=\"_blank\" rel=\"noopener noreferrer\">WHEN YOU NEED MULTIPLE ANALOG INPUTS FOR YOUR ESP8266 APPLICATION<\/a><\/p>\n<\/blockquote>\n<p>\u306a\u308b\u307b\u3069\u30fc\u3067\u3059\u3002<a href=\"https:\/\/www.fairchildsemi.co.jp\/products\/analog-mixed-signal\/switches\/analog-switches\/FSA3157.html\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"broken_link\">FSA3157<\/a> \u3068\u3044\u3046\u30b9\u30a4\u30c3\u30c1\u3092\u3064\u3051\u3066\u3001GPIO \u30d4\u30f3\u304b\u3089\u30c7\u30b8\u30bf\u30eb\u3067High Low \u3055\u305b\u308b\u3053\u3068\u306b\u3088\u308a\u30b9\u30a4\u30c3\u30c1\u3092\u52d5\u4f5c\u3055\u305b\u308b\u3082\u306e\u3067\u3059\u3002\u306a\u3093\u304b\u65e5\u672c\u8a9e\u5909\u3067\u3059\u304c\u3002\u4e0a\u8a18\u30d6\u30ed\u30b0\u3068\u3001\u30c7\u30fc\u30bf\u30b7\u30fc\u30c8\u898b\u305f\u307b\u3046\u304c\u308f\u304b\u308a\u3084\u3059\u3044\u3067\u3059\u3002<\/p>\n<blockquote>\n<p>FarChild Semiconductor FSA3157      <br \/><a href=\"http:\/\/www.farnell.com\/datasheets\/690558.pdf\" target=\"_blank\" rel=\"noopener noreferrer\">datasheet<\/a><\/p>\n<\/blockquote>\n<p>&#160;<img loading=\"lazy\" decoding=\"async\" title=\"www_farnell_com_datasheets_690558_pdf\" style=\"float:none;margin-left:auto;display:block;margin-right:auto;border-width:0;\" border=\"0\" alt=\"www_farnell_com_datasheets_690558_pdf\" src=\"http:\/\/hack.gpl.jp\/wp-content\/uploads\/2015\/10\/www_farnell_com_datasheets_690558_pdf.png\" width=\"727\" height=\"768\" \/> <\/p>\n<p>&#160;<\/p>\n<p>\u3053\u308c\u3067\u3001ADC\u306e\u30bd\u30fc\u30b9\u3092\uff12\u3064\u304b\u3089\u9078\u3079\u308b\u3088\u3046\u306b\u306a\u308b\u3068\u3044\u3046\u3053\u3068\u3067\u3059\u306d\u3002<\/p>\n<p>3\u3064\u306e\u30bd\u30fc\u30b9\u3092\uff12\u3064\u306eGPIO\u3067\u5236\u5fa1\u3059\u308b\u5834\u5408\u306f\u3001\u4ee5\u4e0b\u306eIC\u3092\u3002<\/p>\n<blockquote>\n<p>FSA3357<\/p>\n<p><a href=\"https:\/\/www.fairchildsemi.com\/datasheets\/FS\/FSA3357.pdf\" target=\"_blank\" rel=\"noopener noreferrer\">datasheet<\/a><\/p>\n<\/blockquote>\n<p>\u4fa1\u683c\u7684\u306b\u306f\u3001\u3069\u3061\u3089\u3082\u5b89\u3044\u306e\u3067\u5019\u88dc\u3067\u3059\u306d\u3002\u30cf\u30fc\u30c9\u306e\u4e16\u754c\u306f\u3044\u308d\u3044\u308d\u306aIC\u304c\u3042\u3063\u3066\u3001\u9762\u767d\u3044\u3067\u3059\u306d\u3002<\/p>\n<p>\u914d\u7f6e\u3057\u305f\u611f\u3058\u3067\u306f\u3001\u5927\u304d\u3055\u304c\u307b\u3068\u3093\u3069\u5909\u308f\u3089\u306a\u3044\u306e\u3067\u30018pin \u306e 3\u30c1\u30e3\u30f3\u30cd\u30eb\u5207\u308a\u66ff\u3048\u3089\u308c\u308b FSA3357 \u3092\u5c0e\u5165\u3059\u308b\u3053\u3068\u306b\u3002\u524d\u56de\u691c\u8a0e\u3057\u3066\u3044\u305f\u3001\u30c0\u30a4\u30aa\u30fc\u30c9\u3092\u631f\u3080\u65b9\u6cd5\u306f\u3001\u6b63\u78ba\u306b\u62b5\u6297\u5024\u3092\u8aad\u307f\u305f\u3044\u306e\u3067\u3001\u9069\u3057\u307e\u305b\u3093\u3067\u3057\u305f\u3002<\/p>\n<p><img loading=\"lazy\" decoding=\"async\" title=\"aaa\" style=\"float:none;margin-left:auto;display:block;margin-right:auto;border-width:0;\" border=\"0\" alt=\"aaa\" src=\"http:\/\/hack.gpl.jp\/wp-content\/uploads\/2015\/10\/aaa.png\" width=\"640\" height=\"312\" \/> <\/p>\n<p><a href=\"http:\/\/www.aliexpress.com\/item\/Free-Shipping-Integrated-Circuits-Types-FSA3357K8X-IC-SWITCH-SP3T-US8-3357-FSA3357-10pcs\/32384506374.html\" target=\"_blank\" rel=\"noopener noreferrer\">AliExpress<\/a> \u306b\u3066\u300110\u500b1083\u5186\u306a\u308a\u30021\u500b110\u5186\u304f\u3089\u3044\u3067\u3059\u3002<\/p>\n<p>\u3053\u308c\u3092\u7d44\u307f\u8fbc\u3093\u3067\u3001\u96fb\u6e90\u96fb\u5727\u4ed6\u3001\uff12\u3064\u306e\u30a2\u30ca\u30ed\u30b0\u5024\u3092\u53d6\u308c\u308b\u3088\u3046\u306b\u3057\u3066\u3001\uff11\u3064\u306fCDS\u306e\u7167\u5ea6\u306b\u4f7f\u3044\u3001\u3042\u3068\uff11\u3064\u306fPIN\u3092\u51fa\u3057\u3066\u304a\u304f\u5f62\u306b\u3057\u3066\u304a\u304d\u307e\u3059\u3002<\/p>\n<p><img loading=\"lazy\" decoding=\"async\" title=\"xxx\" style=\"float:none;margin-left:auto;display:block;margin-right:auto;border-width:0;\" border=\"0\" alt=\"xxx\" src=\"http:\/\/hack.gpl.jp\/wp-content\/uploads\/2015\/10\/xxx.png\" width=\"634\" height=\"480\" \/> <\/p>\n<p>&#160;<\/p>\n<\/p>\n<p>\u62b5\u6297\u5206\u5727\u3057\u3066\u30013.3v \u3092\u3044\u3063\u305f\u3093\u30010.5V\u306b\u3057\u3066ADC \u3067\u5024\u3092\u8aad\u307e\u305b\u305f\u5f8c\u306b\u3001\u5143\u306e\u5024\u306b\u623b\u3057\u3066\u3044\u307e\u3059\u3002wifi eink \u306e\u30b3\u30fc\u30c9\u306b\u3042\u3063\u305f\u3084\u3064\u3067\u3059\u3002\u307e\u3060\u3001\u3082\u306e\u304c\u306a\u3044\u306e\u3067S1,S2 \u306e\u5207\u308a\u66ff\u3048\u30b3\u30fc\u30c9\u306f\u66f8\u3044\u3066\u3044\u307e\u305b\u3093\u304c\u3001\u62b5\u6297\u5206\u5727\u3057\u3066\u3001\u5185\u81d3\u306eADC \u30671V \u4ee5\u4e0a\u306e\u62b5\u6297\u3092\u8aad\u3081\u308b\u3088\u3046\u306b\u30c6\u30b9\u30c8\u3057\u3066\u307f\u307e\u3057\u305f\u3002<\/p>\n<pre class=\"brush: cpp; gutter: false; toolbar: false; collapse: true; auto-links: false; smart-tabs: false;\">\/*\n ADC Read Sample\n Arduino IDE 1.6.5 Hourly Build 2015\/06\/12 03:13\n esp8266 by ESP8266 Community version 1.6.5 Hourly Build 2015\/06\/12\n JunkHack 2015.10.10\n\n --- ex Serial output.\n Blink Count: 40\n ADC mv: 3319\n ADC mv: 3313\n Blink Count: 41\n ADC mv: 3319\n ADC mv: 3313\n ::\n\n *\/\n \n#include &lt;ESP8266WiFi.h&gt;\n\nint ledState = LOW;     \n\nunsigned long previousMillis = 0;\nconst long interval = 1000;\n\nvoid setup() {\n  pinMode(BUILTIN_LED, OUTPUT);\n  Serial.begin(115200);\n  delay(10);\n}\n\nint value = 0;\nint count = 0;\nint adc = 0;\nint batteryMeasMv = -1;\n\nvoid loop()\n{\n  delay(interval);\n  ++value;\n  \n  unsigned long currentMillis = millis();\n  if(currentMillis - previousMillis &gt;= interval) {\n    previousMillis = currentMillis;   \n    if (ledState == LOW){\n      ledState = HIGH;  \/\/ Note that this switches the LED *off*\n    } else {\n      ledState = LOW;   \/\/ Note that this switches the LED *on*\n      digitalWrite(BUILTIN_LED, ledState);\n      delay(1);\n      count += 1;\n      Serial.print(&quot;Blink Count: &quot;);\n      Serial.println(count);\n    }\n  }\n  \/\/Battery voltage is divided by an 5.6K\/1K resistor divider.\n  \/\/ADC: 1024 = 1V\n  adc = analogRead(A0);\n  batteryMeasMv=(adc*10020*6.6)\/10000;\n  \/\/                 ^^^^^To correct an error in the resistance value\n\n  Serial.print(&quot;ADC mv: &quot;);\n  \n  delay(1);\n  Serial.println(batteryMeasMv);\n\n}<\/pre>\n<p>\u30c6\u30b9\u30bf\u30fc\u3067\u5b9f\u6e2c\u5024\u306b\u8fd1\u304f\u306a\u308b\u3088\u3046\u4fc2\u6570\u3092\u88dc\u6b63\u3057\u3066\u3044\u307e\u3059\u3002<\/p>\n<p>\u81ea\u5206\u81ea\u8eab\u306e\u96fb\u5727\u3092\u30b0\u30e9\u30d5\u306b\u6295\u3052\u3066\u3001\u9577\u671fDeepSpeel \u306e\u96fb\u5727\u964d\u4e0b\u5177\u5408\u3092\u8a18\u9332\u3067\u304d\u305d\u3046\u3067\u3059\u3002<\/p>\n<p>&#160;<\/p>\n<p>\u624b\u629c\u304d\u3067\u3059\u304c\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30b3\u30fc\u30c9\u306b\u306a\u308b\u611f\u3058\u3067\u3059\u304b\u306d\u3002<\/p>\n<pre class=\"brush: cpp; gutter: false; toolbar: false; collapse: true; auto-links: false; smart-tabs: false;\">\/*\n ADC Read Sample.\n Fairchild Semiconductor FSA3357 adc Select.\n Arduino IDE 1.6.5 Hourly Build 2015\/06\/12 03:13\n esp8266 by ESP8266 Community version 1.6.5 Hourly Build 2015\/06\/12\n JunkHack 2015.10.10\n\n --- ex Serial output.\n  Blink Count: 1\n  &gt;adc1(B0)\n  ADC mv: 3280\n  &gt;adc2(B1)\n  ADC mv: 3273\n  &gt;adc3(B2)\n  ADC mv: 3293\n  &gt;adc off\n ::\n\n *\/\n\n#include &lt;ESP8266WiFi.h&gt;\n\nint ledState = LOW;     \nunsigned long previousMillis = 0;\nconst long interval = 1000; \/\/1sec\n\n\/******************************************************\n * Fairchild Semiconductor FSA3357 adc Select.\n * 0 = No Connection\n * 1 = B0 to A\n * 2 = B1 to A\n * 3 = B2 to A\n *\/\nconst int S1 =  14; \/\/ S1 to GPIO Pin\nconst int S2 =  16; \/\/ S2 to GPIO Pin\n\nvoid adcset(int port) {\n  pinMode(S1, OUTPUT);\n  pinMode(S2, OUTPUT);\n      \n  switch (port){\n    case 1:\n      digitalWrite(S1, HIGH);\n      digitalWrite(S2, LOW);\n      Serial.println(&quot;&gt;adc1(B0)&quot;);\n      break;\n    case 2:\n      digitalWrite(S1, LOW);\n      digitalWrite(S2, HIGH);\n      Serial.println(&quot;&gt;adc2(B1)&quot;);\n      break;\n    case 3:\n      digitalWrite(S1, HIGH);\n      digitalWrite(S2, HIGH);\n      Serial.println(&quot;&gt;adc3(B2)&quot;);\n      break;\n    case 0:\n      digitalWrite(S1, LOW);\n      digitalWrite(S2, LOW);\n      Serial.println(&quot;&gt;adc off&quot;);\n      break;\n  }\n}\n\n\/******************************************************\n * \n *\/\nvoid setup() {\n  pinMode(BUILTIN_LED, OUTPUT);\n  Serial.begin(115200);\n  delay(10);\n}\n\nint value = 0;\nint count = 0;\nint adc = 0;\nint batteryMeasMv = -1;\n\n\/******************************************************\n * \n *\/\nvoid loop()\n{\n  adcset(0);\n  delay(4000);\n  delay(interval);\n  ++value;\n  \n  unsigned long currentMillis = millis();\n  if(currentMillis - previousMillis &gt;= interval) {\n    previousMillis = currentMillis;   \n    if (ledState == LOW){\n      ledState = HIGH;  \/\/ Note that this switches the LED *off*\n    } else {\n      ledState = LOW;   \/\/ Note that this switches the LED *on*\n      digitalWrite(BUILTIN_LED, ledState);\n      delay(1);\n      count += 1;\n      Serial.print(&quot;Blink Count: &quot;);\n      Serial.println(count);\n    }\n  }\n\n  \/\/ Select ADC source.\n  adcset(1);\n  delay(5000);\n  \n  \/\/Battery voltage is divided by an 5.6K\/1K resistor divider.\n  \/\/ADC: 1024 = 1V\n  adc = analogRead(A0);\n  batteryMeasMv=(adc*10020*6.6)\/10000;\n  \/\/                 ^^^^^To correct an error in the resistance value\n  Serial.print(&quot;ADC mv: &quot;);\n  delay(1);\n  Serial.println(batteryMeasMv);\n\n  adcset(2);\n  delay(5000);\n  adc = analogRead(A0);\n  batteryMeasMv=(adc*10020*6.6)\/10000;\n  Serial.print(&quot;ADC mv: &quot;);\n  delay(1);\n  Serial.println(batteryMeasMv);\n\n  adcset(3);\n  delay(5000);\n  adc = analogRead(A0);\n  batteryMeasMv=(adc*10020*6.6)\/10000;\n  Serial.print(&quot;ADC mv: &quot;);\n  delay(1);\n  Serial.println(batteryMeasMv);\n}<\/pre>\n<p>\u3055\u3066\u3001\u307c\u3061\u307c\u3061\u3068\u56de\u8def\u56f3\u66f8\u3044\u3066\u307f\u307e\u3059\u3002<\/p>\n<p>&#160;<\/p>\n<p>\u66f8\u3044\u3066\u3001PCB\u4e0a\u306b\u914d\u7f6e\u3057\u3066\u307f\u307e\u3057\u305f\u3002\u3042\u3068\u3001\u6e29\u5ea6\u6e7f\u5ea6\u30bb\u30f3\u30b5\u30fc\u3092\u8f09\u305b\u308c\u3070OK\u3068\u3057\u307e\u3059\u3002<\/p>\n<p><img loading=\"lazy\" decoding=\"async\" title=\"\uff17\" style=\"float:none;margin-left:auto;display:block;margin-right:auto;border-width:0;\" border=\"0\" alt=\"\uff17\" src=\"http:\/\/hack.gpl.jp\/wp-content\/uploads\/2015\/10\/66b3c7c1afec.png\" width=\"640\" height=\"238\" \/> <\/p>\n<p>\u30ea\u30c1\u30a6\u30e0\u306e\u96fb\u6c60\u304b\u3089\u306e\u96fb\u5727\u3068\u3001\u30d0\u30c3\u30af\u30d6\u30fc\u30b9\u30c8\u3067\u4f5c\u3089\u308c\u305f\u5f8c\u306e\u96fb\u5727\u3092\u8a08\u6e2c\u3057\u3066\u3001\u3042\u3068\u306f\u7167\u5ea6\u30bb\u30f3\u30b5\u30fc\u304b\u3089\u306eADC\u3092\u8a08\u6e2c\u3057\u305f\u30893\u30c1\u30e3\u30f3\u30cd\u30eb\u4f7f\u3044\u5207\u308a\u307e\u3057\u305f\u3002<\/p>\n<p>&#160;<\/p>\n<p>\u3067\u3001\u6700\u5f8c\u306bDHT-22 \u3092\u88cf\u5074\u306b\u4e57\u305b\u307e\u3057\u305f\u3002<a href=\"https:\/\/hack.gpl.jp\/2015\/06\/15\/esp12%E5%8D%98%E4%BD%93%E3%81%A7%E6%B9%BF%E5%BA%A6%E6%B8%A9%E5%BA%A6%E7%85%A7%E5%BA%A6%E3%81%AEiot%E3%83%87%E3%83%90%E3%82%A4%E3%82%B9\/\" target=\"_blank\" rel=\"noopener noreferrer\">\u524d\u56de\u4f5c\u3063\u305f\u3084\u3064<\/a>\u3068\u540c\u3058\u3088\u3046\u306b\u3001ESP8266 \u306e\u4e0a\u306b\u8f09\u308b\u611f\u3058\u3002<\/p>\n<p>&#160;<\/p>\n<p><img loading=\"lazy\" decoding=\"async\" title=\"datasheets_sensors_temperature_dht22_pdf\" style=\"border-top:0;border-right:0;border-bottom:0;float:none;margin-left:auto;border-left:0;display:block;margin-right:auto;\" border=\"0\" alt=\"datasheets_sensors_temperature_dht22_pdf\" src=\"http:\/\/hack.gpl.jp\/wp-content\/uploads\/2015\/10\/datasheets_sensors_temperature_dht22_pdf.png\" width=\"429\" height=\"480\" \/> <\/p>\n<p><img loading=\"lazy\" decoding=\"async\" title=\"8\" style=\"border-top:0;border-right:0;border-bottom:0;float:none;margin-left:auto;border-left:0;display:block;margin-right:auto;\" border=\"0\" alt=\"8\" src=\"http:\/\/hack.gpl.jp\/wp-content\/uploads\/2015\/10\/8.png\" width=\"640\" height=\"235\" \/><\/p>\n<\/p>\n<p>UART \u306ePIN\u914d\u5217\u306f\u3001\u30d6\u30ec\u30c3\u30c9\u30dc\u30fc\u30c9\u306b\u633f\u3057\u305f\u3068\u304d\u306b\u4e0a\u304b\u3089LED\u304c\u898b\u3048\u308b\u306b\u914d\u5217\u3092\u9006\u306b\u3057\u307e\u3057\u305f\u3002\u3042\u3068\u3001UART \u304b\u3089\u306e\u4fe1\u53f7\u306eDTR\u3092\u4e00\u5de5\u592b\u3057\u3066\u3001\u30ea\u30bb\u30c3\u30c8\u3092\u62bc\u3055\u306a\u304f\u3066\u3082\u3001\u66f8\u304d\u8fbc\u307f\u30e2\u30fc\u30c9\u306b\u306a\u308b\u3088\u3046\u306b\u56de\u8def\u3092\u7d44\u3093\u3067\u304a\u3057\u307e\u3044\u3067\u3059\u3002<\/p>\n<p>&#160;<\/p>\n<p>\u4ed6\u3001\u4f55\u304b\u5fd8\u308c\u3066\u3044\u308b\u3088\u3046\u306a\u6c17\u3082\u3057\u307e\u3059\u304c\u3001\u6700\u5f8c\u306e\u70b9\u691c\u3067\u30c1\u30a7\u30c3\u30af\u3057\u3066\u3044\u304d\u307e\u3059\u3002<\/p>\n<p>\u73fe\u6642\u70b9\u3067\u3001\u5fd8\u308c\u3066\u3044\u308b\u3082\u306e\u3002<\/p>\n<p>\u30fb\u30e1\u30a4\u30f3\u30b9\u30a4\u30c3\u30c1<\/p>\n<p>\u30fbCDS \u306e\u8abf\u6574\u7528\u3001\u534a\u56fa\u5b9a\u62b5\u6297<\/p>\n<p>\u30fbWEB \u30a2\u30af\u30bb\u30b9\u306eLED\u3068\u3001WiFi \u30a2\u30af\u30bb\u30b9\u306eLED \uff08\u3092\u3064\u3051\u308b\u304b\u3069\u3046\u304b\uff09<\/p>\n<p>\u30fbEN Pin \u306e\u914d\u7dda<\/p>\n<p>&#160;<\/p>\n<p>\u6700\u5f8c\u306b\u5c11\u3057\u3001\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u6539\u826f\u3057\u305f\u306e\u3092\u30e1\u30e2\u3002\u307e\u308c\u306b\u3001ADC\u5024\u304c\u5909\u306a\u306e\u3067\u300110\u56de\u306e\u5e73\u5747\u5024\u3092\u51fa\u3057\u3066\u3044\u307e\u3059\u3002ESP12\u3067\u30c6\u30b9\u30c8\u3057\u3066\u3044\u308b\u306e\u3067\u3001ESP13 \u3060\u3068\u3069\u3046\u3044\u3046\u52d5\u304d\u306b\u306a\u308b\u304b\u306f\u3001\u5b9f\u969b\u306b\u30e2\u30ce\u304c\u7740\u3066\u304b\u3089\u30c6\u30b9\u30c8\u3002<\/p>\n<pre class=\"brush: cpp; gutter: false; toolbar: false; collapse: true; auto-links: false; smart-tabs: false;\">\/*\n ADC Read Sample2.\n Fairchild Semiconductor FSA3357 adc Select.\n Arduino IDE 1.6.5 Hourly Build 2015\/06\/12 03:13\n esp8266 by ESP8266 Community version 1.6.5 Hourly Build 2015\/06\/12\n JunkHack 2015.10.11\n\n --- ex Serial output.\n  &gt;adc3(B2)\n  ADC3 mv\/10: 0 : 476\n  1 : 475\n  2 : 474\n  3 : 474\n  4 : 474\n  5 : 474\n  6 : 474\n  7 : 474\n  8 : 474\n  9 : 474\n  3139\n  &gt;adc off\n ::\n\n *\/\n\n#include &lt;ESP8266WiFi.h&gt;\n\nint ledState = LOW;     \nunsigned long previousMillis = 0;\nconst long interval = 200; \/\/1sec\n\n\/******************************************************\n * \n *\/\nvoid setup() {\n  pinMode(BUILTIN_LED, OUTPUT);\n  Serial.begin(115200);\n  delay(10);\n}\n\nint value = 0;\nint count = 0;\n\n\/******************************************************\n * \n *\/\nvoid loop()\n{\n  \/\/ Select ADC source off.\n  adcset(0);\n  delay(interval);\n  ++value;\n  \n  unsigned long currentMillis = millis();\n  if(currentMillis - previousMillis &gt;= interval) {\n    previousMillis = currentMillis;   \n    if (ledState == LOW){\n      ledState = HIGH;  \/\/ Note that this switches the LED *off*\n    } else {\n      ledState = LOW;   \/\/ Note that this switches the LED *on*\n      digitalWrite(BUILTIN_LED, ledState);\n      delay(1);\n      count += 1;\n      Serial.print(&quot;Blink Count: &quot;);\n      Serial.println(count);\n    }\n  }\n\n  \/\/ Select ADC source.\n  adcset(1);\n  delay(interval);\n  Serial.print(&quot;ADC1 mv\/10: &quot;);\n  Serial.println(getMv());\n\n  adcset(2);\n  delay(interval);\n  Serial.print(&quot;ADC2 mv\/10: &quot;);\n  Serial.println(getMv());\n\n  adcset(3);\n  delay(interval);\n  Serial.print(&quot;ADC3 mv\/10: &quot;);\n  Serial.println(getMv());\n}\n\n\/******************************************************\n * Fairchild Semiconductor FSA3357 adc Select.\n * 0 = No Connection\n * 1 = B0 to A\n * 2 = B1 to A\n * 3 = B2 to A\n *\/\nconst int S1 =  14; \/\/ S1 to GPIO Pin\nconst int S2 =  16; \/\/ S2 to GPIO Pin\n\nvoid adcset(int port) {\n  pinMode(S1, OUTPUT);\n  pinMode(S2, OUTPUT);\n      \n  switch (port){\n    case 1:\n      digitalWrite(S1, HIGH);\n      delay(10);\n      digitalWrite(S2, LOW);\n      Serial.println(&quot;&gt;adc1(B0)&quot;);\n      break;\n    case 2:\n      digitalWrite(S1, LOW);\n      delay(10);\n      digitalWrite(S2, HIGH);\n      Serial.println(&quot;&gt;adc2(B1)&quot;);\n      break;\n    case 3:\n      digitalWrite(S1, HIGH);\n      delay(10);\n      digitalWrite(S2, HIGH);\n      Serial.println(&quot;&gt;adc3(B2)&quot;);\n      break;\n    case 0:\n      digitalWrite(S1, LOW);\n      delay(10);\n      digitalWrite(S2, LOW);\n      Serial.println(&quot;&gt;adc off&quot;);\n      break;\n  }\n}\n\n\/******************************************************\n * It reads the 10 times of the average value.\n *\/\nint getMv(){\n  \/\/ correct an error in the resistance value.\n  const int CORRECT = 10030;\n\n  int mv = -1;\n  int i;\n  int adc = 0;\n  \n  for (i = 0; i&lt;10; i++ ){\n    adc = 0;\n    \n    \/\/Battery voltage is divided by an 5.6K\/1K resistor divider.\n    \/\/ADC: 1024 = 1V\n    adc = analogRead(A0);\n    \/\/delay(10);\n\/\/    Serial.print(i);\n\/\/    Serial.print(&quot; : &quot;);\n\/\/    Serial.println(adc);\n    mv += (adc*CORRECT*6.6)\/10000;\n    \/\/                 ^^^^^To correct an error in the resistance value\n  }\n\n  mv = mv \/ 10;\n\n  return mv;\n}<\/pre>\n","protected":false},"excerpt":{"rendered":"<p>\u5916\u90e8\u306eADC\u3092\u5229\u7528\u305b\u305a\u3001\u30b9\u30a4\u30c3\u30c1\u3092\u3064\u3051\u3066\u5185\u90e8\u306eADC\u3092\u5229\u7528\u3059\u308b\u3068\u3044\u3046\u30a2\u30d7\u30ed\u30fc\u30c1\u304c\u4ee5\u4e0b\u306b\u3042\u308a\u307e\u3057\u305f\u3002 TINKERING WITH TECHNOLOGY WHEN YOU NEED MULTIPLE ANALOG INPU [&hellip;]<\/p>\n","protected":false},"author":1,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"_acf_changed":false,"_uag_custom_page_level_css":"","footnotes":""},"categories":[10,30,63,64],"tags":[],"acf":[],"uagb_featured_image_src":{"full":false,"thumbnail":false,"medium":false,"medium_large":false,"large":false,"1536x1536":false,"2048x2048":false,"post-thumbnail":false},"uagb_author_info":{"display_name":"JunkHack","author_link":"https:\/\/hack.gpl.jp\/author\/junkhack\/"},"uagb_comment_info":0,"uagb_excerpt":"\u5916\u90e8\u306eADC\u3092\u5229\u7528\u305b\u305a\u3001\u30b9\u30a4\u30c3\u30c1\u3092\u3064\u3051\u3066\u5185\u90e8\u306eADC\u3092\u5229\u7528\u3059\u308b\u3068\u3044\u3046\u30a2\u30d7\u30ed\u30fc\u30c1\u304c\u4ee5\u4e0b\u306b\u3042\u308a\u307e\u3057\u305f\u3002 TINKE&hellip;","_links":{"self":[{"href":"https:\/\/hack.gpl.jp\/wp-json\/wp\/v2\/posts\/1321"}],"collection":[{"href":"https:\/\/hack.gpl.jp\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/hack.gpl.jp\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/hack.gpl.jp\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/hack.gpl.jp\/wp-json\/wp\/v2\/comments?post=1321"}],"version-history":[{"count":0,"href":"https:\/\/hack.gpl.jp\/wp-json\/wp\/v2\/posts\/1321\/revisions"}],"wp:attachment":[{"href":"https:\/\/hack.gpl.jp\/wp-json\/wp\/v2\/media?parent=1321"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/hack.gpl.jp\/wp-json\/wp\/v2\/categories?post=1321"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/hack.gpl.jp\/wp-json\/wp\/v2\/tags?post=1321"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}