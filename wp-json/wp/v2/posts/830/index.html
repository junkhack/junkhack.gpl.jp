{"id":830,"date":"2015-07-12T04:17:14","date_gmt":"2015-07-11T19:17:14","guid":{"rendered":"https:\/\/hack.gpl.jp\/?p=830"},"modified":"2015-07-12T04:17:14","modified_gmt":"2015-07-11T19:17:14","slug":"iscsi-boot-%e3%81%a7-os-%e3%82%92%e3%81%84%e3%82%8d%e3%81%84%e3%82%8d%e5%88%87%e3%82%8a%e6%9b%bf%e3%81%88","status":"publish","type":"post","link":"https:\/\/hack.gpl.jp\/2015\/07\/12\/iscsi-boot-%e3%81%a7-os-%e3%82%92%e3%81%84%e3%82%8d%e3%81%84%e3%82%8d%e5%88%87%e3%82%8a%e6%9b%bf%e3%81%88\/","title":{"rendered":"iSCSI Boot \u3067 OS \u3092\u3044\u308d\u3044\u308d\u5207\u308a\u66ff\u3048"},"content":{"rendered":"<p>\u3042\u308c\u3082\u3053\u308c\u3082\u3001\u5165\u308c\u305f\u3044\u306e\u306b\u3001\u3044\u3061\u3044\u3061SD\u30ab\u30fc\u30c9\u306a\u3093\u3066\u3001\u629c\u304d\u5dee\u3057\u3057\u3066\u308b\u306e\u3081\u3093\u3069\u3044\u3088\u306d\u3001\u3063\u3066\u3053\u3068\u3067\u3001\u5de5\u592b\u3057\u3066\u307f\u307e\u3057\u305f\u3002<\/p>\n<p>\u3053\u3093\u306a\u611f\u3058\u3067\u3001SD Card \u306bOS \u306f\u5165\u308c\u305a\u306b\u3001\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u8d8a\u3057\u306eiSCSI Disk \u304b\u3089\u3001OS \u3092\u30d6\u30fc\u30c8\u3057\u3066Pi2 \u3092\u697d\u3057\u3080\u3053\u3068\u3092\u8a66\u3057\u307e\u3057\u305f\u3002<\/p>\n<p><img loading=\"lazy\" decoding=\"async\" title=\"iscsiBoot_raspi\" style=\"border-top:0;border-right:0;border-bottom:0;float:none;margin-left:auto;border-left:0;display:block;margin-right:auto;\" border=\"0\" alt=\"iscsiBoot_raspi\" src=\"http:\/\/hack.gpl.jp\/wp-content\/uploads\/2015\/07\/iscsiboot_raspi.png\" width=\"575\" height=\"457\" \/> <\/p>\n<p>\u307e\u3055\u304b\u3001RasPi \u304ciSCSI Boot \u3059\u308b\u306a\u3093\u3066\u601d\u3063\u3066\u3044\u306a\u304b\u3063\u305f\u306e\u3067\u3001\u6700\u521d\u306f\u672c\u5f53\u304b\u306a\uff1f \u3063\u3066\u3002\u3067\u3001\u8a66\u3057\u305f\u3068\u3053\u308d\u554f\u984c\u306a\u3044\u901f\u5ea6\u3067\u697d\u3057\u3081\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3057\u305f\u3002BerryBoot v2.0 \u3092\u4f7f\u3063\u3066\u5b9f\u969b\u306b\u8a66\u3057\u3066\u307f\u307e\u3057\u305f\u3088\u3002<\/p>\n<p>&#160;<\/p>\n<p> \u56f3\u3067\u306f\u3001\u308f\u304b\u308a\u306b\u304f\u3044\u306e\u3067\u3059\u304c\u3001osx \u306b\u30d0\u30fc\u30c1\u30e3\u30eb\u30dc\u30c3\u30af\u30b9\u3067\u8d77\u52d5\u3057\u305f\u3001FreeNAS \u3067iSCSI \u306e\u30bf\u30fc\u30b2\u30c3\u30c8\u3092\u63d0\u4f9b\u3057\u3001pi \u306f\u3001Boot \u9818\u57df\u306eSD Card \u3092\u6307\u3057\u305f\u307e\u307e\u3001\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u8d8a\u3057\u306e\u30c7\u30a3\u30b9\u30af\u304b\u3089\u8d77\u52d5\u3057\u307e\u3059\u3002<\/p>\n<p>OS \u5207\u308a\u66ff\u3048\u306f\u3001osx \u306e\u30d6\u30e9\u30a6\u30b6\u30fc\u304b\u3089FreeNAS \u306e iSCSI \u306e\u30c7\u30a3\u30b9\u30af\u3092\u4ea4\u63db\u3057\u3001Pi2 \u3092\u30ea\u30d6\u30fc\u30c8\u3059\u308c\u3070 OK \u306a\u611f\u3058\u3067\u3059\u3002<\/p>\n<p><img loading=\"lazy\" decoding=\"async\" title=\"freenas_-_FreeNAS-9_3-STABLE-201506292332\" style=\"border-top:0;border-right:0;border-bottom:0;float:none;margin-left:auto;border-left:0;display:block;margin-right:auto;\" border=\"0\" alt=\"freenas_-_FreeNAS-9_3-STABLE-201506292332\" src=\"http:\/\/hack.gpl.jp\/wp-content\/uploads\/2015\/07\/freenas__freenas9_3stable201506292332.png\" width=\"562\" height=\"480\" \/> <\/p>\n<p>ZFS \u306e\u64cd\u4f5c\u306f\u307e\u3063\u305f\u304f\u308f\u304b\u308a\u307e\u305b\u3093\u304c\u3001\u3068\u308a\u3042\u3048\u305a\u7269\u7406\u30c7\u30a3\u30b9\u30af\u3092\u30d0\u30fc\u30c1\u30e3\u30eb\u30dc\u30c3\u30af\u30b9\u3067\uff18\uff10G\u304f\u3089\u3044\u5272\u308a\u5f53\u3066\u305f\u3082\u306e\u3092\u4e0a\u8a18\u306a\u611f\u3058\u3067\u4f5c\u308a\u307e\u3059\u3002<\/p>\n<p>&#160;<img loading=\"lazy\" decoding=\"async\" title=\"freenas_-_FreeNAS-9_3-STABLE-201506292332 2\" style=\"border-top:0;border-right:0;border-bottom:0;float:none;margin-left:auto;border-left:0;display:block;margin-right:auto;\" border=\"0\" alt=\"freenas_-_FreeNAS-9_3-STABLE-201506292332 2\" src=\"http:\/\/hack.gpl.jp\/wp-content\/uploads\/2015\/07\/freenas__freenas9_3stable2015062923322.png\" width=\"562\" height=\"480\" \/> <\/p>\n<p>iSCSI \u306b\u3059\u308b DISK \u306f\u3042\u3089\u304b\u3058\u3081\u305f\u304f\u3055\u3093\u4f5c\u3063\u3066\u304a\u3044\u3066\u3001\u4e0a\u56f3\u306e\u3088\u3046\u306a\u611f\u3058\u3067\u30a8\u30af\u30b9\u30c6\u30f3\u30c8\u3068\u5bfe\u5fdc\u30c7\u30a3\u30b9\u30af\u306e\u30bb\u30c3\u30c8\u3092\u4f5c\u3063\u3066\u304a\u304d\u307e\u3059\u3002<\/p>\n<p><img loading=\"lazy\" decoding=\"async\" title=\"freenas_-_FreeNAS-9_3-STABLE-201506292332 3\" style=\"border-top:0;border-right:0;border-bottom:0;float:none;margin-left:auto;border-left:0;display:block;margin-right:auto;\" border=\"0\" alt=\"freenas_-_FreeNAS-9_3-STABLE-201506292332 3\" src=\"http:\/\/hack.gpl.jp\/wp-content\/uploads\/2015\/07\/freenas__freenas9_3stable2015062923323.png\" width=\"564\" height=\"480\" \/><\/p>\n<p>\u30bf\u30fc\u30b2\u30c3\u30c8\u540d\u306f\u5909\u308f\u3089\u306a\u3044\u306e\u3067\u3001Pi2 \u306e SDCard \u306e\u4e2d\u306f\u5909\u66f4\u3057\u306a\u304f\u3066OK \u3067\u3059\u3002<\/p>\n<\/p>\n<\/p>\n<p><img loading=\"lazy\" decoding=\"async\" title=\"freenas_-_FreeNAS-9_3-STABLE-201506292332 4\" style=\"border-top:0;border-right:0;border-bottom:0;float:none;margin-left:auto;border-left:0;display:block;margin-right:auto;\" border=\"0\" alt=\"freenas_-_FreeNAS-9_3-STABLE-201506292332 4\" src=\"http:\/\/hack.gpl.jp\/wp-content\/uploads\/2015\/07\/freenas__freenas9_3stable2015062923324.png\" width=\"563\" height=\"480\" \/> <\/p>\n<p>\u3053\u3093\u306a\u611f\u3058\u3067\u3001\u30d6\u30fc\u30c8\u3057\u305f\u3044\u30c7\u30a3\u30b9\u30af\u306b\u4ea4\u63db\u3057\u3001<\/p>\n<p><img loading=\"lazy\" decoding=\"async\" title=\"freenas_-_FreeNAS-9_3-STABLE-201506292332 5\" style=\"border-top:0;border-right:0;border-bottom:0;float:none;margin-left:auto;border-left:0;display:block;margin-right:auto;\" border=\"0\" alt=\"freenas_-_FreeNAS-9_3-STABLE-201506292332 5\" src=\"http:\/\/hack.gpl.jp\/wp-content\/uploads\/2015\/07\/freenas__freenas9_3stable2015062923325.png\" width=\"565\" height=\"480\" \/> <\/p>\n<p>Pi2 \u3092\u30ea\u30d6\u30fc\u30c8\uff08\u96fb\u6e90\u3092\u843d\u3068\u3057\u3066\u5909\u66f4\u3059\u308b\u306e\u304c\u30d9\u30b9\u30c8\u3067\u3059\u304b\u306d\uff09\u3059\u308c\u3070\u3001OK\u3002<\/p>\n<p>&#160;<\/p>\n<p>BerryBoot v2.0 \u306e\u8aac\u660e\u306f\u3001\u89aa\u5207\u306a\u4f5c\u8005\u306e\u30da\u30fc\u30b8\u304c\u3042\u308b\u306e\u3067\u3001\u7701\u7565\u3057\u307e\u3059\u304c\u3001<\/p>\n<p><a title=\"http:\/\/www.berryterminal.com\/doku.php\/berryboot\" href=\"http:\/\/www.berryterminal.com\/doku.php\/berryboot\">http:\/\/www.berryterminal.com\/doku.php\/berryboot<\/a><\/p>\n<p>iSCSI \u3067\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306f\u3001\u4ee5\u4e0b\u306b\u8aac\u660e\u304c\u3042\u308a\u307e\u3059\u3002<\/p>\n<p><a title=\"http:\/\/www.berryterminal.com\/doku.php\/storing_your_files_on_a_synology_nas_using_iscsi\" href=\"http:\/\/www.berryterminal.com\/doku.php\/storing_your_files_on_a_synology_nas_using_iscsi\">http:\/\/www.berryterminal.com\/doku.php\/storing_your_files_on_a_synology_nas_using_iscsi<\/a><\/p>\n<p>&#160;<\/p>\n<p>\u4e00\u5ea6\u3001\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3092\u3059\u308b\u3068\u3001boot \u306e\u4e2d\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u611f\u3058\u306b\u306a\u308a\u307e\u3059\u3002<\/p>\n<pre class=\"brush: cpp; gutter: false; toolbar: false; collapse: true; auto-links: false; smart-tabs: false;\">---- iscsi.sh\n# iscsistart -i [initiatorName] -t [targetIqn] -g [Lun] -a [Address]\n\/sbin\/iscsistart -i &quot;iqn.2012-08.com.berryboot:myPi&quot; -g 1 -t &quot;iqn.freenas:piboot&quot; -a &quot;192.168.1.45&quot;\n\n---- cmdline.txt \nsmsc95xx.turbo_mode=N elevator=deadline quiet bootmenutimeout=10 ipv4=192.168.1.24\/255.255.255.0\/192.168.1.1 datadev=iscsi\n\n\n---- config.txt \ndisable_overscan=1\nstart_x=1\ngpu_mem=128\n\n# Berryboot settings, do not change\ninitramfs berryboot.img\n\n[pi2]\nkernel=kernel_rpi2_aufs.img\n\n[pi1]\nkernel=kernel_rpi_aufs.img\ncma_lwm=16\ncma_hwm=32\ncma_offline_start=16\n\n---- uEnv.txt \nipv4=192.168.1.24\/255.255.255.0\/192.168.1.1 datadev=iscsi<\/pre>\n<p>&#160;<\/p>\n<p>&#160;<\/p>\n<p>\u518d\u5ea6\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3068\u304d\u306f\u3001uEnv.txt \u3068 iscsi.sh \u3068 cmdline.txt \u306e datadev=iscsi \u3092\u6d88\u3057\u3066 Pi2 \u3092\u30ea\u30d6\u30fc\u30c8\u3059\u308c\u3070 \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30a6\u30a3\u30b6\u30fc\u30c9\u304c\u8d70\u308a\u307e\u3059\u3002iSCSI \u306e\u8a2d\u5b9a\u306f\u518d\u5ea6\u5fc5\u8981\u3067\u3059\u304c\u3001\u81ea\u8eab\u306eIP \u8a2d\u5b9a\u306a\u3069\u306f\u3001\u6b8b\u3057\u305f\u307e\u307e\u306a\u306e\u3067\u3001\u30bf\u30fc\u30b2\u30c3\u30c8\u306e\u30dd\u30fc\u30bf\u30eb\u540d\u3068\u3001IP \u3092\u5165\u308c\u308c\u3070OK \u306a\u611f\u3058\u3067\u3059\u3002<\/p>\n<p>&#160;<\/p>\n<p>\u3042\u3068\u3001\u3053\u306eBerryboot \u306f Github \u306b\u30bd\u30fc\u30b9\u304c\u3042\u3063\u3066\u3001Qt4 \u3067GUI \u4f5c\u3063\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3002<\/p>\n<p><a title=\"https:\/\/github.com\/maxnet\/berryboot\" href=\"https:\/\/github.com\/maxnet\/berryboot\">https:\/\/github.com\/maxnet\/berryboot<\/a><\/p>\n<p><a href=\"http:\/\/doc.qt.io\/qtcreator\/index.html\" target=\"_blank\" rel=\"noopener noreferrer\">\u7d71\u5408\u958b\u767a\u74b0\u5883 Qt Creator<\/a> \u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30d5\u30a1\u30a4\u30eb\uff08<a href=\"https:\/\/github.com\/maxnet\/berryboot\/blob\/berryboot2015\/BerrybootGUI2.0\/BerrybootGUI2.pro\" target=\"_blank\" rel=\"noopener noreferrer\">BerrybootGUI2.pro<\/a>\uff09\u304c\u3042\u3063\u305f\u306e\u3067\u3001\u3053\u308c\u3089\u306e\u958b\u767a\u74b0\u5883\u306b\u3064\u3044\u3066\u3082\u6298\u3092\u898b\u3066\u52c9\u5f37\u3057\u3066\u307f\u305f\u3044\u3067\u3059\u3002GTK \u306b\u3088\u308b\u958b\u767a\u3068\u3001QT \u306e\u958b\u767a\u3001\u3069\u3063\u3061\u304c\u5165\u308a\u3084\u3059\u3044\u306e\u3067\u3057\u3087\u3046\u304b\u306d\u3002<\/p>\n<p>&#160;<\/p>\n<p>Linux \u306e\u7d44\u307f\u8fbc\u307f\u306e\u4e16\u754c\u306f\u3001\u5965\u304c\u6df1\u3044\u3067\u3059\u306d\u3002<\/p>\n<p>\u6700\u5f8c\u306b\u3001iSCSI Boot \u3057\u305f Raspbian \u306e UnixBench \u3092\u4e57\u305b\u3066\u304a\u304d\u307e\u3059\u3002<\/p>\n<pre class=\"brush: cpp; gutter: false; toolbar: false; collapse: true; auto-links: false; smart-tabs: false;\">========================================================================\n   BYTE UNIX Benchmarks (Version 5.1.3)\n\n   System: pi: GNU\/Linux\n   OS: GNU\/Linux -- 3.18.10v7-aufs -- #1 SMP PREEMPT Wed Apr 1 00:07:44 CEST 2015\n   Machine: armv7l (unknown)\n   Language: en_US.utf8 (charmap=&quot;ANSI_X3.4-1968&quot;, collate=&quot;ANSI_X3.4-1968&quot;)\n   CPU 0: ARMv7 Processor rev 5 (v7l) (0.0 bogomips)\n          \n   CPU 1: ARMv7 Processor rev 5 (v7l) (0.0 bogomips)\n          \n   CPU 2: ARMv7 Processor rev 5 (v7l) (0.0 bogomips)\n          \n   CPU 3: ARMv7 Processor rev 5 (v7l) (0.0 bogomips)\n          \n   16:46:43 up 8 min,  2 users,  load average: 0.12, 0.32, 0.19; runlevel 2\n\n------------------------------------------------------------------------\nBenchmark Run: \u571f  7\u6708 11 2015 16:46:43 - 17:15:08\n4 CPUs in system; running 4 parallel copies of tests\n\nDhrystone 2 using register variables       13034196.3 lps   (10.0 s, 7 samples)\nDouble-Precision Whetstone                     2201.6 MWIPS (9.9 s, 7 samples)\nExecl Throughput                               1115.2 lps   (29.6 s, 2 samples)\nFile Copy 1024 bufsize 2000 maxblocks         67394.5 KBps  (30.0 s, 2 samples)\nFile Copy 256 bufsize 500 maxblocks           18209.0 KBps  (30.0 s, 2 samples)\nFile Copy 4096 bufsize 8000 maxblocks        217804.3 KBps  (30.0 s, 2 samples)\nPipe Throughput                              820546.2 lps   (10.0 s, 7 samples)\nPipe-based Context Switching                 143190.3 lps   (10.0 s, 7 samples)\nProcess Creation                               3197.5 lps   (30.0 s, 2 samples)\nShell Scripts (1 concurrent)                   2604.1 lpm   (60.1 s, 2 samples)\nShell Scripts (8 concurrent)                    344.4 lpm   (60.4 s, 2 samples)\nSystem Call Overhead                        1752660.9 lps   (10.0 s, 7 samples)\n\nSystem Benchmarks Index Values               BASELINE       RESULT    INDEX\nDhrystone 2 using register variables         116700.0   13034196.3   1116.9\nDouble-Precision Whetstone                       55.0       2201.6    400.3\nExecl Throughput                                 43.0       1115.2    259.4\nFile Copy 1024 bufsize 2000 maxblocks          3960.0      67394.5    170.2\nFile Copy 256 bufsize 500 maxblocks            1655.0      18209.0    110.0\nFile Copy 4096 bufsize 8000 maxblocks          5800.0     217804.3    375.5\nPipe Throughput                               12440.0     820546.2    659.6\nPipe-based Context Switching                   4000.0     143190.3    358.0\nProcess Creation                                126.0       3197.5    253.8\nShell Scripts (1 concurrent)                     42.4       2604.1    614.2\nShell Scripts (8 concurrent)                      6.0        344.4    573.9\nSystem Call Overhead                          15000.0    1752660.9   1168.4\n                                                                   ========\nSystem Benchmarks Index Score                                         406.1\n\npi@pi \/usr\/local\/src\/UnixBench $ <\/pre>\n","protected":false},"excerpt":{"rendered":"<p>\u3042\u308c\u3082\u3053\u308c\u3082\u3001\u5165\u308c\u305f\u3044\u306e\u306b\u3001\u3044\u3061\u3044\u3061SD\u30ab\u30fc\u30c9\u306a\u3093\u3066\u3001\u629c\u304d\u5dee\u3057\u3057\u3066\u308b\u306e\u3081\u3093\u3069\u3044\u3088\u306d\u3001\u3063\u3066\u3053\u3068\u3067\u3001\u5de5\u592b\u3057\u3066\u307f\u307e\u3057\u305f\u3002 \u3053\u3093\u306a\u611f\u3058\u3067\u3001SD Card \u306bOS \u306f\u5165\u308c\u305a\u306b\u3001\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u8d8a\u3057\u306eiSCSI Disk \u304b\u3089\u3001OS \u3092 [&hellip;]<\/p>\n","protected":false},"author":1,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"_uag_custom_page_level_css":"","footnotes":""},"categories":[69],"tags":[],"acf":[],"uagb_featured_image_src":{"full":false,"thumbnail":false,"medium":false,"medium_large":false,"large":false,"1536x1536":false,"2048x2048":false,"post-thumbnail":false},"uagb_author_info":{"display_name":"JunkHack","author_link":"https:\/\/hack.gpl.jp\/author\/junkhack\/"},"uagb_comment_info":0,"uagb_excerpt":"\u3042\u308c\u3082\u3053\u308c\u3082\u3001\u5165\u308c\u305f\u3044\u306e\u306b\u3001\u3044\u3061\u3044\u3061SD\u30ab\u30fc\u30c9\u306a\u3093\u3066\u3001\u629c\u304d\u5dee\u3057\u3057\u3066\u308b\u306e\u3081\u3093\u3069\u3044\u3088\u306d\u3001\u3063\u3066\u3053\u3068\u3067\u3001\u5de5\u592b\u3057\u3066\u307f\u307e\u3057&hellip;","_links":{"self":[{"href":"https:\/\/hack.gpl.jp\/wp-json\/wp\/v2\/posts\/830"}],"collection":[{"href":"https:\/\/hack.gpl.jp\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/hack.gpl.jp\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/hack.gpl.jp\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/hack.gpl.jp\/wp-json\/wp\/v2\/comments?post=830"}],"version-history":[{"count":0,"href":"https:\/\/hack.gpl.jp\/wp-json\/wp\/v2\/posts\/830\/revisions"}],"wp:attachment":[{"href":"https:\/\/hack.gpl.jp\/wp-json\/wp\/v2\/media?parent=830"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/hack.gpl.jp\/wp-json\/wp\/v2\/categories?post=830"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/hack.gpl.jp\/wp-json\/wp\/v2\/tags?post=830"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}