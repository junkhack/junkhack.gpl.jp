{"id":883,"date":"2015-07-20T22:28:52","date_gmt":"2015-07-20T13:28:52","guid":{"rendered":"https:\/\/hack.gpl.jp\/?p=883"},"modified":"2015-07-20T22:28:52","modified_gmt":"2015-07-20T13:28:52","slug":"berryboot-%e3%81%ae-kernel-%e3%81%a7%e8%b5%b7%e5%8b%95%e3%81%97%e3%81%a6%e3%82%8b%e3%81%a3%e3%81%a6%e3%81%93%e3%81%a8%ef%bc%9f","status":"publish","type":"post","link":"https:\/\/hack.gpl.jp\/2015\/07\/20\/berryboot-%e3%81%ae-kernel-%e3%81%a7%e8%b5%b7%e5%8b%95%e3%81%97%e3%81%a6%e3%82%8b%e3%81%a3%e3%81%a6%e3%81%93%e3%81%a8%ef%bc%9f\/","title":{"rendered":"BerryBoot \u306e kernel \u3067\u8d77\u52d5\u3057\u3066\u308b\u3063\u3066\u3053\u3068\uff1f"},"content":{"rendered":"<p>\u3053\u3053\u306e\u3068\u3053\u308d\u3001Fedora21 \u2013 22 \u3070\u3063\u304b\u308a\u3092\u89e6\u3063\u3066\u3044\u307e\u3057\u3066\u3001\u30aa\u30d5\u30a3\u30b7\u30e3\u30eb\u306eRaspbian \u304b\u3089\u3061\u3087\u3063\u3068\u96e2\u308c\u3066\u3044\u307e\u3057\u305f\u3002<\/p>\n<p>\u3067\u3001Raspbian \u306e image \u3082 BerryBoot \u7528\u306b\u5909\u63db\u3057\u3088\u3046\u3068\u601d\u3044\u3001\u898b\u3066\u307f\u308b\u3068 BerryBoot \u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u30aa\u30d5\u30a3\u30b7\u30e3\u30eb\u306e Raspbian \u306f\u30012015 \u5e74\u306e2 \u6708\u306b\u4f5c\u6210\u3055\u308c\u3066\u3044\u307e\u3059\u3002<\/p>\n<p>&#160;<\/p>\n<p> \u3093\uff1f \u3053\u308c\u306f\u3061\u3087\u3063\u3068\u53e4\u3044\u3084\u3064\u3067\u3059\u304b\u306d\uff1f\u30aa\u30d5\u30a3\u30b7\u30e3\u30eb\u306e\u6700\u65b0\u306f\u3001\u30ea\u30ea\u30fc\u30b9\u30ce\u30fc\u30c8\u3092\u898b\u308b\u3068\u3001<\/p>\n<blockquote>\n<p><a title=\"http:\/\/downloads.raspberrypi.org\/raspbian\/release_notes.txt\" href=\"http:\/\/downloads.raspberrypi.org\/raspbian\/release_notes.txt\">http:\/\/downloads.raspberrypi.org\/raspbian\/release_notes.txt<\/a>      <br \/>2015-05-05:      <br \/>&#160; * Updated UI changes      <br \/>&#160; * Updated firmware      <br \/>&#160; * Install raspberrypi-net-mods      <br \/>&#160; * Install avahi-daemon      <br \/>&#160; * Add user pi to new i2c and spi groups      <br \/>&#160; * Modified udev rules for i2c and spi devices      <br \/>2015-02-16:      <br \/>&#160; * Newer firmware with various fixes      <br \/>&#160; * New Sonic Pi release      <br \/>&#160; * Pi2 compatible RPi.GPIO      <br \/>&#160; * Updated Wolfram Mathematica      <br \/>2015-01-31:      <br \/>&#160; * Support for Pi2      <br \/>&#160; * Newer firmware      <br \/>&#160; * New Sonic Pi release      <br \/>&#160; * Updated Scratch      <br \/>&#160; * New Wolfram Mathematica release      <br \/>&#160; * Updated Epiphany<\/p>\n<p>\uff1a\uff1a<\/p>\n<\/blockquote>\n<p>\u3068\u3084\u3063\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3002\u306a\u306e\u3067\u3001\u5909\u63db\u3057\u3066iscsi boot \u306b\u5165\u308c\u3066\u307f\u307e\u3057\u305f\u3002\u3044\u308d\u3093\u306a\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u5165\u308c\u66ff\u3048\u3067\u304d\u308b\u306e\u3067\u3001\u4fbf\u5229\u3067\u3059\u3002(\u3068\u3001\u3053\u306e\u3068\u304d\u306f\u601d\u3063\u3066\u3044\u307e\u3044\u305f\u304c\u3001\u3001\u3001\uff09<\/p>\n<p>img \u5909\u63db\u306e\u624b\u9806\u306f\u30e1\u30e2\u3057\u305f\u306e\u3092\u898b\u306a\u304c\u3089\u3001\u3084\u308c\u3070\u3042\u3093\u306a\u306b\u82e6\u52b4\u3057\u305f\u306e\u306b\u3001\u3042\u3063\u3055\u308a\u3002\u624b\u9806\u66f8\u3063\u3066\u3044\u3046\u306e\u306f\u5927\u5207\u3067\u3059\u306d\u3002<\/p>\n<p>&#160;<\/p>\n<p>\u6052\u4f8b\u306eUnixBench \u306f\u4ee5\u4e0b\u306e\u3088\u3046\u3067\u3057\u305f\u3002<\/p>\n<pre class=\"brush: cpp; gutter: false; toolbar: false; collapse: true; auto-links: false; smart-tabs: false;\">========================================================================\n   BYTE UNIX Benchmarks (Version 5.1.3)\n\n   System: pi: GNU\/Linux\n   OS: GNU\/Linux -- 3.18.10v7-aufs -- #1 SMP PREEMPT Wed Apr 1 00:07:44 CEST 2015\n   Machine: armv7l (unknown)\n   Language: en_US.utf8 (charmap=&quot;ANSI_X3.4-1968&quot;, collate=&quot;ANSI_X3.4-1968&quot;)\n   CPU 0: ARMv7 Processor rev 5 (v7l) (0.0 bogomips)\n          \n   CPU 1: ARMv7 Processor rev 5 (v7l) (0.0 bogomips)\n          \n   CPU 2: ARMv7 Processor rev 5 (v7l) (0.0 bogomips)\n          \n   CPU 3: ARMv7 Processor rev 5 (v7l) (0.0 bogomips)\n          \n   20:41:56 up 7 min,  2 users,  load average: 0.61, 0.18, 0.07; runlevel 2\n\n------------------------------------------------------------------------\nBenchmark Run: \u6708  7\u6708 20 2015 20:41:56 - 21:10:14\n4 CPUs in system; running 1 parallel copy of tests\n\nDhrystone 2 using register variables        3316993.9 lps   (10.0 s, 7 samples)\nDouble-Precision Whetstone                      554.5 MWIPS (10.0 s, 7 samples)\nExecl Throughput                                491.3 lps   (29.9 s, 2 samples)\nFile Copy 1024 bufsize 2000 maxblocks         49985.5 KBps  (30.0 s, 2 samples)\nFile Copy 256 bufsize 500 maxblocks           13538.4 KBps  (30.0 s, 2 samples)\nFile Copy 4096 bufsize 8000 maxblocks        149986.5 KBps  (30.0 s, 2 samples)\nPipe Throughput                              207549.3 lps   (10.0 s, 7 samples)\nPipe-based Context Switching                  37800.2 lps   (10.0 s, 7 samples)\nProcess Creation                               1425.8 lps   (30.0 s, 2 samples)\nShell Scripts (1 concurrent)                   1298.1 lpm   (60.0 s, 2 samples)\nShell Scripts (8 concurrent)                    332.3 lpm   (60.1 s, 2 samples)\nSystem Call Overhead                         459612.1 lps   (10.0 s, 7 samples)\n\nSystem Benchmarks Index Values               BASELINE       RESULT    INDEX\nDhrystone 2 using register variables         116700.0    3316993.9    284.2\nDouble-Precision Whetstone                       55.0        554.5    100.8\nExecl Throughput                                 43.0        491.3    114.2\nFile Copy 1024 bufsize 2000 maxblocks          3960.0      49985.5    126.2\nFile Copy 256 bufsize 500 maxblocks            1655.0      13538.4     81.8\nFile Copy 4096 bufsize 8000 maxblocks          5800.0     149986.5    258.6\nPipe Throughput                               12440.0     207549.3    166.8\nPipe-based Context Switching                   4000.0      37800.2     94.5\nProcess Creation                                126.0       1425.8    113.2\nShell Scripts (1 concurrent)                     42.4       1298.1    306.1\nShell Scripts (8 concurrent)                      6.0        332.3    553.8\nSystem Call Overhead                          15000.0     459612.1    306.4\n                                                                   ========\nSystem Benchmarks Index Score                                         174.7\n\n------------------------------------------------------------------------\nBenchmark Run: \u6708  7\u6708 20 2015 21:10:14 - 21:39:00\n4 CPUs in system; running 4 parallel copies of tests\n\nDhrystone 2 using register variables       12869914.9 lps   (10.0 s, 7 samples)\nDouble-Precision Whetstone                     2212.6 MWIPS (10.0 s, 7 samples)\nExecl Throughput                               1143.7 lps   (29.9 s, 2 samples)\nFile Copy 1024 bufsize 2000 maxblocks         69133.5 KBps  (30.0 s, 2 samples)\nFile Copy 256 bufsize 500 maxblocks           18287.4 KBps  (30.0 s, 2 samples)\nFile Copy 4096 bufsize 8000 maxblocks        220513.0 KBps  (30.0 s, 2 samples)\nPipe Throughput                              802846.4 lps   (10.0 s, 7 samples)\nPipe-based Context Switching                 139871.0 lps   (10.0 s, 7 samples)\nProcess Creation                               3197.1 lps   (30.0 s, 2 samples)\nShell Scripts (1 concurrent)                   2636.1 lpm   (60.1 s, 2 samples)\nShell Scripts (8 concurrent)                    347.5 lpm   (60.3 s, 2 samples)\nSystem Call Overhead                        1719885.8 lps   (10.0 s, 7 samples)\n\nSystem Benchmarks Index Values               BASELINE       RESULT    INDEX\nDhrystone 2 using register variables         116700.0   12869914.9   1102.8\nDouble-Precision Whetstone                       55.0       2212.6    402.3\nExecl Throughput                                 43.0       1143.7    266.0\nFile Copy 1024 bufsize 2000 maxblocks          3960.0      69133.5    174.6\nFile Copy 256 bufsize 500 maxblocks            1655.0      18287.4    110.5\nFile Copy 4096 bufsize 8000 maxblocks          5800.0     220513.0    380.2\nPipe Throughput                               12440.0     802846.4    645.4\nPipe-based Context Switching                   4000.0     139871.0    349.7\nProcess Creation                                126.0       3197.1    253.7\nShell Scripts (1 concurrent)                     42.4       2636.1    621.7\nShell Scripts (8 concurrent)                      6.0        347.5    579.2\nSystem Call Overhead                          15000.0    1719885.8   1146.6\n                                                                   ========\nSystem Benchmarks Index Score                                         406.7<\/pre>\n<p>&#160;<\/p>\n<p>\u307e\u3041\u3001OS \u304c\u5909\u308f\u3063\u305f\u304b\u3089\u3068\u3044\u3063\u3066\u5287\u7684\u306b\u5909\u5316\u304c\u3042\u308b\u308f\u3051\u3058\u3083\u306a\u3044\u3093\u3067\u3059\u304c\u3002<\/p>\n<p>CPU\u306eFREQ\u306f\u3001<\/p>\n<blockquote>\n<p>root@pi:~# cat \/sys\/devices\/system\/cpu\/cpu0\/cpufreq\/scaling_cur_freq<br \/>\n    <br \/>1000000\u2605<\/p>\n<p>root@pi:~# uname -a<\/p>\n<p>Linux pi 3.18.10v7-aufs #1 SMP PREEMPT Wed Apr 1 00:07:44 CEST 2015 armv7l GNU\/Linux<\/p>\n<p>root@pi:~# <\/p>\n<\/blockquote>\n<p>\u3093\uff1f \u4eca\u6c17\u304c\u4ed8\u3044\u305f\u3093\u3067\u3059\u304c\u3001kernel \u304c\u3001BerryBoot \u306eaufs \u306e\u306a\u3093\u3067\u3059\u304c\uff1f<\/p>\n<blockquote>\n<p>root@pi:\/mnt# lsmod<br \/>\n    <br \/>Module&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; Size&#160; Used by<\/p>\n<p>cfg80211&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; 366024&#160; 0 <\/p>\n<p>rfkill&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; 14438&#160; 1 cfg80211<\/p>\n<p>snd_bcm2835&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; 17419&#160; 0 <\/p>\n<p>snd_pcm&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; 68808&#160; 1 snd_bcm2835<\/p>\n<p>snd_seq&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; 49800&#160; 0 <\/p>\n<p>snd_seq_device&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; 4906&#160; 1 snd_seq<\/p>\n<p>snd_timer&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; 16630&#160; 2 snd_pcm,snd_seq<\/p>\n<p>snd&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; 47011&#160; 5 snd_bcm2835,snd_timer,snd_pcm,snd_seq,snd_seq_device<\/p>\n<p>evdev&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; 9303&#160; 2 <\/p>\n<p>joydev&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; 8397&#160; 0 <\/p>\n<p>uio_pdrv_genirq&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; 2865&#160; 0 <\/p>\n<p>uio&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; 7319&#160; 1 uio_pdrv_genirq<\/p>\n<p>iscsi_tcp&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; 8496&#160; 2 <\/p>\n<p>libiscsi_tcp&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; 11808&#160; 1 iscsi_tcp<\/p>\n<p>libiscsi&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; 33727&#160; 2 libiscsi_tcp,iscsi_tcp<\/p>\n<p>root@pi:\/mnt# <\/p>\n<p>root@pi:\/mnt# <\/p>\n<p>root@pi:\/mnt# cat \/proc\/modules <\/p>\n<p>cfg80211 366024 0 &#8211; Live 0x7f095000<\/p>\n<p>rfkill 14438 1 cfg80211, Live 0x7f08d000<\/p>\n<p>snd_bcm2835 17419 0 &#8211; Live 0x7f084000<\/p>\n<p>snd_pcm 68808 1 snd_bcm2835, Live 0x7f06b000<\/p>\n<p>snd_seq 49800 0 &#8211; Live 0x7f058000<\/p>\n<p>snd_seq_device 4906 1 snd_seq, Live 0x7f053000<\/p>\n<p>snd_timer 16630 2 snd_pcm,snd_seq, Live 0x7f04a000<\/p>\n<p>snd 47011 5 snd_bcm2835,snd_pcm,snd_seq,snd_seq_device,snd_timer, Live 0x7f037000<\/p>\n<p>evdev 9303 2 &#8211; Live 0x7f02b000<\/p>\n<p>joydev 8397 0 &#8211; Live 0x7f025000<\/p>\n<p>uio_pdrv_genirq 2865 0 &#8211; Live 0x7f021000<\/p>\n<p>uio 7319 1 uio_pdrv_genirq, Live 0x7f01c000<\/p>\n<p>iscsi_tcp 8496 2 &#8211; Live 0x7f015000<\/p>\n<p>libiscsi_tcp 11808 1 iscsi_tcp, Live 0x7f00e000<\/p>\n<p>libiscsi 33727 2 iscsi_tcp,libiscsi_tcp, Live 0x7f000000<\/p>\n<p>root@pi:\/mnt# <\/p>\n<\/blockquote>\n<p>uBoot \u3067 BerryBoot \u306eiSCSI\u304c\u6709\u52b9\u306b\u306a\u3063\u3066\u3044\u308b\u30ab\u30fc\u30cd\u30eb\u304b\u3089chroot\u3059\u308b\u3068\u304d\u306b\u3053\u308c\u3063\u3066\u5909\u3048\u308c\u308b\u3093\u3060\u308d\u3046\u304b\uff1f<\/p>\n<p>FAT\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u306econfig.txt \u306f\u6b21\u306e\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002<\/p>\n<blockquote>\n<p>disable_overscan=1<br \/>\n    <br \/>start_x=1<\/p>\n<p>gpu_mem=128 <\/p>\n<p># Berryboot settings, do not change<br \/>\n    <br \/>initramfs berryboot.img <\/p>\n<p>[pi2]<br \/>\n    <br \/>kernel=kernel_rpi2_aufs.img<\/p>\n<p>arm_freq_min=900<\/p>\n<p>arm_freq=1000<\/p>\n<p>core_freq_min=450<\/p>\n<p>core_freq=500<\/p>\n<p>sdram_freq=500<\/p>\n<p>over_voltage=2 <\/p>\n<p>[pi1]<br \/>\n    <br \/>kernel=kernel_rpi_aufs.img<\/p>\n<p>cma_lwm=16<\/p>\n<p>cma_hwm=32<\/p>\n<p>cma_offline_start=16<\/p>\n<\/blockquote>\n<p>\u8d77\u52d5\u3057\u3066\u3044\u308b\u30ab\u30fc\u30cd\u30eb\u306f\u3001kernel_rpi2_aufs.img \u3063\u3066\u3044\u3046\u3053\u3068\u3067\u3059\u306d\u3002\u305d\u306e\u30ab\u30fc\u30cd\u30eb\u304b\u3089\u30eb\u30fc\u30c8\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u306bchroot \u3059\u308b\u611f\u3058\u3060\u3068\u601d\u3046\u306e\u3067\u3059\u304c\u3001img \u4f5c\u308b\u3068\u304d\u306b\u3001\/lib\/modules\/ \u914d\u4e0b\u3092\u5165\u308c\u3066\u3044\u306a\u3044\u306e\u3067\u3001\u3053\u3046\u306a\u308b\u3093\u3067\u3059\u304b\u306d\uff1f<\/p>\n<p>kernel_rpi2_aufs.img \u306e\u4e2d\u304c\u3069\u3046\u306a\u3063\u3066\u3044\u308b\u306e\u304b\u6c17\u306b\u306a\u308a\u307e\u3059\u306d\u3002\u305d\u3082\u305d\u3082\u3001raspai \u304c\u30d6\u30fc\u30c8\u3059\u308b\u4ed5\u7d44\u307f\u3063\u3066\u3044\u3046\u306e\u304c\u3069\u3046\u3086\u3046\u6d41\u308c\u306b\u306a\u3063\u3066\u3044\u308b\u304b\u3092\u628a\u63e1\u3057\u306a\u3044\u3068\u3060\u3081\u3067\u3059\u306d\u3002<\/p>\n","protected":false},"excerpt":{"rendered":"<p>\u3053\u3053\u306e\u3068\u3053\u308d\u3001Fedora21 \u2013 22 \u3070\u3063\u304b\u308a\u3092\u89e6\u3063\u3066\u3044\u307e\u3057\u3066\u3001\u30aa\u30d5\u30a3\u30b7\u30e3\u30eb\u306eRaspbian \u304b\u3089\u3061\u3087\u3063\u3068\u96e2\u308c\u3066\u3044\u307e\u3057\u305f\u3002 \u3067\u3001Raspbian \u306e image \u3082 BerryBoot \u7528\u306b\u5909\u63db\u3057\u3088\u3046\u3068\u601d\u3044\u3001\u898b\u3066\u307f [&hellip;]<\/p>\n","protected":false},"author":1,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"_uag_custom_page_level_css":""},"categories":[69],"tags":[],"acf":[],"uagb_featured_image_src":{"full":false,"thumbnail":false,"medium":false,"medium_large":false,"large":false,"1536x1536":false,"2048x2048":false,"post-thumbnail":false},"uagb_author_info":{"display_name":"JunkHack","author_link":"https:\/\/hack.gpl.jp\/author\/junkhack\/"},"uagb_comment_info":0,"uagb_excerpt":"\u3053\u3053\u306e\u3068\u3053\u308d\u3001Fedora21 \u2013 22 \u3070\u3063\u304b\u308a\u3092\u89e6\u3063\u3066\u3044\u307e\u3057\u3066\u3001\u30aa\u30d5\u30a3\u30b7\u30e3\u30eb\u306eRaspbian \u304b\u3089\u3061\u3087\u3063&hellip;","_links":{"self":[{"href":"https:\/\/hack.gpl.jp\/wp-json\/wp\/v2\/posts\/883"}],"collection":[{"href":"https:\/\/hack.gpl.jp\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/hack.gpl.jp\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/hack.gpl.jp\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/hack.gpl.jp\/wp-json\/wp\/v2\/comments?post=883"}],"version-history":[{"count":0,"href":"https:\/\/hack.gpl.jp\/wp-json\/wp\/v2\/posts\/883\/revisions"}],"wp:attachment":[{"href":"https:\/\/hack.gpl.jp\/wp-json\/wp\/v2\/media?parent=883"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/hack.gpl.jp\/wp-json\/wp\/v2\/categories?post=883"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/hack.gpl.jp\/wp-json\/wp\/v2\/tags?post=883"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}